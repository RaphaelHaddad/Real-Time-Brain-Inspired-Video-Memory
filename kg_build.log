nohup: ignoring input
2025-11-30 19:01:20,461 - __main__ - INFO - Loading configuration from: config/base_config.yaml
2025-11-30 19:01:20,463 - __main__ - INFO - Building knowledge graph from: /home/viture-ai/Documents/Real-Time-Brain-Inspired-Video-Memory/data/outputs/vlm_output.json
2025-11-30 19:01:20,556 - src.components.neo4j_handler - INFO - Initialized Neo4j handler for run UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:01:20,579 - src.components.llm_injector - INFO - Initialized LLMInjector (chunking: True)
2025-11-30 19:01:20,687 - src.components.pre_llm_injector - INFO - Initialized PreLLMInjector: chunk_size=296, overlap=16, parallel=2, max_triplets_per_chunk=6, subgraph_extraction=True
2025-11-30 19:01:20,687 - src.components.global_refiner - INFO - Initialized GlobalRefiner with max_tokens=2000
2025-11-30 19:01:20,688 - src.pipeline.kg_builder - INFO - Initialized KG Builder with run UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e (hierarchical extraction: True)
2025-11-30 19:01:20,688 - src.pipeline.kg_builder - INFO - Starting knowledge graph construction from: /home/viture-ai/Documents/Real-Time-Brain-Inspired-Video-Memory/data/outputs/vlm_output.json
2025-11-30 19:01:20,688 - src.pipeline.kg_builder - INFO - Reset logs directory: /home/viture-ai/Documents/Real-Time-Brain-Inspired-Video-Memory/logs
Processing KG batches:   0%|          | 0/72 [00:00<?, ?it/s]2025-11-30 19:01:20,690 - src.pipeline.kg_builder - INFO - Processing batch 1/72 (3 items)
2025-11-30 19:01:20,690 - src.pipeline.kg_builder - DEBUG - Batch 1 current_video_time: 00:09-00:14
2025-11-30 19:01:20,744 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 0
- Total Relationships: 0
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:01:20,745 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:01:20,745 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0 ~221 words, content: Time: 00:00-00:04 Content: The video sequence captures a scene within a laboratory environment, focusing on a person and their interaction with the surroundings. - **Initial...
2025-11-30 19:01:20,745 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1 ~237 words, content: , looking directly at it. They are still holding the smartphone. The laboratory setting remains consistent, with the glass cabinet, the door, and the equipment...
2025-11-30 19:01:20,745 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_2 ~196 words, content: up as if to show it. - In the final frame, the man is still holding the paper and looking at the camera. The man...
2025-11-30 19:01:20,745 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3 ~181 words, content: This indicates the document is a report for a chemistry experiment, possibly using augmented reality technology. The person holding the paper is wearing a blue...
2025-11-30 19:01:20,772 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Found 0 existing chunk embeddings for similarity lookup
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : []
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: none (no existing chunks to compare)
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: none (no existing chunks to compare)
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: none (no existing chunks to compare)
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: none (no existing chunks to compare)
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:01:20,877 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:01:25,883 - src.components.pre_llm_injector - WARNING - Chunk 0 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:01:27,491 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 2)
2025-11-30 19:01:27,491 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:01:27,491 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1) (~237 words) with timeout=5.0s retries=3
2025-11-30 19:01:28,472 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:01:28,472 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:01:28,472 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_2) (~196 words) with timeout=5.0s retries=3
2025-11-30 19:01:29,842 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:01:29,842 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:01:29,843 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3) (~181 words) with timeout=5.0s retries=3
2025-11-30 19:01:30,891 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:01:30,891 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:01:30,891 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:01:30,891 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 10.15s
2025-11-30 19:01:30,892 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:01:30,892 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
No subgraph context available
No existing entities or relations.

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Cream-Colored Sweater", "source_chunks": ["0_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Jeans", "source_chunks": ["0_0"]}, {"head": "Person", "relation": "Holds", "tail": "Smartphone", "source_chunks": ["0_0", "0_1"]}, {"head": "Person", "relation": "Stands Near", "tail": "Laboratory Table", "source_chunks": ["0_0"]}, {"head": "Laboratory Table", "relation": "Contains", "tail": "Precision Balance", "source_chunks": ["0_0"]}, {"head": "Precision Balance", "relation": "Contains", "tail": "Weighing Pan", "source_chunks": ["0_0"]}, {"head": "Person", "relation": "Stands In", "tail": "Laboratory", "source_chunks": ["0_1"]}, {"head": "Person", "relation": "Interacts With", "tail": "Equipment", "source_chunks": ["0_1"]}, {"head": "Person", "relation": "Looks At", "tail": "Camera", "source_chunks": ["0_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Glass Cabinet", "source_chunks": ["0_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Balance Scale", "source_chunks": ["0_1"]}, {"head": "Man", "relation": "Holds", "tail": "Document", "source_chunks": ["0_2"]}, {"head": "Man", "relation": "Looks At", "tail": "Camera", "source_chunks": ["0_2"]}, {"head": "Document", "relation": "Has Title", "tail": "Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version", "source_chunks": ["0_2"]}, {"head": "Man", "relation": "Stands In", "tail": "Laboratory", "source_chunks": ["0_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:01:30,892 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~458 words, ~595 tokens)
2025-11-30 19:01:30,892 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:01:37,417 - src.components.global_refiner - DEBUG - LLM call completed in 6.52s
2025-11-30 19:01:37,418 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Cream-Colored Sweater', ['0_0']], ['Person', 'Wears', 'Blue Jeans', ['0_0']], ['Person', 'Holds', 'Smartphone', ['0_0', '0_1']], ['Person', 'Stands Near', 'Laboratory Table', ['0_0']], ['Laboratory Table', 'Contains', 'Precision Balance', ['0_0']], ['Precision Balance', 'Contains', 'Weighing Pan', ['0_0']], ['Person', 'Stands In', 'Laboratory', ['0_1']], ['Person', 'Interacts With', 'Equipment', ['0_1']], ['Person', 'Looks At', 'Camera', ['0_1']], ['Laboratory', 'Contains', 'Glass Cabinet', ['0_1']], ['Laboratory', 'Contains', 'Balance Scale', ['0_1']], ['Man', 'Holds', 'Document', ['0_2']], ['Man', 'Looks At', 'Camera', ['0_2']], ['Document', 'Has Title', 'Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version', ['0_2']], ['Man', 'Stands In', 'Laboratory', ['0_2']]] inter_chunk_relations=[] merge_instructions=[] prune_instructions=[]
2025-11-30 19:01:37,418 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Cream-Colored Sweater', ['0_0']], ['Person', 'Wears', 'Blue Jeans', ['0_0']], ['Person', 'Holds', 'Smartphone', ['0_0', '0_1']]]
2025-11-30 19:01:37,418 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=0, sample=[]
2025-11-30 19:01:37,418 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:01:37,418 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:01:37,418 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 6.53s, LLM: 6.52s)
2025-11-30 19:01:37,418 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 6.53s
2025-11-30 19:01:37,418 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:01:37,418 - src.pipeline.kg_builder - INFO - Pushing batch 1/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:01:37,418 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:01:37,542 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=19, relationships=15
2025-11-30 19:01:37,542 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:01:37,546 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=19, relationships=15
2025-11-30 19:01:37,548 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:01:37,548 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:01:37,549 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:01:37,549 - src.components.neo4j_handler - INFO - Batch injected in 0.13s (triplets: 0.13s, indexes: 0.00s)
2025-11-30 19:01:37,549 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 4, 'with_embedding': 4, 'linked_chunks': 3}
2025-11-30 19:01:37,550 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:01:37,552 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 19 nodes
2025-11-30 19:01:37,553 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 18 nodes
2025-11-30 19:01:37,559 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 19, 'relationship_count': 34, 'density': 0.0994, 'avg_degree': 3.5789, 'avg_unique_neighbors': 3.5789, 'global_efficiency': 0.4754, 'avg_path_length': 2.3529, 'avg_degree_centrality': 0.1988, 'max_degree_centrality': 0.5, 'avg_betweenness_centrality': 0.0019, 'max_betweenness_centrality': 0.0163, 'degree_assortativity': -0.4897, 'graph_robustness': 0.9118, 'diameter_estimate': 5, 'clustering_coefficient': 0.3147, 'weakly_connected_components': 2, 'largest_wcc_size': 18, 'pagerank_top10_percent': 72.08, 'louvain_communities': 4, 'louvain_modularity': 0.3966, 'label_entropy': 1.3712, 'computational_time': 0.009332461981102824}
2025-11-30 19:01:37,559 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 0, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500497.5594769, 'total_time': 16.8686152609298, 'aggregation': 2.783956006169319e-06, 'network_info': 0.053423295030370355, 'llm_extraction': 16.674030640977435, 'data_cleaning': 3.865896724164486e-05, 'neo4j_injection': 0.13052020396571606, 'embedding_time': 0, 'indexing_time': 0.002122389036230743, 'graph_injection_time': 0.1281564449891448, 'acs_metrics': {'node_count': 19, 'relationship_count': 34, 'density': 0.0994, 'avg_degree': 3.5789, 'avg_unique_neighbors': 3.5789, 'global_efficiency': 0.4754, 'avg_path_length': 2.3529, 'avg_degree_centrality': 0.1988, 'max_degree_centrality': 0.5, 'avg_betweenness_centrality': 0.0019, 'max_betweenness_centrality': 0.0163, 'degree_assortativity': -0.4897, 'graph_robustness': 0.9118, 'diameter_estimate': 5, 'clustering_coefficient': 0.3147, 'weakly_connected_components': 2, 'largest_wcc_size': 18, 'pagerank_top10_percent': 72.08, 'louvain_communities': 4, 'louvain_modularity': 0.3966, 'label_entropy': 1.3712, 'computational_time': 0.009332461981102824}, 'retrieval_queries': []}
2025-11-30 19:01:37,559 - src.pipeline.kg_builder - DEBUG - Batch 0 metrics: {
  "batch_idx": 0,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500497.5594769,
  "total_time": 16.8686152609298,
  "aggregation": 2.783956006169319e-06,
  "network_info": 0.053423295030370355,
  "llm_extraction": 16.674030640977435,
  "data_cleaning": 3.865896724164486e-05,
  "neo4j_injection": 0.13052020396571606,
  "embedding_time": 0,
  "indexing_time": 0.002122389036230743,
  "graph_injection_time": 0.1281564449891448,
  "acs_metrics": {
    "node_count": 19,
    "relationship_count": 34,
    "density": 0.0994,
    "avg_degree": 3.5789,
    "avg_unique_neighbors": 3.5789,
    "global_efficiency": 0.4754,
    "avg_path_length": 2.3529,
    "avg_degree_centrality": 0.1988,
    "max_degree_centrality": 0.5,
    "avg_betweenness_centrality": 0.0019,
    "max_betweenness_centrality": 0.0163,
    "degree_assortativity": -0.4897,
    "graph_robustness": 0.9118,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.3147,
    "weakly_connected_components": 2,
    "largest_wcc_size": 18,
    "pagerank_top10_percent": 72.08,
    "louvain_communities": 4,
    "louvain_modularity": 0.3966,
    "label_entropy": 1.3712,
    "computational_time": 0.009332461981102824
  },
  "retrieval_queries": []
}
2025-11-30 19:01:37,559 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:01:37,559 - src.pipeline.kg_builder - INFO - Batch 1 timings - Agg: 0.00s, NetInfo: 0.05s, LLM: 16.67s, Clean: 0.00s, Neo4j: 0.13s, ACS: 0.01s
2025-11-30 19:01:37,559 - src.pipeline.kg_builder - INFO - Batch 1 completed in 16.87s
Processing KG batches:   1%|▏         | 1/72 [00:16<19:57, 16.87s/it]2025-11-30 19:01:37,560 - src.pipeline.kg_builder - INFO - Processing batch 2/72 (3 items)
2025-11-30 19:01:37,560 - src.pipeline.kg_builder - DEBUG - Batch 2 current_video_time: 00:24-00:29
2025-11-30 19:01:37,564 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 19
- Total Relationships: 15
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:01:37,565 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:01:37,565 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_0 ~221 words, content: Time: 00:14-00:19 Content: The video sequence captures a scene within a laboratory or research facility, focusing on a person and their surroundings. The camera's movement...
2025-11-30 19:01:37,565 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1 ~200 words, content: , possibly a balance or a sample holder. The background shows more of the lab's white cabinetry and a stack of cardboard boxes. The overall...
2025-11-30 19:01:37,565 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_2 ~195 words, content: and components, including a syringe, a small container, and a pen. To the left, a tall, white, glass-fronted cabinet is open, revealing shelves stocked with...
2025-11-30 19:01:37,565 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_3 ~215 words, content: 学实验报告 (简版)" (AR Glasses Training Chemistry Experiment Report (Brief Version)). This document appears to be a guide for the experiment, which involves the synthesis of...
2025-11-30 19:01:37,565 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4 ~91 words, content: data. The use of AR glasses suggests that the experiment is being conducted as part of a training program, where the user can see instructions...
2025-11-30 19:01:37,592 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:01:37,619 - src.components.pre_llm_injector - DEBUG - Found 4 existing chunk embeddings for similarity lookup
2025-11-30 19:01:37,620 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.639'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.625')]
2025-11-30 19:01:37,621 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3 via source_chunk_ids
2025-11-30 19:01:37,666 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1
2025-11-30 19:01:37,667 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1: Subgraph: (Person / ID: 0_0)-[WEARS]->(Cream-Colored Sweater / ID: 0_0), (Person / ID: 0_0)-[WEARS]->(Blue Jeans / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[STANDS_NEAR]->(Laboratory Table / ID: 0_0), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Man / ID: 0_2)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1)
2025-11-30 19:01:37,667 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0', '0.517'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.498')]
2025-11-30 19:01:37,667 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.625'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.617')]
2025-11-30 19:01:37,667 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_2', '0.440'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.410')]
2025-11-30 19:01:37,668 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.608'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.550')]
2025-11-30 19:01:37,668 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.639'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.625')]
2025-11-30 19:01:37,668 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:01:37,668 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_0) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:01:38,753 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:01:38,753 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:01:38,754 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1) (~200 words) with timeout=5.0s retries=3
2025-11-30 19:01:39,854 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:01:39,854 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:01:39,854 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_2) (~195 words) with timeout=5.0s retries=3
2025-11-30 19:01:44,860 - src.components.pre_llm_injector - WARNING - Chunk 2 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:01:50,367 - src.components.pre_llm_injector - WARNING - Chunk 2 timed out after 5.0s (attempt 2/4), retrying...
2025-11-30 19:01:56,373 - src.components.pre_llm_injector - WARNING - Chunk 2 timed out after 5.0s (attempt 3/4), retrying...
2025-11-30 19:02:02,880 - src.components.pre_llm_injector - WARNING - ⚠️ Chunk 2 TIMED OUT after 5.0s on final attempt. Skipping.
2025-11-30 19:02:02,880 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 0 triplets
2025-11-30 19:02:02,880 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_3) (~215 words) with timeout=5.0s retries=3
2025-11-30 19:02:04,003 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:02:04,004 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:02:04,004 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4) (~91 words) with timeout=5.0s retries=3
2025-11-30 19:02:05,092 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:02:05,092 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:02:05,093 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 5 chunks
2025-11-30 19:02:05,093 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 27.53s
2025-11-30 19:02:05,093 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:02:05,093 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1: Subgraph: (Person / ID: 0_0)-[WEARS]->(Cream-Colored Sweater / ID: 0_0), (Person / ID: 0_0)-[WEARS]->(Blue Jeans / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[STANDS_NEAR]->(Laboratory Table / ID: 0_0), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Man / ID: 0_2)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Turtleneck_Sweater", "source_chunks": ["1_0"]}, {"head": "Person", "relation": "Wears", "tail": "Jeans", "source_chunks": ["1_0"]}, {"head": "Person", "relation": "Stands", "tail": "In_Lab", "source_chunks": ["1_0"]}, {"head": "Camera", "relation": "Pans", "tail": "Right", "source_chunks": ["1_0"]}, {"head": "Camera", "relation": "Reveals", "tail": "Countertop", "source_chunks": ["1_0"]}, {"head": "Countertop", "relation": "Contains", "tail": "Equipment", "source_chunks": ["1_0"]}, {"head": "Person", "relation": "Stands In", "tail": "Laboratory", "source_chunks": ["1_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Workbench", "source_chunks": ["1_1"]}, {"head": "Workbench", "relation": "Holds", "tail": "Bottle", "source_chunks": ["1_1"]}, {"head": "Workbench", "relation": "Holds", "tail": "Paper", "source_chunks": ["1_1"]}, {"head": "Workbench", "relation": "Holds", "tail": "Apparatus", "source_chunks": ["1_1"]}, {"head": "Camera", "relation": "Pans Across", "tail": "Laboratory", "source_chunks": ["1_1"]}, {"head": "Person", "relation": "Uses", "tail": "Ar Glasses", "source_chunks": ["1_3"]}, {"head": "Person", "relation": "Holds", "tail": "White Pen", "source_chunks": ["1_3"]}, {"head": "White Pen", "relation": "Writes On", "tail": "Experiment Report", "source_chunks": ["1_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:02:05,094 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~523 words, ~680 tokens)
2025-11-30 19:02:05,094 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:02:15,900 - src.components.global_refiner - DEBUG - LLM call completed in 10.81s
2025-11-30 19:02:15,900 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Turtleneck_Sweater', ['1_0']], ['Person', 'Wears', 'Jeans', ['1_0']], ['Person', 'Stands', 'In_Lab', ['1_0']], ['Camera', 'Pans', 'Right', ['1_0']], ['Camera', 'Reveals', 'Countertop', ['1_0']], ['Countertop', 'Contains', 'Equipment', ['1_0']], ['Person', 'Stands In', 'Laboratory', ['1_1']], ['Laboratory', 'Contains', 'Workbench', ['1_1']], ['Workbench', 'Holds', 'Bottle', ['1_1']], ['Workbench', 'Holds', 'Paper', ['1_1']], ['Workbench', 'Holds', 'Apparatus', ['1_1']], ['Camera', 'Pans Across', 'Laboratory', ['1_1']], ['Person', 'Uses', 'Ar Glasses', ['1_3']], ['Person', 'Holds', 'White Pen', ['1_3']], ['White Pen', 'Writes On', 'Experiment Report', ['1_3']]] inter_chunk_relations=[['Workbench', 'Holds', 'Laboratory Table', ['1_1']]] merge_instructions=[{'local': 'Turtleneck_Sweater', 'existing': 'Cream-Colored Sweater', 'existing_id': '0_0'}, {'local': 'Jeans', 'existing': 'Blue Jeans', 'existing_id': '0_0'}, {'local': 'In_Lab', 'existing': 'Laboratory', 'existing_id': '0_1'}, {'local': 'Ar Glasses', 'existing': 'Smartphone', 'existing_id': '0_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Cream-Colored Sweater'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Jeans'}, {'head': 'Person', 'relation': 'Stands Near', 'tail': 'Laboratory Table'}, {'head': 'Person', 'relation': 'Interacts With', 'tail': 'Equipment'}]
2025-11-30 19:02:15,900 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Turtleneck_Sweater', ['1_0']], ['Person', 'Wears', 'Jeans', ['1_0']], ['Person', 'Stands', 'In_Lab', ['1_0']]]
2025-11-30 19:02:15,900 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Workbench', 'Holds', 'Laboratory Table', ['1_1']]]
2025-11-30 19:02:15,901 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Turtleneck_Sweater', 'existing': 'Cream-Colored Sweater', 'existing_id': '0_0'}, {'local': 'Jeans', 'existing': 'Blue Jeans', 'existing_id': '0_0'}, {'local': 'In_Lab', 'existing': 'Laboratory', 'existing_id': '0_1'}]
2025-11-30 19:02:15,901 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Cream-Colored Sweater'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Jeans'}, {'head': 'Person', 'relation': 'Stands Near', 'tail': 'Laboratory Table'}]
2025-11-30 19:02:15,901 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Turtleneck_Sweater', 'existing': 'Cream-Colored Sweater', 'existing_id': '0_0'}, {'local': 'Jeans', 'existing': 'Blue Jeans', 'existing_id': '0_0'}, {'local': 'In_Lab', 'existing': 'Laboratory', 'existing_id': '0_1'}, {'local': 'Ar Glasses', 'existing': 'Smartphone', 'existing_id': '0_0'}]
2025-11-30 19:02:15,901 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Cream-Colored Sweater'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Jeans'}, {'head': 'Person', 'relation': 'Stands Near', 'tail': 'Laboratory Table'}, {'head': 'Person', 'relation': 'Interacts With', 'tail': 'Equipment'}]
2025-11-30 19:02:15,901 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 10.81s, LLM: 10.81s)
2025-11-30 19:02:15,901 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 10.81s
2025-11-30 19:02:15,901 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:02:15,901 - src.pipeline.kg_builder - INFO - Pushing batch 2/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:02:15,901 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:02:16,113 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=36, relationships=30
2025-11-30 19:02:16,113 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:02:16,113 - src.components.neo4j_handler - DEBUG - APOC merge successful: Turtleneck_Sweater -> Cream-Colored Sweater
2025-11-30 19:02:16,120 - src.components.neo4j_handler - DEBUG - APOC merge successful: Jeans -> Blue Jeans
2025-11-30 19:02:16,123 - src.components.neo4j_handler - DEBUG - APOC merge successful: In_Lab -> Laboratory
2025-11-30 19:02:16,126 - src.components.neo4j_handler - DEBUG - APOC merge successful: Ar Glasses -> Smartphone
2025-11-30 19:02:16,126 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:02:16,133 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Cream-Colored Sweater
2025-11-30 19:02:16,134 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue Jeans
2025-11-30 19:02:16,137 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Stands Near]-> Laboratory Table
2025-11-30 19:02:16,138 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Interacts With]-> Equipment
2025-11-30 19:02:16,138 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:02:16,141 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Workbench -[Holds]-> Laboratory Table
2025-11-30 19:02:16,142 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:02:16,147 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=32, relationships=24
2025-11-30 19:02:16,152 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:02:16,152 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:02:16,152 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:02:16,152 - src.components.neo4j_handler - INFO - Batch injected in 0.25s (triplets: 0.25s, indexes: 0.00s)
2025-11-30 19:02:16,153 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 9, 'with_embedding': 9, 'linked_chunks': 6}
2025-11-30 19:02:16,153 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:02:16,156 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 32 nodes
2025-11-30 19:02:16,157 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 29 nodes
2025-11-30 19:02:16,160 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 32, 'relationship_count': 61, 'density': 0.0615, 'avg_degree': 3.8125, 'avg_unique_neighbors': 3.8125, 'global_efficiency': 0.3863, 'avg_path_length': 2.5665, 'avg_degree_centrality': 0.123, 'max_degree_centrality': 0.3226, 'avg_betweenness_centrality': 0.0031, 'max_betweenness_centrality': 0.0333, 'degree_assortativity': -0.2185, 'graph_robustness': 0.7541, 'diameter_estimate': 5, 'clustering_coefficient': 0.2608, 'weakly_connected_components': 4, 'largest_wcc_size': 29, 'pagerank_top10_percent': 55.04, 'louvain_communities': 9, 'louvain_modularity': 0.4519, 'label_entropy': 1.4286, 'computational_time': 0.006931731011718512}
2025-11-30 19:02:16,160 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 1, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500536.1609688, 'total_time': 38.60092853102833, 'aggregation': 5.102017894387245e-06, 'network_info': 0.004525049007497728, 'llm_extraction': 38.33641876699403, 'data_cleaning': 1.4303019270300865e-05, 'neo4j_injection': 0.25130250793881714, 'embedding_time': 0, 'indexing_time': 0.004628574009984732, 'graph_injection_time': 0.24651431199163198, 'acs_metrics': {'node_count': 32, 'relationship_count': 61, 'density': 0.0615, 'avg_degree': 3.8125, 'avg_unique_neighbors': 3.8125, 'global_efficiency': 0.3863, 'avg_path_length': 2.5665, 'avg_degree_centrality': 0.123, 'max_degree_centrality': 0.3226, 'avg_betweenness_centrality': 0.0031, 'max_betweenness_centrality': 0.0333, 'degree_assortativity': -0.2185, 'graph_robustness': 0.7541, 'diameter_estimate': 5, 'clustering_coefficient': 0.2608, 'weakly_connected_components': 4, 'largest_wcc_size': 29, 'pagerank_top10_percent': 55.04, 'louvain_communities': 9, 'louvain_modularity': 0.4519, 'label_entropy': 1.4286, 'computational_time': 0.006931731011718512}, 'retrieval_queries': []}
2025-11-30 19:02:16,161 - src.pipeline.kg_builder - DEBUG - Batch 1 metrics: {
  "batch_idx": 1,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500536.1609688,
  "total_time": 38.60092853102833,
  "aggregation": 5.102017894387245e-06,
  "network_info": 0.004525049007497728,
  "llm_extraction": 38.33641876699403,
  "data_cleaning": 1.4303019270300865e-05,
  "neo4j_injection": 0.25130250793881714,
  "embedding_time": 0,
  "indexing_time": 0.004628574009984732,
  "graph_injection_time": 0.24651431199163198,
  "acs_metrics": {
    "node_count": 32,
    "relationship_count": 61,
    "density": 0.0615,
    "avg_degree": 3.8125,
    "avg_unique_neighbors": 3.8125,
    "global_efficiency": 0.3863,
    "avg_path_length": 2.5665,
    "avg_degree_centrality": 0.123,
    "max_degree_centrality": 0.3226,
    "avg_betweenness_centrality": 0.0031,
    "max_betweenness_centrality": 0.0333,
    "degree_assortativity": -0.2185,
    "graph_robustness": 0.7541,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2608,
    "weakly_connected_components": 4,
    "largest_wcc_size": 29,
    "pagerank_top10_percent": 55.04,
    "louvain_communities": 9,
    "louvain_modularity": 0.4519,
    "label_entropy": 1.4286,
    "computational_time": 0.006931731011718512
  },
  "retrieval_queries": []
}
2025-11-30 19:02:16,161 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:02:16,161 - src.pipeline.kg_builder - INFO - Batch 2 timings - Agg: 0.00s, NetInfo: 0.00s, LLM: 38.34s, Clean: 0.00s, Neo4j: 0.25s, ACS: 0.01s
2025-11-30 19:02:16,161 - src.pipeline.kg_builder - INFO - Batch 2 completed in 38.60s
Processing KG batches:   3%|▎         | 2/72 [00:55<34:35, 29.65s/it]2025-11-30 19:02:16,161 - src.pipeline.kg_builder - INFO - Processing batch 3/72 (3 items)
2025-11-30 19:02:16,161 - src.pipeline.kg_builder - DEBUG - Batch 3 current_video_time: 00:39-00:44
2025-11-30 19:02:16,167 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 32
- Total Relationships: 24
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:02:16,167 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:02:16,167 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_0 ~177 words, content: Time: 00:29-00:34 Content: The video captures a scene in a laboratory setting where a person is conducting a chemistry experiment. The central focus is on...
2025-11-30 19:02:16,167 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1 ~205 words, content: or the product of the reaction. - A white, circular device with multiple holes, possibly a multi-well plate or a component of the experimental setup....
2025-11-30 19:02:16,167 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_2 ~204 words, content: the report, which is laid out on the table. The report details an experiment to produce hydrogen gas by reacting aluminum with sodium hydroxide. The...
2025-11-30 19:02:16,167 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 ~193 words, content: , protected by a blue nitrile glove, as they write on a printed document titled "AR 眼镜训练用化学实验报告 (简版)" (AR Glasses Training Chemistry Experiment Report -...
2025-11-30 19:02:16,188 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:02:16,217 - src.components.pre_llm_injector - DEBUG - Found 9 existing chunk embeddings for similarity lookup
2025-11-30 19:02:16,219 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.792'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.731')]
2025-11-30 19:02:16,220 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1
2025-11-30 19:02:16,221 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4 via source_chunk_ids
2025-11-30 19:02:16,222 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Man / ID: 0_2)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS]->(Right / ID: 1_0), (Camera / ID: 0_1)-[REVEALS]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3)
2025-11-30 19:02:16,222 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.731'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.664')]
2025-11-30 19:02:16,222 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.555'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_3', '0.504')]
2025-11-30 19:02:16,222 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.513'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.513')]
2025-11-30 19:02:16,222 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.792'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.716')]
2025-11-30 19:02:16,222 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:02:16,223 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_0) (~177 words) with timeout=5.0s retries=3
2025-11-30 19:02:17,282 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:02:17,282 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:02:17,282 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1) (~205 words) with timeout=5.0s retries=3
2025-11-30 19:02:18,878 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:02:18,878 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:02:18,878 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_2) (~204 words) with timeout=5.0s retries=3
2025-11-30 19:02:19,922 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:02:19,922 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:02:19,922 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3) (~193 words) with timeout=5.0s retries=3
2025-11-30 19:02:21,113 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:02:21,113 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:02:21,113 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:02:21,113 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 4.95s
2025-11-30 19:02:21,113 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:02:21,114 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Man / ID: 0_2)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS]->(Right / ID: 1_0), (Camera / ID: 0_1)-[REVEALS]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Glove", "source_chunks": ["2_0", "2_2"]}, {"head": "Person", "relation": "Holds", "tail": "White Marker", "source_chunks": ["2_0"]}, {"head": "Person", "relation": "Writes On", "tail": "Document", "source_chunks": ["2_0"]}, {"head": "Document", "relation": "Contains", "tail": "Chemical Equation", "source_chunks": ["2_0"]}, {"head": "Document", "relation": "Contains", "tail": "Measured Volume", "source_chunks": ["2_0"]}, {"head": "Test Tube", "relation": "Contains", "tail": "Reactants", "source_chunks": ["2_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["2_1"]}, {"head": "Person", "relation": "Fills Out", "tail": "Chemistry Experiment Report", "source_chunks": ["2_1"]}, {"head": "Chemistry Experiment Report", "relation": "Is Titled", "tail": "Ar \u773c\u955c\u8bad\u7ec3\u7528\u5316\u5b66\u5b9e\u9a8c\u62a5\u544a (\u7b80\u7248)", "source_chunks": ["2_1"]}, {"head": "Chemistry Experiment Report", "relation": "Is On", "tail": "Lab Bench", "source_chunks": ["2_1"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "White Circular Device", "source_chunks": ["2_1"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "Black Elongated Case", "source_chunks": ["2_1"]}, {"head": "Person", "relation": "Writes On", "tail": "Report", "source_chunks": ["2_2"]}, {"head": "Report", "relation": "Contains", "tail": "Experiment Purpose", "source_chunks": ["2_2"]}, {"head": "Report", "relation": "Contains", "tail": "Experiment Principle", "source_chunks": ["2_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:02:21,114 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~604 words, ~785 tokens)
2025-11-30 19:02:21,114 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:02:30,611 - src.components.global_refiner - DEBUG - LLM call completed in 9.50s
2025-11-30 19:02:30,611 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue Nitrile Glove', ['2_0']], ['Person', 'Holds', 'White Marker', ['2_0']], ['Person', 'Writes On', 'Document', ['2_0']], ['Document', 'Contains', 'Chemical Equation', ['2_0']], ['Document', 'Contains', 'Measured Volume', ['2_0']], ['Test Tube', 'Contains', 'Reactants', ['2_0']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['2_1']], ['Person', 'Fills Out', 'Chemistry Experiment Report', ['2_1']], ['Chemistry Experiment Report', 'Is Titled', 'Ar 眼镜训练用化学实验报告 (简降)', ['2_1']], ['Chemistry Experiment Report', 'Is On', 'Lab Bench', ['2_1']], ['Lab Bench', 'Contains', 'White Circular Device', ['2_1']], ['Lab Bench', 'Contains', 'Black Elongated Case', ['2_1']], ['Person', 'Writes On', 'Report', ['2_2']], ['Report', 'Contains', 'Experiment Purpose', ['2_2']], ['Report', 'Contains', 'Experiment Principle', ['2_2']]] inter_chunk_relations=[['Lab Bench', 'Is On', 'Laboratory Table', ['2_1']]] merge_instructions=[{'local': 'Blue Nitrile Glove', 'existing': 'Blue Glove', 'existing_id': '0_3'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}] prune_instructions=[]
2025-11-30 19:02:30,612 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue Nitrile Glove', ['2_0']], ['Person', 'Holds', 'White Marker', ['2_0']], ['Person', 'Writes On', 'Document', ['2_0']]]
2025-11-30 19:02:30,612 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Lab Bench', 'Is On', 'Laboratory Table', ['2_1']]]
2025-11-30 19:02:30,612 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue Nitrile Glove', 'existing': 'Blue Glove', 'existing_id': '0_3'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:02:30,612 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:02:30,612 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue Nitrile Glove', 'existing': 'Blue Glove', 'existing_id': '0_3'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:02:30,612 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 9.50s, LLM: 9.50s)
2025-11-30 19:02:30,612 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 9.50s
2025-11-30 19:02:30,612 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:02:30,612 - src.pipeline.kg_builder - INFO - Pushing batch 3/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:02:30,612 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:02:30,818 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=51, relationships=40
2025-11-30 19:02:30,818 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:02:30,819 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Glove -> Blue Glove
2025-11-30 19:02:30,820 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue Glove
2025-11-30 19:02:30,820 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:02:30,822 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab Bench -[Is On]-> Laboratory Table
2025-11-30 19:02:30,822 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:02:30,829 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=51, relationships=40
2025-11-30 19:02:30,831 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:02:30,831 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:02:30,832 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:02:30,832 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.22s, indexes: 0.00s)
2025-11-30 19:02:30,833 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 13, 'with_embedding': 13, 'linked_chunks': 9}
2025-11-30 19:02:30,833 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:02:30,836 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 51 nodes
2025-11-30 19:02:30,838 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 47 nodes
2025-11-30 19:02:30,844 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 51, 'relationship_count': 97, 'density': 0.038, 'avg_degree': 3.8039, 'avg_unique_neighbors': 3.8039, 'global_efficiency': 0.3568, 'avg_path_length': 2.7632, 'avg_degree_centrality': 0.0761, 'max_degree_centrality': 0.36, 'avg_betweenness_centrality': 0.0011, 'max_betweenness_centrality': 0.0128, 'degree_assortativity': -0.2426, 'graph_robustness': 0.7216, 'diameter_estimate': 4, 'clustering_coefficient': 0.297, 'weakly_connected_components': 5, 'largest_wcc_size': 47, 'pagerank_top10_percent': 46.38, 'louvain_communities': 10, 'louvain_modularity': 0.5275, 'label_entropy': 1.4095, 'computational_time': 0.011100914096459746}
2025-11-30 19:02:30,844 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 2, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500550.8443656, 'total_time': 14.682933327974752, 'aggregation': 4.576984792947769e-06, 'network_info': 0.005550316069275141, 'llm_extraction': 14.445331988972612, 'data_cleaning': 3.566907253116369e-05, 'neo4j_injection': 0.21968938095960766, 'embedding_time': 0, 'indexing_time': 0.0029782589990645647, 'graph_injection_time': 0.2164124429691583, 'acs_metrics': {'node_count': 51, 'relationship_count': 97, 'density': 0.038, 'avg_degree': 3.8039, 'avg_unique_neighbors': 3.8039, 'global_efficiency': 0.3568, 'avg_path_length': 2.7632, 'avg_degree_centrality': 0.0761, 'max_degree_centrality': 0.36, 'avg_betweenness_centrality': 0.0011, 'max_betweenness_centrality': 0.0128, 'degree_assortativity': -0.2426, 'graph_robustness': 0.7216, 'diameter_estimate': 4, 'clustering_coefficient': 0.297, 'weakly_connected_components': 5, 'largest_wcc_size': 47, 'pagerank_top10_percent': 46.38, 'louvain_communities': 10, 'louvain_modularity': 0.5275, 'label_entropy': 1.4095, 'computational_time': 0.011100914096459746}, 'retrieval_queries': []}
2025-11-30 19:02:30,844 - src.pipeline.kg_builder - DEBUG - Batch 2 metrics: {
  "batch_idx": 2,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500550.8443656,
  "total_time": 14.682933327974752,
  "aggregation": 4.576984792947769e-06,
  "network_info": 0.005550316069275141,
  "llm_extraction": 14.445331988972612,
  "data_cleaning": 3.566907253116369e-05,
  "neo4j_injection": 0.21968938095960766,
  "embedding_time": 0,
  "indexing_time": 0.0029782589990645647,
  "graph_injection_time": 0.2164124429691583,
  "acs_metrics": {
    "node_count": 51,
    "relationship_count": 97,
    "density": 0.038,
    "avg_degree": 3.8039,
    "avg_unique_neighbors": 3.8039,
    "global_efficiency": 0.3568,
    "avg_path_length": 2.7632,
    "avg_degree_centrality": 0.0761,
    "max_degree_centrality": 0.36,
    "avg_betweenness_centrality": 0.0011,
    "max_betweenness_centrality": 0.0128,
    "degree_assortativity": -0.2426,
    "graph_robustness": 0.7216,
    "diameter_estimate": 4,
    "clustering_coefficient": 0.297,
    "weakly_connected_components": 5,
    "largest_wcc_size": 47,
    "pagerank_top10_percent": 46.38,
    "louvain_communities": 10,
    "louvain_modularity": 0.5275,
    "label_entropy": 1.4095,
    "computational_time": 0.011100914096459746
  },
  "retrieval_queries": []
}
2025-11-30 19:02:30,844 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:02:30,844 - src.pipeline.kg_builder - INFO - Batch 3 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 14.45s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.01s
2025-11-30 19:02:30,844 - src.pipeline.kg_builder - INFO - Batch 3 completed in 14.68s
Processing KG batches:   4%|▍         | 3/72 [01:10<26:14, 22.82s/it]2025-11-30 19:02:30,844 - src.pipeline.kg_builder - INFO - Processing batch 4/72 (3 items)
2025-11-30 19:02:30,844 - src.pipeline.kg_builder - DEBUG - Batch 4 current_video_time: 00:54-00:59
2025-11-30 19:02:30,851 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 51
- Total Relationships: 40
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:02:30,852 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:02:30,852 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0 ~186 words, content: Time: 00:44-00:49 Content: The video sequence captures a person conducting a chemistry experiment in a laboratory setting, focusing on the preparation and documentation of a...
2025-11-30 19:02:30,852 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1 ~240 words, content: to a wider, slightly elevated view of the laboratory. This broader shot reveals more of the workspace, including a power strip with multiple plugs, a...
2025-11-30 19:02:30,852 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2 ~241 words, content: , and a yellow box. A person wearing blue gloves is seen handling a piece of aluminum foil, which is likely being used to cover...
2025-11-30 19:02:30,852 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3 ~164 words, content: :59 Content: The video sequence captures a person preparing to conduct a precise measurement in a laboratory setting. The scene is set in a well-equipped...
2025-11-30 19:02:30,872 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:02:30,901 - src.components.pre_llm_injector - DEBUG - Found 13 existing chunk embeddings for similarity lookup
2025-11-30 19:02:30,904 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.799'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.785')]
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 via source_chunk_ids
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4 via source_chunk_ids
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.728'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.699')]
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.648'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.632')]
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.620'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.608')]
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.799'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.785')]
2025-11-30 19:02:30,905 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:02:30,906 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0) (~186 words) with timeout=5.0s retries=3
2025-11-30 19:02:32,629 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:02:32,630 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:02:32,630 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:02:33,701 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:02:33,702 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:02:33,702 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:02:34,870 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:02:34,870 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:02:34,871 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3) (~164 words) with timeout=5.0s retries=3
2025-11-30 19:02:36,266 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:02:36,266 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:02:36,266 - src.components.pre_llm_injector - INFO - Extracted 21 local triplets from 4 chunks
2025-11-30 19:02:36,266 - src.pipeline.kg_builder - INFO - Pre-extraction: 21 triplets in 5.41s
2025-11-30 19:02:36,266 - src.components.global_refiner - INFO - Capping refinement input: 21 → 15 triplets
2025-11-30 19:02:36,266 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
No subgraph context available
No existing entities or relations.

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["3_0", "3_3"]}, {"head": "Person", "relation": "Writes On", "tail": "Ar Glasses Training Chemistry Experiment Report - Simplified Version", "source_chunks": ["3_0"]}, {"head": "Person", "relation": "Uses", "tail": "White Marker", "source_chunks": ["3_0"]}, {"head": "Ar Glasses Training Chemistry Experiment Report - Simplified Version", "relation": "Contains", "tail": "Chemical Equation", "source_chunks": ["3_0"]}, {"head": "Chemical Equation", "relation": "Describes", "tail": "Reaction Of Aluminum With Sodium Hydroxide", "source_chunks": ["3_0"]}, {"head": "Laboratory Bench", "relation": "Contains", "tail": "Test Tube With Blue Cap", "source_chunks": ["3_0"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Power Strip", "source_chunks": ["3_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Balance Scale", "source_chunks": ["3_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Lab Apparatus", "source_chunks": ["3_1"]}, {"head": "Document", "relation": "Is On", "tail": "Black Countertop", "source_chunks": ["3_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["3_1", "3_2"]}, {"head": "Camera", "relation": "Captures", "tail": "Laboratory Environment", "source_chunks": ["3_1"]}, {"head": "Person", "relation": "Handles", "tail": "Aluminum Foil", "source_chunks": ["3_2", "3_3"]}, {"head": "Person", "relation": "Places", "tail": "Aluminum Foil", "source_chunks": ["3_2"]}, {"head": "Aluminum Foil", "relation": "Is Used For", "tail": "Containing Substance", "source_chunks": ["3_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:02:36,267 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~489 words, ~636 tokens)
2025-11-30 19:02:36,267 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:02:43,480 - src.components.global_refiner - DEBUG - LLM call completed in 7.21s
2025-11-30 19:02:43,480 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue Nitrile Gloves', ['3_0', '3_3']], ['Person', 'Writes On', 'Ar Glasses Training Chemistry Experiment Report - Simplified Version', ['3_0']], ['Person', 'Uses', 'White Marker', ['3_0']], ['Ar Glasses Training Chemistry Experiment Report - Simplified Version', 'Contains', 'Chemical Equation', ['3_0']], ['Chemical Equation', 'Describes', 'Reaction Of Aluminum With Sodium Hydroxide', ['3_0']], ['Laboratory Bench', 'Contains', 'Test Tube With Blue Cap', ['3_0']], ['Laboratory', 'Contains', 'Power Strip', ['3_1']], ['Laboratory', 'Contains', 'Balance Scale', ['3_1']], ['Laboratory', 'Contains', 'Lab Apparatus', ['3_1']], ['Document', 'Is On', 'Black Countertop', ['3_1']], ['Person', 'Wears', 'Blue Gloves', ['3_1', '3_2']], ['Camera', 'Captures', 'Laboratory Environment', ['3_1']], ['Person', 'Handles', 'Aluminum Foil', ['3_2', '3_3']], ['Person', 'Places', 'Aluminum Foil', ['3_2']], ['Aluminum Foil', 'Is Used For', 'Containing Substance', ['3_2']]] inter_chunk_relations=[] merge_instructions=[] prune_instructions=[]
2025-11-30 19:02:43,480 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue Nitrile Gloves', ['3_0', '3_3']], ['Person', 'Writes On', 'Ar Glasses Training Chemistry Experiment Report - Simplified Version', ['3_0']], ['Person', 'Uses', 'White Marker', ['3_0']]]
2025-11-30 19:02:43,480 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=0, sample=[]
2025-11-30 19:02:43,480 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:02:43,481 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:02:43,481 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 7.21s, LLM: 7.21s)
2025-11-30 19:02:43,481 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 7.21s
2025-11-30 19:02:43,481 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:02:43,481 - src.pipeline.kg_builder - INFO - Pushing batch 4/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:02:43,481 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:02:43,655 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=66, relationships=53
2025-11-30 19:02:43,656 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:02:43,661 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=66, relationships=53
2025-11-30 19:02:43,666 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:02:43,666 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:02:43,666 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:02:43,666 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.18s, indexes: 0.00s)
2025-11-30 19:02:43,667 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 17, 'with_embedding': 17, 'linked_chunks': 13}
2025-11-30 19:02:43,667 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:02:43,671 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 66 nodes
2025-11-30 19:02:43,674 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 62 nodes
2025-11-30 19:02:43,682 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 66, 'relationship_count': 133, 'density': 0.031, 'avg_degree': 4.0303, 'avg_unique_neighbors': 4.0303, 'global_efficiency': 0.3599, 'avg_path_length': 2.798, 'avg_degree_centrality': 0.062, 'max_degree_centrality': 0.3846, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0091, 'degree_assortativity': -0.2375, 'graph_robustness': 0.9023, 'diameter_estimate': 4, 'clustering_coefficient': 0.3007, 'weakly_connected_components': 5, 'largest_wcc_size': 62, 'pagerank_top10_percent': 39.97, 'louvain_communities': 9, 'louvain_modularity': 0.5345, 'label_entropy': 1.4115, 'computational_time': 0.014746619039215147}
2025-11-30 19:02:43,682 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 3, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500563.6823602, 'total_time': 12.837538657011464, 'aggregation': 3.726920112967491e-06, 'network_info': 0.0068610720336437225, 'llm_extraction': 12.629228546982631, 'data_cleaning': 1.4207093045115471e-05, 'neo4j_injection': 0.18558110599406064, 'embedding_time': 0, 'indexing_time': 0.0047123649856075644, 'graph_injection_time': 0.18069860595278442, 'acs_metrics': {'node_count': 66, 'relationship_count': 133, 'density': 0.031, 'avg_degree': 4.0303, 'avg_unique_neighbors': 4.0303, 'global_efficiency': 0.3599, 'avg_path_length': 2.798, 'avg_degree_centrality': 0.062, 'max_degree_centrality': 0.3846, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0091, 'degree_assortativity': -0.2375, 'graph_robustness': 0.9023, 'diameter_estimate': 4, 'clustering_coefficient': 0.3007, 'weakly_connected_components': 5, 'largest_wcc_size': 62, 'pagerank_top10_percent': 39.97, 'louvain_communities': 9, 'louvain_modularity': 0.5345, 'label_entropy': 1.4115, 'computational_time': 0.014746619039215147}, 'retrieval_queries': []}
2025-11-30 19:02:43,682 - src.pipeline.kg_builder - DEBUG - Batch 3 metrics: {
  "batch_idx": 3,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500563.6823602,
  "total_time": 12.837538657011464,
  "aggregation": 3.726920112967491e-06,
  "network_info": 0.0068610720336437225,
  "llm_extraction": 12.629228546982631,
  "data_cleaning": 1.4207093045115471e-05,
  "neo4j_injection": 0.18558110599406064,
  "embedding_time": 0,
  "indexing_time": 0.0047123649856075644,
  "graph_injection_time": 0.18069860595278442,
  "acs_metrics": {
    "node_count": 66,
    "relationship_count": 133,
    "density": 0.031,
    "avg_degree": 4.0303,
    "avg_unique_neighbors": 4.0303,
    "global_efficiency": 0.3599,
    "avg_path_length": 2.798,
    "avg_degree_centrality": 0.062,
    "max_degree_centrality": 0.3846,
    "avg_betweenness_centrality": 0.0006,
    "max_betweenness_centrality": 0.0091,
    "degree_assortativity": -0.2375,
    "graph_robustness": 0.9023,
    "diameter_estimate": 4,
    "clustering_coefficient": 0.3007,
    "weakly_connected_components": 5,
    "largest_wcc_size": 62,
    "pagerank_top10_percent": 39.97,
    "louvain_communities": 9,
    "louvain_modularity": 0.5345,
    "label_entropy": 1.4115,
    "computational_time": 0.014746619039215147
  },
  "retrieval_queries": []
}
2025-11-30 19:02:43,682 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:02:43,682 - src.pipeline.kg_builder - INFO - Batch 4 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 12.63s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.01s
2025-11-30 19:02:43,682 - src.pipeline.kg_builder - INFO - Batch 4 completed in 12.84s
Processing KG batches:   6%|▌         | 4/72 [01:22<21:23, 18.88s/it]2025-11-30 19:02:43,682 - src.pipeline.kg_builder - INFO - Processing batch 5/72 (3 items)
2025-11-30 19:02:43,682 - src.pipeline.kg_builder - DEBUG - Batch 5 current_video_time: 01:09-01:14
2025-11-30 19:02:43,688 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 66
- Total Relationships: 53
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:02:43,688 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:02:43,688 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_0 ~233 words, content: Time: 00:59-01:04 Content: The video sequence captures a series of actions performed by a person in a laboratory setting, focusing on the preparation of a...
2025-11-30 19:02:43,688 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1 ~241 words, content: they continue to use the pipette. The liquid is being carefully transferred into the beaker, which is still on the balance scale. The person's movements...
2025-11-30 19:02:43,688 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_2 ~236 words, content: and safety throughout the process. The sequence of actions, from weighing the beaker to transferring the liquid and stirring it, indicates a methodical approach to...
2025-11-30 19:02:43,688 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3 ~225 words, content: and attention to detail. The overall atmosphere is one of concentration and scientific rigor. Time: 01:09-01:14 Content: The video sequence captures a series of actions...
2025-11-30 19:02:43,688 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4 ~226 words, content: - **Frame 3:** The person's hands are now actively engaged in opening the bottle. The left hand holds the bottle while the right hand, also...
2025-11-30 19:02:43,709 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:02:43,742 - src.components.pre_llm_injector - DEBUG - Found 17 existing chunk embeddings for similarity lookup
2025-11-30 19:02:43,747 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.816'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.774')]
2025-11-30 19:02:43,748 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4 via source_chunk_ids
2025-11-30 19:02:43,748 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:02:43,750 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[USES]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 2_1), (Person / ID: 0_0)-[FILLS_OUT]->(Chemistry Experiment Report / ID: 2_1), (Person / ID: 0_0)-[WRITES_ON]->(Report / ID: 2_2), (Person / ID: 0_0)-[WRITES_ON]->(Ar Glasses Training Chemistry Experiment Report - Simplified Version / ID: 3_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Aluminum Foil / ID: 3_2)-[IS_USED_FOR]->(Containing Substance / ID: 3_2)
2025-11-30 19:02:43,750 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.670'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.627')]
2025-11-30 19:02:43,751 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.607'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.599')]
2025-11-30 19:02:43,751 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.644'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1', '0.596')]
2025-11-30 19:02:43,751 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.715'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.690')]
2025-11-30 19:02:43,751 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.816'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.774')]
2025-11-30 19:02:43,751 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:02:43,751 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_0) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:02:44,970 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:02:44,971 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:02:44,971 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:02:46,152 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:02:46,152 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:02:46,152 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_2) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:02:47,279 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:02:47,279 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:02:47,279 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:02:48,667 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:02:48,667 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:02:48,667 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:02:49,746 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:02:49,746 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:02:49,746 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 5 chunks
2025-11-30 19:02:49,746 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 6.06s
2025-11-30 19:02:49,747 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:02:49,747 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[USES]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 2_1), (Person / ID: 0_0)-[FILLS_OUT]->(Chemistry Experiment Report / ID: 2_1), (Person / ID: 0_0)-[WRITES_ON]->(Report / ID: 2_2), (Person / ID: 0_0)-[WRITES_ON]->(Ar Glasses Training Chemistry Experiment Report - Simplified Version / ID: 3_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Aluminum Foil / ID: 3_2)-[IS_USED_FOR]->(Containing Substance / ID: 3_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["4_0", "4_2", "4_3"]}, {"head": "Person", "relation": "Handles", "tail": "Beaker", "source_chunks": ["4_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Balance_Scale", "source_chunks": ["4_0", "4_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["4_0", "4_1", "4_2"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["4_0"]}, {"head": "Liquid", "relation": "Is Transferred To", "tail": "Beaker", "source_chunks": ["4_0", "4_1"]}, {"head": "Person", "relation": "Closes", "tail": "Container", "source_chunks": ["4_1"]}, {"head": "Person", "relation": "Stirs", "tail": "Liquid", "source_chunks": ["4_1"]}, {"head": "Glass_Rod", "relation": "Is Used To", "tail": "Stir_Liquid", "source_chunks": ["4_1"]}, {"head": "Person", "relation": "Uses", "tail": "Magnetic_Stirrer", "source_chunks": ["4_2"]}, {"head": "Person", "relation": "Uses", "tail": "Burette", "source_chunks": ["4_2"]}, {"head": "Person", "relation": "Uses", "tail": "Balance", "source_chunks": ["4_2"]}, {"head": "Person", "relation": "Handles", "tail": "Laboratory_Glassware", "source_chunks": ["4_2"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["4_3"]}, {"head": "Person", "relation": "Holds", "tail": "White_Bottle", "source_chunks": ["4_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:02:49,747 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~593 words, ~771 tokens)
2025-11-30 19:02:49,747 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:03:08,057 - src.components.global_refiner - DEBUG - LLM call completed in 18.31s
2025-11-30 19:03:08,057 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['4_0', '4_2', '4_3']], ['Person', 'Handles', 'Beaker', ['4_0']], ['Beaker', 'Is On', 'Balance_Scale', ['4_0', '4_1']], ['Person', 'Uses', 'Pipette', ['4_0', '4_1', '4_2']], ['Pipette', 'Transfers', 'Liquid', ['4_0']], ['Liquid', 'Is Transferred To', 'Beaker', ['4_0', '4_1']], ['Person', 'Closes', 'Container', ['4_1']], ['Person', 'Stirs', 'Liquid', ['4_1']], ['Glass_Rod', 'Is Used To', 'Stir_Liquid', ['4_1']], ['Person', 'Uses', 'Magnetic_Stirrer', ['4_2']], ['Person', 'Uses', 'Burette', ['4_2']], ['Person', 'Uses', 'Balance', ['4_2']], ['Person', 'Handles', 'Laboratory_Glassware', ['4_2']], ['Person', 'Holds', 'Beaker', ['4_3']], ['Person', 'Holds', 'White_Bottle', ['4_3']]] inter_chunk_relations=[['Beaker', 'Is On', 'Laboratory', ['4_0', '4_1']], ['Person', 'Uses', 'Smartphone', ['4_0', '4_1', '4_2', '4_3']], ['Person', 'Holds', 'White Pen', ['4_0', '4_1', '4_2', '4_3']], ['Person', 'Holds', 'White Marker', ['4_0', '4_1', '4_2', '4_3']], ['Person', 'Holds', 'Blue Nitrile Glove', ['4_0', '4_1', '4_2', '4_3']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '2_1'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}] prune_instructions=[{'head': 'Person', 'relation': 'HOLDS', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'USES', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Nitrile Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'USES', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'FILLS_OUT', 'tail': 'Chemistry Experiment Report'}, {'head': 'Person', 'relation': 'WRITES_ON', 'tail': 'Report'}, {'head': 'Person', 'relation': 'WRITES_ON', 'tail': 'Ar Glasses Training Chemistry Experiment Report - Simplified Version'}, {'head': 'Person', 'relation': 'PLACES', 'tail': 'Aluminum Foil'}, {'head': 'Person', 'relation': 'HANDLES', 'tail': 'Aluminum Foil'}, {'head': 'Aluminum Foil', 'relation': 'IS_USED_FOR', 'tail': 'Containing Substance'}]
2025-11-30 19:03:08,057 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['4_0', '4_2', '4_3']], ['Person', 'Handles', 'Beaker', ['4_0']], ['Beaker', 'Is On', 'Balance_Scale', ['4_0', '4_1']]]
2025-11-30 19:03:08,057 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Laboratory', ['4_0', '4_1']], ['Person', 'Uses', 'Smartphone', ['4_0', '4_1', '4_2', '4_3']], ['Person', 'Holds', 'White Pen', ['4_0', '4_1', '4_2', '4_3']]]
2025-11-30 19:03:08,057 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=3, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '2_1'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}]
2025-11-30 19:03:08,057 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=13, sample=[{'head': 'Person', 'relation': 'HOLDS', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'USES', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Pen'}]
2025-11-30 19:03:08,058 - src.components.global_refiner - INFO - LLM suggested 3 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '2_1'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}]
2025-11-30 19:03:08,058 - src.components.global_refiner - INFO - LLM suggested 13 triplets to prune: [{'head': 'Person', 'relation': 'HOLDS', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'USES', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Nitrile Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'USES', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'FILLS_OUT', 'tail': 'Chemistry Experiment Report'}, {'head': 'Person', 'relation': 'WRITES_ON', 'tail': 'Report'}, {'head': 'Person', 'relation': 'WRITES_ON', 'tail': 'Ar Glasses Training Chemistry Experiment Report - Simplified Version'}, {'head': 'Person', 'relation': 'PLACES', 'tail': 'Aluminum Foil'}, {'head': 'Person', 'relation': 'HANDLES', 'tail': 'Aluminum Foil'}, {'head': 'Aluminum Foil', 'relation': 'IS_USED_FOR', 'tail': 'Containing Substance'}]
2025-11-30 19:03:08,058 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 18.31s, LLM: 18.31s)
2025-11-30 19:03:08,058 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 18.31s
2025-11-30 19:03:08,058 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:03:08,058 - src.pipeline.kg_builder - INFO - Pushing batch 5/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:03:08,058 - src.components.neo4j_handler - INFO - Adding 20 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:03:08,291 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=84, relationships=70
2025-11-30 19:03:08,291 - src.components.neo4j_handler - INFO - Applying 3 merge instructions
2025-11-30 19:03:08,292 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Gloves
2025-11-30 19:03:08,296 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Glove
2025-11-30 19:03:08,296 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Gloves
2025-11-30 19:03:08,297 - src.components.neo4j_handler - INFO - Applying 13 prune instructions
2025-11-30 19:03:08,298 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> Smartphone
2025-11-30 19:03:08,299 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[USES]-> Smartphone
2025-11-30 19:03:08,300 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> White Pen
2025-11-30 19:03:08,301 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WEARS]-> Blue Nitrile Glove
2025-11-30 19:03:08,303 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WEARS]-> Blue Nitrile Gloves
2025-11-30 19:03:08,305 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> White Marker
2025-11-30 19:03:08,306 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[USES]-> White Marker
2025-11-30 19:03:08,308 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[FILLS_OUT]-> Chemistry Experiment Report
2025-11-30 19:03:08,309 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WRITES_ON]-> Report
2025-11-30 19:03:08,338 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WRITES_ON]-> Ar Glasses Training Chemistry Experiment Report - Simplified Version
2025-11-30 19:03:08,365 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[PLACES]-> Aluminum Foil
2025-11-30 19:03:08,367 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HANDLES]-> Aluminum Foil
2025-11-30 19:03:08,390 - src.components.neo4j_handler - DEBUG - Pruned relationship: Aluminum Foil -[IS_USED_FOR]-> Containing Substance
2025-11-30 19:03:08,390 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:03:08,392 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory
2025-11-30 19:03:08,420 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Uses]-> Smartphone
2025-11-30 19:03:08,422 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> White Pen
2025-11-30 19:03:08,449 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> White Marker
2025-11-30 19:03:08,451 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Blue Nitrile Glove
2025-11-30 19:03:08,452 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:03:08,456 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=83, relationships=59
2025-11-30 19:03:08,459 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:03:08,459 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:03:08,459 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:03:08,459 - src.components.neo4j_handler - INFO - Batch injected in 0.40s (triplets: 0.40s, indexes: 0.00s)
2025-11-30 19:03:08,461 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 22, 'with_embedding': 22, 'linked_chunks': 17}
2025-11-30 19:03:08,461 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:03:08,470 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 83 nodes
2025-11-30 19:03:08,477 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 78 nodes
2025-11-30 19:03:08,490 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 83, 'relationship_count': 184, 'density': 0.027, 'avg_degree': 4.4337, 'avg_unique_neighbors': 4.4337, 'global_efficiency': 0.3536, 'avg_path_length': 2.8262, 'avg_degree_centrality': 0.0541, 'max_degree_centrality': 0.4024, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0146, 'degree_assortativity': -0.2412, 'graph_robustness': 0.788, 'diameter_estimate': 4, 'clustering_coefficient': 0.2813, 'weakly_connected_components': 6, 'largest_wcc_size': 78, 'pagerank_top10_percent': 33.94, 'louvain_communities': 12, 'louvain_modularity': 0.5376, 'label_entropy': 1.4171, 'computational_time': 0.02882675500586629}
2025-11-30 19:03:08,490 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 4, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500588.490556, 'total_time': 24.807725948048756, 'aggregation': 2.810964360833168e-06, 'network_info': 0.005261145997792482, 'llm_extraction': 24.370077566010877, 'data_cleaning': 3.789202310144901e-05, 'neo4j_injection': 0.401343505945988, 'embedding_time': 0, 'indexing_time': 0.0026563169667497277, 'graph_injection_time': 0.39834885799791664, 'acs_metrics': {'node_count': 83, 'relationship_count': 184, 'density': 0.027, 'avg_degree': 4.4337, 'avg_unique_neighbors': 4.4337, 'global_efficiency': 0.3536, 'avg_path_length': 2.8262, 'avg_degree_centrality': 0.0541, 'max_degree_centrality': 0.4024, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0146, 'degree_assortativity': -0.2412, 'graph_robustness': 0.788, 'diameter_estimate': 4, 'clustering_coefficient': 0.2813, 'weakly_connected_components': 6, 'largest_wcc_size': 78, 'pagerank_top10_percent': 33.94, 'louvain_communities': 12, 'louvain_modularity': 0.5376, 'label_entropy': 1.4171, 'computational_time': 0.02882675500586629}, 'retrieval_queries': []}
2025-11-30 19:03:08,490 - src.pipeline.kg_builder - DEBUG - Batch 4 metrics: {
  "batch_idx": 4,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500588.490556,
  "total_time": 24.807725948048756,
  "aggregation": 2.810964360833168e-06,
  "network_info": 0.005261145997792482,
  "llm_extraction": 24.370077566010877,
  "data_cleaning": 3.789202310144901e-05,
  "neo4j_injection": 0.401343505945988,
  "embedding_time": 0,
  "indexing_time": 0.0026563169667497277,
  "graph_injection_time": 0.39834885799791664,
  "acs_metrics": {
    "node_count": 83,
    "relationship_count": 184,
    "density": 0.027,
    "avg_degree": 4.4337,
    "avg_unique_neighbors": 4.4337,
    "global_efficiency": 0.3536,
    "avg_path_length": 2.8262,
    "avg_degree_centrality": 0.0541,
    "max_degree_centrality": 0.4024,
    "avg_betweenness_centrality": 0.0006,
    "max_betweenness_centrality": 0.0146,
    "degree_assortativity": -0.2412,
    "graph_robustness": 0.788,
    "diameter_estimate": 4,
    "clustering_coefficient": 0.2813,
    "weakly_connected_components": 6,
    "largest_wcc_size": 78,
    "pagerank_top10_percent": 33.94,
    "louvain_communities": 12,
    "louvain_modularity": 0.5376,
    "label_entropy": 1.4171,
    "computational_time": 0.02882675500586629
  },
  "retrieval_queries": []
}
2025-11-30 19:03:08,491 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:03:08,491 - src.pipeline.kg_builder - INFO - Batch 5 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 24.37s, Clean: 0.00s, Neo4j: 0.40s, ACS: 0.03s
2025-11-30 19:03:08,491 - src.pipeline.kg_builder - INFO - Batch 5 completed in 24.81s
Processing KG batches:   7%|▋         | 5/72 [01:47<23:28, 21.02s/it]2025-11-30 19:03:08,491 - src.pipeline.kg_builder - INFO - Processing batch 6/72 (3 items)
2025-11-30 19:03:08,491 - src.pipeline.kg_builder - DEBUG - Batch 6 current_video_time: 01:24-01:29
2025-11-30 19:03:08,497 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 83
- Total Relationships: 59
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_0 ~233 words, content: Time: 01:14-01:19 Content: The video captures a sequence of actions in a laboratory setting, focusing on a person preparing a chemical experiment. The scene is...
2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1 ~228 words, content: , star-shaped component at the top, which is connected by tubing to the beaker on the stirrer. This suggests a setup for a reaction that...
2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_2 ~203 words, content: - **Frame 2:** The scene shifts to a different area of the lab. A person, wearing a beige sweater, is holding a white plastic bottle....
2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_3 ~209 words, content: a well-organized laboratory with a glass-fronted storage cabinet filled with various chemicals and reagents. The overall environment is clean and orderly. In summary, the video...
2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4 ~205 words, content: and can cause severe skin burns and eye damage. The background shows a laboratory environment with a glass-enclosed storage cabinet, a door, and a workbench....
2025-11-30 19:03:08,498 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_5 ~113 words, content: the bottle. The powder is then carefully transferred into a small, clear glass beaker that is resting on a digital balance scale. This indicates that...
2025-11-30 19:03:08,524 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:03:08,563 - src.components.pre_llm_injector - DEBUG - Found 22 existing chunk embeddings for similarity lookup
2025-11-30 19:03:08,570 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.800'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.759')]
2025-11-30 19:03:08,571 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4 via source_chunk_ids
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4 via source_chunk_ids
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.722'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_0', '0.715')]
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_0', '0.732'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.725')]
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.542'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.524')]
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1', '0.507'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.490')]
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.656'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.656')]
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.800'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.759')]
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:03:08,572 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_0) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:03:10,191 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:03:10,191 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:03:10,192 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1) (~228 words) with timeout=5.0s retries=3
2025-11-30 19:03:15,198 - src.components.pre_llm_injector - WARNING - Chunk 1 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:03:20,704 - src.components.pre_llm_injector - WARNING - Chunk 1 timed out after 5.0s (attempt 2/4), retrying...
2025-11-30 19:03:23,007 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 3)
2025-11-30 19:03:23,007 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:03:23,007 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_2) (~203 words) with timeout=5.0s retries=3
2025-11-30 19:03:24,259 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:03:24,259 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:03:24,260 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_3) (~209 words) with timeout=5.0s retries=3
2025-11-30 19:03:25,808 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:03:25,808 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:03:25,809 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4) (~205 words) with timeout=5.0s retries=3
2025-11-30 19:03:26,975 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:03:26,975 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:03:26,975 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_5) (~113 words) with timeout=5.0s retries=3
2025-11-30 19:03:28,514 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:03:28,514 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:03:28,514 - src.components.pre_llm_injector - INFO - Extracted 36 local triplets from 6 chunks
2025-11-30 19:03:28,514 - src.pipeline.kg_builder - INFO - Pre-extraction: 36 triplets in 20.02s
2025-11-30 19:03:28,515 - src.components.global_refiner - INFO - Capping refinement input: 36 → 15 triplets
2025-11-30 19:03:28,515 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
No subgraph context available
No existing entities or relations.

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Glove", "source_chunks": ["5_0"]}, {"head": "Magnetic_Stirrer", "relation": "Contains", "tail": "Glass_Beaker", "source_chunks": ["5_0"]}, {"head": "Glass_Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["5_0"]}, {"head": "Magnetic_Stirrer", "relation": "Displays", "tail": "0.180", "source_chunks": ["5_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Rod", "source_chunks": ["5_0"]}, {"head": "Glass_Rod", "relation": "Stirs", "tail": "Small_Glass_Container", "source_chunks": ["5_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Glove", "source_chunks": ["5_1"]}, {"head": "Person", "relation": "Interacts With", "tail": "Equipment", "source_chunks": ["5_1"]}, {"head": "Equipment", "relation": "Contains", "tail": "Glass Beaker", "source_chunks": ["5_1"]}, {"head": "Glass Beaker", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["5_1"]}, {"head": "Magnetic Stirrer", "relation": "Is On", "tail": "Laboratory Bench", "source_chunks": ["5_1"]}, {"head": "Laboratory Bench", "relation": "Contains", "tail": "Digital Balance", "source_chunks": ["5_1"]}, {"head": "Person", "relation": "Wears", "tail": "Beige Sweater", "source_chunks": ["5_2"]}, {"head": "Person", "relation": "Holds", "tail": "White Plastic Bottle", "source_chunks": ["5_2"]}, {"head": "White Plastic Bottle", "relation": "Contains", "tail": "Sodium Hydroxide", "source_chunks": ["5_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:03:28,515 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~459 words, ~597 tokens)
2025-11-30 19:03:28,515 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:03:35,530 - src.components.global_refiner - DEBUG - LLM call completed in 7.01s
2025-11-30 19:03:35,530 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Glove', ['5_0']], ['Magnetic_Stirrer', 'Contains', 'Glass_Beaker', ['5_0']], ['Glass_Beaker', 'Contains', 'Clear_Liquid', ['5_0']], ['Magnetic_Stirrer', 'Displays', '0.180', ['5_0']], ['Person', 'Holds', 'Glass_Rod', ['5_0']], ['Glass_Rod', 'Stirs', 'Small_Glass_Container', ['5_0']], ['Person', 'Wears', 'Blue Nitrile Glove', ['5_1']], ['Person', 'Interacts With', 'Equipment', ['5_1']], ['Equipment', 'Contains', 'Glass Beaker', ['5_1']], ['Glass Beaker', 'Is On', 'Magnetic Stirrer', ['5_1']], ['Magnetic Stirrer', 'Is On', 'Laboratory Bench', ['5_1']], ['Laboratory Bench', 'Contains', 'Digital Balance', ['5_1']], ['Person', 'Wears', 'Beige Sweater', ['5_2']], ['Person', 'Holds', 'White Plastic Bottle', ['5_2']], ['White Plastic Bottle', 'Contains', 'Sodium Hydroxide', ['5_2']]] inter_chunk_relations=[] merge_instructions=[] prune_instructions=[]
2025-11-30 19:03:35,530 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Glove', ['5_0']], ['Magnetic_Stirrer', 'Contains', 'Glass_Beaker', ['5_0']], ['Glass_Beaker', 'Contains', 'Clear_Liquid', ['5_0']]]
2025-11-30 19:03:35,531 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=0, sample=[]
2025-11-30 19:03:35,531 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:03:35,531 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:03:35,531 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 7.02s, LLM: 7.01s)
2025-11-30 19:03:35,531 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 7.02s
2025-11-30 19:03:35,531 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:03:35,531 - src.pipeline.kg_builder - INFO - Pushing batch 6/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:03:35,531 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:03:35,681 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=100, relationships=74
2025-11-30 19:03:35,681 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:03:35,687 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=100, relationships=74
2025-11-30 19:03:35,688 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:03:35,688 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:03:35,688 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:03:35,688 - src.components.neo4j_handler - INFO - Batch injected in 0.16s (triplets: 0.16s, indexes: 0.00s)
2025-11-30 19:03:35,689 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 28, 'with_embedding': 28, 'linked_chunks': 20}
2025-11-30 19:03:35,689 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:03:35,699 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 100 nodes
2025-11-30 19:03:35,708 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 92 nodes
2025-11-30 19:03:35,724 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 100, 'relationship_count': 217, 'density': 0.0219, 'avg_degree': 4.34, 'avg_unique_neighbors': 4.34, 'global_efficiency': 0.3334, 'avg_path_length': 2.8469, 'avg_degree_centrality': 0.0438, 'max_degree_centrality': 0.4141, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.01, 'degree_assortativity': -0.2347, 'graph_robustness': 0.7788, 'diameter_estimate': 4, 'clustering_coefficient': 0.2776, 'weakly_connected_components': 9, 'largest_wcc_size': 92, 'pagerank_top10_percent': 29.04, 'louvain_communities': 18, 'louvain_modularity': 0.5496, 'label_entropy': 1.4277, 'computational_time': 0.03483243705704808}
2025-11-30 19:03:35,724 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 5, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500615.7248478, 'total_time': 27.23363203392364, 'aggregation': 6.592948921024799e-06, 'network_info': 0.006053663091734052, 'llm_extraction': 27.033871848951094, 'data_cleaning': 3.303308039903641e-05, 'neo4j_injection': 0.15731177001725882, 'embedding_time': 0, 'indexing_time': 0.0015161910559982061, 'graph_injection_time': 0.15548197808675468, 'acs_metrics': {'node_count': 100, 'relationship_count': 217, 'density': 0.0219, 'avg_degree': 4.34, 'avg_unique_neighbors': 4.34, 'global_efficiency': 0.3334, 'avg_path_length': 2.8469, 'avg_degree_centrality': 0.0438, 'max_degree_centrality': 0.4141, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.01, 'degree_assortativity': -0.2347, 'graph_robustness': 0.7788, 'diameter_estimate': 4, 'clustering_coefficient': 0.2776, 'weakly_connected_components': 9, 'largest_wcc_size': 92, 'pagerank_top10_percent': 29.04, 'louvain_communities': 18, 'louvain_modularity': 0.5496, 'label_entropy': 1.4277, 'computational_time': 0.03483243705704808}, 'retrieval_queries': []}
2025-11-30 19:03:35,724 - src.pipeline.kg_builder - DEBUG - Batch 5 metrics: {
  "batch_idx": 5,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500615.7248478,
  "total_time": 27.23363203392364,
  "aggregation": 6.592948921024799e-06,
  "network_info": 0.006053663091734052,
  "llm_extraction": 27.033871848951094,
  "data_cleaning": 3.303308039903641e-05,
  "neo4j_injection": 0.15731177001725882,
  "embedding_time": 0,
  "indexing_time": 0.0015161910559982061,
  "graph_injection_time": 0.15548197808675468,
  "acs_metrics": {
    "node_count": 100,
    "relationship_count": 217,
    "density": 0.0219,
    "avg_degree": 4.34,
    "avg_unique_neighbors": 4.34,
    "global_efficiency": 0.3334,
    "avg_path_length": 2.8469,
    "avg_degree_centrality": 0.0438,
    "max_degree_centrality": 0.4141,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.01,
    "degree_assortativity": -0.2347,
    "graph_robustness": 0.7788,
    "diameter_estimate": 4,
    "clustering_coefficient": 0.2776,
    "weakly_connected_components": 9,
    "largest_wcc_size": 92,
    "pagerank_top10_percent": 29.04,
    "louvain_communities": 18,
    "louvain_modularity": 0.5496,
    "label_entropy": 1.4277,
    "computational_time": 0.03483243705704808
  },
  "retrieval_queries": []
}
2025-11-30 19:03:35,725 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:03:35,725 - src.pipeline.kg_builder - INFO - Batch 6 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 27.03s, Clean: 0.00s, Neo4j: 0.16s, ACS: 0.03s
2025-11-30 19:03:35,725 - src.pipeline.kg_builder - INFO - Batch 6 completed in 27.23s
Processing KG batches:   8%|▊         | 6/72 [02:15<25:26, 23.13s/it]2025-11-30 19:03:35,725 - src.pipeline.kg_builder - INFO - Processing batch 7/72 (3 items)
2025-11-30 19:03:35,725 - src.pipeline.kg_builder - DEBUG - Batch 7 current_video_time: 01:39-01:44
2025-11-30 19:03:35,732 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 100
- Total Relationships: 74
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:03:35,732 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:03:35,732 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_0 ~214 words, content: Time: 01:29-01:34 Content: The video sequence captures a scientific procedure, likely a chemical experiment, taking place in a laboratory setting. The perspective is first-person, showing...
2025-11-30 19:03:35,732 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1 ~218 words, content: **Preparation for Addition:** The experimenter holds the white bottle, which is labeled as a "GENERAL REAGENT" and has hazard symbols, indicating it contains a chemical...
2025-11-30 19:03:35,732 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2 ~221 words, content: opens the glass enclosure of the balance scale. They then use a small metal spatula to carefully scoop a white, powdery substance from the bottle....
2025-11-30 19:03:35,732 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3 ~132 words, content: substance being added. - **Procedure:** The person uses a small metal spatula to scoop the powder from the bottle. The action is deliberate and controlled,...
2025-11-30 19:03:35,759 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:03:35,793 - src.components.pre_llm_injector - DEBUG - Found 28 existing chunk embeddings for similarity lookup
2025-11-30 19:03:35,800 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.789')]
2025-11-30 19:03:35,801 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 via source_chunk_ids
2025-11-30 19:03:35,801 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:03:35,803 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[HOLDS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2)
2025-11-30 19:03:35,804 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.640'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.598')]
2025-11-30 19:03:35,804 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.653'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.625')]
2025-11-30 19:03:35,804 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.691'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4', '0.677')]
2025-11-30 19:03:35,804 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.789')]
2025-11-30 19:03:35,804 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:03:35,804 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_0) (~214 words) with timeout=5.0s retries=3
2025-11-30 19:03:37,335 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:03:37,335 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:03:37,335 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1) (~218 words) with timeout=5.0s retries=3
2025-11-30 19:03:38,850 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:03:38,850 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:03:38,850 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:03:40,386 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:03:40,386 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:03:40,387 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3) (~132 words) with timeout=5.0s retries=3
2025-11-30 19:03:41,373 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:03:41,373 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:03:41,373 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 4 chunks
2025-11-30 19:03:41,373 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 5.64s
2025-11-30 19:03:41,374 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:03:41,374 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[HOLDS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Experimenter", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["6_0"]}, {"head": "Experimenter", "relation": "Holds", "tail": "White Bottle", "source_chunks": ["6_0"]}, {"head": "White Bottle", "relation": "Contains", "tail": "White Solid Substance", "source_chunks": ["6_0"]}, {"head": "Beaker", "relation": "Is Placed In", "tail": "Precision Balance", "source_chunks": ["6_0"]}, {"head": "Precision Balance", "relation": "Displays", "tail": "56.303 G", "source_chunks": ["6_0"]}, {"head": "Experimenter", "relation": "Tares", "tail": "Precision Balance", "source_chunks": ["6_0"]}, {"head": "Experimenter", "relation": "Holds", "tail": "Reagent Bottle", "source_chunks": ["6_1"]}, {"head": "Reagent Bottle", "relation": "Is Labeled As", "tail": "General Reagent", "source_chunks": ["6_1"]}, {"head": "Reagent Bottle", "relation": "Has Hazard Symbols", "tail": "Chemical", "source_chunks": ["6_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Balance Scale", "source_chunks": ["6_1"]}, {"head": "Experimenter", "relation": "Opens", "tail": "Balance Scale Enclosure", "source_chunks": ["6_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["6_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["6_2"]}, {"head": "Person", "relation": "Opens", "tail": "Glass_Enclosure", "source_chunks": ["6_2"]}, {"head": "Person", "relation": "Uses", "tail": "Metal_Spatula", "source_chunks": ["6_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:03:41,374 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~645 words, ~838 tokens)
2025-11-30 19:03:41,374 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:03:59,016 - src.components.global_refiner - DEBUG - LLM call completed in 17.64s
2025-11-30 19:03:59,016 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Experimenter', 'Wears', 'Blue Nitrile Gloves', ['6_0']], ['Experimenter', 'Holds', 'White Bottle', ['6_0']], ['White Bottle', 'Contains', 'White Solid Substance', ['6_0']], ['Beaker', 'Is Placed In', 'Precision Balance', ['6_0']], ['Precision Balance', 'Displays', '56.303 G', ['6_0']], ['Experimenter', 'Tares', 'Precision Balance', ['6_0']], ['Experimenter', 'Holds', 'Reagent Bottle', ['6_1']], ['Reagent Bottle', 'Is Labeled As', 'General Reagent', ['6_1']], ['Reagent Bottle', 'Has Hazard Symbols', 'Chemical', ['6_1']], ['Beaker', 'Is On', 'Balance Scale', ['6_1']], ['Experimenter', 'Opens', 'Balance Scale Enclosure', ['6_1']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['6_1']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['6_2']], ['Person', 'Opens', 'Glass_Enclosure', ['6_2']], ['Person', 'Uses', 'Metal_Spatula', ['6_2']]] inter_chunk_relations=[['Experimenter', 'Wears', 'Blue Nitrile Gloves', ['6_0']], ['Experimenter', 'Holds', 'White Bottle', ['6_0']], ['Beaker', 'Is Placed In', 'Precision Balance', ['6_0']], ['Precision Balance', 'Displays', '56.303 G', ['6_0']], ['Experimenter', 'Tares', 'Precision Balance', ['6_0']], ['Experimenter', 'Holds', 'Reagent Bottle', ['6_1']], ['Reagent Bottle', 'Is Labeled As', 'General Reagent', ['6_1']], ['Reagent Bottle', 'Has Hazard Symbols', 'Chemical', ['6_1']], ['Beaker', 'Is On', 'Balance Scale', ['6_1']], ['Experimenter', 'Opens', 'Balance Scale Enclosure', ['6_1']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['6_1']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['6_2']], ['Person', 'Opens', 'Glass_Enclosure', ['6_2']], ['Person', 'Uses', 'Metal_Spatula', ['6_2']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:03:59,016 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Experimenter', 'Wears', 'Blue Nitrile Gloves', ['6_0']], ['Experimenter', 'Holds', 'White Bottle', ['6_0']], ['White Bottle', 'Contains', 'White Solid Substance', ['6_0']]]
2025-11-30 19:03:59,016 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=14, sample=[['Experimenter', 'Wears', 'Blue Nitrile Gloves', ['6_0']], ['Experimenter', 'Holds', 'White Bottle', ['6_0']], ['Beaker', 'Is Placed In', 'Precision Balance', ['6_0']]]
2025-11-30 19:03:59,016 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}]
2025-11-30 19:03:59,016 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:03:59,016 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}]
2025-11-30 19:03:59,016 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:03:59,017 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 29 triplets (total: 17.64s, LLM: 17.64s)
2025-11-30 19:03:59,017 - src.pipeline.kg_builder - INFO - Global refinement: 29 triplets in 17.64s
2025-11-30 19:03:59,017 - src.pipeline.kg_builder - INFO - Using 29 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:03:59,017 - src.pipeline.kg_builder - INFO - Pushing batch 7/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:03:59,017 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:03:59,189 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=115, relationships=89
2025-11-30 19:03:59,189 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:03:59,190 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue Nitrile Glove
2025-11-30 19:03:59,195 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Glove
2025-11-30 19:03:59,199 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue Nitrile Glove
2025-11-30 19:03:59,200 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue Nitrile Glove
2025-11-30 19:03:59,200 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:03:59,201 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:03:59,201 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:03:59,202 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:03:59,202 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:03:59,202 - src.components.neo4j_handler - INFO - Applying 14 inter-chunk relations
2025-11-30 19:03:59,202 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Experimenter -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:03:59,204 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Experimenter -[Holds]-> White Bottle
2025-11-30 19:03:59,231 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is Placed In]-> Precision Balance
2025-11-30 19:03:59,233 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Precision Balance -[Displays]-> 56.303 G
2025-11-30 19:03:59,235 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Experimenter -[Tares]-> Precision Balance
2025-11-30 19:03:59,236 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Experimenter -[Holds]-> Reagent Bottle
2025-11-30 19:03:59,263 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Reagent Bottle -[Is Labeled As]-> General Reagent
2025-11-30 19:03:59,292 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Reagent Bottle -[Has Hazard Symbols]-> Chemical
2025-11-30 19:03:59,294 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Balance Scale
2025-11-30 19:03:59,321 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Experimenter -[Opens]-> Balance Scale Enclosure
2025-11-30 19:03:59,322 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:03:59,325 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:03:59,352 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Opens]-> Glass_Enclosure
2025-11-30 19:03:59,354 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Uses]-> Metal_Spatula
2025-11-30 19:03:59,355 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:03:59,359 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=113, relationships=89
2025-11-30 19:03:59,362 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:03:59,362 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:03:59,362 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:03:59,362 - src.components.neo4j_handler - INFO - Batch injected in 0.35s (triplets: 0.34s, indexes: 0.00s)
2025-11-30 19:03:59,363 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 32, 'with_embedding': 32, 'linked_chunks': 23}
2025-11-30 19:03:59,363 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:03:59,371 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 113 nodes
2025-11-30 19:03:59,380 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 104 nodes
2025-11-30 19:03:59,395 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 113, 'relationship_count': 247, 'density': 0.0195, 'avg_degree': 4.3717, 'avg_unique_neighbors': 4.3717, 'global_efficiency': 0.3262, 'avg_path_length': 2.9094, 'avg_degree_centrality': 0.039, 'max_degree_centrality': 0.4018, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0062, 'degree_assortativity': -0.2117, 'graph_robustness': 0.8178, 'diameter_estimate': 5, 'clustering_coefficient': 0.2852, 'weakly_connected_components': 10, 'largest_wcc_size': 104, 'pagerank_top10_percent': 26.01, 'louvain_communities': 18, 'louvain_modularity': 0.5512, 'label_entropy': 1.4299, 'computational_time': 0.032081927987746894}
2025-11-30 19:03:59,395 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 6, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500639.3957372, 'total_time': 23.67022366891615, 'aggregation': 3.2830284908413887e-06, 'network_info': 0.006640519015491009, 'llm_extraction': 23.284822596004233, 'data_cleaning': 4.036200698465109e-05, 'neo4j_injection': 0.34541923203505576, 'embedding_time': 0, 'indexing_time': 0.0026306320214644074, 'graph_injection_time': 0.34246907592751086, 'acs_metrics': {'node_count': 113, 'relationship_count': 247, 'density': 0.0195, 'avg_degree': 4.3717, 'avg_unique_neighbors': 4.3717, 'global_efficiency': 0.3262, 'avg_path_length': 2.9094, 'avg_degree_centrality': 0.039, 'max_degree_centrality': 0.4018, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0062, 'degree_assortativity': -0.2117, 'graph_robustness': 0.8178, 'diameter_estimate': 5, 'clustering_coefficient': 0.2852, 'weakly_connected_components': 10, 'largest_wcc_size': 104, 'pagerank_top10_percent': 26.01, 'louvain_communities': 18, 'louvain_modularity': 0.5512, 'label_entropy': 1.4299, 'computational_time': 0.032081927987746894}, 'retrieval_queries': []}
2025-11-30 19:03:59,395 - src.pipeline.kg_builder - DEBUG - Batch 6 metrics: {
  "batch_idx": 6,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500639.3957372,
  "total_time": 23.67022366891615,
  "aggregation": 3.2830284908413887e-06,
  "network_info": 0.006640519015491009,
  "llm_extraction": 23.284822596004233,
  "data_cleaning": 4.036200698465109e-05,
  "neo4j_injection": 0.34541923203505576,
  "embedding_time": 0,
  "indexing_time": 0.0026306320214644074,
  "graph_injection_time": 0.34246907592751086,
  "acs_metrics": {
    "node_count": 113,
    "relationship_count": 247,
    "density": 0.0195,
    "avg_degree": 4.3717,
    "avg_unique_neighbors": 4.3717,
    "global_efficiency": 0.3262,
    "avg_path_length": 2.9094,
    "avg_degree_centrality": 0.039,
    "max_degree_centrality": 0.4018,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0062,
    "degree_assortativity": -0.2117,
    "graph_robustness": 0.8178,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2852,
    "weakly_connected_components": 10,
    "largest_wcc_size": 104,
    "pagerank_top10_percent": 26.01,
    "louvain_communities": 18,
    "louvain_modularity": 0.5512,
    "label_entropy": 1.4299,
    "computational_time": 0.032081927987746894
  },
  "retrieval_queries": []
}
2025-11-30 19:03:59,396 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:03:59,396 - src.pipeline.kg_builder - INFO - Batch 7 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 23.28s, Clean: 0.00s, Neo4j: 0.35s, ACS: 0.03s
2025-11-30 19:03:59,396 - src.pipeline.kg_builder - INFO - Batch 7 completed in 23.67s
Processing KG batches:  10%|▉         | 7/72 [02:38<25:14, 23.31s/it]2025-11-30 19:03:59,396 - src.pipeline.kg_builder - INFO - Processing batch 8/72 (3 items)
2025-11-30 19:03:59,396 - src.pipeline.kg_builder - DEBUG - Batch 8 current_video_time: 01:54-01:59
2025-11-30 19:03:59,401 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 113
- Total Relationships: 89
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:03:59,401 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:03:59,401 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_0 ~236 words, content: Time: 01:44-01:49 Content: The video shows a person in a laboratory setting performing a precise measurement. The scene is viewed from a first-person perspective, focusing...
2025-11-30 19:03:59,401 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_1 ~229 words, content: from air currents. The person uses a small metal spatula to scoop the powder from a white container with a red lid. The powder is...
2025-11-30 19:03:59,401 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2 ~91 words, content: , indicating a need for accuracy. - **Environment:** The scene is a laboratory, identifiable by the workbench, cabinets, and a fire extinguisher visible in the...
2025-11-30 19:03:59,422 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:03:59,450 - src.components.pre_llm_injector - DEBUG - Found 32 existing chunk embeddings for similarity lookup
2025-11-30 19:03:59,456 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.799')]
2025-11-30 19:03:59,457 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4 via source_chunk_ids
2025-11-30 19:03:59,457 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:03:59,459 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2)
2025-11-30 19:03:59,459 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_0', '0.527'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_1', '0.503')]
2025-11-30 19:03:59,459 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.664'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1', '0.632')]
2025-11-30 19:03:59,459 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.799')]
2025-11-30 19:03:59,459 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:03:59,459 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_0) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:04:00,823 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:04:00,823 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:04:00,823 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:04:01,992 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:04:01,992 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:04:01,992 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2) (~91 words) with timeout=5.0s retries=3
2025-11-30 19:04:03,119 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:04:03,119 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:04:03,119 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:04:03,119 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 3.72s
2025-11-30 19:04:03,120 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:04:03,120 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["7_0", "7_1"]}, {"head": "Person", "relation": "Holds", "tail": "White_Plastic_Bottle", "source_chunks": ["7_0"]}, {"head": "Person", "relation": "Uses", "tail": "Metal_Spatula", "source_chunks": ["7_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Beaker", "source_chunks": ["7_0"]}, {"head": "Glass_Beaker", "relation": "Is On", "tail": "Balance_Scale", "source_chunks": ["7_0"]}, {"head": "Balance_Scale", "relation": "Is Inside", "tail": "Glass_Draft_Shield", "source_chunks": ["7_0"]}, {"head": "Person", "relation": "Holds", "tail": "Container", "source_chunks": ["7_1"]}, {"head": "Person", "relation": "Uses", "tail": "Spatula", "source_chunks": ["7_1"]}, {"head": "Container", "relation": "Contains", "tail": "Powder", "source_chunks": ["7_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Scale", "source_chunks": ["7_1"]}, {"head": "Powder", "relation": "Is Transferred To", "tail": "Beaker", "source_chunks": ["7_1"]}, {"head": "Person", "relation": "Wears", "tail": "Watch", "source_chunks": ["7_2"]}, {"head": "Person", "relation": "Performs", "tail": "Weighing_By_Difference", "source_chunks": ["7_2"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Workbench", "source_chunks": ["7_2"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Cabinets", "source_chunks": ["7_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:04:03,120 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~657 words, ~854 tokens)
2025-11-30 19:04:03,120 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:04:18,020 - src.components.global_refiner - DEBUG - LLM call completed in 14.90s
2025-11-30 19:04:18,020 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['7_0']], ['Person', 'Holds', 'White_Plastic_Bottle', ['7_0']], ['Person', 'Uses', 'Metal_Spatula', ['7_0']], ['Person', 'Holds', 'Glass_Beaker', ['7_0']], ['Glass_Beaker', 'Is On', 'Balance_Scale', ['7_0']], ['Balance_Scale', 'Is Inside', 'Glass_Draft_Shield', ['7_0']], ['Person', 'Holds', 'Container', ['7_1']], ['Person', 'Uses', 'Spatula', ['7_1']], ['Container', 'Contains', 'Powder', ['7_1']], ['Beaker', 'Is On', 'Scale', ['7_1']], ['Powder', 'Is Transferred To', 'Beaker', ['7_1']], ['Person', 'Wears', 'Watch', ['7_2']], ['Person', 'Performs', 'Weighing_By_Difference', ['7_2']], ['Laboratory', 'Contains', 'Workbench', ['7_2']], ['Laboratory', 'Contains', 'Cabinets', ['7_2']]] inter_chunk_relations=[['Glass_Beaker', 'Is On', 'Balance_Scale', ['7_0']], ['Balance_Scale', 'Is Inside', 'Glass_Draft_Shield', ['7_0']], ['Person', 'Holds', 'Container', ['7_1']], ['Container', 'Contains', 'Powder', ['7_1']], ['Beaker', 'Is On', 'Scale', ['7_1']], ['Powder', 'Is Transferred To', 'Beaker', ['7_1']], ['Person', 'Wears', 'Watch', ['7_2']], ['Person', 'Performs', 'Weighing_By_Difference', ['7_2']], ['Laboratory', 'Contains', 'Workbench', ['7_2']], ['Laboratory', 'Contains', 'Cabinets', ['7_2']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '2_0'}, {'local': 'White_Plastic_Bottle', 'existing': 'White Plastic Bottle', 'existing_id': '5_2'}, {'local': 'Metal_Spatula', 'existing': 'Metal_Spatula', 'existing_id': '6_2'}, {'local': 'Glass_Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}] prune_instructions=[{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}]
2025-11-30 19:04:18,020 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['7_0']], ['Person', 'Holds', 'White_Plastic_Bottle', ['7_0']], ['Person', 'Uses', 'Metal_Spatula', ['7_0']]]
2025-11-30 19:04:18,020 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=10, sample=[['Glass_Beaker', 'Is On', 'Balance_Scale', ['7_0']], ['Balance_Scale', 'Is Inside', 'Glass_Draft_Shield', ['7_0']], ['Person', 'Holds', 'Container', ['7_1']]]
2025-11-30 19:04:18,020 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '2_0'}, {'local': 'White_Plastic_Bottle', 'existing': 'White Plastic Bottle', 'existing_id': '5_2'}, {'local': 'Metal_Spatula', 'existing': 'Metal_Spatula', 'existing_id': '6_2'}]
2025-11-30 19:04:18,020 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}]
2025-11-30 19:04:18,020 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '2_0'}, {'local': 'White_Plastic_Bottle', 'existing': 'White Plastic Bottle', 'existing_id': '5_2'}, {'local': 'Metal_Spatula', 'existing': 'Metal_Spatula', 'existing_id': '6_2'}, {'local': 'Glass_Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}]
2025-11-30 19:04:18,020 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue_Nitrile_Glove'}]
2025-11-30 19:04:18,020 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 25 triplets (total: 14.90s, LLM: 14.90s)
2025-11-30 19:04:18,020 - src.pipeline.kg_builder - INFO - Global refinement: 25 triplets in 14.90s
2025-11-30 19:04:18,020 - src.pipeline.kg_builder - INFO - Using 25 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:04:18,020 - src.pipeline.kg_builder - INFO - Pushing batch 8/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:04:18,020 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:04:18,159 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=125, relationships=102
2025-11-30 19:04:18,159 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:04:18,159 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue_Nitrile_Glove
2025-11-30 19:04:18,164 - src.components.neo4j_handler - DEBUG - APOC merge successful: White_Plastic_Bottle -> White Plastic Bottle
2025-11-30 19:04:18,164 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Metal_Spatula -> Metal_Spatula
2025-11-30 19:04:18,168 - src.components.neo4j_handler - DEBUG - APOC merge successful: Glass_Beaker -> Beaker
2025-11-30 19:04:18,168 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:04:18,174 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WEARS]-> Blue_Nitrile_Glove
2025-11-30 19:04:18,175 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[WEARS]-> Blue_Nitrile_Glove
2025-11-30 19:04:18,175 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[WEARS]-> Blue_Nitrile_Glove
2025-11-30 19:04:18,176 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[WEARS]-> Blue_Nitrile_Glove
2025-11-30 19:04:18,176 - src.components.neo4j_handler - INFO - Applying 10 inter-chunk relations
2025-11-30 19:04:18,176 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Glass_Beaker -[Is On]-> Balance_Scale
2025-11-30 19:04:18,178 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Balance_Scale -[Is Inside]-> Glass_Draft_Shield
2025-11-30 19:04:18,179 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Container
2025-11-30 19:04:18,183 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Container -[Contains]-> Powder
2025-11-30 19:04:18,184 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Scale
2025-11-30 19:04:18,218 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Powder -[Is Transferred To]-> Beaker
2025-11-30 19:04:18,219 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Wears]-> Watch
2025-11-30 19:04:18,221 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Performs]-> Weighing_By_Difference
2025-11-30 19:04:18,222 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory -[Contains]-> Workbench
2025-11-30 19:04:18,224 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory -[Contains]-> Cabinets
2025-11-30 19:04:18,225 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:04:18,231 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=122, relationships=100
2025-11-30 19:04:18,234 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:04:18,234 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:04:18,234 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:04:18,234 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:04:18,235 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 35, 'with_embedding': 35, 'linked_chunks': 26}
2025-11-30 19:04:18,235 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:04:18,244 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 122 nodes
2025-11-30 19:04:18,254 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 113 nodes
2025-11-30 19:04:18,272 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 122, 'relationship_count': 273, 'density': 0.0185, 'avg_degree': 4.4754, 'avg_unique_neighbors': 4.4754, 'global_efficiency': 0.332, 'avg_path_length': 2.8805, 'avg_degree_centrality': 0.037, 'max_degree_centrality': 0.4132, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0142, 'degree_assortativity': -0.2123, 'graph_robustness': 0.8462, 'diameter_estimate': 5, 'clustering_coefficient': 0.2831, 'weakly_connected_components': 10, 'largest_wcc_size': 113, 'pagerank_top10_percent': 23.17, 'louvain_communities': 18, 'louvain_modularity': 0.5331, 'label_entropy': 1.4323, 'computational_time': 0.03694148897193372}
2025-11-30 19:04:18,272 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 7, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500658.2729044, 'total_time': 18.876604620949365, 'aggregation': 2.5170156732201576e-06, 'network_info': 0.005034851958043873, 'llm_extraction': 18.619251398020424, 'data_cleaning': 2.951000351458788e-05, 'neo4j_injection': 0.21407872601412237, 'embedding_time': 0, 'indexing_time': 0.0029680209700018167, 'graph_injection_time': 0.2108867900678888, 'acs_metrics': {'node_count': 122, 'relationship_count': 273, 'density': 0.0185, 'avg_degree': 4.4754, 'avg_unique_neighbors': 4.4754, 'global_efficiency': 0.332, 'avg_path_length': 2.8805, 'avg_degree_centrality': 0.037, 'max_degree_centrality': 0.4132, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0142, 'degree_assortativity': -0.2123, 'graph_robustness': 0.8462, 'diameter_estimate': 5, 'clustering_coefficient': 0.2831, 'weakly_connected_components': 10, 'largest_wcc_size': 113, 'pagerank_top10_percent': 23.17, 'louvain_communities': 18, 'louvain_modularity': 0.5331, 'label_entropy': 1.4323, 'computational_time': 0.03694148897193372}, 'retrieval_queries': []}
2025-11-30 19:04:18,272 - src.pipeline.kg_builder - DEBUG - Batch 7 metrics: {
  "batch_idx": 7,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500658.2729044,
  "total_time": 18.876604620949365,
  "aggregation": 2.5170156732201576e-06,
  "network_info": 0.005034851958043873,
  "llm_extraction": 18.619251398020424,
  "data_cleaning": 2.951000351458788e-05,
  "neo4j_injection": 0.21407872601412237,
  "embedding_time": 0,
  "indexing_time": 0.0029680209700018167,
  "graph_injection_time": 0.2108867900678888,
  "acs_metrics": {
    "node_count": 122,
    "relationship_count": 273,
    "density": 0.0185,
    "avg_degree": 4.4754,
    "avg_unique_neighbors": 4.4754,
    "global_efficiency": 0.332,
    "avg_path_length": 2.8805,
    "avg_degree_centrality": 0.037,
    "max_degree_centrality": 0.4132,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0142,
    "degree_assortativity": -0.2123,
    "graph_robustness": 0.8462,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2831,
    "weakly_connected_components": 10,
    "largest_wcc_size": 113,
    "pagerank_top10_percent": 23.17,
    "louvain_communities": 18,
    "louvain_modularity": 0.5331,
    "label_entropy": 1.4323,
    "computational_time": 0.03694148897193372
  },
  "retrieval_queries": []
}
2025-11-30 19:04:18,273 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:04:18,273 - src.pipeline.kg_builder - INFO - Batch 8 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 18.62s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.04s
2025-11-30 19:04:18,273 - src.pipeline.kg_builder - INFO - Batch 8 completed in 18.88s
Processing KG batches:  11%|█         | 8/72 [02:57<23:21, 21.90s/it]2025-11-30 19:04:18,273 - src.pipeline.kg_builder - INFO - Processing batch 9/72 (3 items)
2025-11-30 19:04:18,273 - src.pipeline.kg_builder - DEBUG - Batch 9 current_video_time: 02:09-02:14
2025-11-30 19:04:18,282 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 122
- Total Relationships: 100
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:04:18,283 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:04:18,283 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0 ~222 words, content: Time: 01:59-02:04 Content: The video sequence captures a precise laboratory procedure, likely the weighing of a solid chemical. The scene is set in a laboratory...
2025-11-30 19:04:18,283 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1 ~222 words, content: **Final Steps:** After adding the desired amount of the substance, the person closes the glass draft shield. The video ends with the person having completed...
2025-11-30 19:04:18,283 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2 ~209 words, content: spatula to carefully scoop the powder from the bottle and deposit it into the beaker. The digital display of the balance shows a reading of...
2025-11-30 19:04:18,303 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:04:18,334 - src.components.pre_llm_injector - DEBUG - Found 35 existing chunk embeddings for similarity lookup
2025-11-30 19:04:18,340 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4', '0.850'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.775')]
2025-11-30 19:04:18,342 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4 via source_chunk_ids
2025-11-30 19:04:18,342 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:04:18,344 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2)
2025-11-30 19:04:18,344 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.526'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.524')]
2025-11-30 19:04:18,344 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4', '0.850'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.664')]
2025-11-30 19:04:18,344 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.775'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.770')]
2025-11-30 19:04:18,344 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:04:18,345 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:04:19,845 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:04:19,845 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:04:19,845 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:04:20,908 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:04:20,908 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:04:20,909 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2) (~209 words) with timeout=5.0s retries=3
2025-11-30 19:04:22,194 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:04:22,194 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:04:22,194 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:04:22,194 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 3.91s
2025-11-30 19:04:22,194 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:04:22,195 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["8_0", "8_2"]}, {"head": "Person", "relation": "Holds", "tail": "White_Plastic_Bottle", "source_chunks": ["8_0"]}, {"head": "Person", "relation": "Uses", "tail": "Metal_Spoon", "source_chunks": ["8_0"]}, {"head": "Person", "relation": "Adds", "tail": "White_Powder", "source_chunks": ["8_0"]}, {"head": "White_Powder", "relation": "Is Transferred To", "tail": "Glass_Beaker", "source_chunks": ["8_0"]}, {"head": "Glass_Beaker", "relation": "Is On", "tail": "Balance_Scale", "source_chunks": ["8_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["8_1"]}, {"head": "Person", "relation": "Uses", "tail": "Balance", "source_chunks": ["8_1"]}, {"head": "Balance", "relation": "Contains", "tail": "Beaker", "source_chunks": ["8_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "White Powder", "source_chunks": ["8_1"]}, {"head": "Person", "relation": "Transfers", "tail": "White Powder", "source_chunks": ["8_1"]}, {"head": "Balance", "relation": "Is Inside", "tail": "Glass Draft Shield", "source_chunks": ["8_1"]}, {"head": "Person", "relation": "Uses", "tail": "Spatula", "source_chunks": ["8_2"]}, {"head": "Spatula", "relation": "Transfers", "tail": "Powder", "source_chunks": ["8_2"]}, {"head": "Powder", "relation": "Is Deposited In", "tail": "Beaker", "source_chunks": ["8_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:04:22,195 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~797 words, ~1036 tokens)
2025-11-30 19:04:22,195 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:04:35,127 - src.components.global_refiner - DEBUG - LLM call completed in 12.93s
2025-11-30 19:04:35,127 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['8_0']], ['Person', 'Holds', 'White_Plastic_Bottle', ['8_0']], ['Person', 'Uses', 'Metal_Spoon', ['8_0']], ['Person', 'Adds', 'White_Powder', ['8_0']], ['White_Powder', 'Is Transferred To', 'Glass_Beaker', ['8_0']], ['Glass_Beaker', 'Is On', 'Balance_Scale', ['8_0']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['8_1']], ['Person', 'Uses', 'Balance', ['8_1']], ['Balance', 'Contains', 'Beaker', ['8_1']], ['Beaker', 'Contains', 'White Powder', ['8_1']], ['Person', 'Transfers', 'White Powder', ['8_1']], ['Balance', 'Is Inside', 'Glass Draft Shield', ['8_1']], ['Person', 'Uses', 'Spatula', ['8_2']], ['Spatula', 'Transfers', 'Powder', ['8_2']], ['Powder', 'Is Deposited In', 'Beaker', ['8_2']]] inter_chunk_relations=[['Glass_Beaker', 'Is On', 'Laboratory Table', ['8_0']], ['Balance', 'Contains', 'Laboratory Table', ['8_1']], ['Balance', 'Is Inside', 'Glass Cabinet', ['8_1']], ['Person', 'Wears', 'Blue Gloves', ['8_0']], ['Person', 'Holds', 'White Pen', ['8_0']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'White_Plastic_Bottle', 'existing': 'White Plastic Bottle', 'existing_id': '5_2'}, {'local': 'Metal_Spoon', 'existing': 'Metal_Spatula', 'existing_id': '6_2'}] prune_instructions=[{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'Blue Nitrile Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Nitrile Glove'}]
2025-11-30 19:04:35,127 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['8_0']], ['Person', 'Holds', 'White_Plastic_Bottle', ['8_0']], ['Person', 'Uses', 'Metal_Spoon', ['8_0']]]
2025-11-30 19:04:35,127 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Glass_Beaker', 'Is On', 'Laboratory Table', ['8_0']], ['Balance', 'Contains', 'Laboratory Table', ['8_1']], ['Balance', 'Is Inside', 'Glass Cabinet', ['8_1']]]
2025-11-30 19:04:35,128 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'White_Plastic_Bottle', 'existing': 'White Plastic Bottle', 'existing_id': '5_2'}]
2025-11-30 19:04:35,128 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'Blue Nitrile Glove'}]
2025-11-30 19:04:35,128 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue Nitrile Glove', 'existing_id': '2_0'}, {'local': 'White_Plastic_Bottle', 'existing': 'White Plastic Bottle', 'existing_id': '5_2'}, {'local': 'Metal_Spoon', 'existing': 'Metal_Spatula', 'existing_id': '6_2'}]
2025-11-30 19:04:35,128 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'Blue Nitrile Glove'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Nitrile Glove'}]
2025-11-30 19:04:35,128 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 12.93s, LLM: 12.93s)
2025-11-30 19:04:35,128 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 12.93s
2025-11-30 19:04:35,128 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:04:35,128 - src.pipeline.kg_builder - INFO - Pushing batch 9/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:04:35,128 - src.components.neo4j_handler - INFO - Adding 20 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:04:35,335 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=133, relationships=116
2025-11-30 19:04:35,335 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:04:35,335 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Glove
2025-11-30 19:04:35,340 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue Nitrile Glove
2025-11-30 19:04:35,344 - src.components.neo4j_handler - DEBUG - APOC merge successful: White_Plastic_Bottle -> White Plastic Bottle
2025-11-30 19:04:35,349 - src.components.neo4j_handler - DEBUG - APOC merge successful: Metal_Spoon -> Metal_Spatula
2025-11-30 19:04:35,349 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:04:35,356 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WEARS]-> Blue Gloves
2025-11-30 19:04:35,358 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> White Pen
2025-11-30 19:04:35,359 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> Blue Nitrile Glove
2025-11-30 19:04:35,361 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WEARS]-> Blue Nitrile Glove
2025-11-30 19:04:35,361 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:04:35,362 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Glass_Beaker -[Is On]-> Laboratory Table
2025-11-30 19:04:35,364 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Balance -[Contains]-> Laboratory Table
2025-11-30 19:04:35,365 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Balance -[Is Inside]-> Glass Cabinet
2025-11-30 19:04:35,367 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Wears]-> Blue Gloves
2025-11-30 19:04:35,368 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> White Pen
2025-11-30 19:04:35,368 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:04:35,373 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=129, relationships=110
2025-11-30 19:04:35,376 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:04:35,376 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:04:35,377 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:04:35,377 - src.components.neo4j_handler - INFO - Batch injected in 0.25s (triplets: 0.24s, indexes: 0.00s)
2025-11-30 19:04:35,379 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 38, 'with_embedding': 38, 'linked_chunks': 29}
2025-11-30 19:04:35,379 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:04:35,393 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 129 nodes
2025-11-30 19:04:35,410 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 120 nodes
2025-11-30 19:04:35,435 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 129, 'relationship_count': 305, 'density': 0.0185, 'avg_degree': 4.7287, 'avg_unique_neighbors': 4.7287, 'global_efficiency': 0.3375, 'avg_path_length': 2.8548, 'avg_degree_centrality': 0.0369, 'max_degree_centrality': 0.4219, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0201, 'degree_assortativity': -0.2017, 'graph_robustness': 0.8689, 'diameter_estimate': 5, 'clustering_coefficient': 0.2711, 'weakly_connected_components': 10, 'largest_wcc_size': 120, 'pagerank_top10_percent': 21.53, 'louvain_communities': 19, 'louvain_modularity': 0.5073, 'label_entropy': 1.4373, 'computational_time': 0.05635104689281434}
2025-11-30 19:04:35,436 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 8, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500675.4360359, 'total_time': 17.16259336192161, 'aggregation': 2.7460046112537384e-06, 'network_info': 0.00930544501170516, 'llm_extraction': 16.84525815094821, 'data_cleaning': 1.544295810163021e-05, 'neo4j_injection': 0.24909145501442254, 'embedding_time': 0, 'indexing_time': 0.00409869896247983, 'graph_injection_time': 0.24481260892935097, 'acs_metrics': {'node_count': 129, 'relationship_count': 305, 'density': 0.0185, 'avg_degree': 4.7287, 'avg_unique_neighbors': 4.7287, 'global_efficiency': 0.3375, 'avg_path_length': 2.8548, 'avg_degree_centrality': 0.0369, 'max_degree_centrality': 0.4219, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0201, 'degree_assortativity': -0.2017, 'graph_robustness': 0.8689, 'diameter_estimate': 5, 'clustering_coefficient': 0.2711, 'weakly_connected_components': 10, 'largest_wcc_size': 120, 'pagerank_top10_percent': 21.53, 'louvain_communities': 19, 'louvain_modularity': 0.5073, 'label_entropy': 1.4373, 'computational_time': 0.05635104689281434}, 'retrieval_queries': []}
2025-11-30 19:04:35,436 - src.pipeline.kg_builder - DEBUG - Batch 8 metrics: {
  "batch_idx": 8,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500675.4360359,
  "total_time": 17.16259336192161,
  "aggregation": 2.7460046112537384e-06,
  "network_info": 0.00930544501170516,
  "llm_extraction": 16.84525815094821,
  "data_cleaning": 1.544295810163021e-05,
  "neo4j_injection": 0.24909145501442254,
  "embedding_time": 0,
  "indexing_time": 0.00409869896247983,
  "graph_injection_time": 0.24481260892935097,
  "acs_metrics": {
    "node_count": 129,
    "relationship_count": 305,
    "density": 0.0185,
    "avg_degree": 4.7287,
    "avg_unique_neighbors": 4.7287,
    "global_efficiency": 0.3375,
    "avg_path_length": 2.8548,
    "avg_degree_centrality": 0.0369,
    "max_degree_centrality": 0.4219,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0201,
    "degree_assortativity": -0.2017,
    "graph_robustness": 0.8689,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2711,
    "weakly_connected_components": 10,
    "largest_wcc_size": 120,
    "pagerank_top10_percent": 21.53,
    "louvain_communities": 19,
    "louvain_modularity": 0.5073,
    "label_entropy": 1.4373,
    "computational_time": 0.05635104689281434
  },
  "retrieval_queries": []
}
2025-11-30 19:04:35,436 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:04:35,436 - src.pipeline.kg_builder - INFO - Batch 9 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 16.85s, Clean: 0.00s, Neo4j: 0.25s, ACS: 0.06s
2025-11-30 19:04:35,436 - src.pipeline.kg_builder - INFO - Batch 9 completed in 17.16s
Processing KG batches:  12%|█▎        | 9/72 [03:14<21:26, 20.42s/it]2025-11-30 19:04:35,436 - src.pipeline.kg_builder - INFO - Processing batch 10/72 (3 items)
2025-11-30 19:04:35,436 - src.pipeline.kg_builder - DEBUG - Batch 10 current_video_time: 02:24-02:29
2025-11-30 19:04:35,442 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 129
- Total Relationships: 110
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_0 ~203 words, content: Time: 02:14-02:19 Content: The video captures a precise laboratory procedure, likely the preparation of a chemical solution or a standard sample. The sequence of frames...
2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1 ~209 words, content: the white powder. The display shows `20.23`, indicating the final mass of the substance added to the beaker. - **Final Measurement (Frame 5):** The person...
2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_2 ~221 words, content: to carefully add a white, powdery substance into a glass beaker. The beaker is placed on a digital balance scale, a Mettler Toledo model, which...
2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3 ~239 words, content: in the beaker after the addition. The person is in the process of completing the weighing step. In summary, the video documents the careful and...
2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_4 ~246 words, content: substance. The background shows a laboratory environment with various equipment and supplies, including a box labeled "Dell" and a yellow bag. In the second frame,...
2025-11-30 19:04:35,443 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_5 ~244 words, content: been measured. The person's right hand is placing the bottle on the table, while the left hand is holding the bottle. The beaker is still...
2025-11-30 19:04:35,464 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:04:35,504 - src.components.pre_llm_injector - DEBUG - Found 38 existing chunk embeddings for similarity lookup
2025-11-30 19:04:35,516 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.771'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.722')]
2025-11-30 19:04:35,518 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0
2025-11-30 19:04:35,518 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2
2025-11-30 19:04:35,520 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1)
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Ar Glasses Training Chemistry Experiment Report - Simplified Version / ID: 3_0)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Chemical Equation / ID: 2_0)-[DESCRIBES]->(Reaction Of Aluminum With Sodium Hydroxide / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1)
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.705'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.671')]
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.722'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.706')]
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.704'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.698')]
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.771'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4', '0.658')]
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.621'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.618')]
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_5', '0.711'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.702')]
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:04:35,521 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_0) (~203 words) with timeout=5.0s retries=3
2025-11-30 19:04:37,043 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:04:37,043 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:04:37,043 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1) (~209 words) with timeout=5.0s retries=3
2025-11-30 19:04:38,294 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:04:38,294 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:04:38,295 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_2) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:04:39,614 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:04:39,614 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:04:39,614 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3) (~239 words) with timeout=5.0s retries=3
2025-11-30 19:04:40,945 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:04:40,945 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:04:40,945 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_4) (~246 words) with timeout=5.0s retries=3
2025-11-30 19:04:42,170 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:04:42,170 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:04:42,170 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_5) (~244 words) with timeout=5.0s retries=3
2025-11-30 19:04:43,356 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:04:43,356 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:04:43,357 - src.components.pre_llm_injector - INFO - Extracted 31 local triplets from 6 chunks
2025-11-30 19:04:43,357 - src.pipeline.kg_builder - INFO - Pre-extraction: 31 triplets in 7.91s
2025-11-30 19:04:43,357 - src.components.global_refiner - INFO - Capping refinement input: 31 → 15 triplets
2025-11-30 19:04:43,357 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(White Pen / ID: 1_3), (Person / ID: 0_0)-[HOLDS]->(White Marker / ID: 2_0), (Ar Glasses Training Chemistry Experiment Report - Simplified Version / ID: 3_0)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Chemical Equation / ID: 2_0)-[DESCRIBES]->(Reaction Of Aluminum With Sodium Hydroxide / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Plastic Bottle / ID: 5_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[USES]->(Metal_Spatula / ID: 6_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["9_0", "9_3"]}, {"head": "Person", "relation": "Holds", "tail": "Metal_Spatula", "source_chunks": ["9_0"]}, {"head": "Metal_Spatula", "relation": "Contains", "tail": "White_Powder", "source_chunks": ["9_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Analytical_Balance", "source_chunks": ["9_0"]}, {"head": "Analytical_Balance", "relation": "Displays", "tail": "20.20", "source_chunks": ["9_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "White_Powder", "source_chunks": ["9_0", "9_3"]}, {"head": "Person", "relation": "Adds", "tail": "White Powder", "source_chunks": ["9_1"]}, {"head": "Balance", "relation": "Displays", "tail": "80.14", "source_chunks": ["9_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "White Powder", "source_chunks": ["9_1"]}, {"head": "Person", "relation": "Holds", "tail": "Spatula", "source_chunks": ["9_1", "9_4"]}, {"head": "Balance", "relation": "Displays", "tail": "20.23", "source_chunks": ["9_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["9_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["9_2"]}, {"head": "Person", "relation": "Holds", "tail": "White Plastic Bottle", "source_chunks": ["9_2"]}, {"head": "Person", "relation": "Holds", "tail": "Metal Spatula", "source_chunks": ["9_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:04:43,357 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1013 words, ~1317 tokens)
2025-11-30 19:04:43,357 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:04:56,664 - src.components.global_refiner - DEBUG - LLM call completed in 13.31s
2025-11-30 19:04:56,664 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['9_0', '9_3']], ['Person', 'Holds', 'Metal_Spatula', ['9_0']], ['Metal_Spatula', 'Contains', 'White_Powder', ['9_0']], ['Beaker', 'Is On', 'Analytical_Balance', ['9_0']], ['Analytical_Balance', 'Displays', '20.20', ['9_0']], ['Beaker', 'Contains', 'White_Powder', ['9_0', '9_3']], ['Person', 'Adds', 'White Powder', ['9_1']], ['Balance', 'Displays', '80.14', ['9_1']], ['Beaker', 'Contains', 'White_Powder', ['9_1']], ['Person', 'Holds', 'Spatula', ['9_1', '9_4']], ['Balance', 'Displays', '20.23', ['9_1']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['9_1']], ['Person', 'Wears', 'Blue Glove', ['9_2']], ['Person', 'Holds', 'White Plastic Bottle', ['9_2']], ['Person', 'Holds', 'Metal Spatula', ['9_2']]] inter_chunk_relations=[['Beaker', 'Is On', 'Laboratory Bench', ['9_0']], ['Analytical_Balance', 'Displays', '20.20', ['9_0']], ['Balance', 'Displays', '80.14', ['9_1']], ['Balance', 'Displays', '20.23', ['9_1']], ['Person', 'Wears', 'Blue Glove', ['9_2']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Blue Glove', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Metal_Spatula', 'existing': 'Spatula', 'existing_id': '7_1'}, {'local': 'Metal Spatula', 'existing': 'Spatula', 'existing_id': '7_1'}] prune_instructions=[{'head': 'Person', 'relation': 'Holds', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'White Plastic Bottle'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}]
2025-11-30 19:04:56,665 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['9_0', '9_3']], ['Person', 'Holds', 'Metal_Spatula', ['9_0']], ['Metal_Spatula', 'Contains', 'White_Powder', ['9_0']]]
2025-11-30 19:04:56,665 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Laboratory Bench', ['9_0']], ['Analytical_Balance', 'Displays', '20.20', ['9_0']], ['Balance', 'Displays', '80.14', ['9_1']]]
2025-11-30 19:04:56,665 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Blue Glove', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Metal_Spatula', 'existing': 'Spatula', 'existing_id': '7_1'}]
2025-11-30 19:04:56,665 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Holds', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'White Plastic Bottle'}]
2025-11-30 19:04:56,665 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Blue Glove', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Metal_Spatula', 'existing': 'Spatula', 'existing_id': '7_1'}, {'local': 'Metal Spatula', 'existing': 'Spatula', 'existing_id': '7_1'}]
2025-11-30 19:04:56,665 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Holds', 'tail': 'White Pen'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'White Marker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'White Plastic Bottle'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}]
2025-11-30 19:04:56,665 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 13.31s, LLM: 13.31s)
2025-11-30 19:04:56,665 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 13.31s
2025-11-30 19:04:56,665 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:04:56,665 - src.pipeline.kg_builder - INFO - Pushing batch 10/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:04:56,665 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:04:56,808 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=143, relationships=124
2025-11-30 19:04:56,808 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:04:56,809 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue Gloves
2025-11-30 19:04:56,812 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Glove -> Blue Gloves
2025-11-30 19:04:56,815 - src.components.neo4j_handler - DEBUG - APOC merge successful: Metal_Spatula -> Spatula
2025-11-30 19:04:56,818 - src.components.neo4j_handler - DEBUG - APOC merge successful: Metal Spatula -> Spatula
2025-11-30 19:04:56,818 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:04:56,823 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> White Pen
2025-11-30 19:04:56,824 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> White Marker
2025-11-30 19:04:56,825 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> White Plastic Bottle
2025-11-30 19:04:56,827 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Beaker
2025-11-30 19:04:56,827 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:04:56,828 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory Bench
2025-11-30 19:04:56,829 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Analytical_Balance -[Displays]-> 20.20
2025-11-30 19:04:56,831 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Balance -[Displays]-> 80.14
2025-11-30 19:04:56,832 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Balance -[Displays]-> 20.23
2025-11-30 19:04:56,832 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue Glove
2025-11-30 19:04:56,833 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:04:56,836 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=139, relationships=117
2025-11-30 19:04:56,838 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:04:56,838 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:04:56,838 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:04:56,838 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:04:56,839 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 44, 'with_embedding': 44, 'linked_chunks': 34}
2025-11-30 19:04:56,839 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:04:56,855 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 139 nodes
2025-11-30 19:04:56,875 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 129 nodes
2025-11-30 19:04:56,905 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 139, 'relationship_count': 334, 'density': 0.0174, 'avg_degree': 4.8058, 'avg_unique_neighbors': 4.8058, 'global_efficiency': 0.3337, 'avg_path_length': 2.8664, 'avg_degree_centrality': 0.0348, 'max_degree_centrality': 0.4058, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0179, 'degree_assortativity': -0.1762, 'graph_robustness': 0.8892, 'diameter_estimate': 5, 'clustering_coefficient': 0.2644, 'weakly_connected_components': 11, 'largest_wcc_size': 129, 'pagerank_top10_percent': 20.06, 'louvain_communities': 19, 'louvain_modularity': 0.5089, 'label_entropy': 1.4503, 'computational_time': 0.06525758898351341}
2025-11-30 19:04:56,905 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 9, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500696.9051416, 'total_time': 21.46852005494293, 'aggregation': 3.6600977182388306e-06, 'network_info': 0.006114747026003897, 'llm_extraction': 21.22261730907485, 'data_cleaning': 3.573601134121418e-05, 'neo4j_injection': 0.17319887795019895, 'embedding_time': 0, 'indexing_time': 0.0017380970530211926, 'graph_injection_time': 0.1711463660467416, 'acs_metrics': {'node_count': 139, 'relationship_count': 334, 'density': 0.0174, 'avg_degree': 4.8058, 'avg_unique_neighbors': 4.8058, 'global_efficiency': 0.3337, 'avg_path_length': 2.8664, 'avg_degree_centrality': 0.0348, 'max_degree_centrality': 0.4058, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0179, 'degree_assortativity': -0.1762, 'graph_robustness': 0.8892, 'diameter_estimate': 5, 'clustering_coefficient': 0.2644, 'weakly_connected_components': 11, 'largest_wcc_size': 129, 'pagerank_top10_percent': 20.06, 'louvain_communities': 19, 'louvain_modularity': 0.5089, 'label_entropy': 1.4503, 'computational_time': 0.06525758898351341}, 'retrieval_queries': []}
2025-11-30 19:04:56,905 - src.pipeline.kg_builder - DEBUG - Batch 9 metrics: {
  "batch_idx": 9,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500696.9051416,
  "total_time": 21.46852005494293,
  "aggregation": 3.6600977182388306e-06,
  "network_info": 0.006114747026003897,
  "llm_extraction": 21.22261730907485,
  "data_cleaning": 3.573601134121418e-05,
  "neo4j_injection": 0.17319887795019895,
  "embedding_time": 0,
  "indexing_time": 0.0017380970530211926,
  "graph_injection_time": 0.1711463660467416,
  "acs_metrics": {
    "node_count": 139,
    "relationship_count": 334,
    "density": 0.0174,
    "avg_degree": 4.8058,
    "avg_unique_neighbors": 4.8058,
    "global_efficiency": 0.3337,
    "avg_path_length": 2.8664,
    "avg_degree_centrality": 0.0348,
    "max_degree_centrality": 0.4058,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0179,
    "degree_assortativity": -0.1762,
    "graph_robustness": 0.8892,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2644,
    "weakly_connected_components": 11,
    "largest_wcc_size": 129,
    "pagerank_top10_percent": 20.06,
    "louvain_communities": 19,
    "louvain_modularity": 0.5089,
    "label_entropy": 1.4503,
    "computational_time": 0.06525758898351341
  },
  "retrieval_queries": []
}
2025-11-30 19:04:56,905 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:04:56,905 - src.pipeline.kg_builder - INFO - Batch 10 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 21.22s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.07s
2025-11-30 19:04:56,905 - src.pipeline.kg_builder - INFO - Batch 10 completed in 21.47s
Processing KG batches:  14%|█▍        | 10/72 [03:36<21:25, 20.74s/it]2025-11-30 19:04:56,905 - src.pipeline.kg_builder - INFO - Processing batch 11/72 (3 items)
2025-11-30 19:04:56,905 - src.pipeline.kg_builder - DEBUG - Batch 11 current_video_time: 02:39-02:44
2025-11-30 19:04:56,911 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 139
- Total Relationships: 117
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0 ~235 words, content: Time: 02:29-02:34 Content: The video sequence captures a scientific procedure, likely a chemical experiment, being conducted in a laboratory setting. The process involves the precise...
2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_1 ~229 words, content: a reading of "80.15 g". A hand wearing a blue glove is seen opening the glass door of the balance's draft shield. The beaker with...
2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2 ~220 words, content: Time: 02:34-02:39 Content: The video sequence captures a scientific procedure, likely a titration or a similar chemical analysis, being performed in a laboratory setting. The...
2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_3 ~228 words, content: background reveals more of the laboratory, including a white door, a wall-mounted electrical panel with a high-voltage warning symbol, and a shelf with various items....
2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_4 ~225 words, content: conducted with precision, using an analytical balance to ensure accurate measurements. Time: 02:39-02:44 Content: The video captures a sequence of a laboratory procedure, likely a...
2025-11-30 19:04:56,911 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5 ~114 words, content: has been added. The final reading on the balance is shown to be -56.30, which is a stable reading, indicating that the addition is complete....
2025-11-30 19:04:56,932 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:04:56,973 - src.components.pre_llm_injector - DEBUG - Found 44 existing chunk embeddings for similarity lookup
2025-11-30 19:04:56,988 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.807'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.792')]
2025-11-30 19:04:56,989 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3 via source_chunk_ids
2025-11-30 19:04:56,989 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 via source_chunk_ids
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.738'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.705')]
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.710'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.707')]
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.711'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.681')]
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4', '0.419'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0', '0.417')]
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.648'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_2', '0.640')]
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.807'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.792')]
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:04:56,990 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:04:58,622 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:04:58,622 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:04:58,622 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:05:00,126 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:05:00,127 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:05:00,127 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2) (~220 words) with timeout=5.0s retries=3
2025-11-30 19:05:01,929 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:05:01,929 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:05:01,929 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_3) (~228 words) with timeout=5.0s retries=3
2025-11-30 19:05:03,011 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:05:03,011 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:05:03,011 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_4) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:05:04,309 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:05:04,310 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:05:04,310 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5) (~114 words) with timeout=5.0s retries=3
2025-11-30 19:05:05,474 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:05:05,474 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:05:05,475 - src.components.pre_llm_injector - INFO - Extracted 35 local triplets from 6 chunks
2025-11-30 19:05:05,475 - src.pipeline.kg_builder - INFO - Pre-extraction: 35 triplets in 8.56s
2025-11-30 19:05:05,476 - src.components.global_refiner - INFO - Capping refinement input: 35 → 15 triplets
2025-11-30 19:05:05,476 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
No subgraph context available
No existing entities or relations.

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Glove", "source_chunks": ["10_0"]}, {"head": "Person", "relation": "Holds", "tail": "White_Plastic_Bottle", "source_chunks": ["10_0"]}, {"head": "White_Plastic_Bottle", "relation": "Has", "tail": "Red_Cap", "source_chunks": ["10_0"]}, {"head": "White_Plastic_Bottle", "relation": "Contains", "tail": "Chemical_Substance", "source_chunks": ["10_0"]}, {"head": "White_Plastic_Bottle", "relation": "Is On", "tail": "Laboratory_Bench", "source_chunks": ["10_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "80.15_G", "source_chunks": ["10_0"]}, {"head": "Hand Wearing Blue Glove", "relation": "Opens", "tail": "Draft Shield", "source_chunks": ["10_1"]}, {"head": "Beaker With White Powder", "relation": "Is On", "tail": "Weighing Pan", "source_chunks": ["10_1"]}, {"head": "Hand Not Gloved", "relation": "Points To", "tail": "Scale Display", "source_chunks": ["10_1"]}, {"head": "Person", "relation": "Lifts", "tail": "Beaker", "source_chunks": ["10_1"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "80.15 G", "source_chunks": ["10_1"]}, {"head": "Beaker With White Powder", "relation": "Is Removed From", "tail": "Digital Balance", "source_chunks": ["10_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["10_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Beaker", "source_chunks": ["10_2"]}, {"head": "Glass_Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["10_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:05:05,476 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~463 words, ~602 tokens)
2025-11-30 19:05:05,476 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:05:13,110 - src.components.global_refiner - DEBUG - LLM call completed in 7.63s
2025-11-30 19:05:13,110 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Glove', ['10_0']], ['Person', 'Holds', 'White_Plastic_Bottle', ['10_0']], ['White_Plastic_Bottle', 'Has', 'Red_Cap', ['10_0']], ['White_Plastic_Bottle', 'Contains', 'Chemical_Substance', ['10_0']], ['White_Plastic_Bottle', 'Is On', 'Laboratory_Bench', ['10_0']], ['Digital_Balance', 'Displays', '80.15_G', ['10_0']], ['Hand Wearing Blue Glove', 'Opens', 'Draft Shield', ['10_1']], ['Beaker With White Powder', 'Is On', 'Weighing Pan', ['10_1']], ['Hand Not Gloved', 'Points To', 'Scale Display', ['10_1']], ['Person', 'Lifts', 'Beaker', ['10_1']], ['Digital Balance', 'Displays', '80.15 G', ['10_1']], ['Beaker With White Powder', 'Is Removed From', 'Digital Balance', ['10_1']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['10_2']], ['Person', 'Holds', 'Glass_Beaker', ['10_2']], ['Glass_Beaker', 'Contains', 'Clear_Liquid', ['10_2']]] inter_chunk_relations=[] merge_instructions=[] prune_instructions=[]
2025-11-30 19:05:13,110 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Glove', ['10_0']], ['Person', 'Holds', 'White_Plastic_Bottle', ['10_0']], ['White_Plastic_Bottle', 'Has', 'Red_Cap', ['10_0']]]
2025-11-30 19:05:13,110 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=0, sample=[]
2025-11-30 19:05:13,111 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:05:13,111 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:05:13,111 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 7.64s, LLM: 7.63s)
2025-11-30 19:05:13,111 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 7.64s
2025-11-30 19:05:13,111 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:05:13,111 - src.pipeline.kg_builder - INFO - Pushing batch 11/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:05:13,111 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:05:13,316 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=157, relationships=131
2025-11-30 19:05:13,317 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:05:13,324 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=157, relationships=131
2025-11-30 19:05:13,325 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:05:13,325 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:05:13,326 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:05:13,326 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:05:13,327 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 50, 'with_embedding': 50, 'linked_chunks': 37}
2025-11-30 19:05:13,327 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:05:13,339 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 157 nodes
2025-11-30 19:05:13,357 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 144 nodes
2025-11-30 19:05:13,385 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 157, 'relationship_count': 369, 'density': 0.0151, 'avg_degree': 4.7006, 'avg_unique_neighbors': 4.7006, 'global_efficiency': 0.3197, 'avg_path_length': 2.9114, 'avg_degree_centrality': 0.0301, 'max_degree_centrality': 0.3974, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0193, 'degree_assortativity': -0.1737, 'graph_robustness': 0.8672, 'diameter_estimate': 5, 'clustering_coefficient': 0.2666, 'weakly_connected_components': 14, 'largest_wcc_size': 144, 'pagerank_top10_percent': 19.51, 'louvain_communities': 24, 'louvain_modularity': 0.5329, 'label_entropy': 1.4514, 'computational_time': 0.057785927900113165}
2025-11-30 19:05:13,385 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 10, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500713.3851569, 'total_time': 16.47943463700358, 'aggregation': 2.9319198802113533e-06, 'network_info': 0.005366698955185711, 'llm_extraction': 16.20001462905202, 'data_cleaning': 2.94089550152421e-05, 'neo4j_injection': 0.21487180702388287, 'embedding_time': 0, 'indexing_time': 0.002040275023318827, 'graph_injection_time': 0.21254370803944767, 'acs_metrics': {'node_count': 157, 'relationship_count': 369, 'density': 0.0151, 'avg_degree': 4.7006, 'avg_unique_neighbors': 4.7006, 'global_efficiency': 0.3197, 'avg_path_length': 2.9114, 'avg_degree_centrality': 0.0301, 'max_degree_centrality': 0.3974, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0193, 'degree_assortativity': -0.1737, 'graph_robustness': 0.8672, 'diameter_estimate': 5, 'clustering_coefficient': 0.2666, 'weakly_connected_components': 14, 'largest_wcc_size': 144, 'pagerank_top10_percent': 19.51, 'louvain_communities': 24, 'louvain_modularity': 0.5329, 'label_entropy': 1.4514, 'computational_time': 0.057785927900113165}, 'retrieval_queries': []}
2025-11-30 19:05:13,385 - src.pipeline.kg_builder - DEBUG - Batch 10 metrics: {
  "batch_idx": 10,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500713.3851569,
  "total_time": 16.47943463700358,
  "aggregation": 2.9319198802113533e-06,
  "network_info": 0.005366698955185711,
  "llm_extraction": 16.20001462905202,
  "data_cleaning": 2.94089550152421e-05,
  "neo4j_injection": 0.21487180702388287,
  "embedding_time": 0,
  "indexing_time": 0.002040275023318827,
  "graph_injection_time": 0.21254370803944767,
  "acs_metrics": {
    "node_count": 157,
    "relationship_count": 369,
    "density": 0.0151,
    "avg_degree": 4.7006,
    "avg_unique_neighbors": 4.7006,
    "global_efficiency": 0.3197,
    "avg_path_length": 2.9114,
    "avg_degree_centrality": 0.0301,
    "max_degree_centrality": 0.3974,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0193,
    "degree_assortativity": -0.1737,
    "graph_robustness": 0.8672,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2666,
    "weakly_connected_components": 14,
    "largest_wcc_size": 144,
    "pagerank_top10_percent": 19.51,
    "louvain_communities": 24,
    "louvain_modularity": 0.5329,
    "label_entropy": 1.4514,
    "computational_time": 0.057785927900113165
  },
  "retrieval_queries": []
}
2025-11-30 19:05:13,385 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:05:13,385 - src.pipeline.kg_builder - INFO - Batch 11 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 16.20s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.06s
2025-11-30 19:05:13,385 - src.pipeline.kg_builder - INFO - Batch 11 completed in 16.48s
Processing KG batches:  15%|█▌        | 11/72 [03:52<19:45, 19.44s/it]2025-11-30 19:05:13,385 - src.pipeline.kg_builder - INFO - Processing batch 12/72 (3 items)
2025-11-30 19:05:13,385 - src.pipeline.kg_builder - DEBUG - Batch 12 current_video_time: 02:54-02:59
2025-11-30 19:05:13,394 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 157
- Total Relationships: 131
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:05:13,394 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:05:13,394 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_0 ~230 words, content: Time: 02:44-02:49 Content: The video captures a laboratory procedure, likely a titration or a similar quantitative analysis, from a first-person perspective. The scene is set...
2025-11-30 19:05:13,394 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1 ~224 words, content: and a document with Chinese text, likely a lab protocol or experiment instructions. The overall context suggests a controlled and precise scientific experiment is in...
2025-11-30 19:05:13,394 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_2 ~233 words, content: . The digital display of the balance shows a negative weight of `-56.304 g`, which is the result of the tare function. The person is...
2025-11-30 19:05:13,395 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3 ~224 words, content: , and then adding a solid substance to the beaker to measure its weight. This is a common procedure in chemistry for preparing solutions or...
2025-11-30 19:05:13,395 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4 ~125 words, content: into a small, clear glass container, which is likely a conical flask or a beaker used for titration. This action is performed with precision, suggesting...
2025-11-30 19:05:13,415 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:05:13,453 - src.components.pre_llm_injector - DEBUG - Found 50 existing chunk embeddings for similarity lookup
2025-11-30 19:05:13,467 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.819'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.786')]
2025-11-30 19:05:13,468 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1
2025-11-30 19:05:13,469 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1
2025-11-30 19:05:13,471 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1: Subgraph: (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0)
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1: Subgraph: (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Man / ID: 0_2)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS]->(Right / ID: 1_0), (Camera / ID: 0_1)-[REVEALS]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Camera / ID: 0_1)-[CAPTURES]->(Laboratory Environment / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 9_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0)
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.786'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.708')]
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.784'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.772')]
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_5', '0.666'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.658')]
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.623'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.607')]
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.819'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.763')]
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:05:13,473 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_0) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:05:14,826 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:05:14,826 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:05:14,826 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:05:16,032 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:05:16,032 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:05:16,033 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_2) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:05:17,089 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:05:17,089 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:05:17,090 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:05:18,426 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:05:18,426 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:05:18,427 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4) (~125 words) with timeout=5.0s retries=3
2025-11-30 19:05:19,624 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:05:19,624 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:05:19,624 - src.components.pre_llm_injector - INFO - Extracted 26 local triplets from 5 chunks
2025-11-30 19:05:19,624 - src.pipeline.kg_builder - INFO - Pre-extraction: 26 triplets in 6.23s
2025-11-30 19:05:19,625 - src.components.global_refiner - INFO - Capping refinement input: 26 → 15 triplets
2025-11-30 19:05:19,625 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1: Subgraph: (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1: Subgraph: (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Man / ID: 0_2)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS]->(Right / ID: 1_0), (Camera / ID: 0_1)-[REVEALS]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Camera / ID: 0_1)-[CAPTURES]->(Laboratory Environment / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 9_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 3_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["11_0", "11_1", "11_3"]}, {"head": "Person", "relation": "Adds", "tail": "Liquid", "source_chunks": ["11_0"]}, {"head": "Liquid", "relation": "Is Transferred By", "tail": "Pipette", "source_chunks": ["11_0"]}, {"head": "Beaker", "relation": "Is Held Over", "tail": "Digital_Balance", "source_chunks": ["11_0"]}, {"head": "Beaker", "relation": "Is Inside", "tail": "Draft_Shield", "source_chunks": ["11_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Negative_Value", "source_chunks": ["11_0"]}, {"head": "Person", "relation": "Uses", "tail": "Wash_Bottle", "source_chunks": ["11_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["11_1", "11_2", "11_3"]}, {"head": "Beaker", "relation": "Is On", "tail": "Analytical_Balance", "source_chunks": ["11_1"]}, {"head": "Analytical_Balance", "relation": "Displays", "tail": "Negative_Weight", "source_chunks": ["11_1"]}, {"head": "Document", "relation": "Contains", "tail": "Chinese_Text", "source_chunks": ["11_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["11_2"]}, {"head": "Balance", "relation": "Displays", "tail": "Negative_Weight", "source_chunks": ["11_2"]}, {"head": "Person", "relation": "Adds", "tail": "Solid_Substance", "source_chunks": ["11_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Solid_Substance", "source_chunks": ["11_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:05:19,625 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1217 words, ~1582 tokens)
2025-11-30 19:05:19,625 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:05:34,248 - src.components.global_refiner - DEBUG - LLM call completed in 14.62s
2025-11-30 19:05:34,248 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['11_0', '11_1', '11_3']], ['Person', 'Adds', 'Liquid', ['11_0']], ['Liquid', 'Is Transferred By', 'Pipette', ['11_0']], ['Beaker', 'Is Held Over', 'Digital_Balance', ['11_0']], ['Beaker', 'Is Inside', 'Draft_Shield', ['11_0']], ['Digital_Balance', 'Displays', 'Negative_Value', ['11_0']], ['Person', 'Uses', 'Wash_Bottle', ['11_1']], ['Person', 'Holds', 'Beaker', ['11_1', '11_2', '11_3']], ['Beaker', 'Is On', 'Analytical_Balance', ['11_1']], ['Analytical_Balance', 'Displays', 'Negative_Weight', ['11_1']], ['Document', 'Contains', 'Chinese_Text', ['11_1']], ['Beaker', 'Contains', 'Liquid', ['11_2']], ['Balance', 'Displays', 'Negative_Weight', ['11_2']], ['Person', 'Adds', 'Solid_Substance', ['11_2']], ['Beaker', 'Contains', 'Solid_Substance', ['11_2']]] inter_chunk_relations=[['Beaker', 'Is On', 'Laboratory Table', ['11_1']], ['Beaker', 'Is Inside', 'Glass Cabinet', ['11_0']], ['Person', 'Holds', 'Beaker', ['11_1', '11_2', '11_3']], ['Person', 'Uses', 'Spatula', ['11_0', '11_1', '11_2', '11_3']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['11_0', '11_1', '11_3']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '9_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}] prune_instructions=[{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}]
2025-11-30 19:05:34,248 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['11_0', '11_1', '11_3']], ['Person', 'Adds', 'Liquid', ['11_0']], ['Liquid', 'Is Transferred By', 'Pipette', ['11_0']]]
2025-11-30 19:05:34,248 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Laboratory Table', ['11_1']], ['Beaker', 'Is Inside', 'Glass Cabinet', ['11_0']], ['Person', 'Holds', 'Beaker', ['11_1', '11_2', '11_3']]]
2025-11-30 19:05:34,248 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '9_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}]
2025-11-30 19:05:34,249 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}]
2025-11-30 19:05:34,249 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '9_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Gloves', 'existing_id': '3_1'}]
2025-11-30 19:05:34,249 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'WEARS', 'tail': 'Blue Gloves'}]
2025-11-30 19:05:34,249 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 14.62s, LLM: 14.62s)
2025-11-30 19:05:34,249 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 14.62s
2025-11-30 19:05:34,249 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:05:34,249 - src.pipeline.kg_builder - INFO - Pushing batch 12/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:05:34,249 - src.components.neo4j_handler - INFO - Adding 18 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:05:34,436 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=168, relationships=146
2025-11-30 19:05:34,436 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:05:34,436 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:05:34,436 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Gloves
2025-11-30 19:05:34,441 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue_Nitrile_Glove
2025-11-30 19:05:34,441 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Gloves
2025-11-30 19:05:34,441 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:05:34,444 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[WEARS]-> Blue Gloves
2025-11-30 19:05:34,444 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[WEARS]-> Blue Gloves
2025-11-30 19:05:34,445 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[WEARS]-> Blue Gloves
2025-11-30 19:05:34,445 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[WEARS]-> Blue Gloves
2025-11-30 19:05:34,445 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:05:34,446 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory Table
2025-11-30 19:05:34,448 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is Inside]-> Glass Cabinet
2025-11-30 19:05:34,449 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:05:34,451 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Uses]-> Spatula
2025-11-30 19:05:34,451 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:05:34,452 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:05:34,457 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=167, relationships=142
2025-11-30 19:05:34,459 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:05:34,459 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:05:34,459 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:05:34,460 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:05:34,461 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 55, 'with_embedding': 55, 'linked_chunks': 41}
2025-11-30 19:05:34,461 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:05:34,479 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 167 nodes
2025-11-30 19:05:34,506 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 153 nodes
2025-11-30 19:05:34,540 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 167, 'relationship_count': 411, 'density': 0.0148, 'avg_degree': 4.9222, 'avg_unique_neighbors': 4.8982, 'global_efficiency': 0.3215, 'avg_path_length': 2.8835, 'avg_degree_centrality': 0.0297, 'max_degree_centrality': 0.3976, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0193, 'degree_assortativity': -0.1706, 'graph_robustness': 0.8516, 'diameter_estimate': 5, 'clustering_coefficient': 0.2627, 'weakly_connected_components': 15, 'largest_wcc_size': 153, 'pagerank_top10_percent': 18.21, 'louvain_communities': 24, 'louvain_modularity': 0.4982, 'label_entropy': 1.4571, 'computational_time': 0.07970863301306963}
2025-11-30 19:05:34,541 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 11, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500734.5409875, 'total_time': 21.155136534944177, 'aggregation': 3.551947884261608e-06, 'network_info': 0.008450367953628302, 'llm_extraction': 20.854834295925684, 'data_cleaning': 3.455206751823425e-05, 'neo4j_injection': 0.21066255401819944, 'embedding_time': 0, 'indexing_time': 0.0021950409281998873, 'graph_injection_time': 0.20815111801493913, 'acs_metrics': {'node_count': 167, 'relationship_count': 411, 'density': 0.0148, 'avg_degree': 4.9222, 'avg_unique_neighbors': 4.8982, 'global_efficiency': 0.3215, 'avg_path_length': 2.8835, 'avg_degree_centrality': 0.0297, 'max_degree_centrality': 0.3976, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0193, 'degree_assortativity': -0.1706, 'graph_robustness': 0.8516, 'diameter_estimate': 5, 'clustering_coefficient': 0.2627, 'weakly_connected_components': 15, 'largest_wcc_size': 153, 'pagerank_top10_percent': 18.21, 'louvain_communities': 24, 'louvain_modularity': 0.4982, 'label_entropy': 1.4571, 'computational_time': 0.07970863301306963}, 'retrieval_queries': []}
2025-11-30 19:05:34,541 - src.pipeline.kg_builder - DEBUG - Batch 11 metrics: {
  "batch_idx": 11,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500734.5409875,
  "total_time": 21.155136534944177,
  "aggregation": 3.551947884261608e-06,
  "network_info": 0.008450367953628302,
  "llm_extraction": 20.854834295925684,
  "data_cleaning": 3.455206751823425e-05,
  "neo4j_injection": 0.21066255401819944,
  "embedding_time": 0,
  "indexing_time": 0.0021950409281998873,
  "graph_injection_time": 0.20815111801493913,
  "acs_metrics": {
    "node_count": 167,
    "relationship_count": 411,
    "density": 0.0148,
    "avg_degree": 4.9222,
    "avg_unique_neighbors": 4.8982,
    "global_efficiency": 0.3215,
    "avg_path_length": 2.8835,
    "avg_degree_centrality": 0.0297,
    "max_degree_centrality": 0.3976,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0193,
    "degree_assortativity": -0.1706,
    "graph_robustness": 0.8516,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2627,
    "weakly_connected_components": 15,
    "largest_wcc_size": 153,
    "pagerank_top10_percent": 18.21,
    "louvain_communities": 24,
    "louvain_modularity": 0.4982,
    "label_entropy": 1.4571,
    "computational_time": 0.07970863301306963
  },
  "retrieval_queries": []
}
2025-11-30 19:05:34,541 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:05:34,541 - src.pipeline.kg_builder - INFO - Batch 12 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 20.85s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.08s
2025-11-30 19:05:34,541 - src.pipeline.kg_builder - INFO - Batch 12 completed in 21.16s
Processing KG batches:  17%|█▋        | 12/72 [04:13<19:57, 19.96s/it]2025-11-30 19:05:34,541 - src.pipeline.kg_builder - INFO - Processing batch 13/72 (3 items)
2025-11-30 19:05:34,541 - src.pipeline.kg_builder - DEBUG - Batch 13 current_video_time: 03:09-03:14
2025-11-30 19:05:34,548 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 167
- Total Relationships: 142
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:05:34,549 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:05:34,549 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_0 ~214 words, content: Time: 02:59-03:04 Content: The sequence of images captures a laboratory procedure, likely the preparation of a chemical solution, from a first-person perspective. The setting is...
2025-11-30 19:05:34,549 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1 ~236 words, content: of liquid to achieve a desired concentration. - **Final Setup:** The final frame shows the beaker, now containing the solid and the added liquid, being...
2025-11-30 19:05:34,549 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_2 ~215 words, content: notes. The background features a door, a cabinet, and a wall with a warning sign. The overall scene suggests a controlled and precise scientific procedure....
2025-11-30 19:05:34,549 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3 ~153 words, content: step. The balance's display changes to a negative value (`-56.302 g`), which is a common feature on analytical balances to tare or zero the scale...
2025-11-30 19:05:34,569 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:05:34,607 - src.components.pre_llm_injector - DEBUG - Found 55 existing chunk embeddings for similarity lookup
2025-11-30 19:05:34,619 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.836'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.794')]
2025-11-30 19:05:34,621 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4 via source_chunk_ids
2025-11-30 19:05:34,621 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2)
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.696'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.644')]
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.836'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3', '0.778')]
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.794'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1', '0.792')]
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.755'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.745')]
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:05:34,625 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_0) (~214 words) with timeout=5.0s retries=3
2025-11-30 19:05:35,823 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:05:35,823 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:05:35,823 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:05:36,848 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:05:36,848 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:05:36,849 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_2) (~215 words) with timeout=5.0s retries=3
2025-11-30 19:05:38,157 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:05:38,157 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:05:38,157 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3) (~153 words) with timeout=5.0s retries=3
2025-11-30 19:05:39,193 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:05:39,194 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:05:39,194 - src.components.pre_llm_injector - INFO - Extracted 19 local triplets from 4 chunks
2025-11-30 19:05:39,194 - src.pipeline.kg_builder - INFO - Pre-extraction: 19 triplets in 4.65s
2025-11-30 19:05:39,194 - src.components.global_refiner - INFO - Capping refinement input: 19 → 15 triplets
2025-11-30 19:05:39,194 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 5_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["12_0"]}, {"head": "Person", "relation": "Places", "tail": "Beaker", "source_chunks": ["12_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital Balance", "source_chunks": ["12_0"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "5.302 G", "source_chunks": ["12_0"]}, {"head": "Person", "relation": "Adds", "tail": "White Powder", "source_chunks": ["12_0"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["12_0", "12_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["12_1", "12_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Solid", "source_chunks": ["12_1", "12_3"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["12_1", "12_2", "12_3"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["12_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital Balance", "source_chunks": ["12_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["12_2"]}, {"head": "Person", "relation": "Pours", "tail": "Liquid", "source_chunks": ["12_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "White_Cloudy_Substance", "source_chunks": ["12_2"]}, {"head": "Beaker", "relation": "Is Placed On", "tail": "Digital_Analytical_Balance", "source_chunks": ["12_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:05:39,195 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~719 words, ~935 tokens)
2025-11-30 19:05:39,195 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:05:52,363 - src.components.global_refiner - DEBUG - LLM call completed in 13.17s
2025-11-30 19:05:52,363 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue Nitrile Gloves', ['12_0']], ['Person', 'Places', 'Beaker', ['12_0']], ['Beaker', 'Is On', 'Digital Balance', ['12_0']], ['Digital Balance', 'Displays', '5.302 G', ['12_0']], ['Person', 'Adds', 'White Powder', ['12_0']], ['Person', 'Uses', 'Pipette', ['12_0', '12_1']], ['Person', 'Holds', 'Beaker', ['12_1', '12_2']], ['Beaker', 'Contains', 'Solid', ['12_1', '12_3']], ['Beaker', 'Contains', 'Liquid', ['12_1', '12_2', '12_3']], ['Pipette', 'Transfers', 'Liquid', ['12_1']], ['Beaker', 'Is On', 'Digital Balance', ['12_1']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['12_2']], ['Person', 'Pours', 'Liquid', ['12_2']], ['Beaker', 'Contains', 'White_Cloudy_Substance', ['12_2']], ['Beaker', 'Is Placed On', 'Digital_Analytical_Balance', ['12_2']]] inter_chunk_relations=[['Beaker', 'Is On', 'Laboratory', ['12_0']], ['Beaker', 'Is On', 'Digital Balance', ['12_1']], ['Beaker', 'Is Placed On', 'Digital_Analytical_Balance', ['12_2']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['12_2']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['12_0']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Beige Sweater'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Glove'}]
2025-11-30 19:05:52,363 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue Nitrile Gloves', ['12_0']], ['Person', 'Places', 'Beaker', ['12_0']], ['Beaker', 'Is On', 'Digital Balance', ['12_0']]]
2025-11-30 19:05:52,363 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Laboratory', ['12_0']], ['Beaker', 'Is On', 'Digital Balance', ['12_1']], ['Beaker', 'Is Placed On', 'Digital_Analytical_Balance', ['12_2']]]
2025-11-30 19:05:52,364 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}]
2025-11-30 19:05:52,364 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Beige Sweater'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:05:52,364 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Glove', 'existing_id': '5_0'}]
2025-11-30 19:05:52,364 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Beige Sweater'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Glove'}]
2025-11-30 19:05:52,364 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 13.17s, LLM: 13.17s)
2025-11-30 19:05:52,364 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 13.17s
2025-11-30 19:05:52,364 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:05:52,364 - src.pipeline.kg_builder - INFO - Pushing batch 13/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:05:52,364 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:05:52,547 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=177, relationships=151
2025-11-30 19:05:52,547 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:05:52,548 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Glove
2025-11-30 19:05:52,553 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue_Nitrile_Glove
2025-11-30 19:05:52,553 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:05:52,558 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Beige Sweater
2025-11-30 19:05:52,560 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Glove
2025-11-30 19:05:52,561 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:05:52,562 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Glove
2025-11-30 19:05:52,562 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:05:52,563 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory
2025-11-30 19:05:52,565 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Digital Balance
2025-11-30 19:05:52,568 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is Placed On]-> Digital_Analytical_Balance
2025-11-30 19:05:52,569 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:05:52,570 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:05:52,570 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:05:52,576 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=175, relationships=147
2025-11-30 19:05:52,580 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:05:52,580 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:05:52,580 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:05:52,580 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:05:52,581 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 59, 'with_embedding': 59, 'linked_chunks': 45}
2025-11-30 19:05:52,581 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:05:52,595 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 175 nodes
2025-11-30 19:05:52,618 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 161 nodes
2025-11-30 19:05:52,652 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 175, 'relationship_count': 436, 'density': 0.0143, 'avg_degree': 4.9829, 'avg_unique_neighbors': 4.96, 'global_efficiency': 0.3233, 'avg_path_length': 2.8876, 'avg_degree_centrality': 0.0286, 'max_degree_centrality': 0.3851, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0211, 'degree_assortativity': -0.1631, 'graph_robustness': 0.8601, 'diameter_estimate': 5, 'clustering_coefficient': 0.2621, 'weakly_connected_components': 15, 'largest_wcc_size': 161, 'pagerank_top10_percent': 17.28, 'louvain_communities': 24, 'louvain_modularity': 0.499, 'label_entropy': 1.461, 'computational_time': 0.07073130691424012}
2025-11-30 19:05:52,652 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 12, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500752.6526737, 'total_time': 18.111071611056104, 'aggregation': 3.237975761294365e-06, 'network_info': 0.006986589985899627, 'llm_extraction': 17.81547411903739, 'data_cleaning': 1.7179991118609905e-05, 'neo4j_injection': 0.21652605291455984, 'embedding_time': 0, 'indexing_time': 0.004598999978043139, 'graph_injection_time': 0.2117205080576241, 'acs_metrics': {'node_count': 175, 'relationship_count': 436, 'density': 0.0143, 'avg_degree': 4.9829, 'avg_unique_neighbors': 4.96, 'global_efficiency': 0.3233, 'avg_path_length': 2.8876, 'avg_degree_centrality': 0.0286, 'max_degree_centrality': 0.3851, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0211, 'degree_assortativity': -0.1631, 'graph_robustness': 0.8601, 'diameter_estimate': 5, 'clustering_coefficient': 0.2621, 'weakly_connected_components': 15, 'largest_wcc_size': 161, 'pagerank_top10_percent': 17.28, 'louvain_communities': 24, 'louvain_modularity': 0.499, 'label_entropy': 1.461, 'computational_time': 0.07073130691424012}, 'retrieval_queries': []}
2025-11-30 19:05:52,652 - src.pipeline.kg_builder - DEBUG - Batch 12 metrics: {
  "batch_idx": 12,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500752.6526737,
  "total_time": 18.111071611056104,
  "aggregation": 3.237975761294365e-06,
  "network_info": 0.006986589985899627,
  "llm_extraction": 17.81547411903739,
  "data_cleaning": 1.7179991118609905e-05,
  "neo4j_injection": 0.21652605291455984,
  "embedding_time": 0,
  "indexing_time": 0.004598999978043139,
  "graph_injection_time": 0.2117205080576241,
  "acs_metrics": {
    "node_count": 175,
    "relationship_count": 436,
    "density": 0.0143,
    "avg_degree": 4.9829,
    "avg_unique_neighbors": 4.96,
    "global_efficiency": 0.3233,
    "avg_path_length": 2.8876,
    "avg_degree_centrality": 0.0286,
    "max_degree_centrality": 0.3851,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0211,
    "degree_assortativity": -0.1631,
    "graph_robustness": 0.8601,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2621,
    "weakly_connected_components": 15,
    "largest_wcc_size": 161,
    "pagerank_top10_percent": 17.28,
    "louvain_communities": 24,
    "louvain_modularity": 0.499,
    "label_entropy": 1.461,
    "computational_time": 0.07073130691424012
  },
  "retrieval_queries": []
}
2025-11-30 19:05:52,653 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:05:52,653 - src.pipeline.kg_builder - INFO - Batch 13 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 17.82s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.07s
2025-11-30 19:05:52,653 - src.pipeline.kg_builder - INFO - Batch 13 completed in 18.11s
Processing KG batches:  18%|█▊        | 13/72 [04:31<19:04, 19.40s/it]2025-11-30 19:05:52,653 - src.pipeline.kg_builder - INFO - Processing batch 14/72 (3 items)
2025-11-30 19:05:52,653 - src.pipeline.kg_builder - DEBUG - Batch 14 current_video_time: 03:24-03:29
2025-11-30 19:05:52,658 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 175
- Total Relationships: 147
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Split content into 7 chunks (chunk_size=296, overlap=16)
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0 ~211 words, content: Time: 03:14-03:19 Content: The video sequence captures a scientific procedure, likely a titration or a similar quantitative analysis, being performed in a laboratory setting. The...
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_1 ~236 words, content: or experiment instructions. - **Key Equipment:** The central focus is the analytical balance. The person's hands are positioned to place the beaker onto the balance's...
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_2 ~248 words, content: fume hood. The primary activity involves the precise measurement and transfer of liquids, likely as part of a chemical synthesis or analysis process. In the...
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_3 ~262 words, content: to a setup that includes a glass tube and a stand, which is used to hold the flask in place. The person is carefully handling...
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_4 ~227 words, content: procedures involved in a laboratory setting. The use of protective gear, such as gloves, and the careful handling of equipment highlight the importance of safety...
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5 ~228 words, content: are using a pipette to transfer a liquid from the vial into the Erlenmeyer flask. The balance continues to display the negative weight, indicating the...
2025-11-30 19:05:52,659 - src.components.pre_llm_injector - DEBUG - Chunk[6] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6 ~64 words, content: laboratory setting using a digital balance to precisely measure and add a substance to a flask. The negative weight on the balance indicates that the...
2025-11-30 19:05:52,679 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:05:52,731 - src.components.pre_llm_injector - DEBUG - Found 59 existing chunk embeddings for similarity lookup
2025-11-30 19:05:52,753 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.815'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.803')]
2025-11-30 19:05:52,755 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:05:52,755 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:05:52,759 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2)
2025-11-30 19:05:52,760 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2)
2025-11-30 19:05:52,760 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0', '0.779'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1', '0.740')]
2025-11-30 19:05:52,760 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.723'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.689')]
2025-11-30 19:05:52,760 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.712'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_0', '0.705')]
2025-11-30 19:05:52,760 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.625'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1', '0.620')]
2025-11-30 19:05:52,760 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.704'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.692')]
2025-11-30 19:05:52,761 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.625'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3', '0.621')]
2025-11-30 19:05:52,761 - src.components.pre_llm_injector - DEBUG - Chunk 6 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.815'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.803')]
2025-11-30 19:05:52,761 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:05:52,761 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0) (~211 words) with timeout=5.0s retries=3
2025-11-30 19:05:54,179 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:05:54,179 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:05:54,179 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_1) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:05:55,306 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:05:55,306 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:05:55,307 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_2) (~248 words) with timeout=5.0s retries=3
2025-11-30 19:06:00,313 - src.components.pre_llm_injector - WARNING - Chunk 2 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:06:05,819 - src.components.pre_llm_injector - WARNING - Chunk 2 timed out after 5.0s (attempt 2/4), retrying...
2025-11-30 19:06:08,343 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 3)
2025-11-30 19:06:08,344 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:06:08,344 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_3) (~262 words) with timeout=5.0s retries=3
2025-11-30 19:06:09,482 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:06:09,482 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:06:09,483 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_4) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:06:10,755 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:06:10,755 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:06:10,755 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5) (~228 words) with timeout=5.0s retries=3
2025-11-30 19:06:11,911 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:06:11,911 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:06:11,911 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 6 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6) (~64 words) with timeout=5.0s retries=3
2025-11-30 19:06:13,071 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 6 (attempt 1)
2025-11-30 19:06:13,071 - src.components.pre_llm_injector - DEBUG - Chunk 6 returned 6 triplets
2025-11-30 19:06:13,072 - src.components.pre_llm_injector - INFO - Extracted 34 local triplets from 7 chunks
2025-11-30 19:06:13,072 - src.pipeline.kg_builder - INFO - Pre-extraction: 34 triplets in 20.41s
2025-11-30 19:06:13,072 - src.components.global_refiner - INFO - Capping refinement input: 34 → 15 triplets
2025-11-30 19:06:13,073 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[USES]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(Spatula / ID: 7_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["13_0", "13_2"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["13_0", "13_1", "13_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["13_0", "13_2"]}, {"head": "Beaker", "relation": "Is Placed On", "tail": "Precision_Balance", "source_chunks": ["13_0"]}, {"head": "Precision_Balance", "relation": "Displays", "tail": "Negative_Weight_Reading", "source_chunks": ["13_0"]}, {"head": "Laboratory_Bench", "relation": "Contains", "tail": "Magnetic_Stirrer", "source_chunks": ["13_0"]}, {"head": "Person", "relation": "Places", "tail": "Beaker", "source_chunks": ["13_1"]}, {"head": "Beaker", "relation": "Is Placed On", "tail": "Analytical Balance", "source_chunks": ["13_1"]}, {"head": "Analytical Balance", "relation": "Has", "tail": "Open Shield", "source_chunks": ["13_1"]}, {"head": "Person", "relation": "Prepares To Measure", "tail": "Liquid", "source_chunks": ["13_1"]}, {"head": "Lab", "relation": "Contains", "tail": "Analytical Balance", "source_chunks": ["13_1"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "-56.302_G", "source_chunks": ["13_2"]}, {"head": "Person", "relation": "Places", "tail": "Glass_Flask", "source_chunks": ["13_2"]}, {"head": "Glass_Flask", "relation": "Is Connected To", "tail": "Magnetic_Stirrer", "source_chunks": ["13_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Flask", "source_chunks": ["13_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:06:13,073 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1085 words, ~1410 tokens)
2025-11-30 19:06:13,073 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:06:25,538 - src.components.global_refiner - DEBUG - LLM call completed in 12.47s
2025-11-30 19:06:25,538 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['13_0', '13_2']], ['Person', 'Holds', 'Beaker', ['13_0', '13_1', '13_2']], ['Beaker', 'Contains', 'Clear_Liquid', ['13_0', '13_2']], ['Beaker', 'Is Placed On', 'Precision_Balance', ['13_0']], ['Precision_Balance', 'Displays', 'Negative_Weight_Reading', ['13_0']], ['Laboratory_Bench', 'Contains', 'Magnetic_Stirrer', ['13_0']], ['Person', 'Places', 'Beaker', ['13_1']], ['Beaker', 'Is Placed On', 'Analytical Balance', ['13_1']], ['Analytical Balance', 'Has', 'Open Shield', ['13_1']], ['Person', 'Prepares To Measure', 'Liquid', ['13_1']], ['Lab', 'Contains', 'Analytical Balance', ['13_1']], ['Digital_Balance', 'Displays', '-56.302_G', ['13_2']], ['Person', 'Places', 'Glass_Flask', ['13_2']], ['Glass_Flask', 'Is Connected To', 'Magnetic_Stirrer', ['13_2']], ['Person', 'Holds', 'Glass Flask', ['13_3']]] inter_chunk_relations=[['Laboratory_Bench', 'Contains', 'Laboratory Table', ['13_0']], ['Lab', 'Contains', 'Analytical Balance', ['13_1']], ['Beaker', 'Is Placed On', 'Analytical Balance', ['13_1']], ['Precision_Balance', 'Displays', 'Negative_Weight_Reading', ['13_0']], ['Digital_Balance', 'Displays', '-56.302_G', ['13_2']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}] prune_instructions=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Spatula'}, {'head': 'Person', 'relation': 'Uses', 'tail': 'Spatula'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass Flask'}]
2025-11-30 19:06:25,538 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['13_0', '13_2']], ['Person', 'Holds', 'Beaker', ['13_0', '13_1', '13_2']], ['Beaker', 'Contains', 'Clear_Liquid', ['13_0', '13_2']]]
2025-11-30 19:06:25,538 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Laboratory_Bench', 'Contains', 'Laboratory Table', ['13_0']], ['Lab', 'Contains', 'Analytical Balance', ['13_1']], ['Beaker', 'Is Placed On', 'Analytical Balance', ['13_1']]]
2025-11-30 19:06:25,538 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:06:25,538 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Spatula'}, {'head': 'Person', 'relation': 'Uses', 'tail': 'Spatula'}]
2025-11-30 19:06:25,538 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:06:25,538 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Spatula'}, {'head': 'Person', 'relation': 'Uses', 'tail': 'Spatula'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass Flask'}]
2025-11-30 19:06:25,538 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 12.47s, LLM: 12.47s)
2025-11-30 19:06:25,538 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 12.47s
2025-11-30 19:06:25,538 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:06:25,538 - src.pipeline.kg_builder - INFO - Pushing batch 14/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:06:25,539 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:06:25,777 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=191, relationships=160
2025-11-30 19:06:25,777 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:06:25,778 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Glove
2025-11-30 19:06:25,778 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:06:25,780 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Beaker
2025-11-30 19:06:25,782 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Spatula
2025-11-30 19:06:25,783 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Uses]-> Spatula
2025-11-30 19:06:25,784 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Glass Flask
2025-11-30 19:06:25,784 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:06:25,785 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory_Bench -[Contains]-> Laboratory Table
2025-11-30 19:06:25,787 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab -[Contains]-> Analytical Balance
2025-11-30 19:06:25,788 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is Placed On]-> Analytical Balance
2025-11-30 19:06:25,789 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Precision_Balance -[Displays]-> Negative_Weight_Reading
2025-11-30 19:06:25,791 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital_Balance -[Displays]-> -56.302_G
2025-11-30 19:06:25,792 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:06:25,798 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=191, relationships=152
2025-11-30 19:06:25,800 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:06:25,800 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:06:25,801 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:06:25,801 - src.components.neo4j_handler - INFO - Batch injected in 0.26s (triplets: 0.26s, indexes: 0.00s)
2025-11-30 19:06:25,802 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 66, 'with_embedding': 66, 'linked_chunks': 49}
2025-11-30 19:06:25,802 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:06:25,825 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 191 nodes
2025-11-30 19:06:25,862 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 174 nodes
2025-11-30 19:06:25,909 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 191, 'relationship_count': 471, 'density': 0.013, 'avg_degree': 4.9319, 'avg_unique_neighbors': 4.911, 'global_efficiency': 0.3155, 'avg_path_length': 2.8924, 'avg_degree_centrality': 0.026, 'max_degree_centrality': 0.3789, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0212, 'degree_assortativity': -0.1597, 'graph_robustness': 0.8705, 'diameter_estimate': 5, 'clustering_coefficient': 0.2525, 'weakly_connected_components': 18, 'largest_wcc_size': 174, 'pagerank_top10_percent': 15.54, 'louvain_communities': 28, 'louvain_modularity': 0.4978, 'label_entropy': 1.465, 'computational_time': 0.10699365509208292}
2025-11-30 19:06:25,909 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 13, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500785.909546, 'total_time': 33.25622037204448, 'aggregation': 4.450906999409199e-06, 'network_info': 0.0052709890296682715, 'llm_extraction': 32.88017448503524, 'data_cleaning': 1.9795959815382957e-05, 'neo4j_injection': 0.2621738270390779, 'embedding_time': 0, 'indexing_time': 0.0021670219721272588, 'graph_injection_time': 0.25978928699623793, 'acs_metrics': {'node_count': 191, 'relationship_count': 471, 'density': 0.013, 'avg_degree': 4.9319, 'avg_unique_neighbors': 4.911, 'global_efficiency': 0.3155, 'avg_path_length': 2.8924, 'avg_degree_centrality': 0.026, 'max_degree_centrality': 0.3789, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0212, 'degree_assortativity': -0.1597, 'graph_robustness': 0.8705, 'diameter_estimate': 5, 'clustering_coefficient': 0.2525, 'weakly_connected_components': 18, 'largest_wcc_size': 174, 'pagerank_top10_percent': 15.54, 'louvain_communities': 28, 'louvain_modularity': 0.4978, 'label_entropy': 1.465, 'computational_time': 0.10699365509208292}, 'retrieval_queries': []}
2025-11-30 19:06:25,909 - src.pipeline.kg_builder - DEBUG - Batch 13 metrics: {
  "batch_idx": 13,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500785.909546,
  "total_time": 33.25622037204448,
  "aggregation": 4.450906999409199e-06,
  "network_info": 0.0052709890296682715,
  "llm_extraction": 32.88017448503524,
  "data_cleaning": 1.9795959815382957e-05,
  "neo4j_injection": 0.2621738270390779,
  "embedding_time": 0,
  "indexing_time": 0.0021670219721272588,
  "graph_injection_time": 0.25978928699623793,
  "acs_metrics": {
    "node_count": 191,
    "relationship_count": 471,
    "density": 0.013,
    "avg_degree": 4.9319,
    "avg_unique_neighbors": 4.911,
    "global_efficiency": 0.3155,
    "avg_path_length": 2.8924,
    "avg_degree_centrality": 0.026,
    "max_degree_centrality": 0.3789,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0212,
    "degree_assortativity": -0.1597,
    "graph_robustness": 0.8705,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2525,
    "weakly_connected_components": 18,
    "largest_wcc_size": 174,
    "pagerank_top10_percent": 15.54,
    "louvain_communities": 28,
    "louvain_modularity": 0.4978,
    "label_entropy": 1.465,
    "computational_time": 0.10699365509208292
  },
  "retrieval_queries": []
}
2025-11-30 19:06:25,910 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:06:25,910 - src.pipeline.kg_builder - INFO - Batch 14 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 32.88s, Clean: 0.00s, Neo4j: 0.26s, ACS: 0.11s
2025-11-30 19:06:25,910 - src.pipeline.kg_builder - INFO - Batch 14 completed in 33.26s
Processing KG batches:  19%|█▉        | 14/72 [05:05<22:47, 23.59s/it]2025-11-30 19:06:25,910 - src.pipeline.kg_builder - INFO - Processing batch 15/72 (3 items)
2025-11-30 19:06:25,910 - src.pipeline.kg_builder - DEBUG - Batch 15 current_video_time: 03:39-03:44
2025-11-30 19:06:25,917 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 191
- Total Relationships: 152
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_0 ~211 words, content: Time: 03:29-03:34 Content: The sequence of images captures a detailed laboratory procedure, likely the preparation of a chemical solution. The perspective is first-person, showing the...
2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_1 ~196 words, content: etric flask, possibly to add a reagent. In frame 5, the scientist is seen using a pipette to transfer a liquid from a beaker into...
2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_2 ~230 words, content: Content: The sequence of frames captures a detailed process in a laboratory setting, focusing on the precise measurement and transfer of a liquid. The scene...
2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3 ~230 words, content: . Another person, dressed in a beige sweater and blue jeans, walks past in the background, indicating that the laboratory is active and not isolated....
2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_4 ~218 words, content: The reading on the balance fluctuates slightly, indicating the ongoing process of adding the liquid. - **Key Equipment and Environment:** - The person is wearing...
2025-11-30 19:06:25,918 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_5 ~33 words, content: , the pipette, and the balance highlights the importance of accuracy and precision in this scientific task. The entire sequence demonstrates a standard laboratory technique...
2025-11-30 19:06:25,938 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:06:25,989 - src.components.pre_llm_injector - DEBUG - Found 66 existing chunk embeddings for similarity lookup
2025-11-30 19:06:26,011 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.771')]
2025-11-30 19:06:26,013 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3
2025-11-30 19:06:26,013 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1
2025-11-30 19:06:26,016 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Glass Beaker / ID: 5_1), (Glass Beaker / ID: 5_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2)
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1)
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.654'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_2', '0.641')]
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.525'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_4', '0.499')]
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.655'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.626')]
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.771')]
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.724'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.690')]
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.639'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.630')]
2025-11-30 19:06:26,017 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:06:26,018 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_0) (~211 words) with timeout=5.0s retries=3
2025-11-30 19:06:27,406 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:06:27,406 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:06:27,406 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_1) (~196 words) with timeout=5.0s retries=3
2025-11-30 19:06:28,544 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:06:28,544 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:06:28,544 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_2) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:06:29,845 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:06:29,846 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:06:29,846 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:06:30,863 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:06:30,866 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:06:30,867 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_4) (~218 words) with timeout=5.0s retries=3
2025-11-30 19:06:31,808 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:06:31,808 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:06:31,809 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_5) (~33 words) with timeout=5.0s retries=3
2025-11-30 19:06:33,101 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:06:33,101 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:06:33,101 - src.components.pre_llm_injector - INFO - Extracted 29 local triplets from 6 chunks
2025-11-30 19:06:33,101 - src.pipeline.kg_builder - INFO - Pre-extraction: 29 triplets in 7.18s
2025-11-30 19:06:33,101 - src.components.global_refiner - INFO - Capping refinement input: 29 → 15 triplets
2025-11-30 19:06:33,101 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Glass Beaker / ID: 5_1), (Glass Beaker / ID: 5_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue Nitrile Glove / ID: 2_0), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Scientist", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["14_0"]}, {"head": "Scientist", "relation": "Holds", "tail": "Glass Vial", "source_chunks": ["14_0"]}, {"head": "Glass Vial", "relation": "Is Placed On", "tail": "Precision Balance", "source_chunks": ["14_0"]}, {"head": "Precision Balance", "relation": "Displays", "tail": "-56.301 G", "source_chunks": ["14_0"]}, {"head": "Scientist", "relation": "Uses", "tail": "Pipette", "source_chunks": ["14_0", "14_1"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["14_0", "14_1", "14_2", "14_3"]}, {"head": "Liquid", "relation": "Comes From", "tail": "Beaker", "source_chunks": ["14_1"]}, {"head": "Liquid", "relation": "Goes To", "tail": "Test Tube", "source_chunks": ["14_1"]}, {"head": "Scientist", "relation": "Holds", "tail": "Volumetric Flask", "source_chunks": ["14_1"]}, {"head": "Lab Table", "relation": "Contains", "tail": "Paper Document", "source_chunks": ["14_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["14_2"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["14_2", "14_3", "14_4"]}, {"head": "Liquid", "relation": "Is In", "tail": "Beaker", "source_chunks": ["14_2"]}, {"head": "Liquid", "relation": "Is Transferred To", "tail": "Volumetric_Flask", "source_chunks": ["14_2"]}, {"head": "Person", "relation": "Walks Past", "tail": "Another_Person", "source_chunks": ["14_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:06:33,101 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1076 words, ~1399 tokens)
2025-11-30 19:06:33,101 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:06:42,960 - src.components.global_refiner - DEBUG - LLM call completed in 9.86s
2025-11-30 19:06:42,960 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Scientist', 'Wears', 'Blue Nitrile Gloves', ['14_0']], ['Scientist', 'Holds', 'Glass Vial', ['14_0']], ['Glass Vial', 'Is Placed On', 'Precision Balance', ['14_0']], ['Precision Balance', 'Displays', '-56.301 G', ['14_0']], ['Scientist', 'Uses', 'Pipette', ['14_0', '14_1']], ['Pipette', 'Transfers', 'Liquid', ['14_0', '14_1', '14_2', '14_3']], ['Liquid', 'Comes From', 'Beaker', ['14_1']], ['Liquid', 'Goes To', 'Test Tube', ['14_1']], ['Scientist', 'Holds', 'Volumetric Flask', ['14_1']], ['Lab Table', 'Contains', 'Paper Document', ['14_1']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['14_2']], ['Person', 'Uses', 'Pipette', ['14_2', '14_3', '14_4']], ['Liquid', 'Is In', 'Beaker', ['14_2']], ['Liquid', 'Is Transferred To', 'Volumetric_Flask', ['14_2']], ['Person', 'Walks Past', 'Another_Person', ['14_2']]] inter_chunk_relations=[['Lab Table', 'Contains', 'Paper Document', ['14_1']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Scientist', 'existing': 'Person', 'existing_id': '0_0'}] prune_instructions=[]
2025-11-30 19:06:42,960 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Scientist', 'Wears', 'Blue Nitrile Gloves', ['14_0']], ['Scientist', 'Holds', 'Glass Vial', ['14_0']], ['Glass Vial', 'Is Placed On', 'Precision Balance', ['14_0']]]
2025-11-30 19:06:42,960 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Lab Table', 'Contains', 'Paper Document', ['14_1']]]
2025-11-30 19:06:42,960 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Scientist', 'existing': 'Person', 'existing_id': '0_0'}]
2025-11-30 19:06:42,960 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:06:42,960 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Scientist', 'existing': 'Person', 'existing_id': '0_0'}]
2025-11-30 19:06:42,960 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 9.86s, LLM: 9.86s)
2025-11-30 19:06:42,960 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 9.86s
2025-11-30 19:06:42,960 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:06:42,960 - src.pipeline.kg_builder - INFO - Pushing batch 15/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:06:42,960 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:06:43,178 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=206, relationships=164
2025-11-30 19:06:43,179 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:06:43,179 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:06:43,185 - src.components.neo4j_handler - DEBUG - APOC merge successful: Scientist -> Person
2025-11-30 19:06:43,185 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:06:43,192 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab Table -[Contains]-> Paper Document
2025-11-30 19:06:43,193 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:06:43,200 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=204, relationships=164
2025-11-30 19:06:43,202 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:06:43,202 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:06:43,203 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:06:43,203 - src.components.neo4j_handler - INFO - Batch injected in 0.24s (triplets: 0.24s, indexes: 0.00s)
2025-11-30 19:06:43,204 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 72, 'with_embedding': 72, 'linked_chunks': 54}
2025-11-30 19:06:43,204 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:06:43,222 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 204 nodes
2025-11-30 19:06:43,254 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 186 nodes
2025-11-30 19:06:43,297 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 204, 'relationship_count': 506, 'density': 0.0122, 'avg_degree': 4.9608, 'avg_unique_neighbors': 4.9412, 'global_efficiency': 0.3168, 'avg_path_length': 2.8772, 'avg_degree_centrality': 0.0244, 'max_degree_centrality': 0.3941, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0288, 'degree_assortativity': -0.1653, 'graph_robustness': 0.6917, 'diameter_estimate': 5, 'clustering_coefficient': 0.2582, 'weakly_connected_components': 19, 'largest_wcc_size': 186, 'pagerank_top10_percent': 14.52, 'louvain_communities': 30, 'louvain_modularity': 0.4963, 'label_entropy': 1.4683, 'computational_time': 0.09295577893499285}
2025-11-30 19:06:43,297 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 14, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500803.2973983, 'total_time': 17.387192573049106, 'aggregation': 2.3850006982684135e-06, 'network_info': 0.007298773038201034, 'llm_extraction': 17.042868825956248, 'data_cleaning': 1.603097189217806e-05, 'neo4j_injection': 0.242669758037664, 'embedding_time': 0, 'indexing_time': 0.0030809789896011353, 'graph_injection_time': 0.2393620259827003, 'acs_metrics': {'node_count': 204, 'relationship_count': 506, 'density': 0.0122, 'avg_degree': 4.9608, 'avg_unique_neighbors': 4.9412, 'global_efficiency': 0.3168, 'avg_path_length': 2.8772, 'avg_degree_centrality': 0.0244, 'max_degree_centrality': 0.3941, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0288, 'degree_assortativity': -0.1653, 'graph_robustness': 0.6917, 'diameter_estimate': 5, 'clustering_coefficient': 0.2582, 'weakly_connected_components': 19, 'largest_wcc_size': 186, 'pagerank_top10_percent': 14.52, 'louvain_communities': 30, 'louvain_modularity': 0.4963, 'label_entropy': 1.4683, 'computational_time': 0.09295577893499285}, 'retrieval_queries': []}
2025-11-30 19:06:43,297 - src.pipeline.kg_builder - DEBUG - Batch 14 metrics: {
  "batch_idx": 14,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500803.2973983,
  "total_time": 17.387192573049106,
  "aggregation": 2.3850006982684135e-06,
  "network_info": 0.007298773038201034,
  "llm_extraction": 17.042868825956248,
  "data_cleaning": 1.603097189217806e-05,
  "neo4j_injection": 0.242669758037664,
  "embedding_time": 0,
  "indexing_time": 0.0030809789896011353,
  "graph_injection_time": 0.2393620259827003,
  "acs_metrics": {
    "node_count": 204,
    "relationship_count": 506,
    "density": 0.0122,
    "avg_degree": 4.9608,
    "avg_unique_neighbors": 4.9412,
    "global_efficiency": 0.3168,
    "avg_path_length": 2.8772,
    "avg_degree_centrality": 0.0244,
    "max_degree_centrality": 0.3941,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0288,
    "degree_assortativity": -0.1653,
    "graph_robustness": 0.6917,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2582,
    "weakly_connected_components": 19,
    "largest_wcc_size": 186,
    "pagerank_top10_percent": 14.52,
    "louvain_communities": 30,
    "louvain_modularity": 0.4963,
    "label_entropy": 1.4683,
    "computational_time": 0.09295577893499285
  },
  "retrieval_queries": []
}
2025-11-30 19:06:43,297 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:06:43,297 - src.pipeline.kg_builder - INFO - Batch 15 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 17.04s, Clean: 0.00s, Neo4j: 0.24s, ACS: 0.09s
2025-11-30 19:06:43,297 - src.pipeline.kg_builder - INFO - Batch 15 completed in 17.39s
Processing KG batches:  21%|██        | 15/72 [05:22<20:37, 21.72s/it]2025-11-30 19:06:43,298 - src.pipeline.kg_builder - INFO - Processing batch 16/72 (3 items)
2025-11-30 19:06:43,298 - src.pipeline.kg_builder - DEBUG - Batch 16 current_video_time: 03:54-03:59
2025-11-30 19:06:43,307 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 204
- Total Relationships: 164
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:06:43,308 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:06:43,308 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_0 ~215 words, content: Time: 03:44-03:49 Content: The video shows a person in a laboratory setting, wearing blue nitrile gloves, performing a precise liquid transfer. The person is using...
2025-11-30 19:06:43,308 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_1 ~223 words, content: balance. The balance, a Mettler Toledo model, is actively being used to measure the mass of the liquid being transferred. The display on the balance...
2025-11-30 19:06:43,308 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2 ~122 words, content: , which is resting on a digital balance. The digital balance, a Mettler Toledo model, is actively measuring the weight of the contents. The display...
2025-11-30 19:06:43,328 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:06:43,373 - src.components.pre_llm_injector - DEBUG - Found 72 existing chunk embeddings for similarity lookup
2025-11-30 19:06:43,386 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.819'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.805')]
2025-11-30 19:06:43,388 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3 via source_chunk_ids
2025-11-30 19:06:43,388 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:06:43,392 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2)
2025-11-30 19:06:43,392 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.585'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.562')]
2025-11-30 19:06:43,392 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.769'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.746')]
2025-11-30 19:06:43,392 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.819'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.805')]
2025-11-30 19:06:43,392 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:06:43,392 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_0) (~215 words) with timeout=5.0s retries=3
2025-11-30 19:06:44,591 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:06:44,591 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:06:44,592 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_1) (~223 words) with timeout=5.0s retries=3
2025-11-30 19:06:45,890 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:06:45,891 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:06:45,891 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2) (~122 words) with timeout=5.0s retries=3
2025-11-30 19:06:47,123 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:06:47,123 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:06:47,123 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:06:47,123 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 3.82s
2025-11-30 19:06:47,124 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:06:47,124 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["15_0"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["15_0", "15_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["15_0"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["15_0"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["15_0"]}, {"head": "Digital_Balance", "relation": "Measures", "tail": "Liquid_Weight", "source_chunks": ["15_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["15_1"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Beaker", "source_chunks": ["15_1"]}, {"head": "Pipette", "relation": "Is Positioned Over", "tail": "Volumetric Flask", "source_chunks": ["15_1"]}, {"head": "Volumetric Flask", "relation": "Rests On", "tail": "Digital Balance", "source_chunks": ["15_1"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "Negative Reading", "source_chunks": ["15_1"]}, {"head": "Digital Balance", "relation": "Measures", "tail": "Mass", "source_chunks": ["15_2"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "Negative Value", "source_chunks": ["15_2"]}, {"head": "Flask", "relation": "Rests On", "tail": "Digital Balance", "source_chunks": ["15_2"]}, {"head": "Person", "relation": "Measures", "tail": "Mass Of Liquid", "source_chunks": ["15_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:06:47,124 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~826 words, ~1074 tokens)
2025-11-30 19:06:47,124 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:06:59,241 - src.components.global_refiner - DEBUG - LLM call completed in 12.12s
2025-11-30 19:06:59,241 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['15_0']], ['Person', 'Holds', 'Pipette', ['15_0', '15_1']], ['Person', 'Holds', 'Beaker', ['15_0']], ['Person', 'Holds', 'Volumetric_Flask', ['15_0']], ['Pipette', 'Transfers', 'Liquid', ['15_0']], ['Digital_Balance', 'Measures', 'Liquid_Weight', ['15_0']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['15_1']], ['Person', 'Holds', 'Glass Beaker', ['15_1']], ['Pipette', 'Is Positioned Over', 'Volumetric Flask', ['15_1']], ['Volumetric Flask', 'Rests On', 'Digital Balance', ['15_1']], ['Digital Balance', 'Displays', 'Negative Reading', ['15_1']], ['Digital Balance', 'Measures', 'Mass', ['15_2']], ['Digital Balance', 'Displays', 'Negative Value', ['15_2']], ['Flask', 'Rests On', 'Digital Balance', ['15_2']], ['Person', 'Measures', 'Mass Of Liquid', ['15_2']]] inter_chunk_relations=[['Digital Balance', 'Rests On', 'Laboratory Table', ['15_1']], ['Digital Balance', 'Rests On', 'Laboratory Table', ['15_2']], ['Volumetric Flask', 'Rests On', 'Laboratory Table', ['15_1']], ['Flask', 'Rests On', 'Laboratory Table', ['15_2']], ['Person', 'Holds', 'Laboratory Table', ['15_0']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Volumetric_Flask'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}]
2025-11-30 19:06:59,241 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['15_0']], ['Person', 'Holds', 'Pipette', ['15_0', '15_1']], ['Person', 'Holds', 'Beaker', ['15_0']]]
2025-11-30 19:06:59,241 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Digital Balance', 'Rests On', 'Laboratory Table', ['15_1']], ['Digital Balance', 'Rests On', 'Laboratory Table', ['15_2']], ['Volumetric Flask', 'Rests On', 'Laboratory Table', ['15_1']]]
2025-11-30 19:06:59,241 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:06:59,241 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Volumetric_Flask'}]
2025-11-30 19:06:59,242 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:06:59,242 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Volumetric_Flask'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}]
2025-11-30 19:06:59,242 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 12.12s, LLM: 12.12s)
2025-11-30 19:06:59,242 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 12.12s
2025-11-30 19:06:59,242 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:06:59,242 - src.pipeline.kg_builder - INFO - Pushing batch 16/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:06:59,242 - src.components.neo4j_handler - INFO - Adding 19 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:06:59,470 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=214, relationships=181
2025-11-30 19:06:59,470 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:06:59,471 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:06:59,471 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:06:59,477 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Beaker
2025-11-30 19:06:59,480 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Glass Beaker
2025-11-30 19:06:59,482 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Volumetric_Flask
2025-11-30 19:06:59,484 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Pipette
2025-11-30 19:06:59,484 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:06:59,486 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital Balance -[Rests On]-> Laboratory Table
2025-11-30 19:06:59,487 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital Balance -[Rests On]-> Laboratory Table
2025-11-30 19:06:59,490 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Volumetric Flask -[Rests On]-> Laboratory Table
2025-11-30 19:06:59,519 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Flask -[Rests On]-> Laboratory Table
2025-11-30 19:06:59,521 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:06:59,522 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:06:59,528 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=213, relationships=177
2025-11-30 19:06:59,532 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:06:59,532 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:06:59,533 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:06:59,533 - src.components.neo4j_handler - INFO - Batch injected in 0.29s (triplets: 0.29s, indexes: 0.00s)
2025-11-30 19:06:59,534 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 75, 'with_embedding': 75, 'linked_chunks': 57}
2025-11-30 19:06:59,534 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:06:59,553 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 213 nodes
2025-11-30 19:06:59,590 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 195 nodes
2025-11-30 19:06:59,638 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 213, 'relationship_count': 542, 'density': 0.012, 'avg_degree': 5.0892, 'avg_unique_neighbors': 5.0704, 'global_efficiency': 0.3194, 'avg_path_length': 2.8738, 'avg_degree_centrality': 0.024, 'max_degree_centrality': 0.4009, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0236, 'degree_assortativity': -0.1592, 'graph_robustness': 0.6771, 'diameter_estimate': 5, 'clustering_coefficient': 0.2613, 'weakly_connected_components': 19, 'largest_wcc_size': 195, 'pagerank_top10_percent': 13.92, 'louvain_communities': 29, 'louvain_modularity': 0.4912, 'label_entropy': 1.468, 'computational_time': 0.10384628595784307}
2025-11-30 19:06:59,638 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 15, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500819.6388512, 'total_time': 16.340786119922996, 'aggregation': 2.4390174075961113e-06, 'network_info': 0.009695049957372248, 'llm_extraction': 15.934371204930358, 'data_cleaning': 4.184700082987547e-05, 'neo4j_injection': 0.2907820249674842, 'embedding_time': 0, 'indexing_time': 0.004939666949212551, 'graph_injection_time': 0.2854858230566606, 'acs_metrics': {'node_count': 213, 'relationship_count': 542, 'density': 0.012, 'avg_degree': 5.0892, 'avg_unique_neighbors': 5.0704, 'global_efficiency': 0.3194, 'avg_path_length': 2.8738, 'avg_degree_centrality': 0.024, 'max_degree_centrality': 0.4009, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0236, 'degree_assortativity': -0.1592, 'graph_robustness': 0.6771, 'diameter_estimate': 5, 'clustering_coefficient': 0.2613, 'weakly_connected_components': 19, 'largest_wcc_size': 195, 'pagerank_top10_percent': 13.92, 'louvain_communities': 29, 'louvain_modularity': 0.4912, 'label_entropy': 1.468, 'computational_time': 0.10384628595784307}, 'retrieval_queries': []}
2025-11-30 19:06:59,638 - src.pipeline.kg_builder - DEBUG - Batch 15 metrics: {
  "batch_idx": 15,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500819.6388512,
  "total_time": 16.340786119922996,
  "aggregation": 2.4390174075961113e-06,
  "network_info": 0.009695049957372248,
  "llm_extraction": 15.934371204930358,
  "data_cleaning": 4.184700082987547e-05,
  "neo4j_injection": 0.2907820249674842,
  "embedding_time": 0,
  "indexing_time": 0.004939666949212551,
  "graph_injection_time": 0.2854858230566606,
  "acs_metrics": {
    "node_count": 213,
    "relationship_count": 542,
    "density": 0.012,
    "avg_degree": 5.0892,
    "avg_unique_neighbors": 5.0704,
    "global_efficiency": 0.3194,
    "avg_path_length": 2.8738,
    "avg_degree_centrality": 0.024,
    "max_degree_centrality": 0.4009,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0236,
    "degree_assortativity": -0.1592,
    "graph_robustness": 0.6771,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2613,
    "weakly_connected_components": 19,
    "largest_wcc_size": 195,
    "pagerank_top10_percent": 13.92,
    "louvain_communities": 29,
    "louvain_modularity": 0.4912,
    "label_entropy": 1.468,
    "computational_time": 0.10384628595784307
  },
  "retrieval_queries": []
}
2025-11-30 19:06:59,639 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:06:59,639 - src.pipeline.kg_builder - INFO - Batch 16 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 15.93s, Clean: 0.00s, Neo4j: 0.29s, ACS: 0.10s
2025-11-30 19:06:59,639 - src.pipeline.kg_builder - INFO - Batch 16 completed in 16.34s
Processing KG batches:  22%|██▏       | 16/72 [05:38<18:45, 20.10s/it]2025-11-30 19:06:59,639 - src.pipeline.kg_builder - INFO - Processing batch 17/72 (3 items)
2025-11-30 19:06:59,639 - src.pipeline.kg_builder - DEBUG - Batch 17 current_video_time: 04:09-04:14
2025-11-30 19:06:59,645 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 213
- Total Relationships: 177
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:06:59,645 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:06:59,645 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_0 ~218 words, content: Time: 03:59-04:04 Content: In a laboratory setting, a person wearing blue nitrile gloves is performing a precise measurement. The scene is viewed from a first-person...
2025-11-30 19:06:59,645 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1 ~223 words, content: a first-person perspective, with the person's left arm, which has a watch with a black leather strap, visible in the foreground. The primary action involves...
2025-11-30 19:06:59,645 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_2 ~222 words, content: person, whose arm and hand are visible, wearing blue nitrile gloves and a black watch. They are performing a quantitative transfer of a liquid using...
2025-11-30 19:06:59,645 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3 ~56 words, content: the pipette is positioned directly above the flask's opening to ensure accurate transfer. The overall context suggests a methodical and precise scientific task, such as...
2025-11-30 19:06:59,665 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:06:59,711 - src.components.pre_llm_injector - DEBUG - Found 75 existing chunk embeddings for similarity lookup
2025-11-30 19:06:59,728 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3', '0.798')]
2025-11-30 19:06:59,729 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3
2025-11-30 19:06:59,729 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2
2025-11-30 19:06:59,733 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (White_Powder / ID: 8_0)-[IS_TRANSFERRED_TO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2)
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2)
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3', '0.798'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.773')]
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.720'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.711')]
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.658'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.645')]
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.797')]
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:06:59,736 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_0) (~218 words) with timeout=5.0s retries=3
2025-11-30 19:07:01,086 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:07:01,086 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:07:01,086 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1) (~223 words) with timeout=5.0s retries=3
2025-11-30 19:07:02,257 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:07:02,257 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:07:02,257 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_2) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:07:03,342 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:07:03,342 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:07:03,343 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3) (~56 words) with timeout=5.0s retries=3
2025-11-30 19:07:04,817 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:07:04,817 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:07:04,817 - src.components.pre_llm_injector - INFO - Extracted 20 local triplets from 4 chunks
2025-11-30 19:07:04,817 - src.pipeline.kg_builder - INFO - Pre-extraction: 20 triplets in 5.17s
2025-11-30 19:07:04,818 - src.components.global_refiner - INFO - Capping refinement input: 20 → 15 triplets
2025-11-30 19:07:04,818 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (White_Powder / ID: 8_0)-[IS_TRANSFERRED_TO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["16_0", "16_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["16_0", "16_1", "16_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Pipette", "source_chunks": ["16_0"]}, {"head": "Glass Pipette", "relation": "Transfers", "tail": "Clear Liquid", "source_chunks": ["16_0"]}, {"head": "Glass Volumetric Flask", "relation": "Is On", "tail": "Digital Balance", "source_chunks": ["16_0"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "-56.301 G", "source_chunks": ["16_0"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["16_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital Balance", "source_chunks": ["16_1"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "Negative_Mass_Value", "source_chunks": ["16_1"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["16_1", "16_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["16_2"]}, {"head": "Person", "relation": "Wears", "tail": "Black_Watch", "source_chunks": ["16_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["16_2"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["16_2"]}, {"head": "Pipette", "relation": "Is Positioned Above", "tail": "Flask", "source_chunks": ["16_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:07:04,818 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1463 words, ~1902 tokens)
2025-11-30 19:07:04,818 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:07:20,065 - src.components.global_refiner - DEBUG - LLM call completed in 15.25s
2025-11-30 19:07:20,065 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue Nitrile Gloves', ['16_0', '16_1']], ['Person', 'Holds', 'Beaker', ['16_0', '16_1', '16_2']], ['Person', 'Holds', 'Glass Pipette', ['16_0']], ['Glass Pipette', 'Transfers', 'Clear Liquid', ['16_0']], ['Glass Volumetric Flask', 'Is On', 'Digital Balance', ['16_0']], ['Digital Balance', 'Displays', '-56.301 G', ['16_0']], ['Person', 'Holds', 'Pipette', ['16_1']], ['Beaker', 'Is On', 'Digital Balance', ['16_1']], ['Digital Balance', 'Displays', 'Negative_Mass_Value', ['16_1']], ['Pipette', 'Transfers', 'Liquid', ['16_1', '16_2']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['16_2']], ['Person', 'Wears', 'Black_Watch', ['16_2']], ['Beaker', 'Contains', 'Liquid', ['16_2']], ['Person', 'Uses', 'Pipette', ['16_2']], ['Pipette', 'Is Positioned Above', 'Flask', ['16_3']]] inter_chunk_relations=[['Beaker', 'Is On', 'Digital Balance', ['16_1']], ['Digital Balance', 'Displays', '-56.301 G', ['16_0']], ['Glass Volumetric Flask', 'Is On', 'Digital Balance', ['16_0']], ['Person', 'Holds', 'Beaker', ['16_0', '16_1', '16_2']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['16_0', '16_1']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Black_Watch', 'existing': 'Watch', 'existing_id': '7_2'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:07:20,065 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue Nitrile Gloves', ['16_0', '16_1']], ['Person', 'Holds', 'Beaker', ['16_0', '16_1', '16_2']], ['Person', 'Holds', 'Glass Pipette', ['16_0']]]
2025-11-30 19:07:20,065 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Digital Balance', ['16_1']], ['Digital Balance', 'Displays', '-56.301 G', ['16_0']], ['Glass Volumetric Flask', 'Is On', 'Digital Balance', ['16_0']]]
2025-11-30 19:07:20,065 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=3, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Black_Watch', 'existing': 'Watch', 'existing_id': '7_2'}]
2025-11-30 19:07:20,065 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:07:20,065 - src.components.global_refiner - INFO - LLM suggested 3 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Black_Watch', 'existing': 'Watch', 'existing_id': '7_2'}]
2025-11-30 19:07:20,065 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:07:20,065 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 15.25s, LLM: 15.25s)
2025-11-30 19:07:20,066 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 15.25s
2025-11-30 19:07:20,066 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:07:20,066 - src.pipeline.kg_builder - INFO - Pushing batch 17/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:07:20,066 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:07:20,239 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=223, relationships=187
2025-11-30 19:07:20,239 - src.components.neo4j_handler - INFO - Applying 3 merge instructions
2025-11-30 19:07:20,240 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:07:20,240 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:07:20,245 - src.components.neo4j_handler - DEBUG - APOC merge successful: Black_Watch -> Watch
2025-11-30 19:07:20,245 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:07:20,251 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:07:20,252 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:07:20,252 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:07:20,253 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:07:20,253 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:07:20,254 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Digital Balance
2025-11-30 19:07:20,256 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital Balance -[Displays]-> -56.301 G
2025-11-30 19:07:20,258 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Glass Volumetric Flask -[Is On]-> Digital Balance
2025-11-30 19:07:20,259 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:07:20,260 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:07:20,261 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:07:20,266 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=221, relationships=183
2025-11-30 19:07:20,269 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:07:20,269 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:07:20,269 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:07:20,269 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.20s, indexes: 0.00s)
2025-11-30 19:07:20,270 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 79, 'with_embedding': 79, 'linked_chunks': 61}
2025-11-30 19:07:20,270 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:07:20,291 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 221 nodes
2025-11-30 19:07:20,331 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 203 nodes
2025-11-30 19:07:20,382 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 221, 'relationship_count': 570, 'density': 0.0117, 'avg_degree': 5.1584, 'avg_unique_neighbors': 5.1403, 'global_efficiency': 0.3211, 'avg_path_length': 2.8761, 'avg_degree_centrality': 0.0234, 'max_degree_centrality': 0.4, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.025, 'degree_assortativity': -0.1498, 'graph_robustness': 0.6825, 'diameter_estimate': 5, 'clustering_coefficient': 0.2601, 'weakly_connected_components': 19, 'largest_wcc_size': 203, 'pagerank_top10_percent': 13.4, 'louvain_communities': 28, 'louvain_modularity': 0.4851, 'label_entropy': 1.4703, 'computational_time': 0.11196589190512896}
2025-11-30 19:07:20,383 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 16, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500840.383051, 'total_time': 20.74348732002545, 'aggregation': 2.8249341994524e-06, 'network_info': 0.005562911042943597, 'llm_extraction': 20.420788810006343, 'data_cleaning': 3.67180909961462e-05, 'neo4j_injection': 0.2036273090634495, 'embedding_time': 0, 'indexing_time': 0.0031403900356963277, 'graph_injection_time': 0.2001649180892855, 'acs_metrics': {'node_count': 221, 'relationship_count': 570, 'density': 0.0117, 'avg_degree': 5.1584, 'avg_unique_neighbors': 5.1403, 'global_efficiency': 0.3211, 'avg_path_length': 2.8761, 'avg_degree_centrality': 0.0234, 'max_degree_centrality': 0.4, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.025, 'degree_assortativity': -0.1498, 'graph_robustness': 0.6825, 'diameter_estimate': 5, 'clustering_coefficient': 0.2601, 'weakly_connected_components': 19, 'largest_wcc_size': 203, 'pagerank_top10_percent': 13.4, 'louvain_communities': 28, 'louvain_modularity': 0.4851, 'label_entropy': 1.4703, 'computational_time': 0.11196589190512896}, 'retrieval_queries': []}
2025-11-30 19:07:20,383 - src.pipeline.kg_builder - DEBUG - Batch 16 metrics: {
  "batch_idx": 16,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500840.383051,
  "total_time": 20.74348732002545,
  "aggregation": 2.8249341994524e-06,
  "network_info": 0.005562911042943597,
  "llm_extraction": 20.420788810006343,
  "data_cleaning": 3.67180909961462e-05,
  "neo4j_injection": 0.2036273090634495,
  "embedding_time": 0,
  "indexing_time": 0.0031403900356963277,
  "graph_injection_time": 0.2001649180892855,
  "acs_metrics": {
    "node_count": 221,
    "relationship_count": 570,
    "density": 0.0117,
    "avg_degree": 5.1584,
    "avg_unique_neighbors": 5.1403,
    "global_efficiency": 0.3211,
    "avg_path_length": 2.8761,
    "avg_degree_centrality": 0.0234,
    "max_degree_centrality": 0.4,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.025,
    "degree_assortativity": -0.1498,
    "graph_robustness": 0.6825,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2601,
    "weakly_connected_components": 19,
    "largest_wcc_size": 203,
    "pagerank_top10_percent": 13.4,
    "louvain_communities": 28,
    "louvain_modularity": 0.4851,
    "label_entropy": 1.4703,
    "computational_time": 0.11196589190512896
  },
  "retrieval_queries": []
}
2025-11-30 19:07:20,383 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:07:20,383 - src.pipeline.kg_builder - INFO - Batch 17 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 20.42s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.11s
2025-11-30 19:07:20,383 - src.pipeline.kg_builder - INFO - Batch 17 completed in 20.74s
Processing KG batches:  24%|██▎       | 17/72 [05:59<18:36, 20.29s/it]2025-11-30 19:07:20,383 - src.pipeline.kg_builder - INFO - Processing batch 18/72 (3 items)
2025-11-30 19:07:20,383 - src.pipeline.kg_builder - DEBUG - Batch 18 current_video_time: 04:24-04:29
2025-11-30 19:07:20,390 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 221
- Total Relationships: 183
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:07:20,390 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:07:20,390 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_0 ~224 words, content: Time: 04:14-04:19 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a precise liquid transfer, performed with care and precision. The...
2025-11-30 19:07:20,390 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_1 ~229 words, content: used to add a liquid to the beaker. The person's hands are steady, and the focus remains on the precise measurement of the liquid. The...
2025-11-30 19:07:20,390 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2 ~218 words, content: aker. - **Equipment and Setup:** The central focus is the digital balance, which displays a reading of approximately $56.30$ grams. This indicates the person is...
2025-11-30 19:07:20,390 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_3 ~222 words, content: bench. A person, whose arm is visible, is using a pipette to transfer a liquid. The liquid is being added to a glass beaker that...
2025-11-30 19:07:20,390 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4 ~106 words, content: - The background shows a typical lab environment with a glass-fronted cabinet, a door, and other equipment. - The digital balance's display changes slightly throughout...
2025-11-30 19:07:20,411 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:07:20,461 - src.components.pre_llm_injector - DEBUG - Found 79 existing chunk embeddings for similarity lookup
2025-11-30 19:07:20,482 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2', '0.790'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.787')]
2025-11-30 19:07:20,484 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2
2025-11-30 19:07:20,484 - src.components.pre_llm_injector - DEBUG - Found 9 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0
2025-11-30 19:07:20,490 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[IS_ON]->(Laboratory_Bench / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Precision_Balance / ID: 13_0)-[DISPLAYS]->(Negative_Weight_Reading / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2)
2025-11-30 19:07:20,492 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2)
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_1', '0.568'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.560')]
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.787'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_1', '0.774')]
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.767'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1', '0.759')]
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.583'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.568')]
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2', '0.790'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.787')]
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:07:20,493 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_0) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:07:21,803 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:07:21,803 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:07:21,803 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:07:22,998 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:07:22,998 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:07:22,999 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2) (~218 words) with timeout=5.0s retries=3
2025-11-30 19:07:23,948 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:07:23,948 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:07:23,948 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_3) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:07:25,190 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:07:25,190 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:07:25,191 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4) (~106 words) with timeout=5.0s retries=3
2025-11-30 19:07:26,376 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:07:26,376 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:07:26,377 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 5 chunks
2025-11-30 19:07:26,377 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 5.99s
2025-11-30 19:07:26,377 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:07:26,377 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[IS_ON]->(Laboratory_Bench / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Precision_Balance / ID: 13_0)-[DISPLAYS]->(Negative_Weight_Reading / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["17_0", "17_1"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["17_0", "17_1", "17_2", "17_3"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["17_0", "17_1", "17_3"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital_Balance", "source_chunks": ["17_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Negative_Reading", "source_chunks": ["17_0"]}, {"head": "Person", "relation": "Uses", "tail": "White_Plastic_Bottle", "source_chunks": ["17_0"]}, {"head": "Person", "relation": "Uses", "tail": "Wash_Bottle", "source_chunks": ["17_1"]}, {"head": "Beaker", "relation": "Receives", "tail": "Liquid", "source_chunks": ["17_1"]}, {"head": "Digital_Balance", "relation": "Measures", "tail": "Mass_Of_Liquid", "source_chunks": ["17_1"]}, {"head": "Person", "relation": "Wears", "tail": "Watch", "source_chunks": ["17_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["17_2"]}, {"head": "Digital Balance", "relation": "Measures", "tail": "Mass", "source_chunks": ["17_2"]}, {"head": "Lab Table", "relation": "Contains", "tail": "Beaker", "source_chunks": ["17_2"]}, {"head": "Lab Table", "relation": "Contains", "tail": "Document", "source_chunks": ["17_2"]}, {"head": "Person", "relation": "Holds", "tail": "Squeeze Bottle", "source_chunks": ["17_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:07:26,377 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1608 words, ~2090 tokens)
2025-11-30 19:07:26,377 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:07:34,609 - src.components.global_refiner - DEBUG - LLM call completed in 8.23s
2025-11-30 19:07:34,609 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['17_0', '17_1']], ['Person', 'Holds', 'Pipette', ['17_0', '17_1', '17_2', '17_3']], ['Pipette', 'Transfers', 'Liquid', ['17_0', '17_1', '17_3']], ['Beaker', 'Is On', 'Digital_Balance', ['17_0']], ['Digital_Balance', 'Displays', 'Negative_Reading', ['17_0']], ['Person', 'Uses', 'White_Plastic_Bottle', ['17_0']], ['Person', 'Uses', 'Wash_Bottle', ['17_1']], ['Beaker', 'Receives', 'Liquid', ['17_1']], ['Digital_Balance', 'Measures', 'Mass_Of_Liquid', ['17_1']], ['Person', 'Wears', 'Watch', ['17_2']], ['Beaker', 'Contains', 'Liquid', ['17_2']], ['Digital_Balance', 'Measures', 'Mass', ['17_2']], ['Lab Table', 'Contains', 'Beaker', ['17_2']], ['Lab Table', 'Contains', 'Document', ['17_2']], ['Person', 'Holds', 'Squeeze Bottle', ['17_3']]] inter_chunk_relations=[['Lab Table', 'Contains', 'Laboratory Table', ['17_2']]] merge_instructions=[] prune_instructions=[]
2025-11-30 19:07:34,609 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['17_0', '17_1']], ['Person', 'Holds', 'Pipette', ['17_0', '17_1', '17_2', '17_3']], ['Pipette', 'Transfers', 'Liquid', ['17_0', '17_1', '17_3']]]
2025-11-30 19:07:34,609 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Lab Table', 'Contains', 'Laboratory Table', ['17_2']]]
2025-11-30 19:07:34,609 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:07:34,609 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:07:34,610 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 8.23s, LLM: 8.23s)
2025-11-30 19:07:34,610 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 8.23s
2025-11-30 19:07:34,610 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:07:34,610 - src.pipeline.kg_builder - INFO - Pushing batch 18/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:07:34,610 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:07:34,793 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=229, relationships=194
2025-11-30 19:07:34,793 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:07:34,795 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab Table -[Contains]-> Laboratory Table
2025-11-30 19:07:34,796 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:07:34,802 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=229, relationships=194
2025-11-30 19:07:34,806 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:07:34,806 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:07:34,807 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:07:34,807 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:07:34,808 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 84, 'with_embedding': 84, 'linked_chunks': 65}
2025-11-30 19:07:34,808 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:07:34,830 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 229 nodes
2025-11-30 19:07:34,873 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 210 nodes
2025-11-30 19:07:34,930 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 229, 'relationship_count': 608, 'density': 0.0116, 'avg_degree': 5.31, 'avg_unique_neighbors': 5.2926, 'global_efficiency': 0.3231, 'avg_path_length': 2.8471, 'avg_degree_centrality': 0.0233, 'max_degree_centrality': 0.4123, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0249, 'degree_assortativity': -0.1502, 'graph_robustness': 0.6809, 'diameter_estimate': 5, 'clustering_coefficient': 0.2587, 'weakly_connected_components': 20, 'largest_wcc_size': 210, 'pagerank_top10_percent': 12.86, 'louvain_communities': 30, 'louvain_modularity': 0.4772, 'label_entropy': 1.4741, 'computational_time': 0.12231687200255692}
2025-11-30 19:07:34,930 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 17, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500854.930816, 'total_time': 14.547016866970807, 'aggregation': 3.2350653782486916e-06, 'network_info': 0.006283942959271371, 'llm_extraction': 14.219825394102372, 'data_cleaning': 1.5572994016110897e-05, 'neo4j_injection': 0.1972039620159194, 'embedding_time': 0, 'indexing_time': 0.004459678893908858, 'graph_injection_time': 0.19254170497879386, 'acs_metrics': {'node_count': 229, 'relationship_count': 608, 'density': 0.0116, 'avg_degree': 5.31, 'avg_unique_neighbors': 5.2926, 'global_efficiency': 0.3231, 'avg_path_length': 2.8471, 'avg_degree_centrality': 0.0233, 'max_degree_centrality': 0.4123, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0249, 'degree_assortativity': -0.1502, 'graph_robustness': 0.6809, 'diameter_estimate': 5, 'clustering_coefficient': 0.2587, 'weakly_connected_components': 20, 'largest_wcc_size': 210, 'pagerank_top10_percent': 12.86, 'louvain_communities': 30, 'louvain_modularity': 0.4772, 'label_entropy': 1.4741, 'computational_time': 0.12231687200255692}, 'retrieval_queries': []}
2025-11-30 19:07:34,930 - src.pipeline.kg_builder - DEBUG - Batch 17 metrics: {
  "batch_idx": 17,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500854.930816,
  "total_time": 14.547016866970807,
  "aggregation": 3.2350653782486916e-06,
  "network_info": 0.006283942959271371,
  "llm_extraction": 14.219825394102372,
  "data_cleaning": 1.5572994016110897e-05,
  "neo4j_injection": 0.1972039620159194,
  "embedding_time": 0,
  "indexing_time": 0.004459678893908858,
  "graph_injection_time": 0.19254170497879386,
  "acs_metrics": {
    "node_count": 229,
    "relationship_count": 608,
    "density": 0.0116,
    "avg_degree": 5.31,
    "avg_unique_neighbors": 5.2926,
    "global_efficiency": 0.3231,
    "avg_path_length": 2.8471,
    "avg_degree_centrality": 0.0233,
    "max_degree_centrality": 0.4123,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0249,
    "degree_assortativity": -0.1502,
    "graph_robustness": 0.6809,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2587,
    "weakly_connected_components": 20,
    "largest_wcc_size": 210,
    "pagerank_top10_percent": 12.86,
    "louvain_communities": 30,
    "louvain_modularity": 0.4772,
    "label_entropy": 1.4741,
    "computational_time": 0.12231687200255692
  },
  "retrieval_queries": []
}
2025-11-30 19:07:34,931 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:07:34,931 - src.pipeline.kg_builder - INFO - Batch 18 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 14.22s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.12s
2025-11-30 19:07:34,931 - src.pipeline.kg_builder - INFO - Batch 18 completed in 14.55s
Processing KG batches:  25%|██▌       | 18/72 [06:14<16:42, 18.57s/it]2025-11-30 19:07:34,931 - src.pipeline.kg_builder - INFO - Processing batch 19/72 (3 items)
2025-11-30 19:07:34,931 - src.pipeline.kg_builder - DEBUG - Batch 19 current_video_time: 04:39-04:44
2025-11-30 19:07:34,942 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 229
- Total Relationships: 194
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:07:34,943 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:07:34,943 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0 ~217 words, content: Time: 04:29-04:34 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a precise liquid transfer, performed by a person wearing blue...
2025-11-30 19:07:34,943 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_1 ~200 words, content: a counter in the background. A sign with Chinese characters, "当心火灾" (Beware of fire), is visible on the wall, indicating a safety precaution. - **Procedure:**...
2025-11-30 19:07:34,943 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2 ~214 words, content: - A **volumetric flask**, which is a round-bottomed flask with a long neck, is positioned on the table to receive the liquid. - A **digital...
2025-11-30 19:07:34,943 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_3 ~197 words, content: **Primary Action:** A person wearing blue nitrile gloves is carefully pouring a clear liquid from a small, transparent glass beaker into a long, thin glass...
2025-11-30 19:07:34,943 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4 ~106 words, content: to receive the liquid. The liquid is being dispensed into this flask. - **Other Lab Equipment:** In the background, there is a white shelving unit...
2025-11-30 19:07:34,963 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:07:35,011 - src.components.pre_llm_injector - DEBUG - Found 84 existing chunk embeddings for similarity lookup
2025-11-30 19:07:35,034 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.790'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.784')]
2025-11-30 19:07:35,036 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3
2025-11-30 19:07:35,036 - src.components.pre_llm_injector - DEBUG - Found 4 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2
2025-11-30 19:07:35,038 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2)
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.760'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_4', '0.732')]
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.667'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.634')]
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.540'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3', '0.521')]
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5', '0.720'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_2', '0.664')]
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.790'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.784')]
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:07:35,042 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0) (~217 words) with timeout=5.0s retries=3
2025-11-30 19:07:36,192 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:07:36,192 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:07:36,193 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_1) (~200 words) with timeout=5.0s retries=3
2025-11-30 19:07:37,353 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:07:37,353 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:07:37,354 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2) (~214 words) with timeout=5.0s retries=3
2025-11-30 19:07:38,660 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:07:38,660 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:07:38,660 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_3) (~197 words) with timeout=5.0s retries=3
2025-11-30 19:07:39,883 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:07:39,883 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:07:39,883 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4) (~106 words) with timeout=5.0s retries=3
2025-11-30 19:07:41,114 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:07:41,115 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:07:41,115 - src.components.pre_llm_injector - INFO - Extracted 20 local triplets from 5 chunks
2025-11-30 19:07:41,115 - src.pipeline.kg_builder - INFO - Pre-extraction: 20 triplets in 6.17s
2025-11-30 19:07:41,116 - src.components.global_refiner - INFO - Capping refinement input: 20 → 15 triplets
2025-11-30 19:07:41,116 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["18_0", "18_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["18_0", "18_1", "18_2", "18_3"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["18_0", "18_1", "18_3"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["18_0", "18_1", "18_3"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["18_0", "18_1", "18_3"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Mass_Value", "source_chunks": ["18_0"]}, {"head": "Volumetric_Flask", "relation": "Receives", "tail": "Liquid", "source_chunks": ["18_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["18_2"]}, {"head": "Beaker", "relation": "Is Over", "tail": "Digital Balance", "source_chunks": ["18_2"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "-56.301 G", "source_chunks": ["18_2"]}, {"head": "Volumetric Flask", "relation": "Is On", "tail": "Table", "source_chunks": ["18_2"]}, {"head": "Person", "relation": "Pours", "tail": "Liquid", "source_chunks": ["18_2"]}, {"head": "Person", "relation": "Wears", "tail": "Nitrile_Gloves", "source_chunks": ["18_3"]}, {"head": "Pipette", "relation": "Dispenses", "tail": "Liquid_To_Flask", "source_chunks": ["18_3"]}, {"head": "Liquid", "relation": "Is Dispensed Into", "tail": "Flask", "source_chunks": ["18_4"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:07:41,116 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1114 words, ~1448 tokens)
2025-11-30 19:07:41,116 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:07:51,701 - src.components.global_refiner - DEBUG - LLM call completed in 10.58s
2025-11-30 19:07:51,701 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['18_0', '18_1']], ['Person', 'Holds', 'Beaker', ['18_0', '18_1', '18_2', '18_3']], ['Person', 'Holds', 'Pipette', ['18_0', '18_1', '18_3']], ['Pipette', 'Transfers', 'Liquid', ['18_0', '18_1', '18_3']], ['Beaker', 'Contains', 'Liquid', ['18_0', '18_1', '18_3']], ['Digital_Balance', 'Displays', 'Mass_Value', ['18_0']], ['Volumetric_Flask', 'Receives', 'Liquid', ['18_1']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['18_2']], ['Beaker', 'Is Over', 'Digital Balance', ['18_2']], ['Digital Balance', 'Displays', '-56.301 G', ['18_2']]] inter_chunk_relations=[['Volumetric_Flask', 'Is On', 'Laboratory Table', ['18_2']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Nitrile_Gloves'}]
2025-11-30 19:07:51,701 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=10, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['18_0', '18_1']], ['Person', 'Holds', 'Beaker', ['18_0', '18_1', '18_2', '18_3']], ['Person', 'Holds', 'Pipette', ['18_0', '18_1', '18_3']]]
2025-11-30 19:07:51,701 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Volumetric_Flask', 'Is On', 'Laboratory Table', ['18_2']]]
2025-11-30 19:07:51,701 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:07:51,701 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=3, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Nitrile_Gloves'}]
2025-11-30 19:07:51,701 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:07:51,701 - src.components.global_refiner - INFO - LLM suggested 3 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Nitrile_Gloves'}]
2025-11-30 19:07:51,701 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 11 triplets (total: 10.59s, LLM: 10.58s)
2025-11-30 19:07:51,701 - src.pipeline.kg_builder - INFO - Global refinement: 11 triplets in 10.59s
2025-11-30 19:07:51,701 - src.pipeline.kg_builder - INFO - Using 11 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:07:51,702 - src.pipeline.kg_builder - INFO - Pushing batch 19/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:07:51,702 - src.components.neo4j_handler - INFO - Adding 11 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:07:51,879 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=236, relationships=199
2025-11-30 19:07:51,879 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:07:51,879 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:07:51,885 - src.components.neo4j_handler - DEBUG - APOC merge successful: Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:07:51,885 - src.components.neo4j_handler - INFO - Applying 3 prune instructions
2025-11-30 19:07:51,886 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:07:51,887 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:07:51,887 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Nitrile_Gloves
2025-11-30 19:07:51,887 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:07:51,892 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Volumetric_Flask -[Is On]-> Laboratory Table
2025-11-30 19:07:51,892 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:07:51,898 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=235, relationships=197
2025-11-30 19:07:51,899 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:07:51,899 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:07:51,899 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:07:51,900 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.20s, indexes: 0.00s)
2025-11-30 19:07:51,901 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 89, 'with_embedding': 89, 'linked_chunks': 69}
2025-11-30 19:07:51,901 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:07:51,932 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 235 nodes
2025-11-30 19:07:51,986 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 215 nodes
2025-11-30 19:07:52,044 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 235, 'relationship_count': 634, 'density': 0.0115, 'avg_degree': 5.3957, 'avg_unique_neighbors': 5.3702, 'global_efficiency': 0.3225, 'avg_path_length': 2.8376, 'avg_degree_centrality': 0.0231, 'max_degree_centrality': 0.4145, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0239, 'degree_assortativity': -0.1421, 'graph_robustness': 0.6861, 'diameter_estimate': 5, 'clustering_coefficient': 0.2578, 'weakly_connected_components': 21, 'largest_wcc_size': 215, 'pagerank_top10_percent': 12.61, 'louvain_communities': 31, 'louvain_modularity': 0.4801, 'label_entropy': 1.4786, 'computational_time': 0.14366019901353866}
2025-11-30 19:07:52,045 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 18, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500872.0449998, 'total_time': 17.1134789820062, 'aggregation': 3.169989213347435e-06, 'network_info': 0.010920871049165726, 'llm_extraction': 16.759384473087266, 'data_cleaning': 1.4786957763135433e-05, 'neo4j_injection': 0.19802059105131775, 'embedding_time': 0, 'indexing_time': 0.0016285598976537585, 'graph_injection_time': 0.19616607995703816, 'acs_metrics': {'node_count': 235, 'relationship_count': 634, 'density': 0.0115, 'avg_degree': 5.3957, 'avg_unique_neighbors': 5.3702, 'global_efficiency': 0.3225, 'avg_path_length': 2.8376, 'avg_degree_centrality': 0.0231, 'max_degree_centrality': 0.4145, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0239, 'degree_assortativity': -0.1421, 'graph_robustness': 0.6861, 'diameter_estimate': 5, 'clustering_coefficient': 0.2578, 'weakly_connected_components': 21, 'largest_wcc_size': 215, 'pagerank_top10_percent': 12.61, 'louvain_communities': 31, 'louvain_modularity': 0.4801, 'label_entropy': 1.4786, 'computational_time': 0.14366019901353866}, 'retrieval_queries': []}
2025-11-30 19:07:52,045 - src.pipeline.kg_builder - DEBUG - Batch 18 metrics: {
  "batch_idx": 18,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500872.0449998,
  "total_time": 17.1134789820062,
  "aggregation": 3.169989213347435e-06,
  "network_info": 0.010920871049165726,
  "llm_extraction": 16.759384473087266,
  "data_cleaning": 1.4786957763135433e-05,
  "neo4j_injection": 0.19802059105131775,
  "embedding_time": 0,
  "indexing_time": 0.0016285598976537585,
  "graph_injection_time": 0.19616607995703816,
  "acs_metrics": {
    "node_count": 235,
    "relationship_count": 634,
    "density": 0.0115,
    "avg_degree": 5.3957,
    "avg_unique_neighbors": 5.3702,
    "global_efficiency": 0.3225,
    "avg_path_length": 2.8376,
    "avg_degree_centrality": 0.0231,
    "max_degree_centrality": 0.4145,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0239,
    "degree_assortativity": -0.1421,
    "graph_robustness": 0.6861,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2578,
    "weakly_connected_components": 21,
    "largest_wcc_size": 215,
    "pagerank_top10_percent": 12.61,
    "louvain_communities": 31,
    "louvain_modularity": 0.4801,
    "label_entropy": 1.4786,
    "computational_time": 0.14366019901353866
  },
  "retrieval_queries": []
}
2025-11-30 19:07:52,045 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:07:52,045 - src.pipeline.kg_builder - INFO - Batch 19 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 16.76s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.14s
2025-11-30 19:07:52,045 - src.pipeline.kg_builder - INFO - Batch 19 completed in 17.11s
Processing KG batches:  26%|██▋       | 19/72 [06:31<16:00, 18.13s/it]2025-11-30 19:07:52,045 - src.pipeline.kg_builder - INFO - Processing batch 20/72 (3 items)
2025-11-30 19:07:52,045 - src.pipeline.kg_builder - DEBUG - Batch 20 current_video_time: 04:54-04:59
2025-11-30 19:07:52,056 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 235
- Total Relationships: 197
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:07:52,056 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:07:52,056 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_0 ~214 words, content: Time: 04:44-04:49 Content: The video captures a detailed, first-person perspective of a precise laboratory procedure, likely the preparation of a solution. The sequence of actions...
2025-11-30 19:07:52,056 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1 ~225 words, content: **Step 2: Measuring and Transferring:** The person continues to use the pipette to draw liquid from the beaker. The beaker is then placed on the...
2025-11-30 19:07:52,056 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_2 ~222 words, content: . Time: 04:49-04:54 Content: The video sequence captures a detailed, first-person perspective of a precise laboratory procedure, likely a titration or a solution preparation step....
2025-11-30 19:07:52,056 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3 ~226 words, content: ette." The liquid being used for the rinse is likely a solvent or a diluent, as indicated by the "10%" label on the wash bottle....
2025-11-30 19:07:52,056 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4 ~146 words, content: achieve a specific weight. - **Equipment and Setup:** The experiment is taking place on a black laboratory bench. In addition to the balance and beaker,...
2025-11-30 19:07:52,077 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:07:52,130 - src.components.pre_llm_injector - DEBUG - Found 89 existing chunk embeddings for similarity lookup
2025-11-30 19:07:52,153 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.895'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.832')]
2025-11-30 19:07:52,155 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:07:52,155 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1
2025-11-30 19:07:52,159 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.769'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.755')]
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.768'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_0', '0.737')]
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.562'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_2', '0.509')]
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.895'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.684')]
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.832'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.792')]
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:07:52,162 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_0) (~214 words) with timeout=5.0s retries=3
2025-11-30 19:07:53,449 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:07:53,449 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:07:53,449 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:07:54,532 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:07:54,532 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:07:54,533 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_2) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:07:55,831 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:07:55,831 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:07:55,831 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:07:57,187 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:07:57,187 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:07:57,187 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4) (~146 words) with timeout=5.0s retries=3
2025-11-30 19:07:58,226 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:07:58,226 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:07:58,226 - src.components.pre_llm_injector - INFO - Extracted 25 local triplets from 5 chunks
2025-11-30 19:07:58,226 - src.pipeline.kg_builder - INFO - Pre-extraction: 25 triplets in 6.17s
2025-11-30 19:07:58,227 - src.components.global_refiner - INFO - Capping refinement input: 25 → 15 triplets
2025-11-30 19:07:58,227 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["19_0", "19_2", "19_3"]}, {"head": "Person", "relation": "Wears", "tail": "Watch", "source_chunks": ["19_0", "19_3"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["19_0", "19_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["19_0"]}, {"head": "Beaker", "relation": "Is Over", "tail": "Analytical_Balance", "source_chunks": ["19_0"]}, {"head": "Analytical_Balance", "relation": "Measures", "tail": "Mass_Of_Liquid", "source_chunks": ["19_0"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["19_1"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["19_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["19_1"]}, {"head": "Liquid", "relation": "Is Added To", "tail": "Volumetric Flask", "source_chunks": ["19_1"]}, {"head": "Beaker", "relation": "Is Placed On", "tail": "Balance", "source_chunks": ["19_1"]}, {"head": "Person", "relation": "Measures", "tail": "Liquid", "source_chunks": ["19_1"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["19_2", "19_4"]}, {"head": "Pipette", "relation": "Transfers Liquid To", "tail": "Beaker", "source_chunks": ["19_2"]}, {"head": "Person", "relation": "Uses", "tail": "Wash_Bottle", "source_chunks": ["19_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:07:58,228 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1335 words, ~1736 tokens)
2025-11-30 19:07:58,228 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:08:08,985 - src.components.global_refiner - DEBUG - LLM call completed in 10.76s
2025-11-30 19:08:08,985 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['19_0', '19_2', '19_3']], ['Person', 'Wears', 'Watch', ['19_0', '19_3']], ['Person', 'Holds', 'Beaker', ['19_0', '19_2']], ['Beaker', 'Contains', 'Clear_Liquid', ['19_0']], ['Beaker', 'Is Over', 'Analytical_Balance', ['19_0']], ['Analytical_Balance', 'Measures', 'Mass_Of_Liquid', ['19_0']], ['Person', 'Uses', 'Pipette', ['19_1']], ['Pipette', 'Transfers', 'Liquid', ['19_1']], ['Beaker', 'Contains', 'Liquid', ['19_1']], ['Liquid', 'Is Added To', 'Volumetric Flask', ['19_1']], ['Beaker', 'Is Placed On', 'Balance', ['19_1']], ['Person', 'Measures', 'Liquid', ['19_1']], ['Person', 'Holds', 'Pipette', ['19_2', '19_4']], ['Pipette', 'Transfers Liquid To', 'Beaker', ['19_2']], ['Person', 'Uses', 'Wash_Bottle', ['19_2']]] inter_chunk_relations=[['Beaker', 'Is Over', 'Analytical_Balance', ['19_0']], ['Beaker', 'Is Placed On', 'Balance', ['19_1']], ['Person', 'Holds', 'Beaker', ['19_0', '19_2']], ['Person', 'Wears', 'Watch', ['19_0', '19_3']], ['Person', 'Holds', 'Pipette', ['19_2', '19_4']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}] prune_instructions=[]
2025-11-30 19:08:08,985 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['19_0', '19_2', '19_3']], ['Person', 'Wears', 'Watch', ['19_0', '19_3']], ['Person', 'Holds', 'Beaker', ['19_0', '19_2']]]
2025-11-30 19:08:08,985 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is Over', 'Analytical_Balance', ['19_0']], ['Beaker', 'Is Placed On', 'Balance', ['19_1']], ['Person', 'Holds', 'Beaker', ['19_0', '19_2']]]
2025-11-30 19:08:08,985 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:08:08,985 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:08:08,985 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:08:08,985 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 10.76s, LLM: 10.76s)
2025-11-30 19:08:08,985 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 10.76s
2025-11-30 19:08:08,985 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:08:08,985 - src.pipeline.kg_builder - INFO - Pushing batch 20/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:08:08,986 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:08:09,194 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=240, relationships=204
2025-11-30 19:08:09,194 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:08:09,195 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Glove
2025-11-30 19:08:09,195 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:08:09,232 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is Over]-> Analytical_Balance
2025-11-30 19:08:09,264 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is Placed On]-> Balance
2025-11-30 19:08:09,266 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:08:09,268 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Wears]-> Watch
2025-11-30 19:08:09,272 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Pipette
2025-11-30 19:08:09,273 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:08:09,278 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=240, relationships=204
2025-11-30 19:08:09,281 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:08:09,281 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:08:09,282 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:08:09,282 - src.components.neo4j_handler - INFO - Batch injected in 0.30s (triplets: 0.29s, indexes: 0.00s)
2025-11-30 19:08:09,283 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 94, 'with_embedding': 94, 'linked_chunks': 74}
2025-11-30 19:08:09,283 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:08:09,307 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 240 nodes
2025-11-30 19:08:09,355 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 220 nodes
2025-11-30 19:08:09,417 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 240, 'relationship_count': 662, 'density': 0.0115, 'avg_degree': 5.5167, 'avg_unique_neighbors': 5.4833, 'global_efficiency': 0.3264, 'avg_path_length': 2.8129, 'avg_degree_centrality': 0.0231, 'max_degree_centrality': 0.431, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0207, 'degree_assortativity': -0.1466, 'graph_robustness': 0.6828, 'diameter_estimate': 5, 'clustering_coefficient': 0.2607, 'weakly_connected_components': 21, 'largest_wcc_size': 220, 'pagerank_top10_percent': 12.43, 'louvain_communities': 32, 'louvain_modularity': 0.469, 'label_entropy': 1.4829, 'computational_time': 0.13429625204298645}
2025-11-30 19:08:09,417 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 19, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500889.41773, 'total_time': 17.371995502035134, 'aggregation': 2.656015567481518e-06, 'network_info': 0.01029810996260494, 'llm_extraction': 16.929650928941555, 'data_cleaning': 3.336998634040356e-05, 'neo4j_injection': 0.2961589969927445, 'embedding_time': 0, 'indexing_time': 0.003187623922713101, 'graph_injection_time': 0.29266992094926536, 'acs_metrics': {'node_count': 240, 'relationship_count': 662, 'density': 0.0115, 'avg_degree': 5.5167, 'avg_unique_neighbors': 5.4833, 'global_efficiency': 0.3264, 'avg_path_length': 2.8129, 'avg_degree_centrality': 0.0231, 'max_degree_centrality': 0.431, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0207, 'degree_assortativity': -0.1466, 'graph_robustness': 0.6828, 'diameter_estimate': 5, 'clustering_coefficient': 0.2607, 'weakly_connected_components': 21, 'largest_wcc_size': 220, 'pagerank_top10_percent': 12.43, 'louvain_communities': 32, 'louvain_modularity': 0.469, 'label_entropy': 1.4829, 'computational_time': 0.13429625204298645}, 'retrieval_queries': []}
2025-11-30 19:08:09,417 - src.pipeline.kg_builder - DEBUG - Batch 19 metrics: {
  "batch_idx": 19,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500889.41773,
  "total_time": 17.371995502035134,
  "aggregation": 2.656015567481518e-06,
  "network_info": 0.01029810996260494,
  "llm_extraction": 16.929650928941555,
  "data_cleaning": 3.336998634040356e-05,
  "neo4j_injection": 0.2961589969927445,
  "embedding_time": 0,
  "indexing_time": 0.003187623922713101,
  "graph_injection_time": 0.29266992094926536,
  "acs_metrics": {
    "node_count": 240,
    "relationship_count": 662,
    "density": 0.0115,
    "avg_degree": 5.5167,
    "avg_unique_neighbors": 5.4833,
    "global_efficiency": 0.3264,
    "avg_path_length": 2.8129,
    "avg_degree_centrality": 0.0231,
    "max_degree_centrality": 0.431,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0207,
    "degree_assortativity": -0.1466,
    "graph_robustness": 0.6828,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2607,
    "weakly_connected_components": 21,
    "largest_wcc_size": 220,
    "pagerank_top10_percent": 12.43,
    "louvain_communities": 32,
    "louvain_modularity": 0.469,
    "label_entropy": 1.4829,
    "computational_time": 0.13429625204298645
  },
  "retrieval_queries": []
}
2025-11-30 19:08:09,418 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:08:09,418 - src.pipeline.kg_builder - INFO - Batch 20 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 16.93s, Clean: 0.00s, Neo4j: 0.30s, ACS: 0.13s
2025-11-30 19:08:09,418 - src.pipeline.kg_builder - INFO - Batch 20 completed in 17.37s
Processing KG batches:  28%|██▊       | 20/72 [06:48<15:30, 17.90s/it]2025-11-30 19:08:09,418 - src.pipeline.kg_builder - INFO - Processing batch 21/72 (3 items)
2025-11-30 19:08:09,418 - src.pipeline.kg_builder - DEBUG - Batch 21 current_video_time: 05:09-05:14
2025-11-30 19:08:09,426 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 240
- Total Relationships: 204
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:08:09,426 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:08:09,426 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0 ~215 words, content: Time: 04:59-05:04 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a precise liquid transfer, performed by a person wearing blue...
2025-11-30 19:08:09,426 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_1 ~230 words, content: ** The person then uses their right hand to pick up the beaker, which is still on the balance. They lift it slightly, likely to...
2025-11-30 19:08:09,426 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_2 ~224 words, content: aker into a larger, empty volumetric flask. This is a standard technique in analytical chemistry for preparing a solution of a specific concentration. - **Measurement:**...
2025-11-30 19:08:09,426 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3 ~122 words, content: . The individual, wearing blue nitrile gloves, is carefully transferring a liquid from a small beaker into a volumetric flask. The process is being conducted...
2025-11-30 19:08:09,447 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:08:09,496 - src.components.pre_llm_injector - DEBUG - Found 94 existing chunk embeddings for similarity lookup
2025-11-30 19:08:09,516 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.773'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.758')]
2025-11-30 19:08:09,518 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3 via source_chunk_ids
2025-11-30 19:08:09,518 - src.components.pre_llm_injector - DEBUG - Found 10 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2: Subgraph: (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.758'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.695')]
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_4', '0.683'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.681')]
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3', '0.620'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_1', '0.608')]
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.773'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.756')]
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:08:09,525 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0) (~215 words) with timeout=5.0s retries=3
2025-11-30 19:08:10,837 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:08:10,837 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:08:10,837 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_1) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:08:11,925 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:08:11,925 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:08:11,926 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_2) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:08:13,214 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:08:13,214 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:08:13,215 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3) (~122 words) with timeout=5.0s retries=3
2025-11-30 19:08:14,530 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:08:14,530 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:08:14,530 - src.components.pre_llm_injector - INFO - Extracted 21 local triplets from 4 chunks
2025-11-30 19:08:14,530 - src.pipeline.kg_builder - INFO - Pre-extraction: 21 triplets in 5.10s
2025-11-30 19:08:14,531 - src.components.global_refiner - INFO - Capping refinement input: 21 → 15 triplets
2025-11-30 19:08:14,531 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2: Subgraph: (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["20_0", "20_1", "20_3"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Pipette", "source_chunks": ["20_0"]}, {"head": "Person", "relation": "Holds", "tail": "Wash_Bottle", "source_chunks": ["20_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital_Balance", "source_chunks": ["20_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Solution", "source_chunks": ["20_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "630.1", "source_chunks": ["20_0"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["20_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["20_1", "20_3"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["20_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Balance", "source_chunks": ["20_1"]}, {"head": "Person", "relation": "Lifts", "tail": "Beaker", "source_chunks": ["20_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["20_2"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["20_2"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["20_2"]}, {"head": "Liquid", "relation": "Is Measured On", "tail": "Digital Balance", "source_chunks": ["20_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:08:14,531 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1329 words, ~1728 tokens)
2025-11-30 19:08:14,531 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:08:29,742 - src.components.global_refiner - DEBUG - LLM call completed in 15.21s
2025-11-30 19:08:29,742 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['20_0', '20_2']], ['Person', 'Holds', 'Glass_Pipette', ['20_0']], ['Person', 'Holds', 'Wash_Bottle', ['20_0']], ['Beaker', 'Is On', 'Digital_Balance', ['20_0']], ['Beaker', 'Contains', 'Clear_Solution', ['20_0']], ['Digital_Balance', 'Displays', '630.1', ['20_0']], ['Person', 'Holds', 'Beaker', ['20_1']], ['Person', 'Uses', 'Pipette', ['20_1', '20_3']], ['Beaker', 'Contains', 'Liquid', ['20_1']], ['Beaker', 'Is On', 'Balance', ['20_1']], ['Person', 'Lifts', 'Beaker', ['20_1']], ['Person', 'Holds', 'Pipette', ['20_2']], ['Pipette', 'Transfers', 'Liquid', ['20_2']], ['Liquid', 'Is Measured On', 'Digital Balance', ['20_2']]] inter_chunk_relations=[['Beaker', 'Is On', 'Laboratory Table', ['20_0']], ['Beaker', 'Is On', 'Digital Balance', ['20_0']], ['Beaker', 'Is On', 'Balance', ['20_1']], ['Person', 'Holds', 'Beaker', ['20_1']], ['Person', 'Lifts', 'Beaker', ['20_1']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass_Pipette'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Wash_Bottle'}, {'head': 'Beaker', 'relation': 'Is On', 'tail': 'Digital_Balance'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Clear_Solution'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': '630.1'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Liquid'}, {'head': 'Beaker', 'relation': 'Is On', 'tail': 'Balance'}, {'head': 'Person', 'relation': 'Lifts', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}, {'head': 'Pipette', 'relation': 'Transfers', 'tail': 'Liquid'}, {'head': 'Liquid', 'relation': 'Is Measured On', 'tail': 'Digital Balance'}]
2025-11-30 19:08:29,742 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=14, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['20_0', '20_2']], ['Person', 'Holds', 'Glass_Pipette', ['20_0']], ['Person', 'Holds', 'Wash_Bottle', ['20_0']]]
2025-11-30 19:08:29,742 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Laboratory Table', ['20_0']], ['Beaker', 'Is On', 'Digital Balance', ['20_0']], ['Beaker', 'Is On', 'Balance', ['20_1']]]
2025-11-30 19:08:29,742 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:08:29,742 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=12, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass_Pipette'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Wash_Bottle'}]
2025-11-30 19:08:29,742 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:08:29,742 - src.components.global_refiner - INFO - LLM suggested 12 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Glass_Pipette'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Wash_Bottle'}, {'head': 'Beaker', 'relation': 'Is On', 'tail': 'Digital_Balance'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Clear_Solution'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': '630.1'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Liquid'}, {'head': 'Beaker', 'relation': 'Is On', 'tail': 'Balance'}, {'head': 'Person', 'relation': 'Lifts', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}, {'head': 'Pipette', 'relation': 'Transfers', 'tail': 'Liquid'}, {'head': 'Liquid', 'relation': 'Is Measured On', 'tail': 'Digital Balance'}]
2025-11-30 19:08:29,742 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 19 triplets (total: 15.21s, LLM: 15.21s)
2025-11-30 19:08:29,742 - src.pipeline.kg_builder - INFO - Global refinement: 19 triplets in 15.21s
2025-11-30 19:08:29,742 - src.pipeline.kg_builder - INFO - Using 19 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:08:29,742 - src.pipeline.kg_builder - INFO - Pushing batch 21/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:08:29,743 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:08:29,900 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=247, relationships=210
2025-11-30 19:08:29,900 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:08:29,901 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:08:29,901 - src.components.neo4j_handler - INFO - Applying 12 prune instructions
2025-11-30 19:08:29,902 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:08:29,904 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Glass_Pipette
2025-11-30 19:08:29,905 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Wash_Bottle
2025-11-30 19:08:29,906 - src.components.neo4j_handler - DEBUG - Pruned relationship: Beaker -[Is On]-> Digital_Balance
2025-11-30 19:08:29,908 - src.components.neo4j_handler - DEBUG - Pruned relationship: Beaker -[Contains]-> Clear_Solution
2025-11-30 19:08:29,909 - src.components.neo4j_handler - DEBUG - Pruned relationship: Digital_Balance -[Displays]-> 630.1
2025-11-30 19:08:29,910 - src.components.neo4j_handler - DEBUG - Pruned relationship: Beaker -[Contains]-> Liquid
2025-11-30 19:08:29,911 - src.components.neo4j_handler - DEBUG - Pruned relationship: Beaker -[Is On]-> Balance
2025-11-30 19:08:29,937 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Lifts]-> Beaker
2025-11-30 19:08:29,939 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Pipette
2025-11-30 19:08:29,940 - src.components.neo4j_handler - DEBUG - Pruned relationship: Pipette -[Transfers]-> Liquid
2025-11-30 19:08:29,966 - src.components.neo4j_handler - DEBUG - Pruned relationship: Liquid -[Is Measured On]-> Digital Balance
2025-11-30 19:08:29,966 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:08:29,968 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory Table
2025-11-30 19:08:29,969 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Digital Balance
2025-11-30 19:08:29,971 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Balance
2025-11-30 19:08:29,972 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:08:30,004 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Lifts]-> Beaker
2025-11-30 19:08:30,004 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:08:30,010 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=247, relationships=200
2025-11-30 19:08:30,012 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:08:30,012 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:08:30,012 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:08:30,012 - src.components.neo4j_handler - INFO - Batch injected in 0.27s (triplets: 0.27s, indexes: 0.00s)
2025-11-30 19:08:30,013 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 98, 'with_embedding': 98, 'linked_chunks': 78}
2025-11-30 19:08:30,013 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:08:30,048 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 247 nodes
2025-11-30 19:08:30,106 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 227 nodes
2025-11-30 19:08:30,171 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 247, 'relationship_count': 682, 'density': 0.0112, 'avg_degree': 5.5223, 'avg_unique_neighbors': 5.498, 'global_efficiency': 0.3274, 'avg_path_length': 2.8167, 'avg_degree_centrality': 0.0224, 'max_degree_centrality': 0.4309, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0167, 'degree_assortativity': -0.1476, 'graph_robustness': 0.6833, 'diameter_estimate': 5, 'clustering_coefficient': 0.2525, 'weakly_connected_components': 21, 'largest_wcc_size': 227, 'pagerank_top10_percent': 12.18, 'louvain_communities': 29, 'louvain_modularity': 0.4602, 'label_entropy': 1.4845, 'computational_time': 0.15747097798157483}
2025-11-30 19:08:30,171 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 20, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500910.1714706, 'total_time': 20.752886978909373, 'aggregation': 3.6669662222266197e-06, 'network_info': 0.007443882059305906, 'llm_extraction': 20.31669819401577, 'data_cleaning': 3.351492341607809e-05, 'neo4j_injection': 0.26950358296744525, 'embedding_time': 0, 'indexing_time': 0.002078595105558634, 'graph_injection_time': 0.267069780966267, 'acs_metrics': {'node_count': 247, 'relationship_count': 682, 'density': 0.0112, 'avg_degree': 5.5223, 'avg_unique_neighbors': 5.498, 'global_efficiency': 0.3274, 'avg_path_length': 2.8167, 'avg_degree_centrality': 0.0224, 'max_degree_centrality': 0.4309, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0167, 'degree_assortativity': -0.1476, 'graph_robustness': 0.6833, 'diameter_estimate': 5, 'clustering_coefficient': 0.2525, 'weakly_connected_components': 21, 'largest_wcc_size': 227, 'pagerank_top10_percent': 12.18, 'louvain_communities': 29, 'louvain_modularity': 0.4602, 'label_entropy': 1.4845, 'computational_time': 0.15747097798157483}, 'retrieval_queries': []}
2025-11-30 19:08:30,171 - src.pipeline.kg_builder - DEBUG - Batch 20 metrics: {
  "batch_idx": 20,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500910.1714706,
  "total_time": 20.752886978909373,
  "aggregation": 3.6669662222266197e-06,
  "network_info": 0.007443882059305906,
  "llm_extraction": 20.31669819401577,
  "data_cleaning": 3.351492341607809e-05,
  "neo4j_injection": 0.26950358296744525,
  "embedding_time": 0,
  "indexing_time": 0.002078595105558634,
  "graph_injection_time": 0.267069780966267,
  "acs_metrics": {
    "node_count": 247,
    "relationship_count": 682,
    "density": 0.0112,
    "avg_degree": 5.5223,
    "avg_unique_neighbors": 5.498,
    "global_efficiency": 0.3274,
    "avg_path_length": 2.8167,
    "avg_degree_centrality": 0.0224,
    "max_degree_centrality": 0.4309,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0167,
    "degree_assortativity": -0.1476,
    "graph_robustness": 0.6833,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2525,
    "weakly_connected_components": 21,
    "largest_wcc_size": 227,
    "pagerank_top10_percent": 12.18,
    "louvain_communities": 29,
    "louvain_modularity": 0.4602,
    "label_entropy": 1.4845,
    "computational_time": 0.15747097798157483
  },
  "retrieval_queries": []
}
2025-11-30 19:08:30,172 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:08:30,172 - src.pipeline.kg_builder - INFO - Batch 21 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 20.32s, Clean: 0.00s, Neo4j: 0.27s, ACS: 0.16s
2025-11-30 19:08:30,172 - src.pipeline.kg_builder - INFO - Batch 21 completed in 20.75s
Processing KG batches:  29%|██▉       | 21/72 [07:09<15:56, 18.76s/it]2025-11-30 19:08:30,172 - src.pipeline.kg_builder - INFO - Processing batch 22/72 (3 items)
2025-11-30 19:08:30,172 - src.pipeline.kg_builder - DEBUG - Batch 22 current_video_time: 05:24-05:29
2025-11-30 19:08:30,181 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 247
- Total Relationships: 200
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:08:30,182 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:08:30,182 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0 ~222 words, content: Time: 05:14-05:19 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a solution preparation, performed by a scientist wearing blue nitrile...
2025-11-30 19:08:30,182 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_1 ~247 words, content: **Frame 3:** The perspective changes to a wider shot, showing more of the laboratory bench. The person is now using a pipette to transfer liquid...
2025-11-30 19:08:30,182 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_2 ~225 words, content: suggests that the procedure requires high accuracy, possibly for preparing a standard solution or conducting a titration. The person is carefully handling the equipment and...
2025-11-30 19:08:30,182 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_3 ~228 words, content: - **Final Action:** After the liquid has been added, the person removes the pipette from the beaker. The beaker is then lifted and placed onto...
2025-11-30 19:08:30,182 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4 ~184 words, content: involves a person wearing blue nitrile gloves, who is carefully handling laboratory equipment. The process begins with the person using a pipette to transfer a...
2025-11-30 19:08:30,202 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:08:30,257 - src.components.pre_llm_injector - DEBUG - Found 98 existing chunk embeddings for similarity lookup
2025-11-30 19:08:30,283 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.898'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.802')]
2025-11-30 19:08:30,286 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0
2025-11-30 19:08:30,286 - src.components.pre_llm_injector - DEBUG - Found 4 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2
2025-11-30 19:08:30,291 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Ar Glasses Training Chemistry Experiment Report - Simplified Version / ID: 3_0)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Chemical Equation / ID: 2_0)-[DESCRIBES]->(Reaction Of Aluminum With Sodium Hydroxide / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.802'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.772')]
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1', '0.560'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_2', '0.554')]
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_2', '0.600'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_3', '0.575')]
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.653'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1', '0.652')]
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.898'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4', '0.781')]
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:08:30,295 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:08:31,544 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:08:31,544 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:08:31,544 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_1) (~247 words) with timeout=5.0s retries=3
2025-11-30 19:08:32,920 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:08:32,920 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:08:32,920 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_2) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:08:34,329 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:08:34,329 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:08:34,329 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_3) (~228 words) with timeout=5.0s retries=3
2025-11-30 19:08:35,666 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:08:35,666 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:08:35,667 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4) (~184 words) with timeout=5.0s retries=3
2025-11-30 19:08:37,009 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:08:37,009 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:08:37,009 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 5 chunks
2025-11-30 19:08:37,009 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 6.83s
2025-11-30 19:08:37,010 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:08:37,010 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Ar Glasses Training Chemistry Experiment Report - Simplified Version / ID: 3_0)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Chemical Equation / ID: 2_0)-[DESCRIBES]->(Reaction Of Aluminum With Sodium Hydroxide / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["21_0", "21_2", "21_3", "21_4"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["21_0"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["21_0", "21_4"]}, {"head": "Liquid", "relation": "Is In", "tail": "Beaker", "source_chunks": ["21_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital_Balance", "source_chunks": ["21_0", "21_4"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Negative_Reading", "source_chunks": ["21_0"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["21_1", "21_4"]}, {"head": "Person", "relation": "Transfers Liquid", "tail": "Beaker", "source_chunks": ["21_1"]}, {"head": "Person", "relation": "Transfers Liquid", "tail": "Volumetric_Flask", "source_chunks": ["21_1"]}, {"head": "Person", "relation": "Uses", "tail": "Digital_Balance", "source_chunks": ["21_1"]}, {"head": "Pipette", "relation": "Transfers Liquid", "tail": "Beaker", "source_chunks": ["21_1"]}, {"head": "Pipette", "relation": "Transfers Liquid", "tail": "Volumetric_Flask", "source_chunks": ["21_1"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Pipette", "source_chunks": ["21_2"]}, {"head": "Person", "relation": "Holds", "tail": "Wash_Bottle", "source_chunks": ["21_2"]}, {"head": "Wash_Bottle", "relation": "Dispenses", "tail": "Liquid", "source_chunks": ["21_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:08:37,010 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1454 words, ~1890 tokens)
2025-11-30 19:08:37,010 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:08:49,751 - src.components.global_refiner - DEBUG - LLM call completed in 12.74s
2025-11-30 19:08:49,751 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['21_0', '21_2', '21_3', '21_4']], ['Person', 'Holds', 'Pipette', ['21_0']], ['Pipette', 'Transfers', 'Liquid', ['21_0', '21_4']], ['Liquid', 'Is In', 'Beaker', ['21_0']], ['Beaker', 'Is On', 'Digital_Balance', ['21_0', '21_4']], ['Digital_Balance', 'Displays', 'Negative_Reading', ['21_0']], ['Person', 'Uses', 'Pipette', ['21_1', '21_4']], ['Person', 'Transfers Liquid', 'Beaker', ['21_1']], ['Person', 'Transfers Liquid', 'Volumetric_Flask', ['21_1']], ['Person', 'Uses', 'Digital_Balance', ['21_1']], ['Pipette', 'Transfers Liquid', 'Beaker', ['21_1']], ['Pipette', 'Transfers Liquid', 'Volumetric_Flask', ['21_1']], ['Person', 'Holds', 'Glass_Pipette', ['21_2']], ['Person', 'Holds', 'Wash_Bottle', ['21_2']], ['Wash_Bottle', 'Dispenses', 'Liquid', ['21_2']]] inter_chunk_relations=[['Beaker', 'Is On', 'Laboratory Table', ['21_0', '21_4']], ['Person', 'Holds', 'Pipette', ['21_0']], ['Pipette', 'Transfers', 'Liquid', ['21_0', '21_4']], ['Liquid', 'Is In', 'Beaker', ['21_0']], ['Digital_Balance', 'Displays', 'Negative_Reading', ['21_0']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}] prune_instructions=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}, {'head': 'Person', 'relation': 'Uses', 'tail': 'Pipette'}, {'head': 'Pipette', 'relation': 'Transfers', 'tail': 'Liquid'}, {'head': 'Liquid', 'relation': 'Is In', 'tail': 'Beaker'}]
2025-11-30 19:08:49,751 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['21_0', '21_2', '21_3', '21_4']], ['Person', 'Holds', 'Pipette', ['21_0']], ['Pipette', 'Transfers', 'Liquid', ['21_0', '21_4']]]
2025-11-30 19:08:49,751 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Laboratory Table', ['21_0', '21_4']], ['Person', 'Holds', 'Pipette', ['21_0']], ['Pipette', 'Transfers', 'Liquid', ['21_0', '21_4']]]
2025-11-30 19:08:49,751 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:08:49,751 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}, {'head': 'Person', 'relation': 'Uses', 'tail': 'Pipette'}, {'head': 'Pipette', 'relation': 'Transfers', 'tail': 'Liquid'}]
2025-11-30 19:08:49,751 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:08:49,751 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Holds', 'tail': 'Pipette'}, {'head': 'Person', 'relation': 'Uses', 'tail': 'Pipette'}, {'head': 'Pipette', 'relation': 'Transfers', 'tail': 'Liquid'}, {'head': 'Liquid', 'relation': 'Is In', 'tail': 'Beaker'}]
2025-11-30 19:08:49,751 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 12.74s, LLM: 12.74s)
2025-11-30 19:08:49,751 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 12.74s
2025-11-30 19:08:49,751 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:08:49,751 - src.pipeline.kg_builder - INFO - Pushing batch 22/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:08:49,751 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:08:49,994 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=252, relationships=212
2025-11-30 19:08:49,994 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:08:49,994 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Glove
2025-11-30 19:08:49,994 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:08:49,997 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Pipette
2025-11-30 19:08:49,998 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Uses]-> Pipette
2025-11-30 19:08:49,999 - src.components.neo4j_handler - DEBUG - Pruned relationship: Pipette -[Transfers]-> Liquid
2025-11-30 19:08:50,029 - src.components.neo4j_handler - DEBUG - Pruned relationship: Liquid -[Is In]-> Beaker
2025-11-30 19:08:50,029 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:08:50,031 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory Table
2025-11-30 19:08:50,033 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Pipette
2025-11-30 19:08:50,035 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Pipette -[Transfers]-> Liquid
2025-11-30 19:08:50,037 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Liquid -[Is In]-> Beaker
2025-11-30 19:08:50,038 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital_Balance -[Displays]-> Negative_Reading
2025-11-30 19:08:50,038 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:08:50,044 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=252, relationships=210
2025-11-30 19:08:50,045 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:08:50,045 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:08:50,045 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:08:50,045 - src.components.neo4j_handler - INFO - Batch injected in 0.29s (triplets: 0.29s, indexes: 0.00s)
2025-11-30 19:08:50,046 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 103, 'with_embedding': 103, 'linked_chunks': 83}
2025-11-30 19:08:50,046 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:08:50,082 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 252 nodes
2025-11-30 19:08:50,144 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 232 nodes
2025-11-30 19:08:50,212 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 252, 'relationship_count': 716, 'density': 0.0113, 'avg_degree': 5.6825, 'avg_unique_neighbors': 5.6508, 'global_efficiency': 0.3326, 'avg_path_length': 2.7805, 'avg_degree_centrality': 0.0226, 'max_degree_centrality': 0.4582, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0214, 'degree_assortativity': -0.1563, 'graph_robustness': 0.683, 'diameter_estimate': 5, 'clustering_coefficient': 0.2623, 'weakly_connected_components': 21, 'largest_wcc_size': 232, 'pagerank_top10_percent': 11.95, 'louvain_communities': 29, 'louvain_modularity': 0.4424, 'label_entropy': 1.4879, 'computational_time': 0.16518975899089128}
2025-11-30 19:08:50,212 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 21, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500930.2122617, 'total_time': 20.039988868986256, 'aggregation': 3.4919939935207367e-06, 'network_info': 0.00950617401394993, 'llm_extraction': 19.569792499998584, 'data_cleaning': 1.8502934835851192e-05, 'neo4j_injection': 0.29397435998544097, 'embedding_time': 0, 'indexing_time': 0.0014897020300850272, 'graph_injection_time': 0.2922731490107253, 'acs_metrics': {'node_count': 252, 'relationship_count': 716, 'density': 0.0113, 'avg_degree': 5.6825, 'avg_unique_neighbors': 5.6508, 'global_efficiency': 0.3326, 'avg_path_length': 2.7805, 'avg_degree_centrality': 0.0226, 'max_degree_centrality': 0.4582, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0214, 'degree_assortativity': -0.1563, 'graph_robustness': 0.683, 'diameter_estimate': 5, 'clustering_coefficient': 0.2623, 'weakly_connected_components': 21, 'largest_wcc_size': 232, 'pagerank_top10_percent': 11.95, 'louvain_communities': 29, 'louvain_modularity': 0.4424, 'label_entropy': 1.4879, 'computational_time': 0.16518975899089128}, 'retrieval_queries': []}
2025-11-30 19:08:50,212 - src.pipeline.kg_builder - DEBUG - Batch 21 metrics: {
  "batch_idx": 21,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500930.2122617,
  "total_time": 20.039988868986256,
  "aggregation": 3.4919939935207367e-06,
  "network_info": 0.00950617401394993,
  "llm_extraction": 19.569792499998584,
  "data_cleaning": 1.8502934835851192e-05,
  "neo4j_injection": 0.29397435998544097,
  "embedding_time": 0,
  "indexing_time": 0.0014897020300850272,
  "graph_injection_time": 0.2922731490107253,
  "acs_metrics": {
    "node_count": 252,
    "relationship_count": 716,
    "density": 0.0113,
    "avg_degree": 5.6825,
    "avg_unique_neighbors": 5.6508,
    "global_efficiency": 0.3326,
    "avg_path_length": 2.7805,
    "avg_degree_centrality": 0.0226,
    "max_degree_centrality": 0.4582,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0214,
    "degree_assortativity": -0.1563,
    "graph_robustness": 0.683,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2623,
    "weakly_connected_components": 21,
    "largest_wcc_size": 232,
    "pagerank_top10_percent": 11.95,
    "louvain_communities": 29,
    "louvain_modularity": 0.4424,
    "label_entropy": 1.4879,
    "computational_time": 0.16518975899089128
  },
  "retrieval_queries": []
}
2025-11-30 19:08:50,212 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:08:50,212 - src.pipeline.kg_builder - INFO - Batch 22 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 19.57s, Clean: 0.00s, Neo4j: 0.29s, ACS: 0.17s
2025-11-30 19:08:50,212 - src.pipeline.kg_builder - INFO - Batch 22 completed in 20.04s
Processing KG batches:  31%|███       | 22/72 [07:29<15:57, 19.14s/it]2025-11-30 19:08:50,213 - src.pipeline.kg_builder - INFO - Processing batch 23/72 (3 items)
2025-11-30 19:08:50,213 - src.pipeline.kg_builder - DEBUG - Batch 23 current_video_time: 05:39-05:44
2025-11-30 19:08:50,223 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 252
- Total Relationships: 210
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:08:50,224 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:08:50,224 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_0 ~213 words, content: Time: 05:29-05:34 Content: The sequence of images captures a detailed laboratory procedure, likely a titration or a precise liquid transfer, performed by a person wearing...
2025-11-30 19:08:50,224 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_1 ~220 words, content: A white bottle with a red cap, which appears to be a chemical reagent. The label is partially visible and shows hazard symbols, including a...
2025-11-30 19:08:50,224 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_2 ~231 words, content: le gloves, performing a careful measurement. The person is using a pipette to transfer a liquid from a small, clear glass beaker into a larger,...
2025-11-30 19:08:50,224 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_3 ~109 words, content: pipette in their left hand and a small, clear glass beaker in their right hand. They are carefully using the pipette to draw liquid from...
2025-11-30 19:08:50,243 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:08:50,296 - src.components.pre_llm_injector - DEBUG - Found 103 existing chunk embeddings for similarity lookup
2025-11-30 19:08:50,318 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.878'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.847')]
2025-11-30 19:08:50,320 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3
2025-11-30 19:08:50,321 - src.components.pre_llm_injector - DEBUG - Found 10 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2
2025-11-30 19:08:50,323 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2)
2025-11-30 19:08:50,329 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2: Subgraph: (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0)
2025-11-30 19:08:50,329 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.691'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.682')]
2025-11-30 19:08:50,329 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.878'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1', '0.769')]
2025-11-30 19:08:50,329 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.636'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.614')]
2025-11-30 19:08:50,329 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.847'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2', '0.815')]
2025-11-30 19:08:50,329 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:08:50,330 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_0) (~213 words) with timeout=5.0s retries=3
2025-11-30 19:08:51,736 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:08:51,736 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:08:51,736 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_1) (~220 words) with timeout=5.0s retries=3
2025-11-30 19:08:52,900 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:08:52,900 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:08:52,901 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_2) (~231 words) with timeout=5.0s retries=3
2025-11-30 19:08:54,196 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:08:54,196 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:08:54,196 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_3) (~109 words) with timeout=5.0s retries=3
2025-11-30 19:08:55,251 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:08:55,251 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:08:55,252 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 4 chunks
2025-11-30 19:08:55,252 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 5.03s
2025-11-30 19:08:55,252 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:08:55,252 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2: Subgraph: (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["22_0", "22_2"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["22_0", "22_2", "22_3"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["22_0", "22_3"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["22_0", "22_2", "22_3"]}, {"head": "Beaker", "relation": "Placed On", "tail": "Digital_Analytical_Balance", "source_chunks": ["22_0"]}, {"head": "Digital_Analytical_Balance", "relation": "Displays", "tail": "6.301_G", "source_chunks": ["22_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["22_1"]}, {"head": "Person", "relation": "Performs", "tail": "Laboratory Procedure", "source_chunks": ["22_1"]}, {"head": "Reagent Bottle", "relation": "Has", "tail": "Red Cap", "source_chunks": ["22_1"]}, {"head": "Reagent Bottle", "relation": "Has", "tail": "Hazard Symbols", "source_chunks": ["22_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Digital Balance", "source_chunks": ["22_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Glass Container", "source_chunks": ["22_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["22_2", "22_3"]}, {"head": "Pipette", "relation": "Transfers Liquid To", "tail": "Volumetric_Flask", "source_chunks": ["22_2"]}, {"head": "Digital_Balance", "relation": "Measures", "tail": "Mass", "source_chunks": ["22_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:08:55,253 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1455 words, ~1892 tokens)
2025-11-30 19:08:55,253 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:09:05,625 - src.components.global_refiner - DEBUG - LLM call completed in 10.37s
2025-11-30 19:09:05,625 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['22_0', '22_2']], ['Person', 'Holds', 'Pipette', ['22_0', '22_2', '22_3']], ['Pipette', 'Transfers', 'Liquid', ['22_0', '22_3']], ['Beaker', 'Contains', 'Liquid', ['22_0', '22_2', '22_3']], ['Beaker', 'Placed On', 'Digital_Analytical_Balance', ['22_0']], ['Digital_Analytical_Balance', 'Displays', '6.301_G', ['22_0']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['22_1']], ['Person', 'Performs', 'Laboratory Procedure', ['22_1']], ['Reagent Bottle', 'Has', 'Red Cap', ['22_1']], ['Reagent Bottle', 'Has', 'Hazard Symbols', ['22_1']]] inter_chunk_relations=[['Laboratory', 'Contains', 'Laboratory Table', ['22_1']], ['Laboratory', 'Contains', 'Digital Balance', ['22_1']], ['Laboratory', 'Contains', 'Glass Container', ['22_1']], ['Beaker', 'Placed On', 'Digital_Analytical_Balance', ['22_0']], ['Digital_Balance', 'Measures', 'Mass', ['22_2']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:09:05,625 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=10, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['22_0', '22_2']], ['Person', 'Holds', 'Pipette', ['22_0', '22_2', '22_3']], ['Pipette', 'Transfers', 'Liquid', ['22_0', '22_3']]]
2025-11-30 19:09:05,626 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Laboratory', 'Contains', 'Laboratory Table', ['22_1']], ['Laboratory', 'Contains', 'Digital Balance', ['22_1']], ['Laboratory', 'Contains', 'Glass Container', ['22_1']]]
2025-11-30 19:09:05,626 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:09:05,626 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=2, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:09:05,626 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:09:05,626 - src.components.global_refiner - INFO - LLM suggested 2 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:09:05,626 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 10.37s, LLM: 10.37s)
2025-11-30 19:09:05,626 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 10.37s
2025-11-30 19:09:05,626 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:09:05,626 - src.pipeline.kg_builder - INFO - Pushing batch 23/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:09:05,626 - src.components.neo4j_handler - INFO - Adding 14 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:09:05,797 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=262, relationships=220
2025-11-30 19:09:05,797 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:09:05,798 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:09:05,798 - src.components.neo4j_handler - INFO - Applying 2 prune instructions
2025-11-30 19:09:05,804 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:09:05,804 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:09:05,804 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:09:05,806 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory -[Contains]-> Laboratory Table
2025-11-30 19:09:05,807 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory -[Contains]-> Digital Balance
2025-11-30 19:09:05,808 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory -[Contains]-> Glass Container
2025-11-30 19:09:05,836 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Placed On]-> Digital_Analytical_Balance
2025-11-30 19:09:05,838 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital_Balance -[Measures]-> Mass
2025-11-30 19:09:05,839 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:09:05,844 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=261, relationships=218
2025-11-30 19:09:05,848 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:09:05,849 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:09:05,849 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:09:05,849 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.22s, indexes: 0.01s)
2025-11-30 19:09:05,852 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 107, 'with_embedding': 107, 'linked_chunks': 87}
2025-11-30 19:09:05,852 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:09:05,892 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 261 nodes
2025-11-30 19:09:05,960 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 241 nodes
2025-11-30 19:09:06,035 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 261, 'relationship_count': 750, 'density': 0.0111, 'avg_degree': 5.7471, 'avg_unique_neighbors': 5.7165, 'global_efficiency': 0.3341, 'avg_path_length': 2.7813, 'avg_degree_centrality': 0.0221, 'max_degree_centrality': 0.4577, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0397, 'degree_assortativity': -0.1542, 'graph_robustness': 0.696, 'diameter_estimate': 5, 'clustering_coefficient': 0.2616, 'weakly_connected_components': 21, 'largest_wcc_size': 241, 'pagerank_top10_percent': 11.74, 'louvain_communities': 30, 'louvain_modularity': 0.4452, 'label_entropy': 1.4882, 'computational_time': 0.18314254796132445}
2025-11-30 19:09:06,036 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 22, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500946.035997, 'total_time': 15.822991283028387, 'aggregation': 2.5549670681357384e-06, 'network_info': 0.01050542900338769, 'llm_extraction': 15.402617963962257, 'data_cleaning': 2.2968044504523277e-05, 'neo4j_injection': 0.22366061306092888, 'embedding_time': 0, 'indexing_time': 0.0053741110023111105, 'graph_injection_time': 0.21800172002986073, 'acs_metrics': {'node_count': 261, 'relationship_count': 750, 'density': 0.0111, 'avg_degree': 5.7471, 'avg_unique_neighbors': 5.7165, 'global_efficiency': 0.3341, 'avg_path_length': 2.7813, 'avg_degree_centrality': 0.0221, 'max_degree_centrality': 0.4577, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0397, 'degree_assortativity': -0.1542, 'graph_robustness': 0.696, 'diameter_estimate': 5, 'clustering_coefficient': 0.2616, 'weakly_connected_components': 21, 'largest_wcc_size': 241, 'pagerank_top10_percent': 11.74, 'louvain_communities': 30, 'louvain_modularity': 0.4452, 'label_entropy': 1.4882, 'computational_time': 0.18314254796132445}, 'retrieval_queries': []}
2025-11-30 19:09:06,036 - src.pipeline.kg_builder - DEBUG - Batch 22 metrics: {
  "batch_idx": 22,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500946.035997,
  "total_time": 15.822991283028387,
  "aggregation": 2.5549670681357384e-06,
  "network_info": 0.01050542900338769,
  "llm_extraction": 15.402617963962257,
  "data_cleaning": 2.2968044504523277e-05,
  "neo4j_injection": 0.22366061306092888,
  "embedding_time": 0,
  "indexing_time": 0.0053741110023111105,
  "graph_injection_time": 0.21800172002986073,
  "acs_metrics": {
    "node_count": 261,
    "relationship_count": 750,
    "density": 0.0111,
    "avg_degree": 5.7471,
    "avg_unique_neighbors": 5.7165,
    "global_efficiency": 0.3341,
    "avg_path_length": 2.7813,
    "avg_degree_centrality": 0.0221,
    "max_degree_centrality": 0.4577,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0397,
    "degree_assortativity": -0.1542,
    "graph_robustness": 0.696,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2616,
    "weakly_connected_components": 21,
    "largest_wcc_size": 241,
    "pagerank_top10_percent": 11.74,
    "louvain_communities": 30,
    "louvain_modularity": 0.4452,
    "label_entropy": 1.4882,
    "computational_time": 0.18314254796132445
  },
  "retrieval_queries": []
}
2025-11-30 19:09:06,036 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:09:06,036 - src.pipeline.kg_builder - INFO - Batch 23 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 15.40s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.18s
2025-11-30 19:09:06,036 - src.pipeline.kg_builder - INFO - Batch 23 completed in 15.82s
Processing KG batches:  32%|███▏      | 23/72 [07:45<14:49, 18.15s/it]2025-11-30 19:09:06,036 - src.pipeline.kg_builder - INFO - Processing batch 24/72 (3 items)
2025-11-30 19:09:06,036 - src.pipeline.kg_builder - DEBUG - Batch 24 current_video_time: 05:54-05:59
2025-11-30 19:09:06,043 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 261
- Total Relationships: 218
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:09:06,043 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:09:06,043 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_0 ~213 words, content: Time: 05:44-05:49 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a precise weighing process, from a first-person perspective. The setting...
2025-11-30 19:09:06,043 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_1 ~233 words, content: of the pipette and the beaker. The person's left hand, with the watch, is visible, and they are carefully controlling the flow of the liquid....
2025-11-30 19:09:06,043 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_2 ~219 words, content: added. Time: 05:49-05:54 Content: The video sequence captures a detailed laboratory procedure, likely the preparation of a solution, from a first-person perspective. The scene is...
2025-11-30 19:09:06,043 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_3 ~227 words, content: In summary, the video shows a person using a balance to accurately measure a liquid by adding it to a volumetric flask, a common technique...
2025-11-30 19:09:06,043 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_4 ~82 words, content: a window, and a cardboard box with a "小心易燃" (Caution: Flammable) warning sign. A printed document with Chinese text, likely a lab protocol, is also...
2025-11-30 19:09:06,063 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:09:06,125 - src.components.pre_llm_injector - DEBUG - Found 107 existing chunk embeddings for similarity lookup
2025-11-30 19:09:06,154 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.814'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4', '0.765')]
2025-11-30 19:09:06,155 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4
2025-11-30 19:09:06,156 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3
2025-11-30 19:09:06,160 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2)
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1)
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_1', '0.612'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0', '0.600')]
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1', '0.727'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_0', '0.718')]
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.597'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.572')]
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_4', '0.587'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.586')]
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.814'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4', '0.765')]
2025-11-30 19:09:06,161 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:09:06,162 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_0) (~213 words) with timeout=5.0s retries=3
2025-11-30 19:09:07,432 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:09:07,432 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:09:07,433 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_1) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:09:08,394 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:09:08,394 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:09:08,395 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_2) (~219 words) with timeout=5.0s retries=3
2025-11-30 19:09:09,658 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:09:09,658 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:09:09,658 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_3) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:09:11,072 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:09:11,073 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:09:11,073 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_4) (~82 words) with timeout=5.0s retries=3
2025-11-30 19:09:12,144 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:09:12,144 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:09:12,144 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 5 chunks
2025-11-30 19:09:12,144 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 6.10s
2025-11-30 19:09:12,144 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:09:12,145 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_4: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["23_0", "23_2", "23_3"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["23_0", "23_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["23_0", "23_1"]}, {"head": "Pipette", "relation": "Dispenses", "tail": "Liquid", "source_chunks": ["23_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Digital_Balance", "source_chunks": ["23_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Negative_Weight", "source_chunks": ["23_0"]}, {"head": "Person", "relation": "Holds", "tail": "White Bottle", "source_chunks": ["23_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["23_1"]}, {"head": "Balance", "relation": "Displays", "tail": "Negative Weight", "source_chunks": ["23_1"]}, {"head": "Person", "relation": "Adds", "tail": "Liquid", "source_chunks": ["23_1"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["23_2", "23_3"]}, {"head": "Person", "relation": "Holds", "tail": "Wash_Bottle", "source_chunks": ["23_2"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["23_2", "23_3"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["23_2"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Liquid", "source_chunks": ["23_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:09:12,145 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~928 words, ~1206 tokens)
2025-11-30 19:09:12,145 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:09:21,799 - src.components.global_refiner - DEBUG - LLM call completed in 9.65s
2025-11-30 19:09:21,800 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['23_0', '23_2', '23_3']], ['Person', 'Holds', 'Pipette', ['23_0', '23_1']], ['Person', 'Holds', 'Beaker', ['23_0', '23_1']], ['Pipette', 'Dispenses', 'Liquid', ['23_0']], ['Beaker', 'Is On', 'Digital_Balance', ['23_0']], ['Digital_Balance', 'Displays', 'Negative_Weight', ['23_0']], ['Person', 'Holds', 'White Bottle', ['23_1']], ['Beaker', 'Contains', 'Liquid', ['23_1']], ['Balance', 'Displays', 'Negative Weight', ['23_1']], ['Person', 'Adds', 'Liquid', ['23_1']], ['Person', 'Holds', 'Volumetric_Flask', ['23_2', '23_3']], ['Person', 'Holds', 'Wash_Bottle', ['23_2']], ['Person', 'Uses', 'Pipette', ['23_2', '23_3']], ['Pipette', 'Transfers', 'Liquid', ['23_2']], ['Volumetric_Flask', 'Contains', 'Liquid', ['23_2']]] inter_chunk_relations=[['Beaker', 'Is On', 'Digital_Balance', ['23_0']], ['Digital_Balance', 'Displays', 'Negative_Weight', ['23_0']], ['Beaker', 'Contains', 'Liquid', ['23_1']], ['Balance', 'Displays', 'Negative Weight', ['23_1']], ['Volumetric_Flask', 'Contains', 'Liquid', ['23_2']]] merge_instructions=[] prune_instructions=[]
2025-11-30 19:09:21,800 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['23_0', '23_2', '23_3']], ['Person', 'Holds', 'Pipette', ['23_0', '23_1']], ['Person', 'Holds', 'Beaker', ['23_0', '23_1']]]
2025-11-30 19:09:21,800 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Digital_Balance', ['23_0']], ['Digital_Balance', 'Displays', 'Negative_Weight', ['23_0']], ['Beaker', 'Contains', 'Liquid', ['23_1']]]
2025-11-30 19:09:21,800 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:09:21,800 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:09:21,800 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 9.66s, LLM: 9.65s)
2025-11-30 19:09:21,800 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 9.66s
2025-11-30 19:09:21,800 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:09:21,800 - src.pipeline.kg_builder - INFO - Pushing batch 24/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:09:21,800 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:09:22,033 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=267, relationships=226
2025-11-30 19:09:22,033 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:09:22,034 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Digital_Balance
2025-11-30 19:09:22,036 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital_Balance -[Displays]-> Negative_Weight
2025-11-30 19:09:22,037 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Contains]-> Liquid
2025-11-30 19:09:22,070 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Balance -[Displays]-> Negative Weight
2025-11-30 19:09:22,071 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Volumetric_Flask -[Contains]-> Liquid
2025-11-30 19:09:22,072 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:09:22,077 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=267, relationships=226
2025-11-30 19:09:22,079 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:09:22,079 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:09:22,079 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:09:22,079 - src.components.neo4j_handler - INFO - Batch injected in 0.28s (triplets: 0.28s, indexes: 0.00s)
2025-11-30 19:09:22,081 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 112, 'with_embedding': 112, 'linked_chunks': 91}
2025-11-30 19:09:22,081 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:09:22,121 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 267 nodes
2025-11-30 19:09:22,192 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 246 nodes
2025-11-30 19:09:22,269 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 267, 'relationship_count': 778, 'density': 0.011, 'avg_degree': 5.8277, 'avg_unique_neighbors': 5.7978, 'global_efficiency': 0.3352, 'avg_path_length': 2.756, 'avg_degree_centrality': 0.0219, 'max_degree_centrality': 0.4699, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0288, 'degree_assortativity': -0.1576, 'graph_robustness': 0.8226, 'diameter_estimate': 5, 'clustering_coefficient': 0.266, 'weakly_connected_components': 22, 'largest_wcc_size': 246, 'pagerank_top10_percent': 11.48, 'louvain_communities': 32, 'louvain_modularity': 0.4536, 'label_entropy': 1.4906, 'computational_time': 0.18835823494009674}
2025-11-30 19:09:22,270 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 23, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500962.270033, 'total_time': 16.2332159220241, 'aggregation': 4.28792554885149e-06, 'network_info': 0.006420725025236607, 'llm_extraction': 15.757095632958226, 'data_cleaning': 3.415194805711508e-05, 'neo4j_injection': 0.27907961094751954, 'embedding_time': 0, 'indexing_time': 0.001592735992744565, 'graph_injection_time': 0.27714384999126196, 'acs_metrics': {'node_count': 267, 'relationship_count': 778, 'density': 0.011, 'avg_degree': 5.8277, 'avg_unique_neighbors': 5.7978, 'global_efficiency': 0.3352, 'avg_path_length': 2.756, 'avg_degree_centrality': 0.0219, 'max_degree_centrality': 0.4699, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0288, 'degree_assortativity': -0.1576, 'graph_robustness': 0.8226, 'diameter_estimate': 5, 'clustering_coefficient': 0.266, 'weakly_connected_components': 22, 'largest_wcc_size': 246, 'pagerank_top10_percent': 11.48, 'louvain_communities': 32, 'louvain_modularity': 0.4536, 'label_entropy': 1.4906, 'computational_time': 0.18835823494009674}, 'retrieval_queries': []}
2025-11-30 19:09:22,270 - src.pipeline.kg_builder - DEBUG - Batch 23 metrics: {
  "batch_idx": 23,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500962.270033,
  "total_time": 16.2332159220241,
  "aggregation": 4.28792554885149e-06,
  "network_info": 0.006420725025236607,
  "llm_extraction": 15.757095632958226,
  "data_cleaning": 3.415194805711508e-05,
  "neo4j_injection": 0.27907961094751954,
  "embedding_time": 0,
  "indexing_time": 0.001592735992744565,
  "graph_injection_time": 0.27714384999126196,
  "acs_metrics": {
    "node_count": 267,
    "relationship_count": 778,
    "density": 0.011,
    "avg_degree": 5.8277,
    "avg_unique_neighbors": 5.7978,
    "global_efficiency": 0.3352,
    "avg_path_length": 2.756,
    "avg_degree_centrality": 0.0219,
    "max_degree_centrality": 0.4699,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0288,
    "degree_assortativity": -0.1576,
    "graph_robustness": 0.8226,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.266,
    "weakly_connected_components": 22,
    "largest_wcc_size": 246,
    "pagerank_top10_percent": 11.48,
    "louvain_communities": 32,
    "louvain_modularity": 0.4536,
    "label_entropy": 1.4906,
    "computational_time": 0.18835823494009674
  },
  "retrieval_queries": []
}
2025-11-30 19:09:22,270 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:09:22,270 - src.pipeline.kg_builder - INFO - Batch 24 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 15.76s, Clean: 0.00s, Neo4j: 0.28s, ACS: 0.19s
2025-11-30 19:09:22,270 - src.pipeline.kg_builder - INFO - Batch 24 completed in 16.23s
Processing KG batches:  33%|███▎      | 24/72 [08:01<14:03, 17.57s/it]2025-11-30 19:09:22,270 - src.pipeline.kg_builder - INFO - Processing batch 25/72 (3 items)
2025-11-30 19:09:22,270 - src.pipeline.kg_builder - DEBUG - Batch 25 current_video_time: 06:09-06:14
2025-11-30 19:09:22,281 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 267
- Total Relationships: 226
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:09:22,281 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:09:22,281 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_0 ~224 words, content: Time: 05:59-06:04 Content: The video sequence captures a first-person perspective of a laboratory procedure, likely a titration or solution preparation, taking place on a black...
2025-11-30 19:09:22,281 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_1 ~229 words, content: - **Other Objects:** A white bottle with a red cap, likely containing a chemical reagent, sits on the bench. A printed document with Chinese text,...
2025-11-30 19:09:22,281 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_2 ~226 words, content: On the table, there is a white bottle with a red cap, a box of aluminum foil, a pen, and a document with handwritten notes....
2025-11-30 19:09:22,281 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_3 ~234 words, content: overall atmosphere suggests a methodical and careful approach to the experiment. In summary, the video depicts a detailed and precise laboratory procedure, likely involving the...
2025-11-30 19:09:22,281 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_4 ~28 words, content: liquid level in the volumetric flask is accurate. The camera remains relatively stable, focusing on the hand and the flask, with slight movements that follow...
2025-11-30 19:09:22,301 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:09:22,356 - src.components.pre_llm_injector - DEBUG - Found 112 existing chunk embeddings for similarity lookup
2025-11-30 19:09:22,387 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.737'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3', '0.717')]
2025-11-30 19:09:22,389 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3
2025-11-30 19:09:22,389 - src.components.pre_llm_injector - DEBUG - Found 10 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2
2025-11-30 19:09:22,400 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1)
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1)
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_1', '0.620'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_1', '0.601')]
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.737'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3', '0.717')]
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.674'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.673')]
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_2', '0.599'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_4', '0.564')]
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.700'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.700')]
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:09:22,403 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_0) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:09:23,797 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:09:23,797 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:09:23,797 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:09:25,035 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:09:25,035 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:09:25,035 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_2) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:09:29,875 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:09:29,875 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:09:29,875 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_3) (~234 words) with timeout=5.0s retries=3
2025-11-30 19:09:31,277 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:09:31,278 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:09:31,278 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_4) (~28 words) with timeout=5.0s retries=3
2025-11-30 19:09:32,458 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:09:32,458 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:09:32,459 - src.components.pre_llm_injector - INFO - Extracted 27 local triplets from 5 chunks
2025-11-30 19:09:32,459 - src.pipeline.kg_builder - INFO - Pre-extraction: 27 triplets in 10.18s
2025-11-30 19:09:32,459 - src.components.global_refiner - INFO - Capping refinement input: 27 → 15 triplets
2025-11-30 19:09:32,459 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["24_0"]}, {"head": "Person", "relation": "Wears", "tail": "Gold_Watch", "source_chunks": ["24_0"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["24_0", "24_3"]}, {"head": "Person", "relation": "Holds", "tail": "Squeeze_Bottle", "source_chunks": ["24_0"]}, {"head": "Squeeze_Bottle", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["24_0"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["24_0", "24_3"]}, {"head": "Person", "relation": "Holds", "tail": "Squeeze Bottle", "source_chunks": ["24_1"]}, {"head": "Squeeze Bottle", "relation": "Dispenses", "tail": "Liquid", "source_chunks": ["24_1"]}, {"head": "Liquid", "relation": "Enters", "tail": "Volumetric Flask", "source_chunks": ["24_1"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric Flask", "source_chunks": ["24_1"]}, {"head": "Volumetric Flask", "relation": "Contains", "tail": "Liquid", "source_chunks": ["24_1", "24_4"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "White Bottle", "source_chunks": ["24_1"]}, {"head": "Table", "relation": "Contains", "tail": "White Bottle", "source_chunks": ["24_2"]}, {"head": "Table", "relation": "Contains", "tail": "Box Of Aluminum Foil", "source_chunks": ["24_2"]}, {"head": "Table", "relation": "Contains", "tail": "Pen", "source_chunks": ["24_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:09:32,460 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1975 words, ~2568 tokens)
2025-11-30 19:09:32,460 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:09:32,481 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 7011 input tokens (2000 > 8192 - 7011). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:09:32,481 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:09:32,481 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:09:32,481 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:09:32,481 - src.pipeline.kg_builder - INFO - Pushing batch 25/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:09:32,481 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:09:32,641 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=277, relationships=237
2025-11-30 19:09:32,642 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:09:32,647 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=277, relationships=237
2025-11-30 19:09:32,648 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:09:32,648 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:09:32,649 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:09:32,649 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:09:32,650 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 117, 'with_embedding': 117, 'linked_chunks': 96}
2025-11-30 19:09:32,650 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:09:32,692 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 277 nodes
2025-11-30 19:09:32,773 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 256 nodes
2025-11-30 19:09:32,863 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 277, 'relationship_count': 809, 'density': 0.0106, 'avg_degree': 5.8412, 'avg_unique_neighbors': 5.8051, 'global_efficiency': 0.3349, 'avg_path_length': 2.7812, 'avg_degree_centrality': 0.0212, 'max_degree_centrality': 0.471, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0145, 'degree_assortativity': -0.1505, 'graph_robustness': 0.8455, 'diameter_estimate': 5, 'clustering_coefficient': 0.2703, 'weakly_connected_components': 22, 'largest_wcc_size': 256, 'pagerank_top10_percent': 11.01, 'louvain_communities': 30, 'louvain_modularity': 0.4379, 'label_entropy': 1.4913, 'computational_time': 0.21282945899292827}
2025-11-30 19:09:32,863 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 24, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500972.8635707, 'total_time': 10.592707399977371, 'aggregation': 3.14891804009676e-06, 'network_info': 0.010050193057395518, 'llm_extraction': 10.200538960052654, 'data_cleaning': 2.9564020223915577e-05, 'neo4j_injection': 0.1675471490016207, 'embedding_time': 0, 'indexing_time': 0.0016789250075817108, 'graph_injection_time': 0.1655168030411005, 'acs_metrics': {'node_count': 277, 'relationship_count': 809, 'density': 0.0106, 'avg_degree': 5.8412, 'avg_unique_neighbors': 5.8051, 'global_efficiency': 0.3349, 'avg_path_length': 2.7812, 'avg_degree_centrality': 0.0212, 'max_degree_centrality': 0.471, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0145, 'degree_assortativity': -0.1505, 'graph_robustness': 0.8455, 'diameter_estimate': 5, 'clustering_coefficient': 0.2703, 'weakly_connected_components': 22, 'largest_wcc_size': 256, 'pagerank_top10_percent': 11.01, 'louvain_communities': 30, 'louvain_modularity': 0.4379, 'label_entropy': 1.4913, 'computational_time': 0.21282945899292827}, 'retrieval_queries': []}
2025-11-30 19:09:32,863 - src.pipeline.kg_builder - DEBUG - Batch 24 metrics: {
  "batch_idx": 24,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500972.8635707,
  "total_time": 10.592707399977371,
  "aggregation": 3.14891804009676e-06,
  "network_info": 0.010050193057395518,
  "llm_extraction": 10.200538960052654,
  "data_cleaning": 2.9564020223915577e-05,
  "neo4j_injection": 0.1675471490016207,
  "embedding_time": 0,
  "indexing_time": 0.0016789250075817108,
  "graph_injection_time": 0.1655168030411005,
  "acs_metrics": {
    "node_count": 277,
    "relationship_count": 809,
    "density": 0.0106,
    "avg_degree": 5.8412,
    "avg_unique_neighbors": 5.8051,
    "global_efficiency": 0.3349,
    "avg_path_length": 2.7812,
    "avg_degree_centrality": 0.0212,
    "max_degree_centrality": 0.471,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0145,
    "degree_assortativity": -0.1505,
    "graph_robustness": 0.8455,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2703,
    "weakly_connected_components": 22,
    "largest_wcc_size": 256,
    "pagerank_top10_percent": 11.01,
    "louvain_communities": 30,
    "louvain_modularity": 0.4379,
    "label_entropy": 1.4913,
    "computational_time": 0.21282945899292827
  },
  "retrieval_queries": []
}
2025-11-30 19:09:32,864 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:09:32,864 - src.pipeline.kg_builder - INFO - Batch 25 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 10.20s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.21s
2025-11-30 19:09:32,864 - src.pipeline.kg_builder - INFO - Batch 25 completed in 10.59s
Processing KG batches:  35%|███▍      | 25/72 [08:12<12:07, 15.48s/it]2025-11-30 19:09:32,864 - src.pipeline.kg_builder - INFO - Processing batch 26/72 (3 items)
2025-11-30 19:09:32,864 - src.pipeline.kg_builder - DEBUG - Batch 26 current_video_time: 06:24-06:29
2025-11-30 19:09:32,873 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 277
- Total Relationships: 237
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:09:32,873 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:09:32,873 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_0 ~202 words, content: Time: 06:14-06:19 Content: The video captures a close-up, first-person perspective of a laboratory procedure, likely the preparation of a solution. The scene is set in...
2025-11-30 19:09:32,873 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_1 ~209 words, content: reaction is complete. - **Balance:** A digital analytical balance is visible in the background, which is used for precise weighing of chemicals. - **Chemical Containers:**...
2025-11-30 19:09:32,873 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2 ~242 words, content: laboratory setting. The frames show a person, wearing a blue nitrile glove, handling laboratory equipment with precision. - **In the first four frames**, the focus...
2025-11-30 19:09:32,874 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_3 ~238 words, content: flask, likely as part of a chemical experiment. The sequence transitions from a close-up of the precise action to a wider shot of the laboratory,...
2025-11-30 19:09:32,874 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_4 ~249 words, content: background includes a cabinet with various items, and the overall environment remains consistent with a laboratory setting. - In the third frame, the camera angle...
2025-11-30 19:09:32,874 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_5 ~214 words, content: - In the final frame, the camera angle changes to show a different part of the laboratory. The balance scale is still visible, but now...
2025-11-30 19:09:32,893 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:09:32,955 - src.components.pre_llm_injector - DEBUG - Found 117 existing chunk embeddings for similarity lookup
2025-11-30 19:09:32,992 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.819'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.792')]
2025-11-30 19:09:32,994 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2
2025-11-30 19:09:32,994 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1
2025-11-30 19:09:33,000 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0)
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0)
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.713'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3', '0.709')]
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0', '0.685'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_0', '0.639')]
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.737'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.711')]
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.819'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.792')]
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.735'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.695')]
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.790'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.785')]
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:09:33,007 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_0) (~202 words) with timeout=5.0s retries=3
2025-11-30 19:09:34,390 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:09:34,390 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:09:34,390 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_1) (~209 words) with timeout=5.0s retries=3
2025-11-30 19:09:39,396 - src.components.pre_llm_injector - WARNING - Chunk 1 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:09:41,386 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 2)
2025-11-30 19:09:41,386 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:09:41,386 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2) (~242 words) with timeout=5.0s retries=3
2025-11-30 19:09:42,703 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:09:42,704 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:09:42,704 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_3) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:09:43,749 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:09:43,749 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:09:43,750 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_4) (~249 words) with timeout=5.0s retries=3
2025-11-30 19:09:44,951 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:09:44,951 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:09:44,951 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_5) (~214 words) with timeout=5.0s retries=3
2025-11-30 19:09:46,056 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:09:46,056 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:09:46,057 - src.components.pre_llm_injector - INFO - Extracted 31 local triplets from 6 chunks
2025-11-30 19:09:46,057 - src.pipeline.kg_builder - INFO - Pre-extraction: 31 triplets in 13.18s
2025-11-30 19:09:46,057 - src.components.global_refiner - INFO - Capping refinement input: 31 → 15 triplets
2025-11-30 19:09:46,057 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Glove", "source_chunks": ["25_0", "25_2"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["25_0", "25_2"]}, {"head": "Burette", "relation": "Dispenses", "tail": "Liquid", "source_chunks": ["25_0"]}, {"head": "Liquid", "relation": "Is Added To", "tail": "Volumetric_Flask", "source_chunks": ["25_0"]}, {"head": "Person", "relation": "Uses", "tail": "Burette", "source_chunks": ["25_0"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Liquid", "source_chunks": ["25_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Glove", "source_chunks": ["25_1"]}, {"head": "Digital Analytical Balance", "relation": "Is Used For", "tail": "Precise Weighing", "source_chunks": ["25_1"]}, {"head": "White Bottle", "relation": "Has Label", "tail": "Corrosive Hazard Symbol", "source_chunks": ["25_1"]}, {"head": "Volumetric Flask", "relation": "Receives", "tail": "Liquid From Burette", "source_chunks": ["25_1"]}, {"head": "Lab Table", "relation": "Contains", "tail": "Glass Beaker", "source_chunks": ["25_1"]}, {"head": "Lab Table", "relation": "Contains", "tail": "Pen", "source_chunks": ["25_1"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["25_2"]}, {"head": "Person", "relation": "Uses", "tail": "Digital_Scale", "source_chunks": ["25_2"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Magnetic_Stirrer", "source_chunks": ["25_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:09:46,058 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1664 words, ~2163 tokens)
2025-11-30 19:09:46,058 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:09:59,140 - src.components.global_refiner - DEBUG - LLM call completed in 13.08s
2025-11-30 19:09:59,140 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Glove', ['25_0', '25_1']], ['Person', 'Holds', 'Volumetric_Flask', ['25_0']], ['Burette', 'Dispenses', 'Liquid', ['25_0']], ['Liquid', 'Is Added To', 'Volumetric_Flask', ['25_0']], ['Person', 'Uses', 'Burette', ['25_0']], ['Volumetric_Flask', 'Contains', 'Liquid', ['25_0']], ['Digital Analytical Balance', 'Is Used For', 'Precise Weighing', ['25_1']], ['White Bottle', 'Has Label', 'Corrosive Hazard Symbol', ['25_1']], ['Volumetric_Flask', 'Receives', 'Liquid From Burette', ['25_1']], ['Lab Table', 'Contains', 'Glass Beaker', ['25_1']], ['Lab Table', 'Contains', 'Pen', ['25_1']], ['Volumetric_Flask', 'Contains', 'Clear_Liquid', ['25_2']], ['Person', 'Uses', 'Digital_Scale', ['25_2']], ['Laboratory', 'Contains', 'Magnetic_Stirrer', ['25_2']]] inter_chunk_relations=[['Lab Table', 'Contains', 'Laboratory Table', ['25_1']], ['Digital Analytical Balance', 'Is Used For', 'Digital Balance', ['25_1']], ['Volumetric_Flask', 'Contains', 'Volumetric_Flask', ['25_2']], ['Person', 'Holds', 'Volumetric_Flask', ['25_0']], ['Person', 'Uses', 'Digital_Scale', ['25_2']]] merge_instructions=[{'local': 'Blue_Nitrile_Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Watch'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Gold_Watch'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Volumetric_Flask'}]
2025-11-30 19:09:59,140 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=14, sample=[['Person', 'Wears', 'Blue_Nitrile_Glove', ['25_0', '25_1']], ['Person', 'Holds', 'Volumetric_Flask', ['25_0']], ['Burette', 'Dispenses', 'Liquid', ['25_0']]]
2025-11-30 19:09:59,141 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Lab Table', 'Contains', 'Laboratory Table', ['25_1']], ['Digital Analytical Balance', 'Is Used For', 'Digital Balance', ['25_1']], ['Volumetric_Flask', 'Contains', 'Volumetric_Flask', ['25_2']]]
2025-11-30 19:09:59,141 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue_Nitrile_Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:09:59,141 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Watch'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Gold_Watch'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:09:59,141 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue_Nitrile_Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:09:59,141 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Watch'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Gold_Watch'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Volumetric_Flask'}]
2025-11-30 19:09:59,141 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 19 triplets (total: 13.08s, LLM: 13.08s)
2025-11-30 19:09:59,141 - src.pipeline.kg_builder - INFO - Global refinement: 19 triplets in 13.08s
2025-11-30 19:09:59,141 - src.pipeline.kg_builder - INFO - Using 19 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:09:59,141 - src.pipeline.kg_builder - INFO - Pushing batch 26/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:09:59,141 - src.components.neo4j_handler - INFO - Adding 17 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:09:59,302 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=288, relationships=249
2025-11-30 19:09:59,303 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:09:59,303 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Glove -> Blue_Nitrile_Gloves
2025-11-30 19:09:59,308 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Glove -> Blue_Nitrile_Gloves
2025-11-30 19:09:59,308 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:09:59,313 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Watch
2025-11-30 19:09:59,314 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Gold_Watch
2025-11-30 19:09:59,316 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:09:59,318 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Volumetric_Flask
2025-11-30 19:09:59,318 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:09:59,319 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab Table -[Contains]-> Laboratory Table
2025-11-30 19:09:59,320 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital Analytical Balance -[Is Used For]-> Digital Balance
2025-11-30 19:09:59,321 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Volumetric_Flask -[Contains]-> Volumetric_Flask
2025-11-30 19:09:59,323 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Volumetric_Flask
2025-11-30 19:09:59,324 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Uses]-> Digital_Scale
2025-11-30 19:09:59,324 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:09:59,330 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=286, relationships=244
2025-11-30 19:09:59,332 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:09:59,332 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:09:59,332 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:09:59,332 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:09:59,333 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 123, 'with_embedding': 123, 'linked_chunks': 99}
2025-11-30 19:09:59,333 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:09:59,377 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 286 nodes
2025-11-30 19:09:59,465 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 262 nodes
2025-11-30 19:09:59,565 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 286, 'relationship_count': 840, 'density': 0.0103, 'avg_degree': 5.8741, 'avg_unique_neighbors': 5.8322, 'global_efficiency': 0.3285, 'avg_path_length': 2.7816, 'avg_degree_centrality': 0.0206, 'max_degree_centrality': 0.4596, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.028, 'degree_assortativity': -0.1308, 'graph_robustness': 0.8548, 'diameter_estimate': 5, 'clustering_coefficient': 0.2609, 'weakly_connected_components': 25, 'largest_wcc_size': 262, 'pagerank_top10_percent': 11.01, 'louvain_communities': 37, 'louvain_modularity': 0.4439, 'label_entropy': 1.4929, 'computational_time': 0.23156748805195093}
2025-11-30 19:09:59,565 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 25, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764500999.5656443, 'total_time': 26.70125827100128, 'aggregation': 3.590015694499016e-06, 'network_info': 0.00887229002546519, 'llm_extraction': 26.268076759995893, 'data_cleaning': 3.818003460764885e-05, 'neo4j_injection': 0.19098197703715414, 'embedding_time': 0, 'indexing_time': 0.00185441505163908, 'graph_injection_time': 0.18877694208640605, 'acs_metrics': {'node_count': 286, 'relationship_count': 840, 'density': 0.0103, 'avg_degree': 5.8741, 'avg_unique_neighbors': 5.8322, 'global_efficiency': 0.3285, 'avg_path_length': 2.7816, 'avg_degree_centrality': 0.0206, 'max_degree_centrality': 0.4596, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.028, 'degree_assortativity': -0.1308, 'graph_robustness': 0.8548, 'diameter_estimate': 5, 'clustering_coefficient': 0.2609, 'weakly_connected_components': 25, 'largest_wcc_size': 262, 'pagerank_top10_percent': 11.01, 'louvain_communities': 37, 'louvain_modularity': 0.4439, 'label_entropy': 1.4929, 'computational_time': 0.23156748805195093}, 'retrieval_queries': []}
2025-11-30 19:09:59,565 - src.pipeline.kg_builder - DEBUG - Batch 25 metrics: {
  "batch_idx": 25,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764500999.5656443,
  "total_time": 26.70125827100128,
  "aggregation": 3.590015694499016e-06,
  "network_info": 0.00887229002546519,
  "llm_extraction": 26.268076759995893,
  "data_cleaning": 3.818003460764885e-05,
  "neo4j_injection": 0.19098197703715414,
  "embedding_time": 0,
  "indexing_time": 0.00185441505163908,
  "graph_injection_time": 0.18877694208640605,
  "acs_metrics": {
    "node_count": 286,
    "relationship_count": 840,
    "density": 0.0103,
    "avg_degree": 5.8741,
    "avg_unique_neighbors": 5.8322,
    "global_efficiency": 0.3285,
    "avg_path_length": 2.7816,
    "avg_degree_centrality": 0.0206,
    "max_degree_centrality": 0.4596,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.028,
    "degree_assortativity": -0.1308,
    "graph_robustness": 0.8548,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2609,
    "weakly_connected_components": 25,
    "largest_wcc_size": 262,
    "pagerank_top10_percent": 11.01,
    "louvain_communities": 37,
    "louvain_modularity": 0.4439,
    "label_entropy": 1.4929,
    "computational_time": 0.23156748805195093
  },
  "retrieval_queries": []
}
2025-11-30 19:09:59,566 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:09:59,566 - src.pipeline.kg_builder - INFO - Batch 26 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 26.27s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.23s
2025-11-30 19:09:59,566 - src.pipeline.kg_builder - INFO - Batch 26 completed in 26.70s
Processing KG batches:  36%|███▌      | 26/72 [08:38<14:26, 18.85s/it]2025-11-30 19:09:59,566 - src.pipeline.kg_builder - INFO - Processing batch 27/72 (3 items)
2025-11-30 19:09:59,566 - src.pipeline.kg_builder - DEBUG - Batch 27 current_video_time: 06:39-06:44
2025-11-30 19:09:59,575 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 286
- Total Relationships: 244
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:09:59,576 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:09:59,576 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0 ~229 words, content: Time: 06:29-06:34 Content: The sequence of images captures a laboratory procedure, likely the preparation of a chemical solution. The scene is set on a black...
2025-11-30 19:09:59,576 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_1 ~225 words, content: is being added to a container that is already on the balance. The overall context implies that a precise amount of a chemical is being...
2025-11-30 19:09:59,576 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_2 ~224 words, content: , is positioned nearby, indicating that the solution is being weighed as part of the process. The person's left wrist, adorned with a watch, is...
2025-11-30 19:09:59,576 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3 ~145 words, content: This flask, which has a long neck and a flat bottom, is already partially filled with a clear liquid. The person is using the pipette...
2025-11-30 19:09:59,596 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:09:59,653 - src.components.pre_llm_injector - DEBUG - Found 123 existing chunk embeddings for similarity lookup
2025-11-30 19:09:59,679 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3', '0.881'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.833')]
2025-11-30 19:09:59,681 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0
2025-11-30 19:09:59,682 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3
2025-11-30 19:09:59,693 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2)
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2)
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.833'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.804')]
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_3', '0.799'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_0', '0.788')]
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.757'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_1', '0.730')]
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3', '0.881'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.798')]
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:09:59,695 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:10:00,864 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:10:00,864 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:10:00,864 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_1) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:10:02,129 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:10:02,129 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:10:02,129 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_2) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:10:03,492 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:10:03,492 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:10:03,492 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3) (~145 words) with timeout=5.0s retries=3
2025-11-30 19:10:04,559 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:10:04,559 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:10:04,559 - src.components.pre_llm_injector - INFO - Extracted 22 local triplets from 4 chunks
2025-11-30 19:10:04,559 - src.pipeline.kg_builder - INFO - Pre-extraction: 22 triplets in 4.98s
2025-11-30 19:10:04,559 - src.components.global_refiner - INFO - Capping refinement input: 22 → 15 triplets
2025-11-30 19:10:04,559 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["26_0", "26_2"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["26_0"]}, {"head": "Person", "relation": "Adds", "tail": "Liquid", "source_chunks": ["26_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["26_0", "26_3"]}, {"head": "Balance", "relation": "Displays", "tail": "Negative_Mass", "source_chunks": ["26_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["26_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["26_1"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Beaker", "source_chunks": ["26_1"]}, {"head": "Person", "relation": "Uses", "tail": "Glass Pipette", "source_chunks": ["26_1"]}, {"head": "Glass Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["26_1"]}, {"head": "Glass Beaker", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["26_1"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "56.30", "source_chunks": ["26_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["26_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["26_2"]}, {"head": "Pipette", "relation": "Is Inside", "tail": "Beaker", "source_chunks": ["26_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:10:04,560 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1855 words, ~2412 tokens)
2025-11-30 19:10:04,560 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:10:04,577 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 6573 input tokens (2000 > 8192 - 6573). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:10:04,577 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:10:04,577 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:10:04,577 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:10:04,577 - src.pipeline.kg_builder - INFO - Pushing batch 27/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:10:04,577 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:10:04,764 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=293, relationships=254
2025-11-30 19:10:04,765 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:10:04,770 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=293, relationships=254
2025-11-30 19:10:04,773 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:10:04,773 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:10:04,774 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:10:04,774 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:10:04,775 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 127, 'with_embedding': 127, 'linked_chunks': 103}
2025-11-30 19:10:04,775 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:10:04,807 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 293 nodes
2025-11-30 19:10:04,896 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 269 nodes
2025-11-30 19:10:05,003 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 293, 'relationship_count': 871, 'density': 0.0102, 'avg_degree': 5.9454, 'avg_unique_neighbors': 5.8976, 'global_efficiency': 0.3313, 'avg_path_length': 2.7688, 'avg_degree_centrality': 0.0204, 'max_degree_centrality': 0.4692, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0166, 'degree_assortativity': -0.1389, 'graph_robustness': 0.8565, 'diameter_estimate': 5, 'clustering_coefficient': 0.272, 'weakly_connected_components': 25, 'largest_wcc_size': 269, 'pagerank_top10_percent': 10.74, 'louvain_communities': 36, 'louvain_modularity': 0.431, 'label_entropy': 1.4936, 'computational_time': 0.22869313799310476}
2025-11-30 19:10:05,004 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 26, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501005.004057, 'total_time': 5.437538748024963, 'aggregation': 3.4410040825605392e-06, 'network_info': 0.009033491951413453, 'llm_extraction': 5.0019014950376, 'data_cleaning': 1.2101954780519009e-05, 'neo4j_injection': 0.19650864193681628, 'embedding_time': 0, 'indexing_time': 0.003214618074707687, 'graph_injection_time': 0.19308823999017477, 'acs_metrics': {'node_count': 293, 'relationship_count': 871, 'density': 0.0102, 'avg_degree': 5.9454, 'avg_unique_neighbors': 5.8976, 'global_efficiency': 0.3313, 'avg_path_length': 2.7688, 'avg_degree_centrality': 0.0204, 'max_degree_centrality': 0.4692, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0166, 'degree_assortativity': -0.1389, 'graph_robustness': 0.8565, 'diameter_estimate': 5, 'clustering_coefficient': 0.272, 'weakly_connected_components': 25, 'largest_wcc_size': 269, 'pagerank_top10_percent': 10.74, 'louvain_communities': 36, 'louvain_modularity': 0.431, 'label_entropy': 1.4936, 'computational_time': 0.22869313799310476}, 'retrieval_queries': []}
2025-11-30 19:10:05,004 - src.pipeline.kg_builder - DEBUG - Batch 26 metrics: {
  "batch_idx": 26,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501005.004057,
  "total_time": 5.437538748024963,
  "aggregation": 3.4410040825605392e-06,
  "network_info": 0.009033491951413453,
  "llm_extraction": 5.0019014950376,
  "data_cleaning": 1.2101954780519009e-05,
  "neo4j_injection": 0.19650864193681628,
  "embedding_time": 0,
  "indexing_time": 0.003214618074707687,
  "graph_injection_time": 0.19308823999017477,
  "acs_metrics": {
    "node_count": 293,
    "relationship_count": 871,
    "density": 0.0102,
    "avg_degree": 5.9454,
    "avg_unique_neighbors": 5.8976,
    "global_efficiency": 0.3313,
    "avg_path_length": 2.7688,
    "avg_degree_centrality": 0.0204,
    "max_degree_centrality": 0.4692,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0166,
    "degree_assortativity": -0.1389,
    "graph_robustness": 0.8565,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.272,
    "weakly_connected_components": 25,
    "largest_wcc_size": 269,
    "pagerank_top10_percent": 10.74,
    "louvain_communities": 36,
    "louvain_modularity": 0.431,
    "label_entropy": 1.4936,
    "computational_time": 0.22869313799310476
  },
  "retrieval_queries": []
}
2025-11-30 19:10:05,004 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:10:05,004 - src.pipeline.kg_builder - INFO - Batch 27 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.00s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.23s
2025-11-30 19:10:05,004 - src.pipeline.kg_builder - INFO - Batch 27 completed in 5.44s
Processing KG batches:  38%|███▊      | 27/72 [08:44<11:07, 14.82s/it]2025-11-30 19:10:05,005 - src.pipeline.kg_builder - INFO - Processing batch 28/72 (3 items)
2025-11-30 19:10:05,005 - src.pipeline.kg_builder - DEBUG - Batch 28 current_video_time: 06:54-06:59
2025-11-30 19:10:05,010 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 293
- Total Relationships: 254
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:10:05,010 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:10:05,011 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0 ~224 words, content: Time: 06:44-06:49 Content: The video captures a sequence of actions in a laboratory setting, focusing on the preparation of a chemical solution. The scene is...
2025-11-30 19:10:05,011 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1 ~227 words, content: the table, which appears to be a reagent vial, and hold it in their right hand. The Erlenmeyer flask, now containing the transferred liquid, remains...
2025-11-30 19:10:05,011 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_2 ~243 words, content: , working at a large black lab bench. The digital balance is prominently featured in the foreground, with its display showing a negative reading, which...
2025-11-30 19:10:05,011 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3 ~233 words, content: adding a substance to the container, possibly to achieve a specific concentration or to prepare a solution. The surrounding lab environment remains unchanged, with various...
2025-11-30 19:10:05,011 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_4 ~241 words, content: Action Sequence:** The person carefully places the glass flask onto the balance. The digital display on the balance shows a reading of -56.302 g, which...
2025-11-30 19:10:05,011 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_5 ~28 words, content: laboratory setting, emphasizing the importance of precision and safety in scientific experiments. The person's actions are deliberate and careful, highlighting the attention to detail required...
2025-11-30 19:10:05,031 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:10:05,096 - src.components.pre_llm_injector - DEBUG - Found 127 existing chunk embeddings for similarity lookup
2025-11-30 19:10:05,136 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.859'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1', '0.842')]
2025-11-30 19:10:05,138 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1
2025-11-30 19:10:05,139 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1)
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1)
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.732'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_2', '0.728')]
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_4', '0.768'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.752')]
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_2', '0.617'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.581')]
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.859'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1', '0.842')]
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0', '0.824'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.596')]
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3', '0.748'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3', '0.735')]
2025-11-30 19:10:05,153 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:10:05,154 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:10:06,577 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:10:06,578 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:10:06,578 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:10:07,812 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:10:07,813 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:10:07,813 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_2) (~243 words) with timeout=5.0s retries=3
2025-11-30 19:10:08,857 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:10:08,857 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:10:08,858 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:10:10,436 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:10:10,436 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:10:10,437 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_4) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:10:11,652 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:10:11,652 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:10:11,652 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_5) (~28 words) with timeout=5.0s retries=3
2025-11-30 19:10:12,628 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:10:12,628 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:10:12,628 - src.components.pre_llm_injector - INFO - Extracted 34 local triplets from 6 chunks
2025-11-30 19:10:12,628 - src.pipeline.kg_builder - INFO - Pre-extraction: 34 triplets in 7.62s
2025-11-30 19:10:12,629 - src.components.global_refiner - INFO - Capping refinement input: 34 → 15 triplets
2025-11-30 19:10:12,629 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric Flask / ID: 14_1)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["27_0", "27_3"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Erlenmeyer_Flask", "source_chunks": ["27_0"]}, {"head": "Person", "relation": "Uses", "tail": "Glass_Pipette", "source_chunks": ["27_0"]}, {"head": "Glass_Pipette", "relation": "Transfers", "tail": "Clear_Liquid", "source_chunks": ["27_0"]}, {"head": "Person", "relation": "Places", "tail": "Glass_Pipette", "source_chunks": ["27_0"]}, {"head": "Person", "relation": "Picks Up", "tail": "Small_Vial", "source_chunks": ["27_0"]}, {"head": "Person", "relation": "Holds", "tail": "Reagent Vial", "source_chunks": ["27_1"]}, {"head": "Person", "relation": "Holds", "tail": "Erlenmeyer Flask", "source_chunks": ["27_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["27_1", "27_2"]}, {"head": "Reagent Vial", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["27_1"]}, {"head": "Erlenmeyer Flask", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["27_1"]}, {"head": "Person", "relation": "Transfers", "tail": "Clear Liquid", "source_chunks": ["27_1"]}, {"head": "Person", "relation": "Handles", "tail": "Glass Container", "source_chunks": ["27_2"]}, {"head": "Glass Container", "relation": "Is Placed On", "tail": "Digital Balance", "source_chunks": ["27_2"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "Negative Reading", "source_chunks": ["27_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:10:12,629 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1901 words, ~2471 tokens)
2025-11-30 19:10:12,629 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:10:12,652 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 6646 input tokens (2000 > 8192 - 6646). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:10:12,653 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:10:12,653 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:10:12,653 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:10:12,653 - src.pipeline.kg_builder - INFO - Pushing batch 28/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:10:12,653 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:10:12,822 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=303, relationships=266
2025-11-30 19:10:12,822 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:10:12,828 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=303, relationships=266
2025-11-30 19:10:12,829 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:10:12,829 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:10:12,829 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:10:12,829 - src.components.neo4j_handler - INFO - Batch injected in 0.18s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:10:12,830 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 133, 'with_embedding': 133, 'linked_chunks': 107}
2025-11-30 19:10:12,830 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:10:12,879 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 303 nodes
2025-11-30 19:10:12,973 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 277 nodes
2025-11-30 19:10:13,085 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 303, 'relationship_count': 899, 'density': 0.0098, 'avg_degree': 5.934, 'avg_unique_neighbors': 5.8878, 'global_efficiency': 0.3314, 'avg_path_length': 2.7402, 'avg_degree_centrality': 0.0196, 'max_degree_centrality': 0.4868, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0247, 'degree_assortativity': -0.1591, 'graph_robustness': 0.8621, 'diameter_estimate': 5, 'clustering_coefficient': 0.2722, 'weakly_connected_components': 27, 'largest_wcc_size': 277, 'pagerank_top10_percent': 10.28, 'louvain_communities': 38, 'louvain_modularity': 0.4214, 'label_entropy': 1.4946, 'computational_time': 0.2548116249963641}
2025-11-30 19:10:13,085 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 27, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501013.085933, 'total_time': 8.080901423934847, 'aggregation': 3.4240074455738068e-06, 'network_info': 0.005333149922080338, 'llm_extraction': 7.642588361981325, 'data_cleaning': 1.6446923837065697e-05, 'neo4j_injection': 0.1765668709995225, 'embedding_time': 0, 'indexing_time': 0.0015738370129838586, 'graph_injection_time': 0.17478845303412527, 'acs_metrics': {'node_count': 303, 'relationship_count': 899, 'density': 0.0098, 'avg_degree': 5.934, 'avg_unique_neighbors': 5.8878, 'global_efficiency': 0.3314, 'avg_path_length': 2.7402, 'avg_degree_centrality': 0.0196, 'max_degree_centrality': 0.4868, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0247, 'degree_assortativity': -0.1591, 'graph_robustness': 0.8621, 'diameter_estimate': 5, 'clustering_coefficient': 0.2722, 'weakly_connected_components': 27, 'largest_wcc_size': 277, 'pagerank_top10_percent': 10.28, 'louvain_communities': 38, 'louvain_modularity': 0.4214, 'label_entropy': 1.4946, 'computational_time': 0.2548116249963641}, 'retrieval_queries': []}
2025-11-30 19:10:13,086 - src.pipeline.kg_builder - DEBUG - Batch 27 metrics: {
  "batch_idx": 27,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501013.085933,
  "total_time": 8.080901423934847,
  "aggregation": 3.4240074455738068e-06,
  "network_info": 0.005333149922080338,
  "llm_extraction": 7.642588361981325,
  "data_cleaning": 1.6446923837065697e-05,
  "neo4j_injection": 0.1765668709995225,
  "embedding_time": 0,
  "indexing_time": 0.0015738370129838586,
  "graph_injection_time": 0.17478845303412527,
  "acs_metrics": {
    "node_count": 303,
    "relationship_count": 899,
    "density": 0.0098,
    "avg_degree": 5.934,
    "avg_unique_neighbors": 5.8878,
    "global_efficiency": 0.3314,
    "avg_path_length": 2.7402,
    "avg_degree_centrality": 0.0196,
    "max_degree_centrality": 0.4868,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0247,
    "degree_assortativity": -0.1591,
    "graph_robustness": 0.8621,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2722,
    "weakly_connected_components": 27,
    "largest_wcc_size": 277,
    "pagerank_top10_percent": 10.28,
    "louvain_communities": 38,
    "louvain_modularity": 0.4214,
    "label_entropy": 1.4946,
    "computational_time": 0.2548116249963641
  },
  "retrieval_queries": []
}
2025-11-30 19:10:13,086 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:10:13,086 - src.pipeline.kg_builder - INFO - Batch 28 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.64s, Clean: 0.00s, Neo4j: 0.18s, ACS: 0.26s
2025-11-30 19:10:13,086 - src.pipeline.kg_builder - INFO - Batch 28 completed in 8.08s
Processing KG batches:  39%|███▉      | 28/72 [08:52<09:23, 12.80s/it]2025-11-30 19:10:13,086 - src.pipeline.kg_builder - INFO - Processing batch 29/72 (3 items)
2025-11-30 19:10:13,086 - src.pipeline.kg_builder - DEBUG - Batch 29 current_video_time: 07:08-07:13
2025-11-30 19:10:13,093 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 303
- Total Relationships: 266
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:10:13,094 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:10:13,094 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_0 ~226 words, content: Time: 06:59-07:03 Content: The sequence of frames captures a person in a laboratory setting performing a precise task, likely related to preparing a chemical solution....
2025-11-30 19:10:13,094 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_1 ~225 words, content: the Seal (Frame 4):** The person continues to hold the flask, now with the stopper fully in place. They are likely in the process of...
2025-11-30 19:10:13,094 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_2 ~226 words, content: the person holding a glass volumetric flask, which is a piece of laboratory glassware used to prepare a solution of precise concentration. The flask is...
2025-11-30 19:10:13,094 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_3 ~227 words, content: . In summary, the video shows a person in a lab, wearing protective gloves, preparing a solution by carefully adding a liquid to a volumetric...
2025-11-30 19:10:13,094 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_4 ~102 words, content: to adjust or secure the stopper. The camera angle shifts slightly, providing a clearer view of the person in the background, who remains focused on...
2025-11-30 19:10:13,114 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:10:13,177 - src.components.pre_llm_injector - DEBUG - Found 133 existing chunk embeddings for similarity lookup
2025-11-30 19:10:13,213 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.801')]
2025-11-30 19:10:13,215 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3
2025-11-30 19:10:13,215 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2
2025-11-30 19:10:13,220 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2)
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1)
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.725'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.718')]
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1', '0.612'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.602')]
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.727'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.705')]
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_0', '0.795')]
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.801'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.773')]
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:10:13,226 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_0) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:10:14,640 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:10:14,640 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:10:14,641 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_1) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:10:15,581 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:10:15,581 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:10:15,582 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_2) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:10:16,819 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:10:16,820 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:10:16,820 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_3) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:10:17,815 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:10:17,815 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:10:17,815 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_4) (~102 words) with timeout=5.0s retries=3
2025-11-30 19:10:18,980 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:10:18,980 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:10:18,980 - src.components.pre_llm_injector - INFO - Extracted 27 local triplets from 5 chunks
2025-11-30 19:10:18,980 - src.pipeline.kg_builder - INFO - Pre-extraction: 27 triplets in 5.89s
2025-11-30 19:10:18,980 - src.components.global_refiner - INFO - Capping refinement input: 27 → 15 triplets
2025-11-30 19:10:18,981 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric Flask / ID: 14_1)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric Flask / ID: 14_1), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Volumetric Flask / ID: 14_1), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["28_0"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["28_0"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["28_0"]}, {"head": "Person", "relation": "Performs", "tail": "Sealing_Flask", "source_chunks": ["28_0"]}, {"head": "Person", "relation": "Checks", "tail": "Liquid_Level", "source_chunks": ["28_0"]}, {"head": "Person", "relation": "Holds", "tail": "Flask_Steadily", "source_chunks": ["28_0"]}, {"head": "Person", "relation": "Holds", "tail": "Flask", "source_chunks": ["28_1"]}, {"head": "Flask", "relation": "Contains", "tail": "Liquid", "source_chunks": ["28_1"]}, {"head": "Person", "relation": "Inverts", "tail": "Flask", "source_chunks": ["28_1"]}, {"head": "Flask", "relation": "Has", "tail": "Stopper", "source_chunks": ["28_1"]}, {"head": "Person", "relation": "Wears", "tail": "Gloves", "source_chunks": ["28_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Flask", "source_chunks": ["28_1"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric Flask", "source_chunks": ["28_2", "28_3", "28_4"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["28_2"]}, {"head": "Volumetric Flask", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["28_2", "28_4"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:10:18,981 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1401 words, ~1821 tokens)
2025-11-30 19:10:18,981 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:10:32,544 - src.components.global_refiner - DEBUG - LLM call completed in 13.56s
2025-11-30 19:10:32,544 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['28_0']], ['Person', 'Holds', 'Volumetric_Flask', ['28_0']], ['Volumetric_Flask', 'Contains', 'Clear_Liquid', ['28_0']], ['Person', 'Performs', 'Sealing_Flask', ['28_0']], ['Person', 'Checks', 'Liquid_Level', ['28_0']], ['Person', 'Holds', 'Flask_Steadily', ['28_0']], ['Person', 'Holds', 'Flask', ['28_1']], ['Flask', 'Contains', 'Liquid', ['28_1']], ['Flask', 'Has', 'Stopper', ['28_1']], ['Person', 'Wears', 'Gloves', ['28_1']], ['Laboratory', 'Contains', 'Flask', ['28_1']], ['Person', 'Holds', 'Volumetric Flask', ['28_2', '28_3', '28_4']], ['Person', 'Uses', 'Pipette', ['28_2']], ['Volumetric Flask', 'Contains', 'Clear Liquid', ['28_2', '28_4']]] inter_chunk_relations=[['Person', 'Holds', 'Beaker', ['28_0']], ['Person', 'Holds', 'Beaker', ['28_1']], ['Person', 'Holds', 'Beaker', ['28_2']], ['Person', 'Holds', 'Beaker', ['28_3']], ['Person', 'Holds', 'Beaker', ['28_4']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_1'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_2'}] prune_instructions=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}]
2025-11-30 19:10:32,544 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=14, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['28_0']], ['Person', 'Holds', 'Volumetric_Flask', ['28_0']], ['Volumetric_Flask', 'Contains', 'Clear_Liquid', ['28_0']]]
2025-11-30 19:10:32,544 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Person', 'Holds', 'Beaker', ['28_0']], ['Person', 'Holds', 'Beaker', ['28_1']], ['Person', 'Holds', 'Beaker', ['28_2']]]
2025-11-30 19:10:32,544 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_1'}]
2025-11-30 19:10:32,544 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}]
2025-11-30 19:10:32,544 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_1'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_2'}]
2025-11-30 19:10:32,544 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Beaker'}]
2025-11-30 19:10:32,544 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 19 triplets (total: 13.56s, LLM: 13.56s)
2025-11-30 19:10:32,545 - src.pipeline.kg_builder - INFO - Global refinement: 19 triplets in 13.56s
2025-11-30 19:10:32,545 - src.pipeline.kg_builder - INFO - Using 19 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:10:32,545 - src.pipeline.kg_builder - INFO - Pushing batch 29/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:10:32,545 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:10:32,710 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=313, relationships=275
2025-11-30 19:10:32,710 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:10:32,710 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:10:32,711 - src.components.neo4j_handler - DEBUG - APOC merge successful: Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:10:32,717 - src.components.neo4j_handler - DEBUG - APOC merge successful: Volumetric Flask -> Volumetric_Flask
2025-11-30 19:10:32,721 - src.components.neo4j_handler - DEBUG - APOC merge successful: Volumetric Flask -> Volumetric_Flask
2025-11-30 19:10:32,721 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:10:32,723 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Beaker
2025-11-30 19:10:32,724 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Beaker
2025-11-30 19:10:32,724 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Beaker
2025-11-30 19:10:32,725 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Beaker
2025-11-30 19:10:32,725 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:10:32,726 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:10:32,727 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:10:32,728 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:10:32,730 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:10:32,731 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Beaker
2025-11-30 19:10:32,732 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:10:32,736 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=311, relationships=275
2025-11-30 19:10:32,738 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:10:32,738 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:10:32,738 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:10:32,738 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:10:32,739 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 138, 'with_embedding': 138, 'linked_chunks': 112}
2025-11-30 19:10:32,739 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:10:32,776 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 311 nodes
2025-11-30 19:10:32,873 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 285 nodes
2025-11-30 19:10:32,991 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 311, 'relationship_count': 925, 'density': 0.0096, 'avg_degree': 5.9486, 'avg_unique_neighbors': 5.91, 'global_efficiency': 0.3345, 'avg_path_length': 2.7251, 'avg_degree_centrality': 0.0192, 'max_degree_centrality': 0.5, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0362, 'degree_assortativity': -0.1669, 'graph_robustness': 0.8314, 'diameter_estimate': 5, 'clustering_coefficient': 0.2764, 'weakly_connected_components': 27, 'largest_wcc_size': 285, 'pagerank_top10_percent': 10.03, 'louvain_communities': 38, 'louvain_modularity': 0.4174, 'label_entropy': 1.4954, 'computational_time': 0.25206151499878615}
2025-11-30 19:10:32,992 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 28, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501032.9920645, 'total_time': 19.905228051007725, 'aggregation': 3.571971319615841e-06, 'network_info': 0.006757530034519732, 'llm_extraction': 19.451325205969624, 'data_cleaning': 3.2297917641699314e-05, 'neo4j_injection': 0.19367906695697457, 'embedding_time': 0, 'indexing_time': 0.0021682679653167725, 'graph_injection_time': 0.19118200102820992, 'acs_metrics': {'node_count': 311, 'relationship_count': 925, 'density': 0.0096, 'avg_degree': 5.9486, 'avg_unique_neighbors': 5.91, 'global_efficiency': 0.3345, 'avg_path_length': 2.7251, 'avg_degree_centrality': 0.0192, 'max_degree_centrality': 0.5, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0362, 'degree_assortativity': -0.1669, 'graph_robustness': 0.8314, 'diameter_estimate': 5, 'clustering_coefficient': 0.2764, 'weakly_connected_components': 27, 'largest_wcc_size': 285, 'pagerank_top10_percent': 10.03, 'louvain_communities': 38, 'louvain_modularity': 0.4174, 'label_entropy': 1.4954, 'computational_time': 0.25206151499878615}, 'retrieval_queries': []}
2025-11-30 19:10:32,992 - src.pipeline.kg_builder - DEBUG - Batch 28 metrics: {
  "batch_idx": 28,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501032.9920645,
  "total_time": 19.905228051007725,
  "aggregation": 3.571971319615841e-06,
  "network_info": 0.006757530034519732,
  "llm_extraction": 19.451325205969624,
  "data_cleaning": 3.2297917641699314e-05,
  "neo4j_injection": 0.19367906695697457,
  "embedding_time": 0,
  "indexing_time": 0.0021682679653167725,
  "graph_injection_time": 0.19118200102820992,
  "acs_metrics": {
    "node_count": 311,
    "relationship_count": 925,
    "density": 0.0096,
    "avg_degree": 5.9486,
    "avg_unique_neighbors": 5.91,
    "global_efficiency": 0.3345,
    "avg_path_length": 2.7251,
    "avg_degree_centrality": 0.0192,
    "max_degree_centrality": 0.5,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0362,
    "degree_assortativity": -0.1669,
    "graph_robustness": 0.8314,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2764,
    "weakly_connected_components": 27,
    "largest_wcc_size": 285,
    "pagerank_top10_percent": 10.03,
    "louvain_communities": 38,
    "louvain_modularity": 0.4174,
    "label_entropy": 1.4954,
    "computational_time": 0.25206151499878615
  },
  "retrieval_queries": []
}
2025-11-30 19:10:32,992 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:10:32,992 - src.pipeline.kg_builder - INFO - Batch 29 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 19.45s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.25s
2025-11-30 19:10:32,992 - src.pipeline.kg_builder - INFO - Batch 29 completed in 19.91s
Processing KG batches:  40%|████      | 29/72 [09:12<10:42, 14.93s/it]2025-11-30 19:10:32,992 - src.pipeline.kg_builder - INFO - Processing batch 30/72 (3 items)
2025-11-30 19:10:32,992 - src.pipeline.kg_builder - DEBUG - Batch 30 current_video_time: 07:23-07:28
2025-11-30 19:10:32,999 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 311
- Total Relationships: 275
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:10:33,000 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:10:33,000 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0 ~241 words, content: Time: 07:13-07:18 Content: The video captures a scene in a laboratory setting, likely a chemistry or research lab, where a scientific procedure is being performed....
2025-11-30 19:10:33,000 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_1 ~225 words, content: precision, which is essential in scientific research. The video likely aims to document a specific scientific procedure, emphasizing the importance of careful handling and observation...
2025-11-30 19:10:33,000 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_2 ~210 words, content: final frame shows the person's arm and a gold watch, confirming the first-person viewpoint. The overall atmosphere suggests a teaching or research demonstration. Time: 07:23-07:28...
2025-11-30 19:10:33,020 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:10:33,080 - src.components.pre_llm_injector - DEBUG - Found 138 existing chunk embeddings for similarity lookup
2025-11-30 19:10:33,103 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.835'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_3', '0.833')]
2025-11-30 19:10:33,105 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:10:33,105 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_3 via source_chunk_ids
2025-11-30 19:10:33,112 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)
2025-11-30 19:10:33,112 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_3', '0.833'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_3', '0.812')]
2025-11-30 19:10:33,112 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.771'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.763')]
2025-11-30 19:10:33,112 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.835'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.795')]
2025-11-30 19:10:33,112 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:10:33,112 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:10:34,428 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:10:34,428 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:10:34,428 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_1) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:10:35,907 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:10:35,908 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:10:35,908 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_2) (~210 words) with timeout=5.0s retries=3
2025-11-30 19:10:36,956 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:10:36,957 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:10:36,957 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:10:36,957 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 3.96s
2025-11-30 19:10:36,957 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:10:36,957 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["29_0", "29_1"]}, {"head": "Person", "relation": "Handles", "tail": "Volumetric_Flask", "source_chunks": ["29_0"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["29_0"]}, {"head": "Person", "relation": "Adds", "tail": "Substance", "source_chunks": ["29_0"]}, {"head": "Person", "relation": "Observes", "tail": "Experiment", "source_chunks": ["29_0"]}, {"head": "Lab", "relation": "Contains", "tail": "Fire_Extinguisher", "source_chunks": ["29_0"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["29_1"]}, {"head": "Person", "relation": "Manipulates", "tail": "Volumetric_Flask", "source_chunks": ["29_1"]}, {"head": "Man", "relation": "Observes", "tail": "Person", "source_chunks": ["29_1"]}, {"head": "Man", "relation": "Wears", "tail": "Cream_Colored_Turtleneck_Sweater", "source_chunks": ["29_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Fire_Extinguisher", "source_chunks": ["29_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["29_2"]}, {"head": "Person", "relation": "Performs", "tail": "Titration", "source_chunks": ["29_2"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["29_2"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric Flask", "source_chunks": ["29_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:10:36,958 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~946 words, ~1230 tokens)
2025-11-30 19:10:36,958 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:10:51,012 - src.components.global_refiner - DEBUG - LLM call completed in 14.05s
2025-11-30 19:10:51,013 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['29_0']], ['Person', 'Handles', 'Volumetric_Flask', ['29_0']], ['Volumetric_Flask', 'Contains', 'Clear_Liquid', ['29_0']], ['Person', 'Adds', 'Substance', ['29_0']], ['Person', 'Observes', 'Experiment', ['29_0']], ['Lab', 'Contains', 'Fire_Extinguisher', ['29_0']], ['Person', 'Holds', 'Volumetric_Flask', ['29_1']], ['Person', 'Manipulates', 'Volumetric_Flask', ['29_1']], ['Man', 'Observes', 'Person', ['29_1']], ['Man', 'Wears', 'Cream_Colored_Turtleneck_Sweater', ['29_1']], ['Laboratory', 'Contains', 'Fire_Extinguisher', ['29_1']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['29_2']], ['Person', 'Performs', 'Titration', ['29_2']], ['Person', 'Holds', 'Pipette', ['29_2']], ['Person', 'Holds', 'Volumetric Flask', ['29_2']]] inter_chunk_relations=[['Lab', 'Contains', 'Laboratory Table', ['29_0']], ['Laboratory', 'Contains', 'Laboratory Table', ['29_1']], ['Person', 'Holds', 'Laboratory Table', ['29_0']], ['Person', 'Holds', 'Laboratory Table', ['29_1']], ['Person', 'Holds', 'Laboratory Table', ['29_2']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_2'}, {'local': 'Pipette', 'existing': 'Pipette', 'existing_id': '4_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '26_1'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:10:51,013 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['29_0']], ['Person', 'Handles', 'Volumetric_Flask', ['29_0']], ['Volumetric_Flask', 'Contains', 'Clear_Liquid', ['29_0']]]
2025-11-30 19:10:51,013 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Lab', 'Contains', 'Laboratory Table', ['29_0']], ['Laboratory', 'Contains', 'Laboratory Table', ['29_1']], ['Person', 'Holds', 'Laboratory Table', ['29_0']]]
2025-11-30 19:10:51,013 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_2'}, {'local': 'Pipette', 'existing': 'Pipette', 'existing_id': '4_0'}]
2025-11-30 19:10:51,013 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:10:51,013 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Volumetric Flask', 'existing': 'Volumetric_Flask', 'existing_id': '14_2'}, {'local': 'Pipette', 'existing': 'Pipette', 'existing_id': '4_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '26_1'}]
2025-11-30 19:10:51,013 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:10:51,013 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 14.06s, LLM: 14.05s)
2025-11-30 19:10:51,013 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 14.06s
2025-11-30 19:10:51,013 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:10:51,013 - src.pipeline.kg_builder - INFO - Pushing batch 30/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:10:51,014 - src.components.neo4j_handler - INFO - Adding 18 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:10:51,177 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=320, relationships=286
2025-11-30 19:10:51,177 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:10:51,178 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:10:51,182 - src.components.neo4j_handler - DEBUG - APOC merge successful: Volumetric Flask -> Volumetric_Flask
2025-11-30 19:10:51,183 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Pipette -> Pipette
2025-11-30 19:10:51,183 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:10:51,183 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:10:51,188 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:10:51,188 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:10:51,189 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:10:51,189 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:10:51,189 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:10:51,190 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab -[Contains]-> Laboratory Table
2025-11-30 19:10:51,191 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory -[Contains]-> Laboratory Table
2025-11-30 19:10:51,196 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:10:51,197 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:10:51,200 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:10:51,201 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:10:51,205 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=318, relationships=283
2025-11-30 19:10:51,208 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:10:51,208 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:10:51,208 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:10:51,208 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:10:51,210 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 141, 'with_embedding': 141, 'linked_chunks': 115}
2025-11-30 19:10:51,210 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:10:51,247 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 318 nodes
2025-11-30 19:10:51,350 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 292 nodes
2025-11-30 19:10:51,471 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 318, 'relationship_count': 952, 'density': 0.0094, 'avg_degree': 5.9874, 'avg_unique_neighbors': 5.9497, 'global_efficiency': 0.3366, 'avg_path_length': 2.716, 'avg_degree_centrality': 0.0189, 'max_degree_centrality': 0.5047, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0416, 'degree_assortativity': -0.1656, 'graph_robustness': 0.8477, 'diameter_estimate': 5, 'clustering_coefficient': 0.2673, 'weakly_connected_components': 27, 'largest_wcc_size': 292, 'pagerank_top10_percent': 9.8, 'louvain_communities': 38, 'louvain_modularity': 0.4206, 'label_entropy': 1.4954, 'computational_time': 0.2609543399885297}
2025-11-30 19:10:51,471 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 29, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501051.4713516, 'total_time': 18.47839127201587, 'aggregation': 2.2529857233166695e-06, 'network_info': 0.006652495940215886, 'llm_extraction': 18.01389930397272, 'data_cleaning': 3.740901593118906e-05, 'neo4j_injection': 0.19490507303271443, 'embedding_time': 0, 'indexing_time': 0.002815628075040877, 'graph_injection_time': 0.19173860095907003, 'acs_metrics': {'node_count': 318, 'relationship_count': 952, 'density': 0.0094, 'avg_degree': 5.9874, 'avg_unique_neighbors': 5.9497, 'global_efficiency': 0.3366, 'avg_path_length': 2.716, 'avg_degree_centrality': 0.0189, 'max_degree_centrality': 0.5047, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0416, 'degree_assortativity': -0.1656, 'graph_robustness': 0.8477, 'diameter_estimate': 5, 'clustering_coefficient': 0.2673, 'weakly_connected_components': 27, 'largest_wcc_size': 292, 'pagerank_top10_percent': 9.8, 'louvain_communities': 38, 'louvain_modularity': 0.4206, 'label_entropy': 1.4954, 'computational_time': 0.2609543399885297}, 'retrieval_queries': []}
2025-11-30 19:10:51,471 - src.pipeline.kg_builder - DEBUG - Batch 29 metrics: {
  "batch_idx": 29,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501051.4713516,
  "total_time": 18.47839127201587,
  "aggregation": 2.2529857233166695e-06,
  "network_info": 0.006652495940215886,
  "llm_extraction": 18.01389930397272,
  "data_cleaning": 3.740901593118906e-05,
  "neo4j_injection": 0.19490507303271443,
  "embedding_time": 0,
  "indexing_time": 0.002815628075040877,
  "graph_injection_time": 0.19173860095907003,
  "acs_metrics": {
    "node_count": 318,
    "relationship_count": 952,
    "density": 0.0094,
    "avg_degree": 5.9874,
    "avg_unique_neighbors": 5.9497,
    "global_efficiency": 0.3366,
    "avg_path_length": 2.716,
    "avg_degree_centrality": 0.0189,
    "max_degree_centrality": 0.5047,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0416,
    "degree_assortativity": -0.1656,
    "graph_robustness": 0.8477,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2673,
    "weakly_connected_components": 27,
    "largest_wcc_size": 292,
    "pagerank_top10_percent": 9.8,
    "louvain_communities": 38,
    "louvain_modularity": 0.4206,
    "label_entropy": 1.4954,
    "computational_time": 0.2609543399885297
  },
  "retrieval_queries": []
}
2025-11-30 19:10:51,472 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:10:51,472 - src.pipeline.kg_builder - INFO - Batch 30 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 18.01s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.26s
2025-11-30 19:10:51,472 - src.pipeline.kg_builder - INFO - Batch 30 completed in 18.48s
Processing KG batches:  42%|████▏     | 30/72 [09:30<11:11, 16.00s/it]2025-11-30 19:10:51,472 - src.pipeline.kg_builder - INFO - Processing batch 31/72 (3 items)
2025-11-30 19:10:51,472 - src.pipeline.kg_builder - DEBUG - Batch 31 current_video_time: 07:38-07:43
2025-11-30 19:10:51,478 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 318
- Total Relationships: 283
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:10:51,478 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:10:51,479 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_0 ~233 words, content: Time: 07:28-07:33 Content: The video captures a scene in a laboratory where a person is performing a precise liquid measurement. The sequence of frames shows...
2025-11-30 19:10:51,479 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_1 ~229 words, content: the frame, observing the procedure. The overall context suggests that the person is preparing a solution of a specific concentration, a common task in chemistry...
2025-11-30 19:10:51,479 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_2 ~225 words, content: and the person is seen adjusting the settings on the device. This suggests that the next step in the experiment involves mixing the contents of...
2025-11-30 19:10:51,479 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_3 ~227 words, content: rile glove is holding a round-bottom flask, which is a type of laboratory glassware. The flask contains a clear liquid and is connected to a...
2025-11-30 19:10:51,479 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_4 ~53 words, content: person is now holding a different piece of glassware, possibly a pipette or a burette, and is preparing to use it. The scene suggests that...
2025-11-30 19:10:51,499 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:10:51,564 - src.components.pre_llm_injector - DEBUG - Found 141 existing chunk embeddings for similarity lookup
2025-11-30 19:10:51,603 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0', '0.792'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3', '0.784')]
2025-11-30 19:10:51,605 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3
2025-11-30 19:10:51,605 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0
2025-11-30 19:10:51,620 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2)
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0: Subgraph: (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (White Pen / ID: 1_3)-[WRITES_ON]->(Experiment Report / ID: 1_3), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Balance_Scale / ID: 4_0)-[IS_INSIDE]->(Glass_Draft_Shield / ID: 7_0), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (White_Powder / ID: 8_0)-[IS_TRANSFERRED_TO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2)
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0', '0.792'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_4', '0.780')]
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_1', '0.762'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.748')]
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.763'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_4', '0.755')]
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3', '0.784'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0', '0.664')]
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3', '0.765'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3', '0.754')]
2025-11-30 19:10:51,622 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:10:51,623 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_0) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:10:53,041 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:10:53,041 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:10:53,041 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:10:54,543 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:10:54,543 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:10:54,544 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_2) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:10:55,788 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:10:55,788 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:10:55,788 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_3) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:10:57,318 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:10:57,318 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:10:57,318 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_4) (~53 words) with timeout=5.0s retries=3
2025-11-30 19:10:58,373 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:10:58,373 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:10:58,373 - src.components.pre_llm_injector - INFO - Extracted 28 local triplets from 5 chunks
2025-11-30 19:10:58,373 - src.pipeline.kg_builder - INFO - Pre-extraction: 28 triplets in 6.90s
2025-11-30 19:10:58,373 - src.components.global_refiner - INFO - Capping refinement input: 28 → 15 triplets
2025-11-30 19:10:58,373 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_0: Subgraph: (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (White Pen / ID: 1_3)-[WRITES_ON]->(Experiment Report / ID: 1_3), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Balance_Scale / ID: 4_0)-[IS_INSIDE]->(Glass_Draft_Shield / ID: 7_0), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (White_Powder / ID: 8_0)-[IS_TRANSFERRED_TO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["30_0", "30_1"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["30_0"]}, {"head": "Person", "relation": "Performs", "tail": "Liquid_Measurement", "source_chunks": ["30_0"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["30_0"]}, {"head": "Person", "relation": "Checks", "tail": "Meniscus", "source_chunks": ["30_0"]}, {"head": "Person", "relation": "Looks At", "tail": "Meniscus", "source_chunks": ["30_0"]}, {"head": "Person", "relation": "Holds", "tail": "Round_Bottom_Flask", "source_chunks": ["30_1", "30_2"]}, {"head": "Round_Bottom_Flask", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["30_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["30_1"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["30_1"]}, {"head": "Round_Bottom_Flask", "relation": "Is Placed On", "tail": "Magnetic_Stirrer", "source_chunks": ["30_1"]}, {"head": "Person", "relation": "Wears", "tail": "Lab Coat", "source_chunks": ["30_2"]}, {"head": "Person", "relation": "Wears", "tail": "Gloves", "source_chunks": ["30_2"]}, {"head": "Round_Bottom_Flask", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["30_2"]}, {"head": "Person", "relation": "Adjusts", "tail": "Device", "source_chunks": ["30_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:10:58,374 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2010 words, ~2613 tokens)
2025-11-30 19:10:58,374 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:10:58,395 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 7154 input tokens (2000 > 8192 - 7154). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:10:58,395 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:10:58,395 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:10:58,395 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:10:58,396 - src.pipeline.kg_builder - INFO - Pushing batch 31/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:10:58,396 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:10:58,594 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=329, relationships=294
2025-11-30 19:10:58,595 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:10:58,601 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=329, relationships=294
2025-11-30 19:10:58,603 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:10:58,603 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:10:58,603 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:10:58,603 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:10:58,604 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 146, 'with_embedding': 146, 'linked_chunks': 118}
2025-11-30 19:10:58,604 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:10:58,660 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 329 nodes
2025-11-30 19:10:58,771 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 301 nodes
2025-11-30 19:10:58,900 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 329, 'relationship_count': 980, 'density': 0.0091, 'avg_degree': 5.9574, 'avg_unique_neighbors': 5.921, 'global_efficiency': 0.3361, 'avg_path_length': 2.6972, 'avg_degree_centrality': 0.0182, 'max_degree_centrality': 0.5183, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0336, 'degree_assortativity': -0.184, 'graph_robustness': 0.849, 'diameter_estimate': 5, 'clustering_coefficient': 0.2769, 'weakly_connected_components': 29, 'largest_wcc_size': 301, 'pagerank_top10_percent': 9.48, 'louvain_communities': 39, 'louvain_modularity': 0.4262, 'label_entropy': 1.4954, 'computational_time': 0.29551485797856003}
2025-11-30 19:10:58,900 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 30, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501058.9006288, 'total_time': 7.4280405739555135, 'aggregation': 3.849971108138561e-06, 'network_info': 0.005812868010252714, 'llm_extraction': 6.917409093002789, 'data_cleaning': 1.491699367761612e-05, 'neo4j_injection': 0.20760148391127586, 'embedding_time': 0, 'indexing_time': 0.0022735600359737873, 'graph_injection_time': 0.20513908402062953, 'acs_metrics': {'node_count': 329, 'relationship_count': 980, 'density': 0.0091, 'avg_degree': 5.9574, 'avg_unique_neighbors': 5.921, 'global_efficiency': 0.3361, 'avg_path_length': 2.6972, 'avg_degree_centrality': 0.0182, 'max_degree_centrality': 0.5183, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0336, 'degree_assortativity': -0.184, 'graph_robustness': 0.849, 'diameter_estimate': 5, 'clustering_coefficient': 0.2769, 'weakly_connected_components': 29, 'largest_wcc_size': 301, 'pagerank_top10_percent': 9.48, 'louvain_communities': 39, 'louvain_modularity': 0.4262, 'label_entropy': 1.4954, 'computational_time': 0.29551485797856003}, 'retrieval_queries': []}
2025-11-30 19:10:58,900 - src.pipeline.kg_builder - DEBUG - Batch 30 metrics: {
  "batch_idx": 30,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501058.9006288,
  "total_time": 7.4280405739555135,
  "aggregation": 3.849971108138561e-06,
  "network_info": 0.005812868010252714,
  "llm_extraction": 6.917409093002789,
  "data_cleaning": 1.491699367761612e-05,
  "neo4j_injection": 0.20760148391127586,
  "embedding_time": 0,
  "indexing_time": 0.0022735600359737873,
  "graph_injection_time": 0.20513908402062953,
  "acs_metrics": {
    "node_count": 329,
    "relationship_count": 980,
    "density": 0.0091,
    "avg_degree": 5.9574,
    "avg_unique_neighbors": 5.921,
    "global_efficiency": 0.3361,
    "avg_path_length": 2.6972,
    "avg_degree_centrality": 0.0182,
    "max_degree_centrality": 0.5183,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0336,
    "degree_assortativity": -0.184,
    "graph_robustness": 0.849,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2769,
    "weakly_connected_components": 29,
    "largest_wcc_size": 301,
    "pagerank_top10_percent": 9.48,
    "louvain_communities": 39,
    "louvain_modularity": 0.4262,
    "label_entropy": 1.4954,
    "computational_time": 0.29551485797856003
  },
  "retrieval_queries": []
}
2025-11-30 19:10:58,901 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:10:58,901 - src.pipeline.kg_builder - INFO - Batch 31 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 6.92s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.30s
2025-11-30 19:10:58,901 - src.pipeline.kg_builder - INFO - Batch 31 completed in 7.43s
Processing KG batches:  43%|████▎     | 31/72 [09:38<09:10, 13.43s/it]2025-11-30 19:10:58,901 - src.pipeline.kg_builder - INFO - Processing batch 32/72 (3 items)
2025-11-30 19:10:58,901 - src.pipeline.kg_builder - DEBUG - Batch 32 current_video_time: 07:53-07:58
2025-11-30 19:10:58,907 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 329
- Total Relationships: 294
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:10:58,908 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:10:58,908 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_0 ~235 words, content: Time: 07:43-07:48 Content: The video sequence captures a series of actions within a laboratory setting, focusing on a person conducting an experiment or a procedure....
2025-11-30 19:10:58,908 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_1 ~235 words, content: involved in the experiment. The background shows a white cabinet with shelves containing various items, and a fire extinguisher is mounted on the wall, emphasizing...
2025-11-30 19:10:58,908 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_2 ~227 words, content: precision analytical balance, identified by the "METTLER TOLEDO" brand name. The process unfolds as follows: - **Initial Setup:** The person prepares a small piece of...
2025-11-30 19:10:58,908 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_3 ~226 words, content: , indicating adherence to safety protocols. The overall scene depicts a careful and methodical scientific procedure. Time: 07:53-07:58 Content: The sequence of frames captures a...
2025-11-30 19:10:58,908 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_4 ~143 words, content: .300 g`, which is a very slight change, suggesting the foil's weight is minimal. The person then opens the glass door of the balance again,...
2025-11-30 19:10:58,928 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:10:58,994 - src.components.pre_llm_injector - DEBUG - Found 146 existing chunk embeddings for similarity lookup
2025-11-30 19:10:59,034 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.786'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.782')]
2025-11-30 19:10:59,036 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6 via source_chunk_ids
2025-11-30 19:10:59,036 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2)
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.647'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.634')]
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0', '0.567'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_2', '0.557')]
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.576'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.564')]
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.620'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.613')]
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.786'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.782')]
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:10:59,045 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_0) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:11:00,353 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:11:00,353 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:11:00,353 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_1) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:11:01,731 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:11:01,731 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:11:01,731 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_2) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:11:03,003 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:11:03,003 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:11:03,003 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_3) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:11:04,414 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:11:04,415 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:11:04,415 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_4) (~143 words) with timeout=5.0s retries=3
2025-11-30 19:11:05,618 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:11:05,619 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:11:05,619 - src.components.pre_llm_injector - INFO - Extracted 30 local triplets from 5 chunks
2025-11-30 19:11:05,619 - src.pipeline.kg_builder - INFO - Pre-extraction: 30 triplets in 6.71s
2025-11-30 19:11:05,619 - src.components.global_refiner - INFO - Capping refinement input: 30 → 15 triplets
2025-11-30 19:11:05,619 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["31_0"]}, {"head": "Person", "relation": "Handles", "tail": "Small Container", "source_chunks": ["31_0"]}, {"head": "Digital Scale", "relation": "Displays", "tail": "-5630.1", "source_chunks": ["31_0"]}, {"head": "Digital Scale", "relation": "Is On", "tail": "Black Countertop", "source_chunks": ["31_0"]}, {"head": "Person", "relation": "Interacts With", "tail": "Digital Scale", "source_chunks": ["31_0"]}, {"head": "Digital Scale", "relation": "Is Near", "tail": "Bottle With Red Cap", "source_chunks": ["31_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["31_1"]}, {"head": "Person", "relation": "Uses", "tail": "Analytical Balance", "source_chunks": ["31_1"]}, {"head": "Analytical Balance", "relation": "Has Brand", "tail": "Mettler Toledo", "source_chunks": ["31_1"]}, {"head": "Lab", "relation": "Contains", "tail": "Fire Extinguisher", "source_chunks": ["31_1"]}, {"head": "Lab", "relation": "Contains", "tail": "White Cabinet", "source_chunks": ["31_1"]}, {"head": "Fire Extinguisher", "relation": "Is Mounted On", "tail": "Wall", "source_chunks": ["31_1"]}, {"head": "Person", "relation": "Places", "tail": "Aluminum Foil", "source_chunks": ["31_2"]}, {"head": "Aluminum Foil", "relation": "Is Inside", "tail": "Weighing Chamber", "source_chunks": ["31_2"]}, {"head": "Weighing Chamber", "relation": "Has Status", "tail": "Tared", "source_chunks": ["31_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:11:05,619 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1195 words, ~1554 tokens)
2025-11-30 19:11:05,619 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:11:16,065 - src.components.global_refiner - DEBUG - LLM call completed in 10.45s
2025-11-30 19:11:16,066 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue Gloves', ['31_0']], ['Person', 'Handles', 'Small Container', ['31_0']], ['Digital Scale', 'Displays', '-5630.1', ['31_0']], ['Digital Scale', 'Is On', 'Black Countertop', ['31_0']], ['Person', 'Interacts With', 'Digital Scale', ['31_0']], ['Digital Scale', 'Is Near', 'Bottle With Red Cap', ['31_0']], ['Person', 'Wears', 'Blue Glove', ['31_1']], ['Person', 'Uses', 'Analytical Balance', ['31_1']], ['Analytical Balance', 'Has Brand', 'Mettler Toledo', ['31_1']], ['Lab', 'Contains', 'Fire Extinguisher', ['31_1']], ['Lab', 'Contains', 'White Cabinet', ['31_1']], ['Fire Extinguisher', 'Is Mounted On', 'Wall', ['31_1']], ['Person', 'Places', 'Aluminum Foil', ['31_2']], ['Aluminum Foil', 'Is Inside', 'Weighing Chamber', ['31_2']], ['Weighing Chamber', 'Has Status', 'Tared', ['31_2']]] inter_chunk_relations=[['Digital Scale', 'Is On', 'Laboratory Table', ['31_0']], ['Digital Scale', 'Is Near', 'Bottle With Red Cap', ['31_0']], ['Person', 'Interacts With', 'Digital Scale', ['31_0']], ['Lab', 'Contains', 'Fire Extinguisher', ['31_1']], ['Lab', 'Contains', 'White Cabinet', ['31_1']]] merge_instructions=[{'local': 'Blue Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[]
2025-11-30 19:11:16,066 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue Gloves', ['31_0']], ['Person', 'Handles', 'Small Container', ['31_0']], ['Digital Scale', 'Displays', '-5630.1', ['31_0']]]
2025-11-30 19:11:16,066 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Digital Scale', 'Is On', 'Laboratory Table', ['31_0']], ['Digital Scale', 'Is Near', 'Bottle With Red Cap', ['31_0']], ['Person', 'Interacts With', 'Digital Scale', ['31_0']]]
2025-11-30 19:11:16,066 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:11:16,066 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:11:16,066 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:11:16,066 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 10.45s, LLM: 10.45s)
2025-11-30 19:11:16,066 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 10.45s
2025-11-30 19:11:16,066 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:11:16,066 - src.pipeline.kg_builder - INFO - Pushing batch 32/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:11:16,067 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:11:16,229 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=345, relationships=310
2025-11-30 19:11:16,229 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:11:16,229 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:11:16,234 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Glove -> Blue_Nitrile_Gloves
2025-11-30 19:11:16,234 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:11:16,238 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital Scale -[Is On]-> Laboratory Table
2025-11-30 19:11:16,265 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital Scale -[Is Near]-> Bottle With Red Cap
2025-11-30 19:11:16,293 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Interacts With]-> Digital Scale
2025-11-30 19:11:16,296 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab -[Contains]-> Fire Extinguisher
2025-11-30 19:11:16,298 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab -[Contains]-> White Cabinet
2025-11-30 19:11:16,299 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:11:16,305 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=343, relationships=310
2025-11-30 19:11:16,306 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:11:16,306 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:11:16,306 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:11:16,306 - src.components.neo4j_handler - INFO - Batch injected in 0.24s (triplets: 0.24s, indexes: 0.00s)
2025-11-30 19:11:16,307 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 151, 'with_embedding': 151, 'linked_chunks': 121}
2025-11-30 19:11:16,308 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:11:16,366 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 343 nodes
2025-11-30 19:11:16,486 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 313 nodes
2025-11-30 19:11:16,623 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 343, 'relationship_count': 1013, 'density': 0.0086, 'avg_degree': 5.9067, 'avg_unique_neighbors': 5.8717, 'global_efficiency': 0.3328, 'avg_path_length': 2.7094, 'avg_degree_centrality': 0.0173, 'max_degree_centrality': 0.5175, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0226, 'degree_assortativity': -0.1758, 'graph_robustness': 0.846, 'diameter_estimate': 5, 'clustering_coefficient': 0.2815, 'weakly_connected_components': 31, 'largest_wcc_size': 313, 'pagerank_top10_percent': 9.24, 'louvain_communities': 41, 'louvain_modularity': 0.4333, 'label_entropy': 1.4948, 'computational_time': 0.3156616580672562}
2025-11-30 19:11:16,623 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 31, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501076.623917, 'total_time': 17.722347110975534, 'aggregation': 3.093038685619831e-06, 'network_info': 0.006247989949770272, 'llm_extraction': 17.158732140087523, 'data_cleaning': 4.561501555144787e-05, 'neo4j_injection': 0.24001288006547838, 'embedding_time': 0, 'indexing_time': 0.0015010039787739515, 'graph_injection_time': 0.23816937196534127, 'acs_metrics': {'node_count': 343, 'relationship_count': 1013, 'density': 0.0086, 'avg_degree': 5.9067, 'avg_unique_neighbors': 5.8717, 'global_efficiency': 0.3328, 'avg_path_length': 2.7094, 'avg_degree_centrality': 0.0173, 'max_degree_centrality': 0.5175, 'avg_betweenness_centrality': 0.0003, 'max_betweenness_centrality': 0.0226, 'degree_assortativity': -0.1758, 'graph_robustness': 0.846, 'diameter_estimate': 5, 'clustering_coefficient': 0.2815, 'weakly_connected_components': 31, 'largest_wcc_size': 313, 'pagerank_top10_percent': 9.24, 'louvain_communities': 41, 'louvain_modularity': 0.4333, 'label_entropy': 1.4948, 'computational_time': 0.3156616580672562}, 'retrieval_queries': []}
2025-11-30 19:11:16,624 - src.pipeline.kg_builder - DEBUG - Batch 31 metrics: {
  "batch_idx": 31,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501076.623917,
  "total_time": 17.722347110975534,
  "aggregation": 3.093038685619831e-06,
  "network_info": 0.006247989949770272,
  "llm_extraction": 17.158732140087523,
  "data_cleaning": 4.561501555144787e-05,
  "neo4j_injection": 0.24001288006547838,
  "embedding_time": 0,
  "indexing_time": 0.0015010039787739515,
  "graph_injection_time": 0.23816937196534127,
  "acs_metrics": {
    "node_count": 343,
    "relationship_count": 1013,
    "density": 0.0086,
    "avg_degree": 5.9067,
    "avg_unique_neighbors": 5.8717,
    "global_efficiency": 0.3328,
    "avg_path_length": 2.7094,
    "avg_degree_centrality": 0.0173,
    "max_degree_centrality": 0.5175,
    "avg_betweenness_centrality": 0.0003,
    "max_betweenness_centrality": 0.0226,
    "degree_assortativity": -0.1758,
    "graph_robustness": 0.846,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2815,
    "weakly_connected_components": 31,
    "largest_wcc_size": 313,
    "pagerank_top10_percent": 9.24,
    "louvain_communities": 41,
    "louvain_modularity": 0.4333,
    "label_entropy": 1.4948,
    "computational_time": 0.3156616580672562
  },
  "retrieval_queries": []
}
2025-11-30 19:11:16,624 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:11:16,624 - src.pipeline.kg_builder - INFO - Batch 32 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 17.16s, Clean: 0.00s, Neo4j: 0.24s, ACS: 0.32s
2025-11-30 19:11:16,624 - src.pipeline.kg_builder - INFO - Batch 32 completed in 17.72s
Processing KG batches:  44%|████▍     | 32/72 [09:55<09:48, 14.72s/it]2025-11-30 19:11:16,624 - src.pipeline.kg_builder - INFO - Processing batch 33/72 (3 items)
2025-11-30 19:11:16,624 - src.pipeline.kg_builder - DEBUG - Batch 33 current_video_time: 08:08-08:13
2025-11-30 19:11:16,629 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 343
- Total Relationships: 310
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:11:16,630 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:11:16,630 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_0 ~212 words, content: Time: 07:58-08:03 Content: The video sequence captures a scientific procedure, likely a chemical experiment, being conducted in a laboratory setting. The perspective is first-person, showing...
2025-11-30 19:11:16,630 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_1 ~226 words, content: positive weight, indicating the mass of the substance that was added to the beaker. The final reading on the display is $0.191$ grams, which is...
2025-11-30 19:11:16,630 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_2 ~238 words, content: the measurement. The person then carefully places a small, circular piece of aluminum foil onto the weighing pan. After closing the draft shield, the balance's...
2025-11-30 19:11:16,630 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_3 ~232 words, content: precise measurement in a laboratory setting. The scene is set on a black laboratory bench, with various pieces of equipment and materials arranged around the...
2025-11-30 19:11:16,630 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_4 ~84 words, content: the bench. This suggests the next step in the procedure might involve using the foil, perhaps to cover the sample or to prepare for the...
2025-11-30 19:11:16,650 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:11:16,732 - src.components.pre_llm_injector - DEBUG - Found 151 existing chunk embeddings for similarity lookup
2025-11-30 19:11:16,772 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.787'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1', '0.782')]
2025-11-30 19:11:16,774 - src.components.pre_llm_injector - DEBUG - Found 12 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1
2025-11-30 19:11:16,774 - src.components.pre_llm_injector - DEBUG - Found 9 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0
2025-11-30 19:11:16,787 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0: Subgraph: (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Round_Bottom_Flask / ID: 30_1)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[IS_ON]->(Laboratory_Bench / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Precision_Balance / ID: 13_0)-[DISPLAYS]->(Negative_Weight_Reading / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (White Pen / ID: 1_3)-[WRITES_ON]->(Experiment Report / ID: 1_3), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Glass_Rod / ID: 4_1)-[IS_USED_TO]->(Stir_Liquid / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Rod / ID: 4_1)-[STIRS]->(Small_Glass_Container / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Balance_Scale / ID: 4_0)-[IS_INSIDE]->(Glass_Draft_Shield / ID: 7_0), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.787'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1', '0.782')]
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_2', '0.659'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_1', '0.639')]
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.709'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.686')]
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.576'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_2', '0.557')]
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.778'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_15_2', '0.772')]
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:11:16,810 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_0) (~212 words) with timeout=5.0s retries=3
2025-11-30 19:11:18,053 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:11:18,053 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:11:18,053 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_1) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:11:19,412 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:11:19,412 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:11:19,412 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_2) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:11:20,776 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:11:20,776 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:11:20,777 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_3) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:11:22,059 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:11:22,059 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:11:22,059 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_32_4) (~84 words) with timeout=5.0s retries=3
2025-11-30 19:11:23,298 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:11:23,298 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:11:23,298 - src.components.pre_llm_injector - INFO - Extracted 27 local triplets from 5 chunks
2025-11-30 19:11:23,298 - src.pipeline.kg_builder - INFO - Pre-extraction: 27 triplets in 6.67s
2025-11-30 19:11:23,299 - src.components.global_refiner - INFO - Capping refinement input: 27 → 15 triplets
2025-11-30 19:11:23,299 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0: Subgraph: (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Round_Bottom_Flask / ID: 30_1)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[IS_ON]->(Laboratory_Bench / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Precision_Balance / ID: 13_0)-[DISPLAYS]->(Negative_Weight_Reading / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_1: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (White Pen / ID: 1_3)-[WRITES_ON]->(Experiment Report / ID: 1_3), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Glass_Rod / ID: 4_1)-[IS_USED_TO]->(Stir_Liquid / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Rod / ID: 4_1)-[STIRS]->(Small_Glass_Container / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Balance_Scale / ID: 4_0)-[IS_INSIDE]->(Glass_Draft_Shield / ID: 7_0), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Researcher", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["32_0"]}, {"head": "Researcher", "relation": "Opens", "tail": "Glass Draft Shield", "source_chunks": ["32_0"]}, {"head": "Researcher", "relation": "Places", "tail": "Beaker", "source_chunks": ["32_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Analytical Balance", "source_chunks": ["32_0"]}, {"head": "Researcher", "relation": "Adds", "tail": "White Powder", "source_chunks": ["32_0"]}, {"head": "Analytical Balance", "relation": "Displays", "tail": "Weight Reading", "source_chunks": ["32_0"]}, {"head": "Analytical Balance", "relation": "Displays", "tail": "0.191 Grams", "source_chunks": ["32_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Glove", "source_chunks": ["32_1", "32_3"]}, {"head": "Person", "relation": "Opens", "tail": "Draft Shield", "source_chunks": ["32_1", "32_2"]}, {"head": "Person", "relation": "Places", "tail": "Aluminum Foil", "source_chunks": ["32_1", "32_2"]}, {"head": "Analytical Balance", "relation": "Contains", "tail": "Aluminum Foil", "source_chunks": ["32_1"]}, {"head": "Laboratory Environment", "relation": "Includes", "tail": "Black Laboratory Bench", "source_chunks": ["32_1"]}, {"head": "Aluminum Foil", "relation": "Has Mass", "tail": "0.193 G", "source_chunks": ["32_2"]}, {"head": "Balance", "relation": "Displays", "tail": "0.193 G", "source_chunks": ["32_2"]}, {"head": "Draft Shield", "relation": "Is Closed", "tail": "Balance", "source_chunks": ["32_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:11:23,300 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2847 words, ~3701 tokens)
2025-11-30 19:11:23,300 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:11:23,323 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 10363 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:11:23,323 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:11:23,323 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:11:23,323 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:11:23,323 - src.pipeline.kg_builder - INFO - Pushing batch 33/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:11:23,323 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:11:23,527 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=355, relationships=324
2025-11-30 19:11:23,527 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:11:23,531 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=355, relationships=324
2025-11-30 19:11:23,534 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:11:23,534 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:11:23,535 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:11:23,535 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:11:23,536 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 156, 'with_embedding': 156, 'linked_chunks': 125}
2025-11-30 19:11:23,536 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:11:23,599 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 355 nodes
2025-11-30 19:11:23,726 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 324 nodes
2025-11-30 19:11:23,873 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 355, 'relationship_count': 1048, 'density': 0.0083, 'avg_degree': 5.9042, 'avg_unique_neighbors': 5.8704, 'global_efficiency': 0.3317, 'avg_path_length': 2.7187, 'avg_degree_centrality': 0.0167, 'max_degree_centrality': 0.5141, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0364, 'degree_assortativity': -0.1713, 'graph_robustness': 0.8416, 'diameter_estimate': 6, 'clustering_coefficient': 0.2798, 'weakly_connected_components': 32, 'largest_wcc_size': 324, 'pagerank_top10_percent': 8.62, 'louvain_communities': 43, 'louvain_modularity': 0.4291, 'label_entropy': 1.4947, 'computational_time': 0.33715359098277986}
2025-11-30 19:11:23,873 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 32, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501083.8736885, 'total_time': 7.248791013960727, 'aggregation': 2.7230707928538322e-06, 'network_info': 0.004903531982563436, 'llm_extraction': 6.693494033999741, 'data_cleaning': 1.8529011867940426e-05, 'neo4j_injection': 0.21165172290056944, 'embedding_time': 0, 'indexing_time': 0.003272735048085451, 'graph_injection_time': 0.20815344899892807, 'acs_metrics': {'node_count': 355, 'relationship_count': 1048, 'density': 0.0083, 'avg_degree': 5.9042, 'avg_unique_neighbors': 5.8704, 'global_efficiency': 0.3317, 'avg_path_length': 2.7187, 'avg_degree_centrality': 0.0167, 'max_degree_centrality': 0.5141, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0364, 'degree_assortativity': -0.1713, 'graph_robustness': 0.8416, 'diameter_estimate': 6, 'clustering_coefficient': 0.2798, 'weakly_connected_components': 32, 'largest_wcc_size': 324, 'pagerank_top10_percent': 8.62, 'louvain_communities': 43, 'louvain_modularity': 0.4291, 'label_entropy': 1.4947, 'computational_time': 0.33715359098277986}, 'retrieval_queries': []}
2025-11-30 19:11:23,873 - src.pipeline.kg_builder - DEBUG - Batch 32 metrics: {
  "batch_idx": 32,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501083.8736885,
  "total_time": 7.248791013960727,
  "aggregation": 2.7230707928538322e-06,
  "network_info": 0.004903531982563436,
  "llm_extraction": 6.693494033999741,
  "data_cleaning": 1.8529011867940426e-05,
  "neo4j_injection": 0.21165172290056944,
  "embedding_time": 0,
  "indexing_time": 0.003272735048085451,
  "graph_injection_time": 0.20815344899892807,
  "acs_metrics": {
    "node_count": 355,
    "relationship_count": 1048,
    "density": 0.0083,
    "avg_degree": 5.9042,
    "avg_unique_neighbors": 5.8704,
    "global_efficiency": 0.3317,
    "avg_path_length": 2.7187,
    "avg_degree_centrality": 0.0167,
    "max_degree_centrality": 0.5141,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0364,
    "degree_assortativity": -0.1713,
    "graph_robustness": 0.8416,
    "diameter_estimate": 6,
    "clustering_coefficient": 0.2798,
    "weakly_connected_components": 32,
    "largest_wcc_size": 324,
    "pagerank_top10_percent": 8.62,
    "louvain_communities": 43,
    "louvain_modularity": 0.4291,
    "label_entropy": 1.4947,
    "computational_time": 0.33715359098277986
  },
  "retrieval_queries": []
}
2025-11-30 19:11:23,874 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:11:23,874 - src.pipeline.kg_builder - INFO - Batch 33 timings - Agg: 0.00s, NetInfo: 0.00s, LLM: 6.69s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.34s
2025-11-30 19:11:23,874 - src.pipeline.kg_builder - INFO - Batch 33 completed in 7.25s
Processing KG batches:  46%|████▌     | 33/72 [10:03<08:06, 12.48s/it]2025-11-30 19:11:23,874 - src.pipeline.kg_builder - INFO - Processing batch 34/72 (3 items)
2025-11-30 19:11:23,874 - src.pipeline.kg_builder - DEBUG - Batch 34 current_video_time: 08:23-08:28
2025-11-30 19:11:23,880 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 355
- Total Relationships: 324
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:11:23,881 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:11:23,881 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_0 ~245 words, content: Time: 08:13-08:18 Content: The video sequence captures a series of actions within a laboratory setting, focusing on a person conducting an experiment. The scene is...
2025-11-30 19:11:23,881 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_1 ~236 words, content: the contents of the container are not contaminated. The surrounding area includes a blue stand with a glass tube, a beaker, and a pair of...
2025-11-30 19:11:23,881 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_2 ~248 words, content: the camera provides a wide view of the lab. A person wearing blue gloves is seen interacting with a piece of equipment, possibly a balance...
2025-11-30 19:11:23,881 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3 ~245 words, content: and other lab equipment remain in the foreground, but the primary action is the documentation of the experiment. Overall, the video depicts a scientific procedure...
2025-11-30 19:11:23,881 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_4 ~221 words, content: A glass container is placed on a magnetic stirrer, which is actively mixing a liquid. The stirrer is connected to a power source, and the...
2025-11-30 19:11:23,901 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:11:23,976 - src.components.pre_llm_injector - DEBUG - Found 156 existing chunk embeddings for similarity lookup
2025-11-30 19:11:24,017 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.827'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.811')]
2025-11-30 19:11:24,019 - src.components.pre_llm_injector - DEBUG - Found 9 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0
2025-11-30 19:11:24,020 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1
2025-11-30 19:11:24,038 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1)
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1)
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.717'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.700')]
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1', '0.785'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.733')]
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.670'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_2', '0.666')]
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.827'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.811')]
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.768'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5', '0.748')]
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:11:24,042 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_0) (~245 words) with timeout=5.0s retries=3
2025-11-30 19:11:25,160 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:11:25,160 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:11:25,160 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_1) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:11:26,188 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:11:26,188 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:11:26,189 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_2) (~248 words) with timeout=5.0s retries=3
2025-11-30 19:11:27,219 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:11:27,219 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:11:27,220 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3) (~245 words) with timeout=5.0s retries=3
2025-11-30 19:11:28,316 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:11:28,316 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:11:28,316 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_4) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:11:29,631 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:11:29,631 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:11:29,631 - src.components.pre_llm_injector - INFO - Extracted 27 local triplets from 5 chunks
2025-11-30 19:11:29,631 - src.pipeline.kg_builder - INFO - Pre-extraction: 27 triplets in 5.75s
2025-11-30 19:11:29,632 - src.components.global_refiner - INFO - Capping refinement input: 27 → 15 triplets
2025-11-30 19:11:29,632 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["33_0"]}, {"head": "Person", "relation": "Handles", "tail": "Aluminum Foil", "source_chunks": ["33_0", "33_1"]}, {"head": "Person", "relation": "Uses", "tail": "Balance Scale", "source_chunks": ["33_0"]}, {"head": "Balance Scale", "relation": "Measures", "tail": "Mass", "source_chunks": ["33_0"]}, {"head": "Container", "relation": "Is Placed On", "tail": "Magnetic Stirrer", "source_chunks": ["33_0"]}, {"head": "Magnetic Stirrer", "relation": "Mixes", "tail": "Liquid", "source_chunks": ["33_0", "33_4"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["33_1"]}, {"head": "Person", "relation": "Works At", "tail": "Countertop", "source_chunks": ["33_1"]}, {"head": "Lab", "relation": "Contains", "tail": "Balance Scale", "source_chunks": ["33_1"]}, {"head": "Lab", "relation": "Contains", "tail": "Glass Tube", "source_chunks": ["33_1"]}, {"head": "Lab", "relation": "Contains", "tail": "Beaker", "source_chunks": ["33_1"]}, {"head": "Camera", "relation": "Provides", "tail": "Wide_View", "source_chunks": ["33_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Gloves", "source_chunks": ["33_2"]}, {"head": "Person", "relation": "Interacts With", "tail": "Balance_Scale", "source_chunks": ["33_2"]}, {"head": "Person", "relation": "Holds", "tail": "Smartphone", "source_chunks": ["33_2", "33_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:11:29,632 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2522 words, ~3279 tokens)
2025-11-30 19:11:29,632 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:11:29,649 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 9142 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:11:29,650 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:11:29,650 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:11:29,650 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:11:29,650 - src.pipeline.kg_builder - INFO - Pushing batch 34/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:11:29,650 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:11:29,822 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=365, relationships=339
2025-11-30 19:11:29,823 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:11:29,826 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=365, relationships=339
2025-11-30 19:11:29,828 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:11:29,828 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:11:29,828 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:11:29,828 - src.components.neo4j_handler - INFO - Batch injected in 0.18s (triplets: 0.18s, indexes: 0.00s)
2025-11-30 19:11:29,829 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 161, 'with_embedding': 161, 'linked_chunks': 130}
2025-11-30 19:11:29,829 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:11:29,892 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 365 nodes
2025-11-30 19:11:30,027 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 334 nodes
2025-11-30 19:11:30,230 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 365, 'relationship_count': 1087, 'density': 0.0082, 'avg_degree': 5.9562, 'avg_unique_neighbors': 5.9233, 'global_efficiency': 0.3354, 'avg_path_length': 2.7002, 'avg_degree_centrality': 0.0164, 'max_degree_centrality': 0.5275, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0363, 'degree_assortativity': -0.1825, 'graph_robustness': 0.8491, 'diameter_estimate': 6, 'clustering_coefficient': 0.2824, 'weakly_connected_components': 32, 'largest_wcc_size': 334, 'pagerank_top10_percent': 8.34, 'louvain_communities': 42, 'louvain_modularity': 0.4367, 'label_entropy': 1.495, 'computational_time': 0.40114150498993695}
2025-11-30 19:11:30,230 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 33, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501090.2308972, 'total_time': 6.356237211963162, 'aggregation': 2.537970431149006e-06, 'network_info': 0.005863398080691695, 'llm_extraction': 5.7693999980110675, 'data_cleaning': 1.3833981938660145e-05, 'neo4j_injection': 0.17831280606333166, 'embedding_time': 0, 'indexing_time': 0.0013740219874307513, 'graph_injection_time': 0.1767385359853506, 'acs_metrics': {'node_count': 365, 'relationship_count': 1087, 'density': 0.0082, 'avg_degree': 5.9562, 'avg_unique_neighbors': 5.9233, 'global_efficiency': 0.3354, 'avg_path_length': 2.7002, 'avg_degree_centrality': 0.0164, 'max_degree_centrality': 0.5275, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0363, 'degree_assortativity': -0.1825, 'graph_robustness': 0.8491, 'diameter_estimate': 6, 'clustering_coefficient': 0.2824, 'weakly_connected_components': 32, 'largest_wcc_size': 334, 'pagerank_top10_percent': 8.34, 'louvain_communities': 42, 'louvain_modularity': 0.4367, 'label_entropy': 1.495, 'computational_time': 0.40114150498993695}, 'retrieval_queries': []}
2025-11-30 19:11:30,230 - src.pipeline.kg_builder - DEBUG - Batch 33 metrics: {
  "batch_idx": 33,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501090.2308972,
  "total_time": 6.356237211963162,
  "aggregation": 2.537970431149006e-06,
  "network_info": 0.005863398080691695,
  "llm_extraction": 5.7693999980110675,
  "data_cleaning": 1.3833981938660145e-05,
  "neo4j_injection": 0.17831280606333166,
  "embedding_time": 0,
  "indexing_time": 0.0013740219874307513,
  "graph_injection_time": 0.1767385359853506,
  "acs_metrics": {
    "node_count": 365,
    "relationship_count": 1087,
    "density": 0.0082,
    "avg_degree": 5.9562,
    "avg_unique_neighbors": 5.9233,
    "global_efficiency": 0.3354,
    "avg_path_length": 2.7002,
    "avg_degree_centrality": 0.0164,
    "max_degree_centrality": 0.5275,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0363,
    "degree_assortativity": -0.1825,
    "graph_robustness": 0.8491,
    "diameter_estimate": 6,
    "clustering_coefficient": 0.2824,
    "weakly_connected_components": 32,
    "largest_wcc_size": 334,
    "pagerank_top10_percent": 8.34,
    "louvain_communities": 42,
    "louvain_modularity": 0.4367,
    "label_entropy": 1.495,
    "computational_time": 0.40114150498993695
  },
  "retrieval_queries": []
}
2025-11-30 19:11:30,231 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:11:30,231 - src.pipeline.kg_builder - INFO - Batch 34 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.77s, Clean: 0.00s, Neo4j: 0.18s, ACS: 0.40s
2025-11-30 19:11:30,231 - src.pipeline.kg_builder - INFO - Batch 34 completed in 6.36s
Processing KG batches:  47%|████▋     | 34/72 [10:09<06:44, 10.64s/it]2025-11-30 19:11:30,231 - src.pipeline.kg_builder - INFO - Processing batch 35/72 (3 items)
2025-11-30 19:11:30,231 - src.pipeline.kg_builder - DEBUG - Batch 35 current_video_time: 08:38-08:43
2025-11-30 19:11:30,238 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 365
- Total Relationships: 339
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:11:30,238 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:11:30,238 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_0 ~235 words, content: Time: 08:28-08:33 Content: The video captures a sequence of actions in a laboratory setting, focusing on a chemical experiment. The scene is set on a...
2025-11-30 19:11:30,238 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_1 ~224 words, content: show the person continuing to use the pipette to transfer the liquid. The test tube is held steady, and the liquid is being drawn into...
2025-11-30 19:11:30,238 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_2 ~223 words, content: with precision, suggesting a controlled experiment. The person's hands are the primary focus, demonstrating careful handling of the chemicals. - **Final State:** After the transfer,...
2025-11-30 19:11:30,238 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_3 ~226 words, content: weighing balance or a stir plate. - **Transfer to a Volumetric Flask:** The researcher then carefully transfers the liquid from the small vial into a...
2025-11-30 19:11:30,238 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_4 ~71 words, content: which might contain a reagent. In summary, the video shows a researcher meticulously preparing a chemical solution in a laboratory setting. The process involves precise...
2025-11-30 19:11:30,258 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:11:30,327 - src.components.pre_llm_injector - DEBUG - Found 161 existing chunk embeddings for similarity lookup
2025-11-30 19:11:30,371 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.814'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3', '0.795')]
2025-11-30 19:11:30,373 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2
2025-11-30 19:11:30,374 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3
2025-11-30 19:11:30,392 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2)
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2)
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.670'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_1', '0.658')]
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.625'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.620')]
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_0', '0.586'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_0', '0.584')]
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.814'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3', '0.795')]
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_5', '0.770'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_4', '0.760')]
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:11:30,393 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_0) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:11:31,596 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:11:31,596 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:11:31,596 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_1) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:11:32,954 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:11:32,954 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:11:32,955 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_2) (~223 words) with timeout=5.0s retries=3
2025-11-30 19:11:34,286 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:11:34,286 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:11:34,287 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_3) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:11:35,569 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:11:35,569 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:11:35,569 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_4) (~71 words) with timeout=5.0s retries=3
2025-11-30 19:11:36,893 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:11:36,893 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:11:36,893 - src.components.pre_llm_injector - INFO - Extracted 28 local triplets from 5 chunks
2025-11-30 19:11:36,894 - src.pipeline.kg_builder - INFO - Pre-extraction: 28 triplets in 6.66s
2025-11-30 19:11:36,894 - src.components.global_refiner - INFO - Capping refinement input: 28 → 15 triplets
2025-11-30 19:11:36,894 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Lab Bench", "relation": "Contains", "tail": "Glass Flask", "source_chunks": ["34_0"]}, {"head": "Glass Flask", "relation": "Connected To", "tail": "Flexible Tube", "source_chunks": ["34_0"]}, {"head": "Flexible Tube", "relation": "Connected To", "tail": "Plastic Beaker", "source_chunks": ["34_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["34_0"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["34_0"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["34_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["34_1", "34_2"]}, {"head": "Person", "relation": "Holds", "tail": "Test_Tube", "source_chunks": ["34_1", "34_2"]}, {"head": "Test_Tube", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["34_1"]}, {"head": "Person", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["34_1"]}, {"head": "Test_Tube", "relation": "Is Transferred To", "tail": "Volumetric_Flask", "source_chunks": ["34_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["34_1"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["34_2"]}, {"head": "Person", "relation": "Uses", "tail": "Glass_Vial", "source_chunks": ["34_2"]}, {"head": "Test_Tube", "relation": "Is Empty", "tail": "After_Transfer", "source_chunks": ["34_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:11:36,895 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1879 words, ~2443 tokens)
2025-11-30 19:11:36,895 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:11:36,914 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 6579 input tokens (2000 > 8192 - 6579). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:11:36,914 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:11:36,914 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:11:36,914 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:11:36,914 - src.pipeline.kg_builder - INFO - Pushing batch 35/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:11:36,914 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:11:37,048 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=375, relationships=349
2025-11-30 19:11:37,048 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:11:37,052 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=375, relationships=349
2025-11-30 19:11:37,053 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:11:37,053 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:11:37,053 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:11:37,053 - src.components.neo4j_handler - INFO - Batch injected in 0.14s (triplets: 0.14s, indexes: 0.00s)
2025-11-30 19:11:37,056 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 166, 'with_embedding': 166, 'linked_chunks': 133}
2025-11-30 19:11:37,056 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:11:37,121 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 375 nodes
2025-11-30 19:11:37,261 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 342 nodes
2025-11-30 19:11:37,427 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 375, 'relationship_count': 1117, 'density': 0.008, 'avg_degree': 5.9573, 'avg_unique_neighbors': 5.9253, 'global_efficiency': 0.3336, 'avg_path_length': 2.6939, 'avg_degree_centrality': 0.0159, 'max_degree_centrality': 0.5294, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0335, 'degree_assortativity': -0.1837, 'graph_robustness': 0.8496, 'diameter_estimate': 5, 'clustering_coefficient': 0.2816, 'weakly_connected_components': 34, 'largest_wcc_size': 342, 'pagerank_top10_percent': 8.09, 'louvain_communities': 44, 'louvain_modularity': 0.4262, 'label_entropy': 1.4952, 'computational_time': 0.3708171439357102}
2025-11-30 19:11:37,427 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 34, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501097.427731, 'total_time': 7.195849401992746, 'aggregation': 2.6909401640295982e-06, 'network_info': 0.006108422996476293, 'llm_extraction': 6.676574254059233, 'data_cleaning': 1.754902768880129e-05, 'neo4j_injection': 0.13907114404719323, 'embedding_time': 0, 'indexing_time': 0.0012948790099471807, 'graph_injection_time': 0.1375450340565294, 'acs_metrics': {'node_count': 375, 'relationship_count': 1117, 'density': 0.008, 'avg_degree': 5.9573, 'avg_unique_neighbors': 5.9253, 'global_efficiency': 0.3336, 'avg_path_length': 2.6939, 'avg_degree_centrality': 0.0159, 'max_degree_centrality': 0.5294, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0335, 'degree_assortativity': -0.1837, 'graph_robustness': 0.8496, 'diameter_estimate': 5, 'clustering_coefficient': 0.2816, 'weakly_connected_components': 34, 'largest_wcc_size': 342, 'pagerank_top10_percent': 8.09, 'louvain_communities': 44, 'louvain_modularity': 0.4262, 'label_entropy': 1.4952, 'computational_time': 0.3708171439357102}, 'retrieval_queries': []}
2025-11-30 19:11:37,427 - src.pipeline.kg_builder - DEBUG - Batch 34 metrics: {
  "batch_idx": 34,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501097.427731,
  "total_time": 7.195849401992746,
  "aggregation": 2.6909401640295982e-06,
  "network_info": 0.006108422996476293,
  "llm_extraction": 6.676574254059233,
  "data_cleaning": 1.754902768880129e-05,
  "neo4j_injection": 0.13907114404719323,
  "embedding_time": 0,
  "indexing_time": 0.0012948790099471807,
  "graph_injection_time": 0.1375450340565294,
  "acs_metrics": {
    "node_count": 375,
    "relationship_count": 1117,
    "density": 0.008,
    "avg_degree": 5.9573,
    "avg_unique_neighbors": 5.9253,
    "global_efficiency": 0.3336,
    "avg_path_length": 2.6939,
    "avg_degree_centrality": 0.0159,
    "max_degree_centrality": 0.5294,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0335,
    "degree_assortativity": -0.1837,
    "graph_robustness": 0.8496,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2816,
    "weakly_connected_components": 34,
    "largest_wcc_size": 342,
    "pagerank_top10_percent": 8.09,
    "louvain_communities": 44,
    "louvain_modularity": 0.4262,
    "label_entropy": 1.4952,
    "computational_time": 0.3708171439357102
  },
  "retrieval_queries": []
}
2025-11-30 19:11:37,428 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:11:37,428 - src.pipeline.kg_builder - INFO - Batch 35 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 6.68s, Clean: 0.00s, Neo4j: 0.14s, ACS: 0.37s
2025-11-30 19:11:37,428 - src.pipeline.kg_builder - INFO - Batch 35 completed in 7.20s
Processing KG batches:  49%|████▊     | 35/72 [10:16<05:55,  9.61s/it]2025-11-30 19:11:37,428 - src.pipeline.kg_builder - INFO - Processing batch 36/72 (3 items)
2025-11-30 19:11:37,428 - src.pipeline.kg_builder - DEBUG - Batch 36 current_video_time: 08:53-08:58
2025-11-30 19:11:37,434 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 375
- Total Relationships: 349
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:11:37,434 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:11:37,434 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_0 ~235 words, content: Time: 08:43-08:48 Content: The video sequence captures a series of actions within a laboratory setting, focusing on a person conducting an experiment. The environment is...
2025-11-30 19:11:37,434 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_1 ~240 words, content: - In the third frame, the person is seen adjusting a piece of equipment, possibly a pipette or a similar device, which is connected to...
2025-11-30 19:11:37,434 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2 ~249 words, content: scientific experiment. The scene begins with a close-up of a laboratory bench, where a person wearing blue gloves is handling a glass container. The bench...
2025-11-30 19:11:37,435 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_3 ~233 words, content: video suggests a professional and organized laboratory setting, with a focus on scientific research and experimentation. In summary, the video depicts a laboratory scene where...
2025-11-30 19:11:37,435 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_4 ~119 words, content: The balance's digital display shows "0.0000 g", indicating it has been tared. The person then uses a metal spatula to transfer a white solid from...
2025-11-30 19:11:37,455 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:11:37,526 - src.components.pre_llm_injector - DEBUG - Found 166 existing chunk embeddings for similarity lookup
2025-11-30 19:11:37,569 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.811'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.801')]
2025-11-30 19:11:37,571 - src.components.pre_llm_injector - DEBUG - Found 4 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2
2025-11-30 19:11:37,571 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:11:37,590 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2)
2025-11-30 19:11:37,594 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Aluminum Foil / ID: 3_2)-[IS_INSIDE]->(Weighing Chamber / ID: 31_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Aluminum Foil / ID: 3_2)-[HAS_MASS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2)
2025-11-30 19:11:37,594 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_3', '0.785'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_4', '0.682')]
2025-11-30 19:11:37,594 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_5', '0.769'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.763')]
2025-11-30 19:11:37,595 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.763'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_3', '0.762')]
2025-11-30 19:11:37,595 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.732'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_6', '0.731')]
2025-11-30 19:11:37,595 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.811'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.801')]
2025-11-30 19:11:37,595 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:11:37,595 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_0) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:11:38,934 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:11:38,934 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:11:38,934 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_1) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:11:40,063 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:11:40,063 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:11:40,063 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2) (~249 words) with timeout=5.0s retries=3
2025-11-30 19:11:41,082 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:11:41,082 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:11:41,082 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_3) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:11:42,382 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:11:42,382 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:11:42,383 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_4) (~119 words) with timeout=5.0s retries=3
2025-11-30 19:11:47,389 - src.components.pre_llm_injector - WARNING - Chunk 4 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:11:49,149 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 2)
2025-11-30 19:11:49,149 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:11:49,149 - src.components.pre_llm_injector - INFO - Extracted 28 local triplets from 5 chunks
2025-11-30 19:11:49,149 - src.pipeline.kg_builder - INFO - Pre-extraction: 28 triplets in 11.72s
2025-11-30 19:11:49,149 - src.components.global_refiner - INFO - Capping refinement input: 28 → 15 triplets
2025-11-30 19:11:49,149 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Aluminum Foil / ID: 3_2)-[IS_INSIDE]->(Weighing Chamber / ID: 31_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Aluminum Foil / ID: 3_2)-[HAS_MASS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["35_0"]}, {"head": "Person", "relation": "Handles", "tail": "Test_Tube", "source_chunks": ["35_0"]}, {"head": "Person", "relation": "Interacts With", "tail": "Magnetic_Stirrer", "source_chunks": ["35_0"]}, {"head": "Magnetic_Stirrer", "relation": "Contains", "tail": "Beaker", "source_chunks": ["35_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["35_0"]}, {"head": "Person", "relation": "Adjusts", "tail": "Magnetic_Stirrer_Settings", "source_chunks": ["35_0"]}, {"head": "Person", "relation": "Handles", "tail": "Equipment", "source_chunks": ["35_1"]}, {"head": "Person", "relation": "Handles", "tail": "Glass Container", "source_chunks": ["35_1", "35_2"]}, {"head": "Equipment", "relation": "Connected To", "tail": "Tube", "source_chunks": ["35_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["35_1", "35_2"]}, {"head": "Person", "relation": "Reaches For", "tail": "Glass Container", "source_chunks": ["35_1"]}, {"head": "Lab Environment", "relation": "Contains", "tail": "Equipment", "source_chunks": ["35_1"]}, {"head": "Person", "relation": "Wears", "tail": "Beige Sweater", "source_chunks": ["35_2"]}, {"head": "Person", "relation": "Stands Near", "tail": "Glass Cabinet", "source_chunks": ["35_2"]}, {"head": "Person", "relation": "Observes", "tail": "Experiment", "source_chunks": ["35_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:11:49,150 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2310 words, ~3003 tokens)
2025-11-30 19:11:49,150 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:11:49,166 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 8208 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:11:49,166 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:11:49,167 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:11:49,167 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:11:49,167 - src.pipeline.kg_builder - INFO - Pushing batch 36/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:11:49,167 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:11:49,335 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=383, relationships=358
2025-11-30 19:11:49,336 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:11:49,341 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=383, relationships=358
2025-11-30 19:11:49,343 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:11:49,343 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:11:49,343 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:11:49,343 - src.components.neo4j_handler - INFO - Batch injected in 0.18s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:11:49,344 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 171, 'with_embedding': 171, 'linked_chunks': 136}
2025-11-30 19:11:49,344 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:11:49,421 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 383 nodes
2025-11-30 19:11:49,569 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 348 nodes
2025-11-30 19:11:49,739 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 383, 'relationship_count': 1141, 'density': 0.0078, 'avg_degree': 5.9582, 'avg_unique_neighbors': 5.9269, 'global_efficiency': 0.3319, 'avg_path_length': 2.6863, 'avg_degree_centrality': 0.0156, 'max_degree_centrality': 0.534, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0413, 'degree_assortativity': -0.1858, 'graph_robustness': 0.8457, 'diameter_estimate': 5, 'clustering_coefficient': 0.2806, 'weakly_connected_components': 36, 'largest_wcc_size': 348, 'pagerank_top10_percent': 7.92, 'louvain_communities': 46, 'louvain_modularity': 0.4238, 'label_entropy': 1.4959, 'computational_time': 0.3944311928935349}
2025-11-30 19:11:49,739 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 35, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501109.739285, 'total_time': 12.310562098980881, 'aggregation': 3.6120181903243065e-06, 'network_info': 0.005591729888692498, 'llm_extraction': 11.73256853595376, 'data_cleaning': 1.3384036719799042e-05, 'neo4j_injection': 0.17622260202188045, 'embedding_time': 0, 'indexing_time': 0.0013647460145875812, 'graph_injection_time': 0.17466764897108078, 'acs_metrics': {'node_count': 383, 'relationship_count': 1141, 'density': 0.0078, 'avg_degree': 5.9582, 'avg_unique_neighbors': 5.9269, 'global_efficiency': 0.3319, 'avg_path_length': 2.6863, 'avg_degree_centrality': 0.0156, 'max_degree_centrality': 0.534, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0413, 'degree_assortativity': -0.1858, 'graph_robustness': 0.8457, 'diameter_estimate': 5, 'clustering_coefficient': 0.2806, 'weakly_connected_components': 36, 'largest_wcc_size': 348, 'pagerank_top10_percent': 7.92, 'louvain_communities': 46, 'louvain_modularity': 0.4238, 'label_entropy': 1.4959, 'computational_time': 0.3944311928935349}, 'retrieval_queries': []}
2025-11-30 19:11:49,739 - src.pipeline.kg_builder - DEBUG - Batch 35 metrics: {
  "batch_idx": 35,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501109.739285,
  "total_time": 12.310562098980881,
  "aggregation": 3.6120181903243065e-06,
  "network_info": 0.005591729888692498,
  "llm_extraction": 11.73256853595376,
  "data_cleaning": 1.3384036719799042e-05,
  "neo4j_injection": 0.17622260202188045,
  "embedding_time": 0,
  "indexing_time": 0.0013647460145875812,
  "graph_injection_time": 0.17466764897108078,
  "acs_metrics": {
    "node_count": 383,
    "relationship_count": 1141,
    "density": 0.0078,
    "avg_degree": 5.9582,
    "avg_unique_neighbors": 5.9269,
    "global_efficiency": 0.3319,
    "avg_path_length": 2.6863,
    "avg_degree_centrality": 0.0156,
    "max_degree_centrality": 0.534,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0413,
    "degree_assortativity": -0.1858,
    "graph_robustness": 0.8457,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2806,
    "weakly_connected_components": 36,
    "largest_wcc_size": 348,
    "pagerank_top10_percent": 7.92,
    "louvain_communities": 46,
    "louvain_modularity": 0.4238,
    "label_entropy": 1.4959,
    "computational_time": 0.3944311928935349
  },
  "retrieval_queries": []
}
2025-11-30 19:11:49,740 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:11:49,740 - src.pipeline.kg_builder - INFO - Batch 36 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 11.73s, Clean: 0.00s, Neo4j: 0.18s, ACS: 0.39s
2025-11-30 19:11:49,740 - src.pipeline.kg_builder - INFO - Batch 36 completed in 12.31s
Processing KG batches:  50%|█████     | 36/72 [10:29<06:15, 10.42s/it]2025-11-30 19:11:49,740 - src.pipeline.kg_builder - INFO - Processing batch 37/72 (3 items)
2025-11-30 19:11:49,740 - src.pipeline.kg_builder - DEBUG - Batch 37 current_video_time: 09:08-09:13
2025-11-30 19:11:49,746 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 383
- Total Relationships: 358
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:11:49,747 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:11:49,747 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_0 ~221 words, content: Time: 08:58-09:03 Content: The video sequence captures a detailed laboratory procedure, likely a chemical synthesis or analysis, performed by a scientist wearing blue nitrile gloves....
2025-11-30 19:11:49,747 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_1 ~224 words, content: The presence of the magnetic stirrer in the background indicates that the contents of the flask will be mixed, likely to ensure homogeneity or to...
2025-11-30 19:11:49,747 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_2 ~208 words, content: steady, while their right hand controls the vial, tilting it to pour the liquid. This action is being performed with great care to ensure an...
2025-11-30 19:11:49,747 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_3 ~221 words, content: laboratory setting with a white door, a wall-mounted electrical panel with a high-voltage warning sign, and cardboard boxes. The overall environment suggests a controlled and...
2025-11-30 19:11:49,747 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_4 ~69 words, content: process. The digital scale in the background displays a reading of "0.18," which could be the mass of a substance being weighed, possibly the reagent...
2025-11-30 19:11:49,767 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:11:49,837 - src.components.pre_llm_injector - DEBUG - Found 171 existing chunk embeddings for similarity lookup
2025-11-30 19:11:49,884 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.793'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.788')]
2025-11-30 19:11:49,886 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3
2025-11-30 19:11:49,886 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1
2025-11-30 19:11:49,894 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Flask / ID: 15_2)-[HAS]->(Stopper / ID: 28_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2)
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Glass Beaker / ID: 5_1), (Equipment / ID: 0_1)-[CONTAINS]->(Glass Beaker / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Beaker / ID: 5_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Glass Beaker / ID: 5_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1)
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.788'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_0', '0.777')]
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.717'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_2', '0.695')]
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_1', '0.593'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.572')]
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.610'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.597')]
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.793'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.781')]
2025-11-30 19:11:49,900 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:11:49,901 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_0) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:11:51,424 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:11:51,424 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:11:51,424 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_1) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:11:52,567 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:11:52,568 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:11:52,568 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_2) (~208 words) with timeout=5.0s retries=3
2025-11-30 19:11:53,742 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:11:53,742 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:11:53,742 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_3) (~221 words) with timeout=5.0s retries=3
2025-11-30 19:11:54,913 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:11:54,913 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:11:54,914 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_4) (~69 words) with timeout=5.0s retries=3
2025-11-30 19:11:55,931 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:11:55,931 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:11:55,931 - src.components.pre_llm_injector - INFO - Extracted 29 local triplets from 5 chunks
2025-11-30 19:11:55,931 - src.pipeline.kg_builder - INFO - Pre-extraction: 29 triplets in 6.18s
2025-11-30 19:11:55,931 - src.components.global_refiner - INFO - Capping refinement input: 29 → 15 triplets
2025-11-30 19:11:55,931 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Flask / ID: 15_2)-[HAS]->(Stopper / ID: 28_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Glass Beaker / ID: 5_1), (Equipment / ID: 0_1)-[CONTAINS]->(Glass Beaker / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Beaker / ID: 5_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Glass Beaker / ID: 5_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Scientist", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["36_0"]}, {"head": "Scientist", "relation": "Holds", "tail": "Glass_Cylinder", "source_chunks": ["36_0"]}, {"head": "Glass_Cylinder", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["36_0"]}, {"head": "Scientist", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["36_0", "36_1"]}, {"head": "Liquid", "relation": "Is Poured Into", "tail": "Round_Bottom_Flask", "source_chunks": ["36_0"]}, {"head": "Magnetic_Stirrer", "relation": "Mixes", "tail": "Solution_In_Beaker", "source_chunks": ["36_0"]}, {"head": "Scientist", "relation": "Holds", "tail": "Glass Cylinder", "source_chunks": ["36_1"]}, {"head": "Scientist", "relation": "Holds", "tail": "Flask", "source_chunks": ["36_1"]}, {"head": "Flask", "relation": "Contains", "tail": "Liquid", "source_chunks": ["36_1"]}, {"head": "Flask", "relation": "Is Placed On", "tail": "Magnetic Stirrer", "source_chunks": ["36_1"]}, {"head": "Liquid", "relation": "Is Transferred From", "tail": "Glass Vial", "source_chunks": ["36_1"]}, {"head": "Person", "relation": "Holds", "tail": "Vial", "source_chunks": ["36_2"]}, {"head": "Person", "relation": "Controls", "tail": "Burette", "source_chunks": ["36_2"]}, {"head": "Burette", "relation": "Contains", "tail": "Liquid", "source_chunks": ["36_2"]}, {"head": "Balance", "relation": "Displays", "tail": "0.18_G", "source_chunks": ["36_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:11:55,931 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1632 words, ~2122 tokens)
2025-11-30 19:11:55,931 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:12:09,371 - src.components.global_refiner - DEBUG - LLM call completed in 13.44s
2025-11-30 19:12:09,371 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Scientist', 'Wears', 'Blue_Nitrile_Gloves', ['36_0']], ['Scientist', 'Holds', 'Glass_Cylinder', ['36_0']], ['Glass_Cylinder', 'Contains', 'Clear_Liquid', ['36_0']], ['Scientist', 'Transfers', 'Liquid', ['36_0', '36_1']], ['Liquid', 'Is Poured Into', 'Round_Bottom_Flask', ['36_0']], ['Magnetic_Stirrer', 'Mixes', 'Solution_In_Beaker', ['36_0']], ['Scientist', 'Holds', 'Glass Cylinder', ['36_1']], ['Scientist', 'Holds', 'Flask', ['36_1']], ['Flask', 'Contains', 'Liquid', ['36_1']], ['Flask', 'Is Placed On', 'Magnetic Stirrer', ['36_1']]] inter_chunk_relations=[['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']], ['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']], ['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']], ['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']], ['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}]
2025-11-30 19:12:09,371 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=10, sample=[['Scientist', 'Wears', 'Blue_Nitrile_Gloves', ['36_0']], ['Scientist', 'Holds', 'Glass_Cylinder', ['36_0']], ['Glass_Cylinder', 'Contains', 'Clear_Liquid', ['36_0']]]
2025-11-30 19:12:09,371 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']], ['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']], ['Scientist', 'Holds', 'Person', ['36_0', '36_1', '36_2']]]
2025-11-30 19:12:09,371 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:12:09,371 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}]
2025-11-30 19:12:09,371 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:12:09,371 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Person'}]
2025-11-30 19:12:09,371 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 13.44s, LLM: 13.44s)
2025-11-30 19:12:09,371 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 13.44s
2025-11-30 19:12:09,371 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:12:09,371 - src.pipeline.kg_builder - INFO - Pushing batch 37/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:12:09,371 - src.components.neo4j_handler - INFO - Adding 11 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:12:09,539 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=392, relationships=368
2025-11-30 19:12:09,539 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:12:09,539 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:09,540 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:09,540 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:09,540 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:09,540 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:12:09,542 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Person
2025-11-30 19:12:09,543 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Person
2025-11-30 19:12:09,544 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Person
2025-11-30 19:12:09,544 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Holds]-> Person
2025-11-30 19:12:09,544 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:12:09,546 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Scientist -[Holds]-> Person
2025-11-30 19:12:09,548 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Scientist -[Holds]-> Person
2025-11-30 19:12:09,550 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Scientist -[Holds]-> Person
2025-11-30 19:12:09,552 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Scientist -[Holds]-> Person
2025-11-30 19:12:09,553 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Scientist -[Holds]-> Person
2025-11-30 19:12:09,554 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:12:09,559 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=392, relationships=368
2025-11-30 19:12:09,561 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:12:09,561 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:12:09,561 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:12:09,561 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:12:09,562 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 176, 'with_embedding': 176, 'linked_chunks': 139}
2025-11-30 19:12:09,562 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:12:09,633 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 392 nodes
2025-11-30 19:12:09,786 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 355 nodes
2025-11-30 19:12:09,960 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 392, 'relationship_count': 1168, 'density': 0.0076, 'avg_degree': 5.9592, 'avg_unique_neighbors': 5.9286, 'global_efficiency': 0.3294, 'avg_path_length': 2.6887, 'avg_degree_centrality': 0.0152, 'max_degree_centrality': 0.532, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0392, 'degree_assortativity': -0.1815, 'graph_robustness': 0.8425, 'diameter_estimate': 5, 'clustering_coefficient': 0.2803, 'weakly_connected_components': 38, 'largest_wcc_size': 355, 'pagerank_top10_percent': 7.74, 'louvain_communities': 50, 'louvain_modularity': 0.4279, 'label_entropy': 1.4962, 'computational_time': 0.39801054005511105}
2025-11-30 19:12:09,960 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 36, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501129.960855, 'total_time': 20.220549724064767, 'aggregation': 2.7369242161512375e-06, 'network_info': 0.0061945709167048335, 'llm_extraction': 19.624843021971174, 'data_cleaning': 1.2027914635837078e-05, 'neo4j_injection': 0.18993421201594174, 'embedding_time': 0, 'indexing_time': 0.0022722850553691387, 'graph_injection_time': 0.18746357399504632, 'acs_metrics': {'node_count': 392, 'relationship_count': 1168, 'density': 0.0076, 'avg_degree': 5.9592, 'avg_unique_neighbors': 5.9286, 'global_efficiency': 0.3294, 'avg_path_length': 2.6887, 'avg_degree_centrality': 0.0152, 'max_degree_centrality': 0.532, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0392, 'degree_assortativity': -0.1815, 'graph_robustness': 0.8425, 'diameter_estimate': 5, 'clustering_coefficient': 0.2803, 'weakly_connected_components': 38, 'largest_wcc_size': 355, 'pagerank_top10_percent': 7.74, 'louvain_communities': 50, 'louvain_modularity': 0.4279, 'label_entropy': 1.4962, 'computational_time': 0.39801054005511105}, 'retrieval_queries': []}
2025-11-30 19:12:09,960 - src.pipeline.kg_builder - DEBUG - Batch 36 metrics: {
  "batch_idx": 36,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501129.960855,
  "total_time": 20.220549724064767,
  "aggregation": 2.7369242161512375e-06,
  "network_info": 0.0061945709167048335,
  "llm_extraction": 19.624843021971174,
  "data_cleaning": 1.2027914635837078e-05,
  "neo4j_injection": 0.18993421201594174,
  "embedding_time": 0,
  "indexing_time": 0.0022722850553691387,
  "graph_injection_time": 0.18746357399504632,
  "acs_metrics": {
    "node_count": 392,
    "relationship_count": 1168,
    "density": 0.0076,
    "avg_degree": 5.9592,
    "avg_unique_neighbors": 5.9286,
    "global_efficiency": 0.3294,
    "avg_path_length": 2.6887,
    "avg_degree_centrality": 0.0152,
    "max_degree_centrality": 0.532,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0392,
    "degree_assortativity": -0.1815,
    "graph_robustness": 0.8425,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2803,
    "weakly_connected_components": 38,
    "largest_wcc_size": 355,
    "pagerank_top10_percent": 7.74,
    "louvain_communities": 50,
    "louvain_modularity": 0.4279,
    "label_entropy": 1.4962,
    "computational_time": 0.39801054005511105
  },
  "retrieval_queries": []
}
2025-11-30 19:12:09,961 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:12:09,961 - src.pipeline.kg_builder - INFO - Batch 37 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 19.62s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.40s
2025-11-30 19:12:09,961 - src.pipeline.kg_builder - INFO - Batch 37 completed in 20.22s
Processing KG batches:  51%|█████▏    | 37/72 [10:49<07:47, 13.36s/it]2025-11-30 19:12:09,961 - src.pipeline.kg_builder - INFO - Processing batch 38/72 (3 items)
2025-11-30 19:12:09,961 - src.pipeline.kg_builder - DEBUG - Batch 38 current_video_time: 09:23-09:28
2025-11-30 19:12:09,968 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 392
- Total Relationships: 368
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:12:09,968 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:12:09,968 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_0 ~224 words, content: Time: 09:13-09:18 Content: The video sequence captures a detailed laboratory procedure, likely a chemical titration or solution preparation, performed by a person wearing blue nitrile...
2025-11-30 19:12:09,968 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_1 ~231 words, content: step in the procedure is to weigh the cylinder to determine the exact mass of the liquid that was added. This is a critical step...
2025-11-30 19:12:09,968 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_2 ~222 words, content: Mettler Toledo model, is visible on the left, with its display showing "0.000 g," suggesting it is used for weighing. To the right, a white...
2025-11-30 19:12:09,968 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_3 ~225 words, content: **Initial Setup**: The person, wearing blue nitrile gloves, is handling laboratory glassware. Their left hand holds a tall, graduated cylinder, which contains a clear liquid....
2025-11-30 19:12:09,968 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_4 ~46 words, content: In summary, the video shows a person in a laboratory setting, using a pipette to transfer a liquid from one container to another, likely as...
2025-11-30 19:12:09,989 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:12:10,062 - src.components.pre_llm_injector - DEBUG - Found 176 existing chunk embeddings for similarity lookup
2025-11-30 19:12:10,108 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0', '0.813'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4', '0.810')]
2025-11-30 19:12:10,110 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4 via source_chunk_ids
2025-11-30 19:12:10,110 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0
2025-11-30 19:12:10,122 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[HAS]->(Red_Cap / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[CONTAINS]->(Chemical_Substance / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[IS_ON]->(Laboratory_Bench / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0)
2025-11-30 19:12:10,122 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_0', '0.776'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.763')]
2025-11-30 19:12:10,123 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.619'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_4', '0.610')]
2025-11-30 19:12:10,123 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0', '0.813'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_1', '0.789')]
2025-11-30 19:12:10,123 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.763'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3', '0.728')]
2025-11-30 19:12:10,123 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4', '0.810'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.808')]
2025-11-30 19:12:10,123 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:12:10,123 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_0) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:12:11,578 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:12:11,578 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:12:11,578 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_1) (~231 words) with timeout=5.0s retries=3
2025-11-30 19:12:12,828 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:12:12,829 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:12:12,829 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_2) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:12:14,199 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:12:14,199 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:12:14,200 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_3) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:12:15,545 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:12:15,545 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:12:15,545 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_4) (~46 words) with timeout=5.0s retries=3
2025-11-30 19:12:16,500 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:12:16,500 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:12:16,501 - src.components.pre_llm_injector - INFO - Extracted 20 local triplets from 5 chunks
2025-11-30 19:12:16,501 - src.pipeline.kg_builder - INFO - Pre-extraction: 20 triplets in 6.53s
2025-11-30 19:12:16,501 - src.components.global_refiner - INFO - Capping refinement input: 20 → 15 triplets
2025-11-30 19:12:16,501 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[HAS]->(Red_Cap / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[CONTAINS]->(Chemical_Substance / ID: 10_0), (White_Plastic_Bottle / ID: 10_0)-[IS_ON]->(Laboratory_Bench / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 32_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Glove / ID: 32_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 33_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 33_1), (Person / ID: 0_0)-[WEARS]->(Blue_Gloves / ID: 33_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["37_0", "37_1", "37_3"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated_Cylinder", "source_chunks": ["37_0", "37_1", "37_3"]}, {"head": "Graduated_Cylinder", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["37_0", "37_1", "37_3"]}, {"head": "Person", "relation": "Uses", "tail": "Glass_Vial", "source_chunks": ["37_0"]}, {"head": "Graduated_Cylinder", "relation": "Is Placed On", "tail": "Digital_Balance", "source_chunks": ["37_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Zero_Grams", "source_chunks": ["37_0"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["37_1", "37_3", "37_4"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["37_1", "37_3", "37_4"]}, {"head": "Digital_Balance", "relation": "Measures", "tail": "Mass", "source_chunks": ["37_1"]}, {"head": "Mettler Toledo", "relation": "Displays", "tail": "0.000 G", "source_chunks": ["37_2"]}, {"head": "Magnetic Stirrer", "relation": "Has", "tail": "Glass Container", "source_chunks": ["37_2"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "Glass Vial", "source_chunks": ["37_2"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "Beaker", "source_chunks": ["37_2"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "Aluminum Foil", "source_chunks": ["37_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["37_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:12:16,502 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1373 words, ~1785 tokens)
2025-11-30 19:12:16,502 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:12:32,146 - src.components.global_refiner - DEBUG - LLM call completed in 15.64s
2025-11-30 19:12:32,146 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['37_0', '37_1', '37_3']], ['Person', 'Holds', 'Graduated_Cylinder', ['37_0', '37_1', '37_3']], ['Graduated_Cylinder', 'Contains', 'Clear_Liquid', ['37_0', '37_1', '37_3']], ['Person', 'Uses', 'Glass_Vial', ['37_0']], ['Graduated_Cylinder', 'Is Placed On', 'Digital_Balance', ['37_0']], ['Digital_Balance', 'Displays', 'Zero_Grams', ['37_0']], ['Person', 'Uses', 'Pipette', ['37_1', '37_3', '37_4']], ['Pipette', 'Transfers', 'Liquid', ['37_1', '37_3', '37_4']], ['Digital_Balance', 'Measures', 'Mass', ['37_1']], ['Mettler Toledo', 'Displays', '0.000 G', ['37_2']], ['Magnetic Stirrer', 'Has', 'Glass Container', ['37_2']], ['Lab Bench', 'Contains', 'Glass Vial', ['37_2']], ['Lab Bench', 'Contains', 'Beaker', ['37_2']], ['Lab Bench', 'Contains', 'Aluminum Foil', ['37_2']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['37_2']]] inter_chunk_relations=[['Lab Bench', 'Contains', 'Laboratory Table', ['37_2']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Gloves'}]
2025-11-30 19:12:32,146 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['37_0', '37_1', '37_3']], ['Person', 'Holds', 'Graduated_Cylinder', ['37_0', '37_1', '37_3']], ['Graduated_Cylinder', 'Contains', 'Clear_Liquid', ['37_0', '37_1', '37_3']]]
2025-11-30 19:12:32,146 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Lab Bench', 'Contains', 'Laboratory Table', ['37_2']]]
2025-11-30 19:12:32,146 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=6, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:12:32,146 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=5, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}]
2025-11-30 19:12:32,147 - src.components.global_refiner - INFO - LLM suggested 6 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Glove', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:12:32,147 - src.components.global_refiner - INFO - LLM suggested 5 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Gloves'}]
2025-11-30 19:12:32,147 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 15.65s, LLM: 15.64s)
2025-11-30 19:12:32,147 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 15.65s
2025-11-30 19:12:32,147 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:12:32,147 - src.pipeline.kg_builder - INFO - Pushing batch 38/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:12:32,147 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:12:32,306 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=400, relationships=378
2025-11-30 19:12:32,306 - src.components.neo4j_handler - INFO - Applying 6 merge instructions
2025-11-30 19:12:32,306 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:32,307 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:32,312 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Glove -> Blue_Nitrile_Gloves
2025-11-30 19:12:32,315 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Glove -> Blue_Nitrile_Gloves
2025-11-30 19:12:32,320 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:32,324 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:12:32,324 - src.components.neo4j_handler - INFO - Applying 5 prune instructions
2025-11-30 19:12:32,330 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:12:32,330 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:12:32,331 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Glove
2025-11-30 19:12:32,331 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Gloves
2025-11-30 19:12:32,332 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Gloves
2025-11-30 19:12:32,332 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:12:32,333 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab Bench -[Contains]-> Laboratory Table
2025-11-30 19:12:32,333 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:12:32,337 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=395, relationships=370
2025-11-30 19:12:32,338 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:12:32,338 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:12:32,339 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:12:32,339 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:12:32,340 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 181, 'with_embedding': 181, 'linked_chunks': 144}
2025-11-30 19:12:32,340 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:12:32,413 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 395 nodes
2025-11-30 19:12:32,582 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 358 nodes
2025-11-30 19:12:32,766 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 395, 'relationship_count': 1206, 'density': 0.0077, 'avg_degree': 6.1063, 'avg_unique_neighbors': 6.0759, 'global_efficiency': 0.3302, 'avg_path_length': 2.6862, 'avg_degree_centrality': 0.0155, 'max_degree_centrality': 0.5279, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0477, 'degree_assortativity': -0.1625, 'graph_robustness': 0.8416, 'diameter_estimate': 5, 'clustering_coefficient': 0.2679, 'weakly_connected_components': 38, 'largest_wcc_size': 358, 'pagerank_top10_percent': 7.58, 'louvain_communities': 50, 'louvain_modularity': 0.4097, 'label_entropy': 1.4975, 'computational_time': 0.42607723106630147}
2025-11-30 19:12:32,766 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 37, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501152.766884, 'total_time': 22.804985319962725, 'aggregation': 4.068948328495026e-06, 'network_info': 0.006118375924415886, 'llm_extraction': 22.179190066992305, 'data_cleaning': 4.73120016977191e-05, 'neo4j_injection': 0.19164702098350972, 'embedding_time': 0, 'indexing_time': 0.0013095620088279247, 'graph_injection_time': 0.18996471096761525, 'acs_metrics': {'node_count': 395, 'relationship_count': 1206, 'density': 0.0077, 'avg_degree': 6.1063, 'avg_unique_neighbors': 6.0759, 'global_efficiency': 0.3302, 'avg_path_length': 2.6862, 'avg_degree_centrality': 0.0155, 'max_degree_centrality': 0.5279, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0477, 'degree_assortativity': -0.1625, 'graph_robustness': 0.8416, 'diameter_estimate': 5, 'clustering_coefficient': 0.2679, 'weakly_connected_components': 38, 'largest_wcc_size': 358, 'pagerank_top10_percent': 7.58, 'louvain_communities': 50, 'louvain_modularity': 0.4097, 'label_entropy': 1.4975, 'computational_time': 0.42607723106630147}, 'retrieval_queries': []}
2025-11-30 19:12:32,766 - src.pipeline.kg_builder - DEBUG - Batch 37 metrics: {
  "batch_idx": 37,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501152.766884,
  "total_time": 22.804985319962725,
  "aggregation": 4.068948328495026e-06,
  "network_info": 0.006118375924415886,
  "llm_extraction": 22.179190066992305,
  "data_cleaning": 4.73120016977191e-05,
  "neo4j_injection": 0.19164702098350972,
  "embedding_time": 0,
  "indexing_time": 0.0013095620088279247,
  "graph_injection_time": 0.18996471096761525,
  "acs_metrics": {
    "node_count": 395,
    "relationship_count": 1206,
    "density": 0.0077,
    "avg_degree": 6.1063,
    "avg_unique_neighbors": 6.0759,
    "global_efficiency": 0.3302,
    "avg_path_length": 2.6862,
    "avg_degree_centrality": 0.0155,
    "max_degree_centrality": 0.5279,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0477,
    "degree_assortativity": -0.1625,
    "graph_robustness": 0.8416,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2679,
    "weakly_connected_components": 38,
    "largest_wcc_size": 358,
    "pagerank_top10_percent": 7.58,
    "louvain_communities": 50,
    "louvain_modularity": 0.4097,
    "label_entropy": 1.4975,
    "computational_time": 0.42607723106630147
  },
  "retrieval_queries": []
}
2025-11-30 19:12:32,767 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:12:32,767 - src.pipeline.kg_builder - INFO - Batch 38 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 22.18s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.43s
2025-11-30 19:12:32,767 - src.pipeline.kg_builder - INFO - Batch 38 completed in 22.80s
Processing KG batches:  53%|█████▎    | 38/72 [11:12<09:10, 16.19s/it]2025-11-30 19:12:32,767 - src.pipeline.kg_builder - INFO - Processing batch 39/72 (3 items)
2025-11-30 19:12:32,767 - src.pipeline.kg_builder - DEBUG - Batch 39 current_video_time: 09:38-09:43
2025-11-30 19:12:32,773 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 395
- Total Relationships: 370
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:12:32,774 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:12:32,774 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_0 ~217 words, content: Time: 09:28-09:33 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a precise liquid transfer, performed by a scientist. The scene...
2025-11-30 19:12:32,774 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_1 ~236 words, content: used for weighing. - **Final Adjustment (Frame 3):** The person has now lifted the graduated cylinder, holding it up for a final inspection. The liquid...
2025-11-30 19:12:32,774 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_2 ~239 words, content: is conducted with care and precision, which is essential in a laboratory setting. The person is likely preparing a solution of a specific concentration, a...
2025-11-30 19:12:32,774 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_3 ~232 words, content: person is wearing a blue glove on their right hand and a black glove on their left hand. The video ends with the person still...
2025-11-30 19:12:32,774 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_4 ~123 words, content: critical to the experiment's outcome. - **Progression of the Procedure:** The person continues to add the clear liquid from the pipette into the volumetric flask....
2025-11-30 19:12:32,794 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:12:32,872 - src.components.pre_llm_injector - DEBUG - Found 181 existing chunk embeddings for similarity lookup
2025-11-30 19:12:32,921 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3', '0.793'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.773')]
2025-11-30 19:12:32,922 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1
2025-11-30 19:12:32,922 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3
2025-11-30 19:12:32,941 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Scientist / ID: 36_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Researcher / ID: 32_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0)
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Draft Shield / ID: 10_1)-[IS_CLOSED]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Researcher / ID: 32_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Balance / ID: 4_2)-[DISPLAYS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0)
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_0', '0.752'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_4', '0.736')]
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3', '0.793'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.773')]
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_2', '0.723'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_1', '0.678')]
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_1', '0.660'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.655')]
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.768'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5', '0.738')]
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:12:32,945 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_0) (~217 words) with timeout=5.0s retries=3
2025-11-30 19:12:34,389 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:12:34,389 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:12:34,390 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_1) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:12:36,050 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:12:36,050 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:12:36,050 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_2) (~239 words) with timeout=5.0s retries=3
2025-11-30 19:12:37,290 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:12:37,290 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:12:37,291 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_3) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:12:38,224 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:12:38,225 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:12:38,225 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_4) (~123 words) with timeout=5.0s retries=3
2025-11-30 19:12:39,377 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:12:39,377 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:12:39,377 - src.components.pre_llm_injector - INFO - Extracted 25 local triplets from 5 chunks
2025-11-30 19:12:39,377 - src.pipeline.kg_builder - INFO - Pre-extraction: 25 triplets in 6.60s
2025-11-30 19:12:39,378 - src.components.global_refiner - INFO - Capping refinement input: 25 → 15 triplets
2025-11-30 19:12:39,378 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Scientist / ID: 36_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Researcher / ID: 32_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Draft Shield / ID: 10_1)-[IS_CLOSED]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Researcher / ID: 32_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Balance / ID: 4_2)-[DISPLAYS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["38_0", "38_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Pipette", "source_chunks": ["38_0"]}, {"head": "Glass_Pipette", "relation": "Transfers", "tail": "Clear_Liquid", "source_chunks": ["38_0"]}, {"head": "Glass_Pipette", "relation": "Dispenses", "tail": "Clear_Liquid", "source_chunks": ["38_0"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated_Cylinder", "source_chunks": ["38_0", "38_2"]}, {"head": "Graduated_Cylinder", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["38_0", "38_2"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated Cylinder", "source_chunks": ["38_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["38_1", "38_2"]}, {"head": "Graduated Cylinder", "relation": "Contains", "tail": "Liquid", "source_chunks": ["38_1"]}, {"head": "Person", "relation": "Observes", "tail": "Liquid Level", "source_chunks": ["38_1"]}, {"head": "Digital Scale", "relation": "Is In Background", "tail": "Laboratory Bench", "source_chunks": ["38_1"]}, {"head": "Laboratory Bench", "relation": "Contains", "tail": "Beaker", "source_chunks": ["38_1"]}, {"head": "Person", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["38_2", "38_3"]}, {"head": "Liquid", "relation": "Is Transferred To", "tail": "Glass_Vial", "source_chunks": ["38_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["38_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:12:39,379 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2097 words, ~2726 tokens)
2025-11-30 19:12:39,379 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:12:39,398 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 7403 input tokens (2000 > 8192 - 7403). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:12:39,398 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:12:39,398 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:12:39,399 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:12:39,399 - src.pipeline.kg_builder - INFO - Pushing batch 39/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:12:39,399 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:12:39,597 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=403, relationships=379
2025-11-30 19:12:39,598 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:12:39,602 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=403, relationships=379
2025-11-30 19:12:39,603 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:12:39,603 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:12:39,603 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:12:39,603 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.20s, indexes: 0.00s)
2025-11-30 19:12:39,604 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 186, 'with_embedding': 186, 'linked_chunks': 148}
2025-11-30 19:12:39,604 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:12:39,680 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 403 nodes
2025-11-30 19:12:39,849 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 365 nodes
2025-11-30 19:12:40,038 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 403, 'relationship_count': 1237, 'density': 0.0076, 'avg_degree': 6.139, 'avg_unique_neighbors': 6.1042, 'global_efficiency': 0.3311, 'avg_path_length': 2.6731, 'avg_degree_centrality': 0.0153, 'max_degree_centrality': 0.5373, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0526, 'degree_assortativity': -0.1714, 'graph_robustness': 0.8432, 'diameter_estimate': 5, 'clustering_coefficient': 0.2789, 'weakly_connected_components': 39, 'largest_wcc_size': 365, 'pagerank_top10_percent': 7.41, 'louvain_communities': 50, 'louvain_modularity': 0.4034, 'label_entropy': 1.4979, 'computational_time': 0.43402531603351235}
2025-11-30 19:12:40,038 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 38, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501160.038913, 'total_time': 7.270988650037907, 'aggregation': 2.9799994081258774e-06, 'network_info': 0.005546865984797478, 'llm_extraction': 6.625365271931514, 'data_cleaning': 1.7407000996172428e-05, 'neo4j_injection': 0.20457343303132802, 'embedding_time': 0, 'indexing_time': 0.001356172957457602, 'graph_injection_time': 0.20299301797058433, 'acs_metrics': {'node_count': 403, 'relationship_count': 1237, 'density': 0.0076, 'avg_degree': 6.139, 'avg_unique_neighbors': 6.1042, 'global_efficiency': 0.3311, 'avg_path_length': 2.6731, 'avg_degree_centrality': 0.0153, 'max_degree_centrality': 0.5373, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0526, 'degree_assortativity': -0.1714, 'graph_robustness': 0.8432, 'diameter_estimate': 5, 'clustering_coefficient': 0.2789, 'weakly_connected_components': 39, 'largest_wcc_size': 365, 'pagerank_top10_percent': 7.41, 'louvain_communities': 50, 'louvain_modularity': 0.4034, 'label_entropy': 1.4979, 'computational_time': 0.43402531603351235}, 'retrieval_queries': []}
2025-11-30 19:12:40,039 - src.pipeline.kg_builder - DEBUG - Batch 38 metrics: {
  "batch_idx": 38,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501160.038913,
  "total_time": 7.270988650037907,
  "aggregation": 2.9799994081258774e-06,
  "network_info": 0.005546865984797478,
  "llm_extraction": 6.625365271931514,
  "data_cleaning": 1.7407000996172428e-05,
  "neo4j_injection": 0.20457343303132802,
  "embedding_time": 0,
  "indexing_time": 0.001356172957457602,
  "graph_injection_time": 0.20299301797058433,
  "acs_metrics": {
    "node_count": 403,
    "relationship_count": 1237,
    "density": 0.0076,
    "avg_degree": 6.139,
    "avg_unique_neighbors": 6.1042,
    "global_efficiency": 0.3311,
    "avg_path_length": 2.6731,
    "avg_degree_centrality": 0.0153,
    "max_degree_centrality": 0.5373,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0526,
    "degree_assortativity": -0.1714,
    "graph_robustness": 0.8432,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2789,
    "weakly_connected_components": 39,
    "largest_wcc_size": 365,
    "pagerank_top10_percent": 7.41,
    "louvain_communities": 50,
    "louvain_modularity": 0.4034,
    "label_entropy": 1.4979,
    "computational_time": 0.43402531603351235
  },
  "retrieval_queries": []
}
2025-11-30 19:12:40,039 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:12:40,039 - src.pipeline.kg_builder - INFO - Batch 39 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 6.63s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.43s
2025-11-30 19:12:40,039 - src.pipeline.kg_builder - INFO - Batch 39 completed in 7.27s
Processing KG batches:  54%|█████▍    | 39/72 [11:19<07:26, 13.52s/it]2025-11-30 19:12:40,039 - src.pipeline.kg_builder - INFO - Processing batch 40/72 (3 items)
2025-11-30 19:12:40,039 - src.pipeline.kg_builder - DEBUG - Batch 40 current_video_time: 09:53-09:58
2025-11-30 19:12:40,045 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 403
- Total Relationships: 379
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:12:40,045 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:12:40,046 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_0 ~222 words, content: Time: 09:43-09:48 Content: The video sequence captures a detailed laboratory procedure, likely the preparation of a chemical solution, from a first-person perspective. The scene is...
2025-11-30 19:12:40,046 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_1 ~235 words, content: **Final Transfer:** In the final frames, the person is again seen pouring a liquid from a small test tube into the larger flask. This action...
2025-11-30 19:12:40,046 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_2 ~225 words, content: contributing to the context of a scientific experiment. The overall action is one of meticulous measurement and preparation. Time: 09:53-09:58 Content: The video sequence captures...
2025-11-30 19:12:40,046 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_3 ~227 words, content: . - **Frame 3:** The person has placed the volumetric flask back on the balance. The display now shows a non-zero value, indicating that the...
2025-11-30 19:12:40,066 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:12:40,144 - src.components.pre_llm_injector - DEBUG - Found 186 existing chunk embeddings for similarity lookup
2025-11-30 19:12:40,184 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2', '0.879'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.814')]
2025-11-30 19:12:40,185 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2
2025-11-30 19:12:40,185 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4 via source_chunk_ids
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2: Subgraph: (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Precision Balance / ID: 0_0)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3)
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2', '0.879'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_4', '0.514')]
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_2', '0.722'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.699')]
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.599'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_2', '0.583')]
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.814'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.796')]
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:12:40,202 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_0) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:12:41,472 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:12:41,472 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:12:41,472 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_1) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:12:42,758 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:12:42,758 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:12:42,759 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_2) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:12:44,150 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:12:44,150 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:12:44,151 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_3) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:12:45,214 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:12:45,214 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:12:45,214 - src.components.pre_llm_injector - INFO - Extracted 22 local triplets from 4 chunks
2025-11-30 19:12:45,214 - src.pipeline.kg_builder - INFO - Pre-extraction: 22 triplets in 5.17s
2025-11-30 19:12:45,214 - src.components.global_refiner - INFO - Capping refinement input: 22 → 15 triplets
2025-11-30 19:12:45,214 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_2: Subgraph: (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Precision Balance / ID: 0_0)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["39_0", "39_1", "39_2"]}, {"head": "Person", "relation": "Holds", "tail": "Test_Tube", "source_chunks": ["39_0"]}, {"head": "Person", "relation": "Pours", "tail": "Liquid", "source_chunks": ["39_0"]}, {"head": "Liquid", "relation": "Flows Into", "tail": "Flask", "source_chunks": ["39_0"]}, {"head": "Person", "relation": "Uses", "tail": "Digital_Balance", "source_chunks": ["39_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "0.0000_G", "source_chunks": ["39_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Pipette", "source_chunks": ["39_1"]}, {"head": "Person", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["39_1"]}, {"head": "Glass_Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["39_1"]}, {"head": "Digital_Balance", "relation": "Is On", "tail": "Lab_Bench", "source_chunks": ["39_1"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Digital_Balance", "source_chunks": ["39_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["39_2"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["39_2"]}, {"head": "Volumetric_Flask", "relation": "Is On", "tail": "Precision_Balance", "source_chunks": ["39_2"]}, {"head": "Precision_Balance", "relation": "Displays", "tail": "Zero_Gram", "source_chunks": ["39_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:12:45,214 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1938 words, ~2519 tokens)
2025-11-30 19:12:45,214 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:12:45,234 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 6782 input tokens (2000 > 8192 - 6782). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:12:45,234 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:12:45,234 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:12:45,234 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:12:45,234 - src.pipeline.kg_builder - INFO - Pushing batch 40/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:12:45,235 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:12:45,380 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=410, relationships=386
2025-11-30 19:12:45,380 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:12:45,385 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=410, relationships=386
2025-11-30 19:12:45,386 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:12:45,386 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:12:45,387 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:12:45,387 - src.components.neo4j_handler - INFO - Batch injected in 0.15s (triplets: 0.15s, indexes: 0.00s)
2025-11-30 19:12:45,388 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 190, 'with_embedding': 190, 'linked_chunks': 151}
2025-11-30 19:12:45,388 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:12:45,462 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 410 nodes
2025-11-30 19:12:45,632 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 371 nodes
2025-11-30 19:12:45,827 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 410, 'relationship_count': 1264, 'density': 0.0075, 'avg_degree': 6.1659, 'avg_unique_neighbors': 6.122, 'global_efficiency': 0.3302, 'avg_path_length': 2.676, 'avg_degree_centrality': 0.0151, 'max_degree_centrality': 0.5355, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0458, 'degree_assortativity': -0.1665, 'graph_robustness': 0.8426, 'diameter_estimate': 5, 'clustering_coefficient': 0.2791, 'weakly_connected_components': 40, 'largest_wcc_size': 371, 'pagerank_top10_percent': 7.29, 'louvain_communities': 51, 'louvain_modularity': 0.414, 'label_entropy': 1.4981, 'computational_time': 0.4385839249007404}
2025-11-30 19:12:45,827 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 39, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501165.827362, 'total_time': 5.787425404996611, 'aggregation': 3.1010713428258896e-06, 'network_info': 0.005510334973223507, 'llm_extraction': 5.189273776020855, 'data_cleaning': 1.356296706944704e-05, 'neo4j_injection': 0.15234923094976693, 'embedding_time': 0, 'indexing_time': 0.0013322419254109263, 'graph_injection_time': 0.15082677593454719, 'acs_metrics': {'node_count': 410, 'relationship_count': 1264, 'density': 0.0075, 'avg_degree': 6.1659, 'avg_unique_neighbors': 6.122, 'global_efficiency': 0.3302, 'avg_path_length': 2.676, 'avg_degree_centrality': 0.0151, 'max_degree_centrality': 0.5355, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0458, 'degree_assortativity': -0.1665, 'graph_robustness': 0.8426, 'diameter_estimate': 5, 'clustering_coefficient': 0.2791, 'weakly_connected_components': 40, 'largest_wcc_size': 371, 'pagerank_top10_percent': 7.29, 'louvain_communities': 51, 'louvain_modularity': 0.414, 'label_entropy': 1.4981, 'computational_time': 0.4385839249007404}, 'retrieval_queries': []}
2025-11-30 19:12:45,827 - src.pipeline.kg_builder - DEBUG - Batch 39 metrics: {
  "batch_idx": 39,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501165.827362,
  "total_time": 5.787425404996611,
  "aggregation": 3.1010713428258896e-06,
  "network_info": 0.005510334973223507,
  "llm_extraction": 5.189273776020855,
  "data_cleaning": 1.356296706944704e-05,
  "neo4j_injection": 0.15234923094976693,
  "embedding_time": 0,
  "indexing_time": 0.0013322419254109263,
  "graph_injection_time": 0.15082677593454719,
  "acs_metrics": {
    "node_count": 410,
    "relationship_count": 1264,
    "density": 0.0075,
    "avg_degree": 6.1659,
    "avg_unique_neighbors": 6.122,
    "global_efficiency": 0.3302,
    "avg_path_length": 2.676,
    "avg_degree_centrality": 0.0151,
    "max_degree_centrality": 0.5355,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0458,
    "degree_assortativity": -0.1665,
    "graph_robustness": 0.8426,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2791,
    "weakly_connected_components": 40,
    "largest_wcc_size": 371,
    "pagerank_top10_percent": 7.29,
    "louvain_communities": 51,
    "louvain_modularity": 0.414,
    "label_entropy": 1.4981,
    "computational_time": 0.4385839249007404
  },
  "retrieval_queries": []
}
2025-11-30 19:12:45,828 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:12:45,828 - src.pipeline.kg_builder - INFO - Batch 40 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.19s, Clean: 0.00s, Neo4j: 0.15s, ACS: 0.44s
2025-11-30 19:12:45,828 - src.pipeline.kg_builder - INFO - Batch 40 completed in 5.79s
Processing KG batches:  56%|█████▌    | 40/72 [11:25<05:58, 11.20s/it]2025-11-30 19:12:45,828 - src.pipeline.kg_builder - INFO - Processing batch 41/72 (3 items)
2025-11-30 19:12:45,828 - src.pipeline.kg_builder - DEBUG - Batch 41 current_video_time: 10:08-10:13
2025-11-30 19:12:45,835 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 410
- Total Relationships: 386
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:12:45,835 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:12:45,835 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_0 ~209 words, content: Time: 09:58-10:03 Content: The video sequence captures a detailed laboratory procedure, likely a chemical titration or solution preparation, from a first-person perspective. The scene is...
2025-11-30 19:12:45,835 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1 ~224 words, content: , which is a METTLER TOLEDO model, is visible in the background, indicating that the procedure may involve weighing the liquid to ensure accuracy. The...
2025-11-30 19:12:45,835 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_2 ~233 words, content: tte, filled with a clear liquid. The person is carefully adjusting the liquid level in the burette, a common step in titration experiments to ensure...
2025-11-30 19:12:45,835 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_3 ~207 words, content: of precision and accuracy in laboratory work. In summary, the video shows a person preparing a solution for a titration experiment. They carefully adjust the...
2025-11-30 19:12:45,835 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_4 ~170 words, content: markings. - **Pipette:** Used to transfer a precise volume of liquid from the flask to the burette. - **Round-Bottom Flask:** Contains a clear liquid and...
2025-11-30 19:12:45,855 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:12:45,936 - src.components.pre_llm_injector - DEBUG - Found 190 existing chunk embeddings for similarity lookup
2025-11-30 19:12:45,989 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.838'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.834')]
2025-11-30 19:12:45,991 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4 via source_chunk_ids
2025-11-30 19:12:45,992 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3)
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1', '0.762'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_4', '0.758')]
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_2', '0.824'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_1', '0.704')]
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.709'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.692')]
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_2', '0.733'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.721')]
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.838'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.834')]
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:12:46,005 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_0) (~209 words) with timeout=5.0s retries=3
2025-11-30 19:12:47,227 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:12:47,227 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:12:47,227 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:12:48,386 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:12:48,386 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:12:48,387 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_2) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:12:49,348 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:12:49,348 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:12:49,349 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_3) (~207 words) with timeout=5.0s retries=3
2025-11-30 19:12:50,459 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:12:50,459 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:12:50,459 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_4) (~170 words) with timeout=5.0s retries=3
2025-11-30 19:12:52,043 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:12:52,043 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:12:52,043 - src.components.pre_llm_injector - INFO - Extracted 22 local triplets from 5 chunks
2025-11-30 19:12:52,043 - src.pipeline.kg_builder - INFO - Pre-extraction: 22 triplets in 6.21s
2025-11-30 19:12:52,044 - src.components.global_refiner - INFO - Capping refinement input: 22 → 15 triplets
2025-11-30 19:12:52,044 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["40_0", "40_3"]}, {"head": "Person", "relation": "Holds", "tail": "Burette", "source_chunks": ["40_0", "40_3"]}, {"head": "Person", "relation": "Holds", "tail": "Volumetric_Flask", "source_chunks": ["40_0"]}, {"head": "Burette", "relation": "Contains", "tail": "Liquid", "source_chunks": ["40_0", "40_2", "40_3"]}, {"head": "Volumetric_Flask", "relation": "Contains", "tail": "Liquid", "source_chunks": ["40_0"]}, {"head": "Person", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["40_0", "40_1", "40_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["40_1"]}, {"head": "Person", "relation": "Handles", "tail": "Burette", "source_chunks": ["40_1"]}, {"head": "Burette", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["40_1"]}, {"head": "Digital Balance", "relation": "Is Used For", "tail": "Weighing", "source_chunks": ["40_1"]}, {"head": "Lab Environment", "relation": "Emphasizes", "tail": "Accuracy And Safety", "source_chunks": ["40_1"]}, {"head": "Person", "relation": "Adjusts", "tail": "Burette", "source_chunks": ["40_2"]}, {"head": "Liquid", "relation": "Is In", "tail": "Flask", "source_chunks": ["40_2"]}, {"head": "Liquid", "relation": "Is In", "tail": "Burette", "source_chunks": ["40_2"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["40_2", "40_3"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:12:52,044 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1372 words, ~1784 tokens)
2025-11-30 19:12:52,044 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:13:04,702 - src.components.global_refiner - DEBUG - LLM call completed in 12.66s
2025-11-30 19:13:04,702 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['40_0', '40_3']], ['Person', 'Holds', 'Burette', ['40_0', '40_3']], ['Person', 'Holds', 'Volumetric_Flask', ['40_0']], ['Burette', 'Contains', 'Liquid', ['40_0', '40_2', '40_3']], ['Volumetric_Flask', 'Contains', 'Liquid', ['40_0']], ['Person', 'Transfers', 'Liquid', ['40_0', '40_1', '40_2']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['40_1']], ['Person', 'Handles', 'Burette', ['40_1']], ['Burette', 'Contains', 'Clear Liquid', ['40_1']], ['Digital Balance', 'Is Used For', 'Weighing', ['40_1']], ['Lab Environment', 'Emphasizes', 'Accuracy And Safety', ['40_1']], ['Person', 'Adjusts', 'Burette', ['40_2']], ['Liquid', 'Is In', 'Flask', ['40_2']], ['Liquid', 'Is In', 'Burette', ['40_2']], ['Person', 'Uses', 'Pipette', ['40_2', '40_3']]] inter_chunk_relations=[['Person', 'Holds', 'Laboratory Table', ['40_0', '40_3']], ['Person', 'Holds', 'Laboratory Table', ['40_0']], ['Person', 'Holds', 'Laboratory Table', ['40_1']], ['Person', 'Holds', 'Laboratory Table', ['40_2']], ['Person', 'Holds', 'Laboratory Table', ['40_3']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:13:04,702 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['40_0', '40_3']], ['Person', 'Holds', 'Burette', ['40_0', '40_3']], ['Person', 'Holds', 'Volumetric_Flask', ['40_0']]]
2025-11-30 19:13:04,702 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Person', 'Holds', 'Laboratory Table', ['40_0', '40_3']], ['Person', 'Holds', 'Laboratory Table', ['40_0']], ['Person', 'Holds', 'Laboratory Table', ['40_1']]]
2025-11-30 19:13:04,702 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=1, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:13:04,702 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}]
2025-11-30 19:13:04,702 - src.components.global_refiner - INFO - LLM suggested 1 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}]
2025-11-30 19:13:04,702 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}]
2025-11-30 19:13:04,702 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 12.66s, LLM: 12.66s)
2025-11-30 19:13:04,702 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 12.66s
2025-11-30 19:13:04,702 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:13:04,703 - src.pipeline.kg_builder - INFO - Pushing batch 41/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:13:04,703 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:13:04,889 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=418, relationships=396
2025-11-30 19:13:04,889 - src.components.neo4j_handler - INFO - Applying 1 merge instructions
2025-11-30 19:13:04,890 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:13:04,890 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:13:04,896 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue Glove
2025-11-30 19:13:04,897 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:13:04,897 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Glove
2025-11-30 19:13:04,898 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:13:04,898 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:13:04,899 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:13:04,900 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:13:04,901 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:13:04,902 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:13:04,903 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Laboratory Table
2025-11-30 19:13:04,903 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:13:04,907 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=417, relationships=393
2025-11-30 19:13:04,908 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:13:04,908 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:13:04,909 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:13:04,909 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.20s, indexes: 0.00s)
2025-11-30 19:13:04,910 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 195, 'with_embedding': 195, 'linked_chunks': 155}
2025-11-30 19:13:04,910 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:13:04,985 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 417 nodes
2025-11-30 19:13:05,156 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 377 nodes
2025-11-30 19:13:05,352 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 417, 'relationship_count': 1292, 'density': 0.0074, 'avg_degree': 6.1966, 'avg_unique_neighbors': 6.1487, 'global_efficiency': 0.329, 'avg_path_length': 2.6807, 'avg_degree_centrality': 0.0149, 'max_degree_centrality': 0.5312, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0427, 'degree_assortativity': -0.1592, 'graph_robustness': 0.8375, 'diameter_estimate': 5, 'clustering_coefficient': 0.2667, 'weakly_connected_components': 41, 'largest_wcc_size': 377, 'pagerank_top10_percent': 7.18, 'louvain_communities': 51, 'louvain_modularity': 0.4072, 'label_entropy': 1.4985, 'computational_time': 0.4417236549779773}
2025-11-30 19:13:05,352 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 40, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501185.352266, 'total_time': 19.5238581369631, 'aggregation': 2.9819784685969353e-06, 'network_info': 0.006496052956208587, 'llm_extraction': 18.86792060895823, 'data_cleaning': 3.603310324251652e-05, 'neo4j_injection': 0.20611665397882462, 'embedding_time': 0, 'indexing_time': 0.001314002089202404, 'graph_injection_time': 0.20445179706439376, 'acs_metrics': {'node_count': 417, 'relationship_count': 1292, 'density': 0.0074, 'avg_degree': 6.1966, 'avg_unique_neighbors': 6.1487, 'global_efficiency': 0.329, 'avg_path_length': 2.6807, 'avg_degree_centrality': 0.0149, 'max_degree_centrality': 0.5312, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0427, 'degree_assortativity': -0.1592, 'graph_robustness': 0.8375, 'diameter_estimate': 5, 'clustering_coefficient': 0.2667, 'weakly_connected_components': 41, 'largest_wcc_size': 377, 'pagerank_top10_percent': 7.18, 'louvain_communities': 51, 'louvain_modularity': 0.4072, 'label_entropy': 1.4985, 'computational_time': 0.4417236549779773}, 'retrieval_queries': []}
2025-11-30 19:13:05,352 - src.pipeline.kg_builder - DEBUG - Batch 40 metrics: {
  "batch_idx": 40,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501185.352266,
  "total_time": 19.5238581369631,
  "aggregation": 2.9819784685969353e-06,
  "network_info": 0.006496052956208587,
  "llm_extraction": 18.86792060895823,
  "data_cleaning": 3.603310324251652e-05,
  "neo4j_injection": 0.20611665397882462,
  "embedding_time": 0,
  "indexing_time": 0.001314002089202404,
  "graph_injection_time": 0.20445179706439376,
  "acs_metrics": {
    "node_count": 417,
    "relationship_count": 1292,
    "density": 0.0074,
    "avg_degree": 6.1966,
    "avg_unique_neighbors": 6.1487,
    "global_efficiency": 0.329,
    "avg_path_length": 2.6807,
    "avg_degree_centrality": 0.0149,
    "max_degree_centrality": 0.5312,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0427,
    "degree_assortativity": -0.1592,
    "graph_robustness": 0.8375,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2667,
    "weakly_connected_components": 41,
    "largest_wcc_size": 377,
    "pagerank_top10_percent": 7.18,
    "louvain_communities": 51,
    "louvain_modularity": 0.4072,
    "label_entropy": 1.4985,
    "computational_time": 0.4417236549779773
  },
  "retrieval_queries": []
}
2025-11-30 19:13:05,353 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:13:05,353 - src.pipeline.kg_builder - INFO - Batch 41 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 18.87s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.44s
2025-11-30 19:13:05,353 - src.pipeline.kg_builder - INFO - Batch 41 completed in 19.52s
Processing KG batches:  57%|█████▋    | 41/72 [11:44<07:04, 13.70s/it]2025-11-30 19:13:05,353 - src.pipeline.kg_builder - INFO - Processing batch 42/72 (3 items)
2025-11-30 19:13:05,353 - src.pipeline.kg_builder - DEBUG - Batch 42 current_video_time: 10:23-10:28
2025-11-30 19:13:05,358 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 417
- Total Relationships: 393
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:13:05,359 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:13:05,359 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_0 ~220 words, content: Time: 10:13-10:18 Content: The sequence of frames captures a precise laboratory procedure, likely a titration or the preparation of a solution, from a first-person perspective....
2025-11-30 19:13:05,359 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1 ~227 words, content: clear. The action is deliberate and controlled, suggesting a need for precision. - **Final Adjustment:** The person continues to add the liquid from the pipette...
2025-11-30 19:13:05,359 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_2 ~229 words, content: The person's right hand is using a pipette to add a clear liquid drop by drop into the graduated cylinder. The liquid being added is...
2025-11-30 19:13:05,359 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3 ~226 words, content: digital balance, a magnetic stirrer, and a volumetric flask. - **Initial Action:** The primary focus is on a person wearing blue nitrile gloves, who is...
2025-11-30 19:13:05,359 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_4 ~54 words, content: is one of concentration and precision, highlighting the importance of accuracy in scientific research. In summary, the video shows a detailed and methodical process of...
2025-11-30 19:13:05,379 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:13:05,459 - src.components.pre_llm_injector - DEBUG - Found 195 existing chunk embeddings for similarity lookup
2025-11-30 19:13:05,511 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1', '0.843'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.842')]
2025-11-30 19:13:05,513 - src.components.pre_llm_injector - DEBUG - Found 9 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1
2025-11-30 19:13:05,514 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2
2025-11-30 19:13:05,540 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1)
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1: Subgraph: (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Analytical_Balance / ID: 9_0)-[DISPLAYS]->(20.20 / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Analytical_Balance / ID: 9_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Analytical_Balance / ID: 9_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1)
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_3', '0.781'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3', '0.624')]
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1', '0.820'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_2', '0.787')]
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_3', '0.838'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5', '0.660')]
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1', '0.843'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.842')]
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.796'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_5', '0.768')]
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:13:05,542 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_0) (~220 words) with timeout=5.0s retries=3
2025-11-30 19:13:06,803 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:13:06,803 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:13:06,803 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:13:07,929 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:13:07,929 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:13:07,930 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_2) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:13:09,195 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:13:09,195 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:13:09,195 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:13:10,434 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:13:10,434 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:13:10,435 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_4) (~54 words) with timeout=5.0s retries=3
2025-11-30 19:13:11,611 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:13:11,611 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:13:11,611 - src.components.pre_llm_injector - INFO - Extracted 27 local triplets from 5 chunks
2025-11-30 19:13:11,611 - src.pipeline.kg_builder - INFO - Pre-extraction: 27 triplets in 6.25s
2025-11-30 19:13:11,612 - src.components.global_refiner - INFO - Capping refinement input: 27 → 15 triplets
2025-11-30 19:13:11,612 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2: Subgraph: (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Camera / ID: 0_1)-[PANS_ACROSS]->(Laboratory / ID: 0_1), (Man / ID: 0_2)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Power Strip / ID: 3_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Lab Apparatus / ID: 3_1), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Cabinets / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_1: Subgraph: (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Man / ID: 0_2)-[HOLDS]->(Document / ID: 0_2), (Document / ID: 0_2)-[HAS_TITLE]->(Ar_Glasses_Training_Chemistry_Experiment_Report_Simplified_Version / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Document / ID: 0_2)-[CONTAINS]->(Chemical Equation / ID: 2_0), (Document / ID: 0_2)-[CONTAINS]->(Measured Volume / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Document / ID: 0_2)-[IS_ON]->(Black Countertop / ID: 3_1), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Analytical_Balance / ID: 9_0)-[DISPLAYS]->(20.20 / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Analytical_Balance / ID: 9_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Document / ID: 0_2)-[CONTAINS]->(Chinese_Text / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Analytical_Balance / ID: 9_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Nitrile_Gloves", "source_chunks": ["41_0"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated_Cylinder", "source_chunks": ["41_0"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["41_0", "41_2", "41_3"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["41_0"]}, {"head": "Graduated_Cylinder", "relation": "Receives", "tail": "Liquid", "source_chunks": ["41_0"]}, {"head": "Person", "relation": "Adds", "tail": "Liquid_To_Graduated_Cylinder", "source_chunks": ["41_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["41_1"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated Cylinder", "source_chunks": ["41_1"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["41_1", "41_3"]}, {"head": "Pipette", "relation": "Adds", "tail": "Liquid", "source_chunks": ["41_1"]}, {"head": "Graduated Cylinder", "relation": "Receives", "tail": "Liquid", "source_chunks": ["41_1"]}, {"head": "Person", "relation": "Performs", "tail": "Precise Liquid Transfer", "source_chunks": ["41_1"]}, {"head": "Pipette", "relation": "Dispenses", "tail": "Liquid", "source_chunks": ["41_2"]}, {"head": "Liquid", "relation": "Enters", "tail": "Graduated Cylinder", "source_chunks": ["41_2"]}, {"head": "Person", "relation": "Observes", "tail": "Graduated Cylinder", "source_chunks": ["41_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:13:11,613 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2735 words, ~3556 tokens)
2025-11-30 19:13:11,613 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:13:11,636 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 9772 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:13:11,636 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:13:11,636 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:13:11,636 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:13:11,636 - src.pipeline.kg_builder - INFO - Pushing batch 42/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:13:11,636 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:13:11,789 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=426, relationships=402
2025-11-30 19:13:11,790 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:13:11,795 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=426, relationships=402
2025-11-30 19:13:11,797 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:13:11,797 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:13:11,797 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:13:11,798 - src.components.neo4j_handler - INFO - Batch injected in 0.16s (triplets: 0.16s, indexes: 0.00s)
2025-11-30 19:13:11,799 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 200, 'with_embedding': 200, 'linked_chunks': 159}
2025-11-30 19:13:11,799 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:13:11,877 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 426 nodes
2025-11-30 19:13:12,060 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 385 nodes
2025-11-30 19:13:12,270 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 426, 'relationship_count': 1316, 'density': 0.0073, 'avg_degree': 6.1784, 'avg_unique_neighbors': 6.1268, 'global_efficiency': 0.3299, 'avg_path_length': 2.6689, 'avg_degree_centrality': 0.0145, 'max_degree_centrality': 0.5388, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0353, 'degree_assortativity': -0.1703, 'graph_robustness': 0.8397, 'diameter_estimate': 5, 'clustering_coefficient': 0.2695, 'weakly_connected_components': 42, 'largest_wcc_size': 385, 'pagerank_top10_percent': 7.04, 'louvain_communities': 53, 'louvain_modularity': 0.4084, 'label_entropy': 1.4987, 'computational_time': 0.47074511100072414}
2025-11-30 19:13:12,270 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 41, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501192.2702842, 'total_time': 6.916891303029843, 'aggregation': 2.6480993255972862e-06, 'network_info': 0.005384984076954424, 'llm_extraction': 6.277513445005752, 'data_cleaning': 1.6121077351272106e-05, 'neo4j_injection': 0.16155714204069227, 'embedding_time': 0, 'indexing_time': 0.0022880310425534844, 'graph_injection_time': 0.1590480440063402, 'acs_metrics': {'node_count': 426, 'relationship_count': 1316, 'density': 0.0073, 'avg_degree': 6.1784, 'avg_unique_neighbors': 6.1268, 'global_efficiency': 0.3299, 'avg_path_length': 2.6689, 'avg_degree_centrality': 0.0145, 'max_degree_centrality': 0.5388, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0353, 'degree_assortativity': -0.1703, 'graph_robustness': 0.8397, 'diameter_estimate': 5, 'clustering_coefficient': 0.2695, 'weakly_connected_components': 42, 'largest_wcc_size': 385, 'pagerank_top10_percent': 7.04, 'louvain_communities': 53, 'louvain_modularity': 0.4084, 'label_entropy': 1.4987, 'computational_time': 0.47074511100072414}, 'retrieval_queries': []}
2025-11-30 19:13:12,270 - src.pipeline.kg_builder - DEBUG - Batch 41 metrics: {
  "batch_idx": 41,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501192.2702842,
  "total_time": 6.916891303029843,
  "aggregation": 2.6480993255972862e-06,
  "network_info": 0.005384984076954424,
  "llm_extraction": 6.277513445005752,
  "data_cleaning": 1.6121077351272106e-05,
  "neo4j_injection": 0.16155714204069227,
  "embedding_time": 0,
  "indexing_time": 0.0022880310425534844,
  "graph_injection_time": 0.1590480440063402,
  "acs_metrics": {
    "node_count": 426,
    "relationship_count": 1316,
    "density": 0.0073,
    "avg_degree": 6.1784,
    "avg_unique_neighbors": 6.1268,
    "global_efficiency": 0.3299,
    "avg_path_length": 2.6689,
    "avg_degree_centrality": 0.0145,
    "max_degree_centrality": 0.5388,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0353,
    "degree_assortativity": -0.1703,
    "graph_robustness": 0.8397,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2695,
    "weakly_connected_components": 42,
    "largest_wcc_size": 385,
    "pagerank_top10_percent": 7.04,
    "louvain_communities": 53,
    "louvain_modularity": 0.4084,
    "label_entropy": 1.4987,
    "computational_time": 0.47074511100072414
  },
  "retrieval_queries": []
}
2025-11-30 19:13:12,271 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:13:12,271 - src.pipeline.kg_builder - INFO - Batch 42 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 6.28s, Clean: 0.00s, Neo4j: 0.16s, ACS: 0.47s
2025-11-30 19:13:12,271 - src.pipeline.kg_builder - INFO - Batch 42 completed in 6.92s
Processing KG batches:  58%|█████▊    | 42/72 [11:51<05:49, 11.66s/it]2025-11-30 19:13:12,271 - src.pipeline.kg_builder - INFO - Processing batch 43/72 (3 items)
2025-11-30 19:13:12,271 - src.pipeline.kg_builder - DEBUG - Batch 43 current_video_time: 10:38-10:43
2025-11-30 19:13:12,278 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 426
- Total Relationships: 402
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:13:12,279 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:13:12,279 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_0 ~222 words, content: Time: 10:28-10:33 Content: The video captures a detailed, first-person perspective of a precise laboratory procedure, likely a titration or the preparation of a solution. The...
2025-11-30 19:13:12,279 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1 ~222 words, content: graduated cylinder, ensuring it is stable and properly aligned. The left hand, which is also wearing a black wristwatch, holds the cylinder firmly. The right...
2025-11-30 19:13:12,279 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2 ~222 words, content: and precise, suggesting the importance of accurate measurement. The surrounding environment provides context for the experiment: - To the left, a white bottle with a...
2025-11-30 19:13:12,279 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_3 ~198 words, content: pipette to transfer a clear liquid from a small vial into a larger, empty volumetric flask. The work is being done on a black countertop,...
2025-11-30 19:13:12,299 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:13:12,379 - src.components.pre_llm_injector - DEBUG - Found 200 existing chunk embeddings for similarity lookup
2025-11-30 19:13:12,422 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0', '0.848'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.809')]
2025-11-30 19:13:12,424 - src.components.pre_llm_injector - DEBUG - Found 10 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0
2025-11-30 19:13:12,425 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3
2025-11-30 19:13:12,453 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 41_1), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1)
2025-11-30 19:13:12,456 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0: Subgraph: (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital_Balance / ID: 10_0), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Zero_Grams / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital_Balance / ID: 10_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Scientist / ID: 36_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Researcher / ID: 32_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 41_1), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1)
2025-11-30 19:13:12,456 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0', '0.848'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.750')]
2025-11-30 19:13:12,456 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.614'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.602')]
2025-11-30 19:13:12,456 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.785'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.784')]
2025-11-30 19:13:12,456 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.809'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.789')]
2025-11-30 19:13:12,456 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:13:12,457 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_0) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:13:13,956 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:13:13,956 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:13:13,957 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:13:15,023 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:13:15,023 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:13:15,024 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:13:16,362 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:13:16,363 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:13:16,363 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_3) (~198 words) with timeout=5.0s retries=3
2025-11-30 19:13:17,758 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:13:17,758 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:13:17,759 - src.components.pre_llm_injector - INFO - Extracted 19 local triplets from 4 chunks
2025-11-30 19:13:17,759 - src.pipeline.kg_builder - INFO - Pre-extraction: 19 triplets in 5.48s
2025-11-30 19:13:17,759 - src.components.global_refiner - INFO - Capping refinement input: 19 → 15 triplets
2025-11-30 19:13:17,759 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 41_1), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_0: Subgraph: (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital_Balance / ID: 10_0), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital_Balance / ID: 10_0), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital_Balance / ID: 10_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital_Balance / ID: 10_0)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital_Balance / ID: 10_0)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(Zero_Grams / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital_Balance / ID: 10_0)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital_Balance / ID: 10_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Scientist / ID: 36_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Researcher / ID: 32_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 41_1), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["42_0"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated_Cylinder", "source_chunks": ["42_0"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["42_0", "42_1"]}, {"head": "Pipette", "relation": "Adds", "tail": "Clear_Liquid", "source_chunks": ["42_0"]}, {"head": "Graduated_Cylinder", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["42_0"]}, {"head": "Graduated_Cylinder", "relation": "Rests On", "tail": "Mettler_Toledo_Balance", "source_chunks": ["42_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["42_1", "42_2"]}, {"head": "Person", "relation": "Holds", "tail": "Graduated Cylinder", "source_chunks": ["42_1"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["42_1", "42_2", "42_3"]}, {"head": "Graduated Cylinder", "relation": "Contains", "tail": "Liquid", "source_chunks": ["42_1"]}, {"head": "Person", "relation": "Makes", "tail": "Final Adjustments", "source_chunks": ["42_1"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["42_2", "42_3"]}, {"head": "Beaker", "relation": "Contains", "tail": "Dark Opaque Liquid", "source_chunks": ["42_2"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "0.000 G", "source_chunks": ["42_2"]}, {"head": "Magnetic Stirrer", "relation": "Has", "tail": "Glass Beaker", "source_chunks": ["42_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:13:17,759 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2938 words, ~3819 tokens)
2025-11-30 19:13:17,759 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:13:17,782 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 10607 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:13:17,782 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:13:17,782 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:13:17,782 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:13:17,782 - src.pipeline.kg_builder - INFO - Pushing batch 43/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:13:17,782 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:13:17,956 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=433, relationships=409
2025-11-30 19:13:17,957 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:13:17,962 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=433, relationships=409
2025-11-30 19:13:17,965 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:13:17,965 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:13:17,966 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:13:17,966 - src.components.neo4j_handler - INFO - Batch injected in 0.18s (triplets: 0.18s, indexes: 0.00s)
2025-11-30 19:13:17,968 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 204, 'with_embedding': 204, 'linked_chunks': 163}
2025-11-30 19:13:17,968 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:13:18,028 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 433 nodes
2025-11-30 19:13:18,217 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 392 nodes
2025-11-30 19:13:18,430 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 433, 'relationship_count': 1348, 'density': 0.0072, 'avg_degree': 6.2263, 'avg_unique_neighbors': 6.1709, 'global_efficiency': 0.3317, 'avg_path_length': 2.6628, 'avg_degree_centrality': 0.0144, 'max_degree_centrality': 0.544, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0228, 'degree_assortativity': -0.1738, 'graph_robustness': 0.8353, 'diameter_estimate': 5, 'clustering_coefficient': 0.2809, 'weakly_connected_components': 42, 'largest_wcc_size': 392, 'pagerank_top10_percent': 6.93, 'louvain_communities': 52, 'louvain_modularity': 0.4079, 'label_entropy': 1.4988, 'computational_time': 0.4619300009217113}
2025-11-30 19:13:18,430 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 42, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501198.4309366, 'total_time': 6.159554996993393, 'aggregation': 2.7159694582223892e-06, 'network_info': 0.007120471098460257, 'llm_extraction': 5.503713174024597, 'data_cleaning': 1.361197791993618e-05, 'neo4j_injection': 0.18396845099050552, 'embedding_time': 0, 'indexing_time': 0.0037049540551379323, 'graph_injection_time': 0.1800815910100937, 'acs_metrics': {'node_count': 433, 'relationship_count': 1348, 'density': 0.0072, 'avg_degree': 6.2263, 'avg_unique_neighbors': 6.1709, 'global_efficiency': 0.3317, 'avg_path_length': 2.6628, 'avg_degree_centrality': 0.0144, 'max_degree_centrality': 0.544, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0228, 'degree_assortativity': -0.1738, 'graph_robustness': 0.8353, 'diameter_estimate': 5, 'clustering_coefficient': 0.2809, 'weakly_connected_components': 42, 'largest_wcc_size': 392, 'pagerank_top10_percent': 6.93, 'louvain_communities': 52, 'louvain_modularity': 0.4079, 'label_entropy': 1.4988, 'computational_time': 0.4619300009217113}, 'retrieval_queries': []}
2025-11-30 19:13:18,431 - src.pipeline.kg_builder - DEBUG - Batch 42 metrics: {
  "batch_idx": 42,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501198.4309366,
  "total_time": 6.159554996993393,
  "aggregation": 2.7159694582223892e-06,
  "network_info": 0.007120471098460257,
  "llm_extraction": 5.503713174024597,
  "data_cleaning": 1.361197791993618e-05,
  "neo4j_injection": 0.18396845099050552,
  "embedding_time": 0,
  "indexing_time": 0.0037049540551379323,
  "graph_injection_time": 0.1800815910100937,
  "acs_metrics": {
    "node_count": 433,
    "relationship_count": 1348,
    "density": 0.0072,
    "avg_degree": 6.2263,
    "avg_unique_neighbors": 6.1709,
    "global_efficiency": 0.3317,
    "avg_path_length": 2.6628,
    "avg_degree_centrality": 0.0144,
    "max_degree_centrality": 0.544,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0228,
    "degree_assortativity": -0.1738,
    "graph_robustness": 0.8353,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2809,
    "weakly_connected_components": 42,
    "largest_wcc_size": 392,
    "pagerank_top10_percent": 6.93,
    "louvain_communities": 52,
    "louvain_modularity": 0.4079,
    "label_entropy": 1.4988,
    "computational_time": 0.4619300009217113
  },
  "retrieval_queries": []
}
2025-11-30 19:13:18,431 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:13:18,431 - src.pipeline.kg_builder - INFO - Batch 43 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.50s, Clean: 0.00s, Neo4j: 0.18s, ACS: 0.46s
2025-11-30 19:13:18,431 - src.pipeline.kg_builder - INFO - Batch 43 completed in 6.16s
Processing KG batches:  60%|█████▉    | 43/72 [11:57<04:50, 10.01s/it]2025-11-30 19:13:18,431 - src.pipeline.kg_builder - INFO - Processing batch 44/72 (3 items)
2025-11-30 19:13:18,432 - src.pipeline.kg_builder - DEBUG - Batch 44 current_video_time: 10:53-10:58
2025-11-30 19:13:18,438 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 433
- Total Relationships: 409
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_0 ~217 words, content: Time: 10:43-10:48 Content: The video sequence captures a detailed laboratory procedure, likely a chemical preparation or analysis, performed by a person wearing blue nitrile gloves....
2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_1 ~230 words, content: an empty container before tare. This suggests the person has just tared the balance, setting the weight of the empty vial to zero. The person...
2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_2 ~230 words, content: nitrile gloves is handling a small, clear glass vial. In the foreground, a digital analytical balance is visible, with its display reading "0.000". To the...
2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_3 ~220 words, content: . The digital balance is on the left, and the magnetic stirrer is in the center. A person's hand, wearing a blue glove, is seen...
2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_4 ~217 words, content: the left, a digital balance scale is visible, with its display reading `0.000`. To the right, a magnetic stirrer holds a beaker, and a burette...
2025-11-30 19:13:18,438 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_5 ~82 words, content: , remains in place, indicating that the experiment is ongoing. The overall atmosphere is one of concentration and precision, typical of a scientific research environment....
2025-11-30 19:13:18,458 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:13:18,542 - src.components.pre_llm_injector - DEBUG - Found 204 existing chunk embeddings for similarity lookup
2025-11-30 19:13:18,608 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_3', '0.838'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.838')]
2025-11-30 19:13:18,609 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:13:18,610 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_3 via source_chunk_ids
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Aluminum Foil / ID: 3_2)-[IS_INSIDE]->(Weighing Chamber / ID: 31_2), (Aluminum Foil / ID: 3_2)-[HAS_MASS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 41_1), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1)
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.766'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_0', '0.759')]
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_1', '0.779'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.772')]
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_3', '0.781'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.768')]
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_3', '0.838'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1', '0.676')]
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_0', '0.806'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_0', '0.793')]
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.838'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.814')]
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:13:18,623 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_0) (~217 words) with timeout=5.0s retries=3
2025-11-30 19:13:23,630 - src.components.pre_llm_injector - WARNING - Chunk 0 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:13:26,313 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 2)
2025-11-30 19:13:26,313 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:13:26,313 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_1) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:13:27,514 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:13:27,515 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:13:27,515 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_2) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:13:28,931 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:13:28,931 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:13:28,931 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_3) (~220 words) with timeout=5.0s retries=3
2025-11-30 19:13:33,937 - src.components.pre_llm_injector - WARNING - Chunk 3 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:13:39,262 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 2)
2025-11-30 19:13:39,262 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:13:39,262 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_4) (~217 words) with timeout=5.0s retries=3
2025-11-30 19:13:40,642 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:13:40,643 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:13:40,643 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_5) (~82 words) with timeout=5.0s retries=3
2025-11-30 19:13:41,778 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:13:41,778 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:13:41,778 - src.components.pre_llm_injector - INFO - Extracted 35 local triplets from 6 chunks
2025-11-30 19:13:41,778 - src.pipeline.kg_builder - INFO - Pre-extraction: 35 triplets in 23.34s
2025-11-30 19:13:41,779 - src.components.global_refiner - INFO - Capping refinement input: 35 → 15 triplets
2025-11-30 19:13:41,779 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Aluminum Foil / ID: 3_2)-[IS_INSIDE]->(Weighing Chamber / ID: 31_2), (Aluminum Foil / ID: 3_2)-[HAS_MASS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 41_1), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["43_0"]}, {"head": "Person", "relation": "Handles", "tail": "Glass_Vial", "source_chunks": ["43_0"]}, {"head": "Glass_Vial", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["43_0"]}, {"head": "Digital_Balance", "relation": "Displays", "tail": "Zero_Grams", "source_chunks": ["43_0"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Digital_Balance", "source_chunks": ["43_0"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Magnetic_Stirrer", "source_chunks": ["43_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["43_1", "43_4"]}, {"head": "Person", "relation": "Holds", "tail": "Vial", "source_chunks": ["43_1"]}, {"head": "Vial", "relation": "Contains", "tail": "Liquid", "source_chunks": ["43_1"]}, {"head": "Person", "relation": "Uses", "tail": "Digital Balance", "source_chunks": ["43_1"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "0.000 G", "source_chunks": ["43_1"]}, {"head": "Person", "relation": "Performs", "tail": "Weighing Procedure", "source_chunks": ["43_1"]}, {"head": "Person", "relation": "Holds", "tail": "Nitrile Gloves", "source_chunks": ["43_2"]}, {"head": "Nitrile Gloves", "relation": "Holds", "tail": "Glass Vial", "source_chunks": ["43_2"]}, {"head": "Digital Balance", "relation": "Displays", "tail": "0.000", "source_chunks": ["43_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:13:41,779 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1321 words, ~1717 tokens)
2025-11-30 19:13:41,779 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:13:56,412 - src.components.global_refiner - DEBUG - LLM call completed in 14.63s
2025-11-30 19:13:56,412 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['43_0']], ['Person', 'Handles', 'Glass_Vial', ['43_0']], ['Glass_Vial', 'Contains', 'Clear_Liquid', ['43_0']], ['Digital_Balance', 'Displays', 'Zero_Grams', ['43_0']], ['Lab_Bench', 'Contains', 'Digital_Balance', ['43_0']], ['Lab_Bench', 'Contains', 'Magnetic_Stirrer', ['43_0']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['43_1', '43_4']], ['Person', 'Holds', 'Vial', ['43_1']], ['Vial', 'Contains', 'Liquid', ['43_1']], ['Person', 'Uses', 'Digital Balance', ['43_1']], ['Digital_Balance', 'Displays', '0.000 G', ['43_1']], ['Person', 'Performs', 'Weighing Procedure', ['43_1']], ['Person', 'Holds', 'Nitrile Gloves', ['43_2']], ['Nitrile Gloves', 'Holds', 'Glass Vial', ['43_2']], ['Digital_Balance', 'Displays', '0.000', ['43_2']]] inter_chunk_relations=[['Lab_Bench', 'Contains', 'Laboratory Table', ['43_0']], ['Digital_Balance', 'Displays', '0.000 G', ['43_1']], ['Digital_Balance', 'Displays', '0.000', ['43_2']], ['Person', 'Wears', 'Blue_Nitrile_Gloves', ['43_0']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['43_1', '43_4']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Nitrile Gloves', 'existing': 'Nitrile_Gloves', 'existing_id': '41_0'}, {'local': 'Vial', 'existing': 'Glass_Vial', 'existing_id': '34_2'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': 'Zero_Grams'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': '0.000'}]
2025-11-30 19:13:56,412 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['43_0']], ['Person', 'Handles', 'Glass_Vial', ['43_0']], ['Glass_Vial', 'Contains', 'Clear_Liquid', ['43_0']]]
2025-11-30 19:13:56,413 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Lab_Bench', 'Contains', 'Laboratory Table', ['43_0']], ['Digital_Balance', 'Displays', '0.000 G', ['43_1']], ['Digital_Balance', 'Displays', '0.000', ['43_2']]]
2025-11-30 19:13:56,413 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Nitrile Gloves', 'existing': 'Nitrile_Gloves', 'existing_id': '41_0'}]
2025-11-30 19:13:56,413 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': 'Zero_Grams'}]
2025-11-30 19:13:56,413 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '13_0'}, {'local': 'Nitrile Gloves', 'existing': 'Nitrile_Gloves', 'existing_id': '41_0'}, {'local': 'Vial', 'existing': 'Glass_Vial', 'existing_id': '34_2'}]
2025-11-30 19:13:56,413 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': 'Zero_Grams'}, {'head': 'Digital_Balance', 'relation': 'Displays', 'tail': '0.000'}]
2025-11-30 19:13:56,413 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 14.63s, LLM: 14.63s)
2025-11-30 19:13:56,413 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 14.63s
2025-11-30 19:13:56,413 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:13:56,413 - src.pipeline.kg_builder - INFO - Pushing batch 44/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:13:56,413 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:13:56,571 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=443, relationships=421
2025-11-30 19:13:56,571 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:13:56,571 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Blue_Nitrile_Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:13:56,572 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:13:56,577 - src.components.neo4j_handler - DEBUG - APOC merge successful: Nitrile Gloves -> Nitrile_Gloves
2025-11-30 19:13:56,580 - src.components.neo4j_handler - DEBUG - APOC merge successful: Vial -> Glass_Vial
2025-11-30 19:13:56,580 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:13:56,583 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:13:56,584 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:13:56,588 - src.components.neo4j_handler - DEBUG - Pruned relationship: Digital_Balance -[Displays]-> Zero_Grams
2025-11-30 19:13:56,589 - src.components.neo4j_handler - DEBUG - Pruned relationship: Digital_Balance -[Displays]-> 0.000
2025-11-30 19:13:56,589 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:13:56,591 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab_Bench -[Contains]-> Laboratory Table
2025-11-30 19:13:56,592 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital_Balance -[Displays]-> 0.000 G
2025-11-30 19:13:56,594 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Digital_Balance -[Displays]-> 0.000
2025-11-30 19:13:56,596 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:13:56,597 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:13:56,598 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:13:56,603 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=440, relationships=419
2025-11-30 19:13:56,605 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:13:56,605 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:13:56,605 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:13:56,605 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:13:56,606 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 210, 'with_embedding': 210, 'linked_chunks': 167}
2025-11-30 19:13:56,606 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:13:56,670 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 440 nodes
2025-11-30 19:13:56,866 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 397 nodes
2025-11-30 19:13:57,088 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 440, 'relationship_count': 1379, 'density': 0.0071, 'avg_degree': 6.2682, 'avg_unique_neighbors': 6.2091, 'global_efficiency': 0.3302, 'avg_path_length': 2.6555, 'avg_degree_centrality': 0.0143, 'max_degree_centrality': 0.5467, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0264, 'degree_assortativity': -0.1744, 'graph_robustness': 0.839, 'diameter_estimate': 5, 'clustering_coefficient': 0.279, 'weakly_connected_components': 44, 'largest_wcc_size': 397, 'pagerank_top10_percent': 6.85, 'louvain_communities': 55, 'louvain_modularity': 0.4157, 'label_entropy': 1.4993, 'computational_time': 0.4817685110028833}
2025-11-30 19:13:57,088 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 43, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501237.0889091, 'total_time': 38.65693471394479, 'aggregation': 2.5900080800056458e-06, 'network_info': 0.005969766993075609, 'llm_extraction': 37.9754193079425, 'data_cleaning': 4.2184023186564445e-05, 'neo4j_injection': 0.1922419130569324, 'embedding_time': 0, 'indexing_time': 0.002331916941329837, 'graph_injection_time': 0.18956332199741155, 'acs_metrics': {'node_count': 440, 'relationship_count': 1379, 'density': 0.0071, 'avg_degree': 6.2682, 'avg_unique_neighbors': 6.2091, 'global_efficiency': 0.3302, 'avg_path_length': 2.6555, 'avg_degree_centrality': 0.0143, 'max_degree_centrality': 0.5467, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0264, 'degree_assortativity': -0.1744, 'graph_robustness': 0.839, 'diameter_estimate': 5, 'clustering_coefficient': 0.279, 'weakly_connected_components': 44, 'largest_wcc_size': 397, 'pagerank_top10_percent': 6.85, 'louvain_communities': 55, 'louvain_modularity': 0.4157, 'label_entropy': 1.4993, 'computational_time': 0.4817685110028833}, 'retrieval_queries': []}
2025-11-30 19:13:57,089 - src.pipeline.kg_builder - DEBUG - Batch 43 metrics: {
  "batch_idx": 43,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501237.0889091,
  "total_time": 38.65693471394479,
  "aggregation": 2.5900080800056458e-06,
  "network_info": 0.005969766993075609,
  "llm_extraction": 37.9754193079425,
  "data_cleaning": 4.2184023186564445e-05,
  "neo4j_injection": 0.1922419130569324,
  "embedding_time": 0,
  "indexing_time": 0.002331916941329837,
  "graph_injection_time": 0.18956332199741155,
  "acs_metrics": {
    "node_count": 440,
    "relationship_count": 1379,
    "density": 0.0071,
    "avg_degree": 6.2682,
    "avg_unique_neighbors": 6.2091,
    "global_efficiency": 0.3302,
    "avg_path_length": 2.6555,
    "avg_degree_centrality": 0.0143,
    "max_degree_centrality": 0.5467,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0264,
    "degree_assortativity": -0.1744,
    "graph_robustness": 0.839,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.279,
    "weakly_connected_components": 44,
    "largest_wcc_size": 397,
    "pagerank_top10_percent": 6.85,
    "louvain_communities": 55,
    "louvain_modularity": 0.4157,
    "label_entropy": 1.4993,
    "computational_time": 0.4817685110028833
  },
  "retrieval_queries": []
}
2025-11-30 19:13:57,089 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:13:57,089 - src.pipeline.kg_builder - INFO - Batch 44 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 37.98s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.48s
2025-11-30 19:13:57,089 - src.pipeline.kg_builder - INFO - Batch 44 completed in 38.66s
Processing KG batches:  61%|██████    | 44/72 [12:36<08:40, 18.61s/it]2025-11-30 19:13:57,090 - src.pipeline.kg_builder - INFO - Processing batch 45/72 (3 items)
2025-11-30 19:13:57,090 - src.pipeline.kg_builder - DEBUG - Batch 45 current_video_time: 11:08-11:13
2025-11-30 19:13:57,095 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 440
- Total Relationships: 419
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:13:57,096 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:13:57,096 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_0 ~223 words, content: Time: 10:58-11:03 Content: The video sequence captures a detailed laboratory procedure, likely a titration or a similar chemical analysis, performed by a person wearing blue...
2025-11-30 19:13:57,096 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_1 ~222 words, content: , a glass beaker on a stirrer, and a burette clamped to a stand on the right. Other items like a bottle with a red...
2025-11-30 19:13:57,096 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_2 ~217 words, content: experiment is taking place on a black laboratory bench. The setup includes: - A glass beaker on an electronic balance. - A blue magnetic stirrer...
2025-11-30 19:13:57,096 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_3 ~225 words, content: presence of a stirrer, a stand with a tube, and other equipment suggests a chemical synthesis or a reaction setup. Another person is observing the...
2025-11-30 19:13:57,096 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4 ~163 words, content: . The camera angle changes again, showing more of the lab environment, including white cabinets and a fire extinguisher in the background. The person's hand...
2025-11-30 19:13:57,116 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:13:57,209 - src.components.pre_llm_injector - DEBUG - Found 210 existing chunk embeddings for similarity lookup
2025-11-30 19:13:57,266 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.832'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.821')]
2025-11-30 19:13:57,269 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3
2025-11-30 19:13:57,269 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3
2025-11-30 19:13:57,298 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Aluminum Foil / ID: 3_2)-[IS_INSIDE]->(Weighing Chamber / ID: 31_2), (Aluminum Foil / ID: 3_2)-[HAS_MASS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0)
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0)
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.703'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.700')]
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.821'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_7_2', '0.781')]
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.645'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_3', '0.642')]
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.717'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_1', '0.707')]
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.832'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_2', '0.817')]
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:13:57,299 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_0) (~223 words) with timeout=5.0s retries=3
2025-11-30 19:13:58,709 - src.components.pre_llm_injector - DEBUG - Extracted 5 triplets from chunk 0 (attempt 1)
2025-11-30 19:13:58,709 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 5 triplets
2025-11-30 19:13:58,710 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_1) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:13:59,883 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:13:59,883 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:13:59,883 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_2) (~217 words) with timeout=5.0s retries=3
2025-11-30 19:14:01,141 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:14:01,141 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:14:01,141 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_3) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:14:02,469 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:14:02,469 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:14:02,469 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4) (~163 words) with timeout=5.0s retries=3
2025-11-30 19:14:04,358 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:14:04,358 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:14:04,358 - src.components.pre_llm_injector - INFO - Extracted 26 local triplets from 5 chunks
2025-11-30 19:14:04,358 - src.pipeline.kg_builder - INFO - Pre-extraction: 26 triplets in 7.26s
2025-11-30 19:14:04,358 - src.components.global_refiner - INFO - Capping refinement input: 26 → 15 triplets
2025-11-30 19:14:04,359 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Aluminum Foil / ID: 3_2)-[IS_INSIDE]->(Weighing Chamber / ID: 31_2), (Aluminum Foil / ID: 3_2)-[HAS_MASS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["44_0", "44_3"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Vial", "source_chunks": ["44_0", "44_3"]}, {"head": "Glass_Vial", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["44_0"]}, {"head": "Device", "relation": "Displays", "tail": "0.352", "source_chunks": ["44_0"]}, {"head": "Device", "relation": "Has", "tail": "Green_Light", "source_chunks": ["44_0"]}, {"head": "Person", "relation": "Holds", "tail": "Vial", "source_chunks": ["44_1", "44_4"]}, {"head": "Vial", "relation": "Contains", "tail": "Liquid", "source_chunks": ["44_1"]}, {"head": "Liquid", "relation": "Is Poured Into", "tail": "Beaker", "source_chunks": ["44_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Electronic Balance", "source_chunks": ["44_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Stirrer", "source_chunks": ["44_1"]}, {"head": "Burette", "relation": "Is Clamped To", "tail": "Stand", "source_chunks": ["44_1"]}, {"head": "Person", "relation": "Performs", "tail": "Experiment", "source_chunks": ["44_2"]}, {"head": "Beaker", "relation": "Is On", "tail": "Electronic_Balance", "source_chunks": ["44_2"]}, {"head": "Magnetic_Stirrer", "relation": "Is Inside", "tail": "Container", "source_chunks": ["44_2"]}, {"head": "Metal_Stand", "relation": "Holds", "tail": "Glass_Tube", "source_chunks": ["44_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:14:04,359 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2297 words, ~2986 tokens)
2025-11-30 19:14:04,359 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:14:04,379 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 8183 input tokens (2000 > 8192 - 8183). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:14:04,379 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:14:04,379 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:14:04,379 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:14:04,379 - src.pipeline.kg_builder - INFO - Pushing batch 45/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:14:04,379 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:14:04,539 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=454, relationships=431
2025-11-30 19:14:04,539 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:14:04,545 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=454, relationships=431
2025-11-30 19:14:04,546 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:14:04,546 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:14:04,546 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:14:04,546 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:14:04,550 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 215, 'with_embedding': 215, 'linked_chunks': 172}
2025-11-30 19:14:04,550 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:14:04,637 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 454 nodes
2025-11-30 19:14:04,847 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 411 nodes
2025-11-30 19:14:05,131 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 454, 'relationship_count': 1417, 'density': 0.0069, 'avg_degree': 6.2423, 'avg_unique_neighbors': 6.185, 'global_efficiency': 0.331, 'avg_path_length': 2.6663, 'avg_degree_centrality': 0.0138, 'max_degree_centrality': 0.543, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0319, 'degree_assortativity': -0.1732, 'graph_robustness': 0.8405, 'diameter_estimate': 5, 'clustering_coefficient': 0.2818, 'weakly_connected_components': 44, 'largest_wcc_size': 411, 'pagerank_top10_percent': 6.62, 'louvain_communities': 54, 'louvain_modularity': 0.4046, 'label_entropy': 1.499, 'computational_time': 0.5812509319512174}
2025-11-30 19:14:05,131 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 44, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501245.1319451, 'total_time': 8.041909743100405, 'aggregation': 2.60199885815382e-06, 'network_info': 0.005678519024513662, 'llm_extraction': 7.283396052080207, 'data_cleaning': 1.6910023987293243e-05, 'neo4j_injection': 0.1672174520790577, 'embedding_time': 0, 'indexing_time': 0.001451222924515605, 'graph_injection_time': 0.1655218619853258, 'acs_metrics': {'node_count': 454, 'relationship_count': 1417, 'density': 0.0069, 'avg_degree': 6.2423, 'avg_unique_neighbors': 6.185, 'global_efficiency': 0.331, 'avg_path_length': 2.6663, 'avg_degree_centrality': 0.0138, 'max_degree_centrality': 0.543, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0319, 'degree_assortativity': -0.1732, 'graph_robustness': 0.8405, 'diameter_estimate': 5, 'clustering_coefficient': 0.2818, 'weakly_connected_components': 44, 'largest_wcc_size': 411, 'pagerank_top10_percent': 6.62, 'louvain_communities': 54, 'louvain_modularity': 0.4046, 'label_entropy': 1.499, 'computational_time': 0.5812509319512174}, 'retrieval_queries': []}
2025-11-30 19:14:05,132 - src.pipeline.kg_builder - DEBUG - Batch 44 metrics: {
  "batch_idx": 44,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501245.1319451,
  "total_time": 8.041909743100405,
  "aggregation": 2.60199885815382e-06,
  "network_info": 0.005678519024513662,
  "llm_extraction": 7.283396052080207,
  "data_cleaning": 1.6910023987293243e-05,
  "neo4j_injection": 0.1672174520790577,
  "embedding_time": 0,
  "indexing_time": 0.001451222924515605,
  "graph_injection_time": 0.1655218619853258,
  "acs_metrics": {
    "node_count": 454,
    "relationship_count": 1417,
    "density": 0.0069,
    "avg_degree": 6.2423,
    "avg_unique_neighbors": 6.185,
    "global_efficiency": 0.331,
    "avg_path_length": 2.6663,
    "avg_degree_centrality": 0.0138,
    "max_degree_centrality": 0.543,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0319,
    "degree_assortativity": -0.1732,
    "graph_robustness": 0.8405,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2818,
    "weakly_connected_components": 44,
    "largest_wcc_size": 411,
    "pagerank_top10_percent": 6.62,
    "louvain_communities": 54,
    "louvain_modularity": 0.4046,
    "label_entropy": 1.499,
    "computational_time": 0.5812509319512174
  },
  "retrieval_queries": []
}
2025-11-30 19:14:05,132 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:14:05,132 - src.pipeline.kg_builder - INFO - Batch 45 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.28s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.58s
2025-11-30 19:14:05,133 - src.pipeline.kg_builder - INFO - Batch 45 completed in 8.04s
Processing KG batches:  62%|██████▎   | 45/72 [12:44<06:56, 15.44s/it]2025-11-30 19:14:05,133 - src.pipeline.kg_builder - INFO - Processing batch 46/72 (3 items)
2025-11-30 19:14:05,133 - src.pipeline.kg_builder - DEBUG - Batch 46 current_video_time: 11:23-11:28
2025-11-30 19:14:05,139 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 454
- Total Relationships: 431
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:14:05,140 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:14:05,140 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0 ~240 words, content: Time: 11:13-11:18 Content: The video captures a sequence of actions in a laboratory setting, focusing on a person conducting a chemical experiment. The scene is...
2025-11-30 19:14:05,140 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1 ~231 words, content: and a beige sweater. This person appears to be assisting or observing the experiment, adding to the collaborative nature of the work. The laboratory environment...
2025-11-30 19:14:05,140 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_2 ~222 words, content: person is using a long, white, flexible tube, which is being inserted into the glassware. The right hand holds the tube in place while the...
2025-11-30 19:14:05,140 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3 ~87 words, content: by the "D LAB" logo visible on the device. The person's left hand, which is adorned with a gold and black watch, is holding the...
2025-11-30 19:14:05,160 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:14:05,244 - src.components.pre_llm_injector - DEBUG - Found 215 existing chunk embeddings for similarity lookup
2025-11-30 19:14:05,290 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.938'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3', '0.920')]
2025-11-30 19:14:05,292 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1
2025-11-30 19:14:05,293 - src.components.pre_llm_injector - DEBUG - Found 3 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3
2025-11-30 19:14:05,321 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1)
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Scientist / ID: 36_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Researcher / ID: 32_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1)
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.938'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3', '0.920')]
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.578'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.562')]
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0', '0.703'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.699')]
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_2', '0.850'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.847')]
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:14:05,323 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:14:10,330 - src.components.pre_llm_injector - WARNING - Chunk 0 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:14:15,837 - src.components.pre_llm_injector - WARNING - Chunk 0 timed out after 5.0s (attempt 2/4), retrying...
2025-11-30 19:14:21,841 - src.components.pre_llm_injector - WARNING - Chunk 0 timed out after 5.0s (attempt 3/4), retrying...
2025-11-30 19:14:27,688 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 4)
2025-11-30 19:14:27,688 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:14:27,688 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1) (~231 words) with timeout=5.0s retries=3
2025-11-30 19:14:29,021 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:14:29,021 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:14:29,021 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_2) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:14:34,027 - src.components.pre_llm_injector - WARNING - Chunk 2 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:14:35,699 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 2)
2025-11-30 19:14:35,699 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:14:35,700 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3) (~87 words) with timeout=5.0s retries=3
2025-11-30 19:14:36,720 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:14:36,720 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:14:36,721 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:14:36,721 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 31.58s
2025-11-30 19:14:36,721 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:14:36,721 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Scientist / ID: 36_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Researcher / ID: 32_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["45_0", "45_1"]}, {"head": "Person", "relation": "Wears", "tail": "Gold_Watch", "source_chunks": ["45_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Vial", "source_chunks": ["45_0"]}, {"head": "Person", "relation": "Holds", "tail": "Aluminum_Foil", "source_chunks": ["45_0"]}, {"head": "Person", "relation": "Uses", "tail": "White_Tube", "source_chunks": ["45_0"]}, {"head": "Person", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["45_0"]}, {"head": "Person", "relation": "Performs", "tail": "Precise_Task", "source_chunks": ["45_1"]}, {"head": "Person", "relation": "Uses", "tail": "Hands", "source_chunks": ["45_1"]}, {"head": "Person", "relation": "Assembles", "tail": "Laboratory_Glassware", "source_chunks": ["45_1"]}, {"head": "Laboratory_Glassware", "relation": "Is Connected To", "tail": "Flask", "source_chunks": ["45_1"]}, {"head": "Flask", "relation": "Is On", "tail": "White_Tray", "source_chunks": ["45_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["45_2"]}, {"head": "Person", "relation": "Holds", "tail": "White Cylindrical Device", "source_chunks": ["45_2"]}, {"head": "Person", "relation": "Uses", "tail": "White Cylindrical Device", "source_chunks": ["45_2"]}, {"head": "Person", "relation": "Holds", "tail": "Long White Flexible Tube", "source_chunks": ["45_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:14:36,722 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2461 words, ~3199 tokens)
2025-11-30 19:14:36,722 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:14:36,746 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 8668 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:14:36,746 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:14:36,746 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:14:36,746 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:14:36,746 - src.pipeline.kg_builder - INFO - Pushing batch 46/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:14:36,746 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:14:36,951 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=466, relationships=443
2025-11-30 19:14:36,953 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:14:36,959 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=466, relationships=443
2025-11-30 19:14:36,962 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:14:36,962 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:14:36,963 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:14:36,963 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:14:36,965 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 219, 'with_embedding': 219, 'linked_chunks': 175}
2025-11-30 19:14:36,965 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:14:37,032 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 466 nodes
2025-11-30 19:14:37,252 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 422 nodes
2025-11-30 19:14:37,500 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 466, 'relationship_count': 1445, 'density': 0.0067, 'avg_degree': 6.2017, 'avg_unique_neighbors': 6.1459, 'global_efficiency': 0.3327, 'avg_path_length': 2.6514, 'avg_degree_centrality': 0.0133, 'max_degree_centrality': 0.5527, 'avg_betweenness_centrality': 0.0001, 'max_betweenness_centrality': 0.0145, 'degree_assortativity': -0.1862, 'graph_robustness': 0.8408, 'diameter_estimate': 5, 'clustering_coefficient': 0.2848, 'weakly_connected_components': 45, 'largest_wcc_size': 422, 'pagerank_top10_percent': 6.44, 'louvain_communities': 55, 'louvain_modularity': 0.4119, 'label_entropy': 1.4987, 'computational_time': 0.535289830993861}
2025-11-30 19:14:37,501 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 45, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501277.5009851, 'total_time': 32.36788364103995, 'aggregation': 2.696993760764599e-06, 'network_info': 0.006564410985447466, 'llm_extraction': 31.606612359988503, 'data_cleaning': 2.1527986973524094e-05, 'neo4j_injection': 0.21668986103031784, 'embedding_time': 0, 'indexing_time': 0.0034647620050236583, 'graph_injection_time': 0.2129417279502377, 'acs_metrics': {'node_count': 466, 'relationship_count': 1445, 'density': 0.0067, 'avg_degree': 6.2017, 'avg_unique_neighbors': 6.1459, 'global_efficiency': 0.3327, 'avg_path_length': 2.6514, 'avg_degree_centrality': 0.0133, 'max_degree_centrality': 0.5527, 'avg_betweenness_centrality': 0.0001, 'max_betweenness_centrality': 0.0145, 'degree_assortativity': -0.1862, 'graph_robustness': 0.8408, 'diameter_estimate': 5, 'clustering_coefficient': 0.2848, 'weakly_connected_components': 45, 'largest_wcc_size': 422, 'pagerank_top10_percent': 6.44, 'louvain_communities': 55, 'louvain_modularity': 0.4119, 'label_entropy': 1.4987, 'computational_time': 0.535289830993861}, 'retrieval_queries': []}
2025-11-30 19:14:37,501 - src.pipeline.kg_builder - DEBUG - Batch 45 metrics: {
  "batch_idx": 45,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501277.5009851,
  "total_time": 32.36788364103995,
  "aggregation": 2.696993760764599e-06,
  "network_info": 0.006564410985447466,
  "llm_extraction": 31.606612359988503,
  "data_cleaning": 2.1527986973524094e-05,
  "neo4j_injection": 0.21668986103031784,
  "embedding_time": 0,
  "indexing_time": 0.0034647620050236583,
  "graph_injection_time": 0.2129417279502377,
  "acs_metrics": {
    "node_count": 466,
    "relationship_count": 1445,
    "density": 0.0067,
    "avg_degree": 6.2017,
    "avg_unique_neighbors": 6.1459,
    "global_efficiency": 0.3327,
    "avg_path_length": 2.6514,
    "avg_degree_centrality": 0.0133,
    "max_degree_centrality": 0.5527,
    "avg_betweenness_centrality": 0.0001,
    "max_betweenness_centrality": 0.0145,
    "degree_assortativity": -0.1862,
    "graph_robustness": 0.8408,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.2848,
    "weakly_connected_components": 45,
    "largest_wcc_size": 422,
    "pagerank_top10_percent": 6.44,
    "louvain_communities": 55,
    "louvain_modularity": 0.4119,
    "label_entropy": 1.4987,
    "computational_time": 0.535289830993861
  },
  "retrieval_queries": []
}
2025-11-30 19:14:37,502 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:14:37,502 - src.pipeline.kg_builder - INFO - Batch 46 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 31.61s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.54s
2025-11-30 19:14:37,502 - src.pipeline.kg_builder - INFO - Batch 46 completed in 32.37s
Processing KG batches:  64%|██████▍   | 46/72 [13:16<08:53, 20.52s/it]2025-11-30 19:14:37,502 - src.pipeline.kg_builder - INFO - Processing batch 47/72 (3 items)
2025-11-30 19:14:37,502 - src.pipeline.kg_builder - DEBUG - Batch 47 current_video_time: 11:38-11:43
2025-11-30 19:14:37,513 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 466
- Total Relationships: 443
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:14:37,513 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:14:37,513 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_0 ~226 words, content: Time: 11:28-11:33 Content: The video captures a scientific procedure being performed in a laboratory setting. The sequence of events unfolds as follows: - **Initial Setup:**...
2025-11-30 19:14:37,513 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_1 ~233 words, content: - **Broader Context:** The camera pulls back further, revealing more of the laboratory. The entire apparatus, including the balance, the flask, and the tubing, is...
2025-11-30 19:14:37,513 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_2 ~233 words, content: of laboratory equipment. This equipment includes a glass flask, which is being held in place by a clamp attached to a metal stand. The flask...
2025-11-30 19:14:37,513 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3 ~238 words, content: stirring process is ongoing. In summary, the video shows a controlled laboratory experiment where a liquid is being transferred from a flask, which is being...
2025-11-30 19:14:37,513 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_4 ~88 words, content: with a clear liquid. The final frames show the tube submerged in the liquid within the measuring cup, indicating that the liquid is being pumped...
2025-11-30 19:14:37,533 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:14:37,624 - src.components.pre_llm_injector - DEBUG - Found 219 existing chunk embeddings for similarity lookup
2025-11-30 19:14:37,683 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4', '0.823'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1', '0.811')]
2025-11-30 19:14:37,685 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1
2025-11-30 19:14:37,685 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4 via source_chunk_ids
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Burette / ID: 4_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Erlenmeyer Flask / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Reagent Vial / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Beaker / ID: 5_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_3', '0.636'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1', '0.626')]
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1', '0.811'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_14_4', '0.793')]
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_1', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.676')]
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.788'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_1', '0.786')]
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_4', '0.823'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.805')]
2025-11-30 19:14:37,703 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:14:37,704 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_0) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:14:39,262 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:14:39,262 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:14:39,262 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_1) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:14:40,481 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:14:40,481 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:14:40,482 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_2) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:14:41,844 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:14:41,844 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:14:41,844 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:14:43,549 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:14:43,549 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:14:43,549 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_4) (~88 words) with timeout=5.0s retries=3
2025-11-30 19:14:44,577 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:14:44,577 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:14:44,577 - src.components.pre_llm_injector - INFO - Extracted 30 local triplets from 5 chunks
2025-11-30 19:14:44,577 - src.pipeline.kg_builder - INFO - Pre-extraction: 30 triplets in 7.06s
2025-11-30 19:14:44,577 - src.components.global_refiner - INFO - Capping refinement input: 30 → 15 triplets
2025-11-30 19:14:44,577 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital_Balance / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Burette / ID: 4_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Erlenmeyer Flask / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Reagent Vial / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Beaker / ID: 5_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 13_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[WEARS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Nitrile_Gloves / ID: 41_0), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["46_0"]}, {"head": "Person", "relation": "Wears", "tail": "Gold_Watch", "source_chunks": ["46_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Erlenmeyer_Flask", "source_chunks": ["46_0"]}, {"head": "Glass_Erlenmeyer_Flask", "relation": "Is On", "tail": "Digital_Balance", "source_chunks": ["46_0"]}, {"head": "Digital_Balance", "relation": "Measures", "tail": "Liquid_Mass", "source_chunks": ["46_0"]}, {"head": "Liquid", "relation": "Flows Through", "tail": "Flexible_Tube", "source_chunks": ["46_0"]}, {"head": "Camera", "relation": "Pulls Back", "tail": "Laboratory", "source_chunks": ["46_1"]}, {"head": "Apparatus", "relation": "Includes", "tail": "Balance", "source_chunks": ["46_1"]}, {"head": "Apparatus", "relation": "Includes", "tail": "Flask", "source_chunks": ["46_1"]}, {"head": "Apparatus", "relation": "Includes", "tail": "Tubing", "source_chunks": ["46_1"]}, {"head": "Tubing", "relation": "Is Routed Over", "tail": "Metal_Stand", "source_chunks": ["46_1"]}, {"head": "Person", "relation": "Adjusts", "tail": "Apparatus", "source_chunks": ["46_1"]}, {"head": "Flask", "relation": "Is Held By", "tail": "Clamp", "source_chunks": ["46_2"]}, {"head": "Flask", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["46_2"]}, {"head": "Magnetic_Stirrer", "relation": "Displays", "tail": "0970", "source_chunks": ["46_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:14:44,577 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1532 words, ~1992 tokens)
2025-11-30 19:14:44,578 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:14:57,805 - src.components.global_refiner - DEBUG - LLM call completed in 13.23s
2025-11-30 19:14:57,805 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['46_0']], ['Person', 'Wears', 'Gold_Watch', ['46_0']], ['Person', 'Holds', 'Glass_Erlenmeyer_Flask', ['46_0']], ['Glass_Erlenmeyer_Flask', 'Is On', 'Digital_Balance', ['46_0']], ['Digital_Balance', 'Measures', 'Liquid_Mass', ['46_0']], ['Liquid', 'Flows Through', 'Flexible_Tube', ['46_0']], ['Camera', 'Pulls Back', 'Laboratory', ['46_1']], ['Apparatus', 'Includes', 'Balance', ['46_1']], ['Apparatus', 'Includes', 'Flask', ['46_1']], ['Apparatus', 'Includes', 'Tubing', ['46_1']], ['Tubing', 'Is Routed Over', 'Metal_Stand', ['46_1']], ['Person', 'Adjusts', 'Apparatus', ['46_1']], ['Flask', 'Is Held By', 'Clamp', ['46_2']], ['Flask', 'Is On', 'Magnetic_Stirrer', ['46_2']], ['Magnetic_Stirrer', 'Displays', '0970', ['46_2']]] inter_chunk_relations=[['Digital_Balance', 'Measures', 'Liquid_Mass', ['46_0']], ['Apparatus', 'Includes', 'Balance', ['46_1']], ['Apparatus', 'Includes', 'Flask', ['46_1']], ['Apparatus', 'Includes', 'Tubing', ['46_1']], ['Tubing', 'Is Routed Over', 'Metal_Stand', ['46_1']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '45_2'}, {'local': 'Gold_Watch', 'existing': 'Gold_Watch', 'existing_id': '24_0'}, {'local': 'Glass_Erlenmeyer_Flask', 'existing': 'Glass_Erlenmeyer_Flask', 'existing_id': '27_0'}, {'local': 'Digital_Balance', 'existing': 'Digital Balance', 'existing_id': '25_2'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Nitrile_Gloves'}]
2025-11-30 19:14:57,805 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['46_0']], ['Person', 'Wears', 'Gold_Watch', ['46_0']], ['Person', 'Holds', 'Glass_Erlenmeyer_Flask', ['46_0']]]
2025-11-30 19:14:57,805 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Digital_Balance', 'Measures', 'Liquid_Mass', ['46_0']], ['Apparatus', 'Includes', 'Balance', ['46_1']], ['Apparatus', 'Includes', 'Flask', ['46_1']]]
2025-11-30 19:14:57,805 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '45_2'}, {'local': 'Gold_Watch', 'existing': 'Gold_Watch', 'existing_id': '24_0'}, {'local': 'Glass_Erlenmeyer_Flask', 'existing': 'Glass_Erlenmeyer_Flask', 'existing_id': '27_0'}]
2025-11-30 19:14:57,805 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=2, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Nitrile_Gloves'}]
2025-11-30 19:14:57,805 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '45_2'}, {'local': 'Gold_Watch', 'existing': 'Gold_Watch', 'existing_id': '24_0'}, {'local': 'Glass_Erlenmeyer_Flask', 'existing': 'Glass_Erlenmeyer_Flask', 'existing_id': '27_0'}, {'local': 'Digital_Balance', 'existing': 'Digital Balance', 'existing_id': '25_2'}]
2025-11-30 19:14:57,805 - src.components.global_refiner - INFO - LLM suggested 2 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Nitrile_Gloves'}]
2025-11-30 19:14:57,805 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 13.23s, LLM: 13.23s)
2025-11-30 19:14:57,805 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 13.23s
2025-11-30 19:14:57,805 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:14:57,806 - src.pipeline.kg_builder - INFO - Pushing batch 47/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:14:57,806 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:14:57,993 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=476, relationships=455
2025-11-30 19:14:57,993 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:14:57,994 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Gloves
2025-11-30 19:14:57,994 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Gold_Watch -> Gold_Watch
2025-11-30 19:14:57,994 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Glass_Erlenmeyer_Flask -> Glass_Erlenmeyer_Flask
2025-11-30 19:14:57,999 - src.components.neo4j_handler - DEBUG - APOC merge successful: Digital_Balance -> Digital Balance
2025-11-30 19:14:57,999 - src.components.neo4j_handler - INFO - Applying 2 prune instructions
2025-11-30 19:14:58,005 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Nitrile_Gloves
2025-11-30 19:14:58,007 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Nitrile_Gloves
2025-11-30 19:14:58,007 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:14:58,034 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Digital_Balance -[Measures]-> Liquid_Mass
2025-11-30 19:14:58,062 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Apparatus -[Includes]-> Balance
2025-11-30 19:14:58,064 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Apparatus -[Includes]-> Flask
2025-11-30 19:14:58,067 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Apparatus -[Includes]-> Tubing
2025-11-30 19:14:58,098 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Tubing -[Is Routed Over]-> Metal_Stand
2025-11-30 19:14:58,099 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:14:58,104 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=474, relationships=453
2025-11-30 19:14:58,108 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:14:58,108 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:14:58,108 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:14:58,108 - src.components.neo4j_handler - INFO - Batch injected in 0.30s (triplets: 0.30s, indexes: 0.00s)
2025-11-30 19:14:58,109 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 224, 'with_embedding': 224, 'linked_chunks': 178}
2025-11-30 19:14:58,109 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:14:58,177 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 474 nodes
2025-11-30 19:14:58,407 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 428 nodes
2025-11-30 19:14:58,661 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 474, 'relationship_count': 1468, 'density': 0.0065, 'avg_degree': 6.1941, 'avg_unique_neighbors': 6.1392, 'global_efficiency': 0.3305, 'avg_path_length': 2.6527, 'avg_degree_centrality': 0.0131, 'max_degree_centrality': 0.5433, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0248, 'degree_assortativity': -0.184, 'graph_robustness': 0.8304, 'diameter_estimate': 5, 'clustering_coefficient': 0.283, 'weakly_connected_components': 47, 'largest_wcc_size': 428, 'pagerank_top10_percent': 6.29, 'louvain_communities': 57, 'louvain_modularity': 0.4001, 'label_entropy': 1.4989, 'computational_time': 0.55175031197723}
2025-11-30 19:14:58,661 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 46, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501298.6615613, 'total_time': 21.159386519924738, 'aggregation': 3.817025572061539e-06, 'network_info': 0.011034479015506804, 'llm_extraction': 20.292599127977155, 'data_cleaning': 3.461900632828474e-05, 'neo4j_injection': 0.30233592400327325, 'embedding_time': 0, 'indexing_time': 0.003813371993601322, 'graph_injection_time': 0.298199690063484, 'acs_metrics': {'node_count': 474, 'relationship_count': 1468, 'density': 0.0065, 'avg_degree': 6.1941, 'avg_unique_neighbors': 6.1392, 'global_efficiency': 0.3305, 'avg_path_length': 2.6527, 'avg_degree_centrality': 0.0131, 'max_degree_centrality': 0.5433, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.0248, 'degree_assortativity': -0.184, 'graph_robustness': 0.8304, 'diameter_estimate': 5, 'clustering_coefficient': 0.283, 'weakly_connected_components': 47, 'largest_wcc_size': 428, 'pagerank_top10_percent': 6.29, 'louvain_communities': 57, 'louvain_modularity': 0.4001, 'label_entropy': 1.4989, 'computational_time': 0.55175031197723}, 'retrieval_queries': []}
2025-11-30 19:14:58,661 - src.pipeline.kg_builder - DEBUG - Batch 46 metrics: {
  "batch_idx": 46,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501298.6615613,
  "total_time": 21.159386519924738,
  "aggregation": 3.817025572061539e-06,
  "network_info": 0.011034479015506804,
  "llm_extraction": 20.292599127977155,
  "data_cleaning": 3.461900632828474e-05,
  "neo4j_injection": 0.30233592400327325,
  "embedding_time": 0,
  "indexing_time": 0.003813371993601322,
  "graph_injection_time": 0.298199690063484,
  "acs_metrics": {
    "node_count": 474,
    "relationship_count": 1468,
    "density": 0.0065,
    "avg_degree": 6.1941,
    "avg_unique_neighbors": 6.1392,
    "global_efficiency": 0.3305,
    "avg_path_length": 2.6527,
    "avg_degree_centrality": 0.0131,
    "max_degree_centrality": 0.5433,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.0248,
    "degree_assortativity": -0.184,
    "graph_robustness": 0.8304,
    "diameter_estimate": 5,
    "clustering_coefficient": 0.283,
    "weakly_connected_components": 47,
    "largest_wcc_size": 428,
    "pagerank_top10_percent": 6.29,
    "louvain_communities": 57,
    "louvain_modularity": 0.4001,
    "label_entropy": 1.4989,
    "computational_time": 0.55175031197723
  },
  "retrieval_queries": []
}
2025-11-30 19:14:58,662 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:14:58,662 - src.pipeline.kg_builder - INFO - Batch 47 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 20.29s, Clean: 0.00s, Neo4j: 0.30s, ACS: 0.55s
2025-11-30 19:14:58,662 - src.pipeline.kg_builder - INFO - Batch 47 completed in 21.16s
Processing KG batches:  65%|██████▌   | 47/72 [13:37<08:37, 20.71s/it]2025-11-30 19:14:58,662 - src.pipeline.kg_builder - INFO - Processing batch 48/72 (3 items)
2025-11-30 19:14:58,662 - src.pipeline.kg_builder - DEBUG - Batch 48 current_video_time: 11:53-11:58
2025-11-30 19:14:58,668 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 474
- Total Relationships: 453
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:14:58,668 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:14:58,668 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0 ~241 words, content: Time: 11:43-11:48 Content: The video captures a scene in a laboratory or workshop setting, focusing on a scientific experiment involving fluid transfer. The camera is...
2025-11-30 19:14:58,668 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_1 ~226 words, content: plastic bag containing small components, and a glass rod. The overall impression is that of an active workspace where an experiment is in progress. Time:...
2025-11-30 19:14:58,668 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_2 ~233 words, content: **Final Scene (Frames 4-5):** The camera settles on a clear view of the experiment. A glass beaker is positioned on a white, electronic device, which...
2025-11-30 19:14:58,668 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_3 ~168 words, content: , which is part of a setup that appears to be a gas delivery system. The camera angle shifts slightly, providing a broader view of...
2025-11-30 19:14:58,688 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:14:58,775 - src.components.pre_llm_injector - DEBUG - Found 224 existing chunk embeddings for similarity lookup
2025-11-30 19:14:58,824 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.840'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_4', '0.815')]
2025-11-30 19:14:58,826 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3
2025-11-30 19:14:58,827 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_4 via source_chunk_ids
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_1', '0.747'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_0', '0.747')]
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_3', '0.667'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_1', '0.659')]
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.840'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.799')]
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_4', '0.815'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.791')]
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:14:58,844 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:14:59,805 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:14:59,805 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:14:59,805 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_1) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:15:01,183 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:15:01,183 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:15:01,183 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_2) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:15:02,620 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:15:02,620 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:15:02,621 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_3) (~168 words) with timeout=5.0s retries=3
2025-11-30 19:15:03,658 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:15:03,658 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:15:03,658 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 4 chunks
2025-11-30 19:15:03,658 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 4.99s
2025-11-30 19:15:03,659 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:15:03,659 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[USES]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[HOLDS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["47_0"]}, {"head": "Pump", "relation": "Connected To", "tail": "Tube", "source_chunks": ["47_0"]}, {"head": "Tube", "relation": "Inserted Into", "tail": "Container", "source_chunks": ["47_0"]}, {"head": "Container", "relation": "Contains", "tail": "Water", "source_chunks": ["47_0"]}, {"head": "Workbench", "relation": "Holds", "tail": "Pump", "source_chunks": ["47_0"]}, {"head": "Workbench", "relation": "Holds", "tail": "Beaker", "source_chunks": ["47_0"]}, {"head": "Plastic Bag", "relation": "Contains", "tail": "Small Components", "source_chunks": ["47_1"]}, {"head": "Glass Rod", "relation": "Is Located In", "tail": "Plastic Bag", "source_chunks": ["47_1"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "Clear Plastic Container", "source_chunks": ["47_1"]}, {"head": "Clear Plastic Container", "relation": "Contains", "tail": "Liquid", "source_chunks": ["47_1"]}, {"head": "Blue Apparatus", "relation": "Is Connected To", "tail": "Long Translucent Tube", "source_chunks": ["47_1"]}, {"head": "Long Translucent Tube", "relation": "Is Submerged In", "tail": "Liquid", "source_chunks": ["47_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["47_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Foamy_Substance", "source_chunks": ["47_2"]}, {"head": "Tube", "relation": "Is Inserted Into", "tail": "Beaker", "source_chunks": ["47_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:15:03,659 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1493 words, ~1941 tokens)
2025-11-30 19:15:03,659 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:15:16,827 - src.components.global_refiner - DEBUG - LLM call completed in 13.17s
2025-11-30 19:15:16,827 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Tube', 'Transfers', 'Liquid', ['47_0']], ['Pump', 'Connected To', 'Tube', ['47_0']], ['Tube', 'Inserted Into', 'Container', ['47_0']], ['Container', 'Contains', 'Water', ['47_0']], ['Workbench', 'Holds', 'Pump', ['47_0']], ['Workbench', 'Holds', 'Beaker', ['47_0']], ['Plastic Bag', 'Contains', 'Small Components', ['47_1']], ['Glass Rod', 'Is Located In', 'Plastic Bag', ['47_1']], ['Lab Bench', 'Contains', 'Clear Plastic Container', ['47_1']], ['Clear Plastic Container', 'Contains', 'Liquid', ['47_1']], ['Blue Apparatus', 'Is Connected To', 'Long Translucent Tube', ['47_1']], ['Long Translucent Tube', 'Is Submerged In', 'Liquid', ['47_1']], ['Beaker', 'Is On', 'Magnetic_Stirrer', ['47_2']], ['Beaker', 'Contains', 'Foamy_Substance', ['47_2']], ['Tube', 'Is Inserted Into', 'Beaker', ['47_2']]] inter_chunk_relations=[['Workbench', 'Holds', 'Laboratory Table', ['47_0']], ['Lab Bench', 'Contains', 'Laboratory Table', ['47_1']], ['Beaker', 'Is On', 'Laboratory Table', ['47_2']], ['Container', 'Contains', 'Liquid', ['47_0']], ['Tube', 'Transfers', 'Liquid', ['47_0']]] merge_instructions=[{'local': 'Blue Apparatus', 'existing': 'Apparatus', 'existing_id': '1_1'}, {'local': 'Long Translucent Tube', 'existing': 'Long White Flexible Tube', 'existing_id': '45_2'}, {'local': 'Clear Plastic Container', 'existing': 'Container', 'existing_id': '4_1'}, {'local': 'Plastic Bag', 'existing': 'Aluminum Foil', 'existing_id': '3_2'}] prune_instructions=[{'head': 'Person', 'relation': 'HOLDS', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'USES', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Bottle'}, {'head': 'Person', 'relation': 'USES', 'tail': 'White Plastic Bottle'}]
2025-11-30 19:15:16,827 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Tube', 'Transfers', 'Liquid', ['47_0']], ['Pump', 'Connected To', 'Tube', ['47_0']], ['Tube', 'Inserted Into', 'Container', ['47_0']]]
2025-11-30 19:15:16,827 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Workbench', 'Holds', 'Laboratory Table', ['47_0']], ['Lab Bench', 'Contains', 'Laboratory Table', ['47_1']], ['Beaker', 'Is On', 'Laboratory Table', ['47_2']]]
2025-11-30 19:15:16,827 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue Apparatus', 'existing': 'Apparatus', 'existing_id': '1_1'}, {'local': 'Long Translucent Tube', 'existing': 'Long White Flexible Tube', 'existing_id': '45_2'}, {'local': 'Clear Plastic Container', 'existing': 'Container', 'existing_id': '4_1'}]
2025-11-30 19:15:16,827 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'HOLDS', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'USES', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Bottle'}]
2025-11-30 19:15:16,827 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue Apparatus', 'existing': 'Apparatus', 'existing_id': '1_1'}, {'local': 'Long Translucent Tube', 'existing': 'Long White Flexible Tube', 'existing_id': '45_2'}, {'local': 'Clear Plastic Container', 'existing': 'Container', 'existing_id': '4_1'}, {'local': 'Plastic Bag', 'existing': 'Aluminum Foil', 'existing_id': '3_2'}]
2025-11-30 19:15:16,827 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'HOLDS', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'USES', 'tail': 'Smartphone'}, {'head': 'Person', 'relation': 'HOLDS', 'tail': 'White Bottle'}, {'head': 'Person', 'relation': 'USES', 'tail': 'White Plastic Bottle'}]
2025-11-30 19:15:16,827 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 13.17s, LLM: 13.17s)
2025-11-30 19:15:16,827 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 13.17s
2025-11-30 19:15:16,827 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:15:16,827 - src.pipeline.kg_builder - INFO - Pushing batch 48/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:15:16,828 - src.components.neo4j_handler - INFO - Adding 19 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:15:17,019 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=487, relationships=468
2025-11-30 19:15:17,019 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:15:17,020 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Apparatus -> Apparatus
2025-11-30 19:15:17,023 - src.components.neo4j_handler - DEBUG - APOC merge successful: Long Translucent Tube -> Long White Flexible Tube
2025-11-30 19:15:17,026 - src.components.neo4j_handler - DEBUG - APOC merge successful: Clear Plastic Container -> Container
2025-11-30 19:15:17,029 - src.components.neo4j_handler - DEBUG - APOC merge successful: Plastic Bag -> Aluminum Foil
2025-11-30 19:15:17,029 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:15:17,033 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> Smartphone
2025-11-30 19:15:17,034 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[USES]-> Smartphone
2025-11-30 19:15:17,035 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[HOLDS]-> White Bottle
2025-11-30 19:15:17,036 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[USES]-> White Plastic Bottle
2025-11-30 19:15:17,036 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:15:17,037 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Workbench -[Holds]-> Laboratory Table
2025-11-30 19:15:17,038 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab Bench -[Contains]-> Laboratory Table
2025-11-30 19:15:17,039 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Laboratory Table
2025-11-30 19:15:17,040 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Container -[Contains]-> Liquid
2025-11-30 19:15:17,042 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Tube -[Transfers]-> Liquid
2025-11-30 19:15:17,042 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:15:17,046 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=483, relationships=465
2025-11-30 19:15:17,047 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:15:17,047 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:15:17,047 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:15:17,047 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.22s, indexes: 0.00s)
2025-11-30 19:15:17,048 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 228, 'with_embedding': 228, 'linked_chunks': 181}
2025-11-30 19:15:17,048 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:15:17,149 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 483 nodes
2025-11-30 19:15:17,406 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 436 nodes
2025-11-30 19:15:17,689 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 483, 'relationship_count': 1502, 'density': 0.0065, 'avg_degree': 6.2195, 'avg_unique_neighbors': 6.1656, 'global_efficiency': 0.3277, 'avg_path_length': 2.6798, 'avg_degree_centrality': 0.0129, 'max_degree_centrality': 0.529, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.025, 'degree_assortativity': -0.1799, 'graph_robustness': 0.7423, 'diameter_estimate': 6, 'clustering_coefficient': 0.2804, 'weakly_connected_components': 48, 'largest_wcc_size': 436, 'pagerank_top10_percent': 6.15, 'louvain_communities': 58, 'louvain_modularity': 0.398, 'label_entropy': 1.4989, 'computational_time': 0.6402582859154791}
2025-11-30 19:15:17,689 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 47, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501317.6895015, 'total_time': 19.02653940708842, 'aggregation': 3.4479890018701553e-06, 'network_info': 0.00507578591350466, 'llm_extraction': 18.159727497026324, 'data_cleaning': 1.695496030151844e-05, 'neo4j_injection': 0.21985272399615496, 'embedding_time': 0, 'indexing_time': 0.0012566091027110815, 'graph_injection_time': 0.21839921502396464, 'acs_metrics': {'node_count': 483, 'relationship_count': 1502, 'density': 0.0065, 'avg_degree': 6.2195, 'avg_unique_neighbors': 6.1656, 'global_efficiency': 0.3277, 'avg_path_length': 2.6798, 'avg_degree_centrality': 0.0129, 'max_degree_centrality': 0.529, 'avg_betweenness_centrality': 0.0002, 'max_betweenness_centrality': 0.025, 'degree_assortativity': -0.1799, 'graph_robustness': 0.7423, 'diameter_estimate': 6, 'clustering_coefficient': 0.2804, 'weakly_connected_components': 48, 'largest_wcc_size': 436, 'pagerank_top10_percent': 6.15, 'louvain_communities': 58, 'louvain_modularity': 0.398, 'label_entropy': 1.4989, 'computational_time': 0.6402582859154791}, 'retrieval_queries': []}
2025-11-30 19:15:17,689 - src.pipeline.kg_builder - DEBUG - Batch 47 metrics: {
  "batch_idx": 47,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501317.6895015,
  "total_time": 19.02653940708842,
  "aggregation": 3.4479890018701553e-06,
  "network_info": 0.00507578591350466,
  "llm_extraction": 18.159727497026324,
  "data_cleaning": 1.695496030151844e-05,
  "neo4j_injection": 0.21985272399615496,
  "embedding_time": 0,
  "indexing_time": 0.0012566091027110815,
  "graph_injection_time": 0.21839921502396464,
  "acs_metrics": {
    "node_count": 483,
    "relationship_count": 1502,
    "density": 0.0065,
    "avg_degree": 6.2195,
    "avg_unique_neighbors": 6.1656,
    "global_efficiency": 0.3277,
    "avg_path_length": 2.6798,
    "avg_degree_centrality": 0.0129,
    "max_degree_centrality": 0.529,
    "avg_betweenness_centrality": 0.0002,
    "max_betweenness_centrality": 0.025,
    "degree_assortativity": -0.1799,
    "graph_robustness": 0.7423,
    "diameter_estimate": 6,
    "clustering_coefficient": 0.2804,
    "weakly_connected_components": 48,
    "largest_wcc_size": 436,
    "pagerank_top10_percent": 6.15,
    "louvain_communities": 58,
    "louvain_modularity": 0.398,
    "label_entropy": 1.4989,
    "computational_time": 0.6402582859154791
  },
  "retrieval_queries": []
}
2025-11-30 19:15:17,690 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:15:17,690 - src.pipeline.kg_builder - INFO - Batch 48 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 18.16s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.64s
2025-11-30 19:15:17,690 - src.pipeline.kg_builder - INFO - Batch 48 completed in 19.03s
Processing KG batches:  67%|██████▋   | 48/72 [13:56<08:04, 20.21s/it]2025-11-30 19:15:17,690 - src.pipeline.kg_builder - INFO - Processing batch 49/72 (3 items)
2025-11-30 19:15:17,690 - src.pipeline.kg_builder - DEBUG - Batch 49 current_video_time: 12:08-12:13
2025-11-30 19:15:17,697 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 483
- Total Relationships: 465
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:15:17,697 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:15:17,697 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_0 ~247 words, content: Time: 11:58-12:03 Content: The video sequence captures a scientific experiment being conducted in a laboratory setting. The scene is set on a black laboratory bench,...
2025-11-30 19:15:17,697 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_1 ~241 words, content: a well-equipped laboratory. - The video captures the process of a scientific experiment, with the equipment and materials being used to conduct the experiment. The...
2025-11-30 19:15:17,697 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_2 ~227 words, content: rer, a blue stand holds a metal rod, which is part of a larger apparatus, possibly for titration or another measurement. Other items on the...
2025-11-30 19:15:17,697 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_3 ~132 words, content: next stage of the process. The flexible tube, which was initially in the flask, is now shown extending across the lab bench. It is being...
2025-11-30 19:15:17,717 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:15:17,804 - src.components.pre_llm_injector - DEBUG - Found 228 existing chunk embeddings for similarity lookup
2025-11-30 19:15:17,854 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_3', '0.833'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5', '0.786')]
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5 via source_chunk_ids
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_3 via source_chunk_ids
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2', '0.716'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_1', '0.656')]
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_3', '0.658'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3', '0.628')]
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_13_5', '0.786'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_3', '0.646')]
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_3', '0.833'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_2', '0.760')]
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:15:17,857 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_0) (~247 words) with timeout=5.0s retries=3
2025-11-30 19:15:19,043 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:15:19,043 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:15:19,043 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_1) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:15:20,539 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:15:20,540 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:15:20,540 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_2) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:15:22,013 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:15:22,013 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:15:22,013 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_3) (~132 words) with timeout=5.0s retries=3
2025-11-30 19:15:23,242 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:15:23,242 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:15:23,242 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 4 chunks
2025-11-30 19:15:23,242 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 5.55s
2025-11-30 19:15:23,243 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:15:23,243 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
No subgraph context available
No existing entities or relations.

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Laboratory Bench", "relation": "Contains", "tail": "Clear Plastic Container", "source_chunks": ["48_0"]}, {"head": "Clear Plastic Container", "relation": "Contains", "tail": "Water", "source_chunks": ["48_0"]}, {"head": "Water", "relation": "Is In", "tail": "Transparent Tube", "source_chunks": ["48_0"]}, {"head": "Transparent Tube", "relation": "Is Connected To", "tail": "Equipment", "source_chunks": ["48_0"]}, {"head": "Equipment", "relation": "Has", "tail": "Digital Display", "source_chunks": ["48_0"]}, {"head": "Digital Display", "relation": "Is Part Of", "tail": "Stirrer", "source_chunks": ["48_0"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Equipment", "source_chunks": ["48_1"]}, {"head": "Equipment", "relation": "Includes", "tail": "Erlenmeyer Flask", "source_chunks": ["48_1"]}, {"head": "Erlenmeyer Flask", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["48_1"]}, {"head": "Magnetic Stirrer", "relation": "Is Part Of", "tail": "Digital Hot Plate", "source_chunks": ["48_1"]}, {"head": "Digital Hot Plate", "relation": "Displays", "tail": "Temperature", "source_chunks": ["48_1"]}, {"head": "Temperature", "relation": "Is Set To", "tail": "70.0 Degrees Celsius", "source_chunks": ["48_1"]}, {"head": "Glass Flask", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["48_2"]}, {"head": "Glass Flask", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["48_2"]}, {"head": "Magnetic Stirrer", "relation": "Is Operating", "tail": "Glass Flask", "source_chunks": ["48_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:15:23,243 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~478 words, ~621 tokens)
2025-11-30 19:15:23,243 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:15:30,241 - src.components.global_refiner - DEBUG - LLM call completed in 7.00s
2025-11-30 19:15:30,241 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Laboratory Bench', 'Contains', 'Clear Plastic Container', ['48_0']], ['Clear Plastic Container', 'Contains', 'Water', ['48_0']], ['Water', 'Is In', 'Transparent Tube', ['48_0']], ['Transparent Tube', 'Is Connected To', 'Equipment', ['48_0']], ['Equipment', 'Has', 'Digital Display', ['48_0']], ['Digital Display', 'Is Part Of', 'Stirrer', ['48_0']], ['Laboratory', 'Contains', 'Equipment', ['48_1']], ['Equipment', 'Includes', 'Erlenmeyer Flask', ['48_1']], ['Erlenmeyer Flask', 'Is On', 'Magnetic Stirrer', ['48_1']], ['Magnetic Stirrer', 'Is Part Of', 'Digital Hot Plate', ['48_1']], ['Digital Hot Plate', 'Displays', 'Temperature', ['48_1']], ['Temperature', 'Is Set To', '70.0 Degrees Celsius', ['48_1']], ['Glass Flask', 'Contains', 'Clear Liquid', ['48_2']], ['Glass Flask', 'Is On', 'Magnetic Stirrer', ['48_2']], ['Magnetic Stirrer', 'Is Operating', 'Glass Flask', ['48_2']]] inter_chunk_relations=[] merge_instructions=[] prune_instructions=[]
2025-11-30 19:15:30,241 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Laboratory Bench', 'Contains', 'Clear Plastic Container', ['48_0']], ['Clear Plastic Container', 'Contains', 'Water', ['48_0']], ['Water', 'Is In', 'Transparent Tube', ['48_0']]]
2025-11-30 19:15:30,241 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=0, sample=[]
2025-11-30 19:15:30,241 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:15:30,242 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:15:30,242 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 7.00s, LLM: 7.00s)
2025-11-30 19:15:30,242 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 7.00s
2025-11-30 19:15:30,242 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:15:30,242 - src.pipeline.kg_builder - INFO - Pushing batch 49/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:15:30,242 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:15:30,391 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=493, relationships=480
2025-11-30 19:15:30,392 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:15:30,397 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=493, relationships=480
2025-11-30 19:15:30,399 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:15:30,399 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:15:30,399 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:15:30,399 - src.components.neo4j_handler - INFO - Batch injected in 0.16s (triplets: 0.16s, indexes: 0.00s)
2025-11-30 19:15:30,400 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 232, 'with_embedding': 232, 'linked_chunks': 184}
2025-11-30 19:15:30,400 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:15:30,495 - src.pipeline.acs_automata - DEBUG - Computed exact global_efficiency on 493 nodes
2025-11-30 19:15:30,767 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 445 nodes
2025-11-30 19:15:31,061 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 493, 'relationship_count': 1534, 'density': 0.0063, 'avg_degree': 6.2231, 'avg_unique_neighbors': 6.1663, 'global_efficiency': 0.3245, 'avg_path_length': 2.7114, 'avg_degree_centrality': 0.0126, 'max_degree_centrality': 0.5183, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0333, 'degree_assortativity': -0.1711, 'graph_robustness': 0.7379, 'diameter_estimate': 7, 'clustering_coefficient': 0.2784, 'weakly_connected_components': 49, 'largest_wcc_size': 445, 'pagerank_top10_percent': 5.99, 'louvain_communities': 60, 'louvain_modularity': 0.4051, 'label_entropy': 1.4988, 'computational_time': 0.6606960040517151}
2025-11-30 19:15:31,061 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 48, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501331.0616617, 'total_time': 13.370952890953049, 'aggregation': 3.0619557946920395e-06, 'network_info': 0.006513726897537708, 'llm_extraction': 12.54487383493688, 'data_cleaning': 3.4883967600762844e-05, 'neo4j_injection': 0.15700496302451938, 'embedding_time': 0, 'indexing_time': 0.0013694410445168614, 'graph_injection_time': 0.15531164803542197, 'acs_metrics': {'node_count': 493, 'relationship_count': 1534, 'density': 0.0063, 'avg_degree': 6.2231, 'avg_unique_neighbors': 6.1663, 'global_efficiency': 0.3245, 'avg_path_length': 2.7114, 'avg_degree_centrality': 0.0126, 'max_degree_centrality': 0.5183, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0333, 'degree_assortativity': -0.1711, 'graph_robustness': 0.7379, 'diameter_estimate': 7, 'clustering_coefficient': 0.2784, 'weakly_connected_components': 49, 'largest_wcc_size': 445, 'pagerank_top10_percent': 5.99, 'louvain_communities': 60, 'louvain_modularity': 0.4051, 'label_entropy': 1.4988, 'computational_time': 0.6606960040517151}, 'retrieval_queries': []}
2025-11-30 19:15:31,061 - src.pipeline.kg_builder - DEBUG - Batch 48 metrics: {
  "batch_idx": 48,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501331.0616617,
  "total_time": 13.370952890953049,
  "aggregation": 3.0619557946920395e-06,
  "network_info": 0.006513726897537708,
  "llm_extraction": 12.54487383493688,
  "data_cleaning": 3.4883967600762844e-05,
  "neo4j_injection": 0.15700496302451938,
  "embedding_time": 0,
  "indexing_time": 0.0013694410445168614,
  "graph_injection_time": 0.15531164803542197,
  "acs_metrics": {
    "node_count": 493,
    "relationship_count": 1534,
    "density": 0.0063,
    "avg_degree": 6.2231,
    "avg_unique_neighbors": 6.1663,
    "global_efficiency": 0.3245,
    "avg_path_length": 2.7114,
    "avg_degree_centrality": 0.0126,
    "max_degree_centrality": 0.5183,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0333,
    "degree_assortativity": -0.1711,
    "graph_robustness": 0.7379,
    "diameter_estimate": 7,
    "clustering_coefficient": 0.2784,
    "weakly_connected_components": 49,
    "largest_wcc_size": 445,
    "pagerank_top10_percent": 5.99,
    "louvain_communities": 60,
    "louvain_modularity": 0.4051,
    "label_entropy": 1.4988,
    "computational_time": 0.6606960040517151
  },
  "retrieval_queries": []
}
2025-11-30 19:15:31,062 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:15:31,062 - src.pipeline.kg_builder - INFO - Batch 49 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 12.54s, Clean: 0.00s, Neo4j: 0.16s, ACS: 0.66s
2025-11-30 19:15:31,062 - src.pipeline.kg_builder - INFO - Batch 49 completed in 13.37s
Processing KG batches:  68%|██████▊   | 49/72 [14:10<06:57, 18.16s/it]2025-11-30 19:15:31,062 - src.pipeline.kg_builder - INFO - Processing batch 50/72 (3 items)
2025-11-30 19:15:31,062 - src.pipeline.kg_builder - DEBUG - Batch 50 current_video_time: 12:23-12:28
2025-11-30 19:15:31,070 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 493
- Total Relationships: 480
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_0 ~245 words, content: Time: 12:13-12:18 Content: The video captures a sequence of events in a laboratory setting, focusing on a scientific experiment involving a chemical reaction or a...
2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_1 ~244 words, content: water. This suggests that the experiment involves a chemical reaction or a process that produces a gas or a liquid that needs to be collected...
2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_2 ~244 words, content: , a digital device with a control panel, is actively stirring the contents of the flask. The digital display on this device shows a reading...
2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_3 ~207 words, content: captures a continuous process in a laboratory setting, focusing on a chemical experiment involving a reflux or distillation setup. The camera's perspective shifts slightly across...
2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_4 ~206 words, content: In the background, there are white **cabinets** and a **glass-enclosed cabinet** (a fume hood or a storage cabinet) with various items on shelves. - The...
2025-11-30 19:15:31,071 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_5 ~54 words, content: shows a laboratory experiment where a chemical reaction is being conducted in a round-bottom flask. The setup is designed to heat the mixture, vaporize a...
2025-11-30 19:15:31,091 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:15:31,186 - src.components.pre_llm_injector - DEBUG - Found 232 existing chunk embeddings for similarity lookup
2025-11-30 19:15:31,263 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.799'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3', '0.791')]
2025-11-30 19:15:31,265 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3
2025-11-30 19:15:31,265 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0
2025-11-30 19:15:31,298 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Graduated_Cylinder / ID: 37_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Cylinder / ID: 36_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.747'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0', '0.739')]
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3', '0.775'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_1', '0.770')]
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.799'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3', '0.791')]
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0', '0.638'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.613')]
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_2', '0.737'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_38_3', '0.655')]
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_3', '0.763'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_3', '0.761')]
2025-11-30 19:15:31,299 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:15:31,300 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_0) (~245 words) with timeout=5.0s retries=3
2025-11-30 19:15:32,408 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:15:32,409 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:15:32,409 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_1) (~244 words) with timeout=5.0s retries=3
2025-11-30 19:15:33,539 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:15:33,539 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:15:33,540 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_2) (~244 words) with timeout=5.0s retries=3
2025-11-30 19:15:34,577 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:15:34,577 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:15:34,577 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_3) (~207 words) with timeout=5.0s retries=3
2025-11-30 19:15:36,011 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:15:36,011 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:15:36,011 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_4) (~206 words) with timeout=5.0s retries=3
2025-11-30 19:15:37,155 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:15:37,155 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:15:37,155 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_5) (~54 words) with timeout=5.0s retries=3
2025-11-30 19:15:38,271 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 5 (attempt 1)
2025-11-30 19:15:38,271 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 6 triplets
2025-11-30 19:15:38,271 - src.components.pre_llm_injector - INFO - Extracted 33 local triplets from 6 chunks
2025-11-30 19:15:38,271 - src.pipeline.kg_builder - INFO - Pre-extraction: 33 triplets in 7.20s
2025-11-30 19:15:38,272 - src.components.global_refiner - INFO - Capping refinement input: 33 → 15 triplets
2025-11-30 19:15:38,272 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Graduated_Cylinder / ID: 37_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Cylinder / ID: 36_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Laboratory Table", "relation": "Contains", "tail": "Equipment", "source_chunks": ["49_0"]}, {"head": "Equipment", "relation": "Includes", "tail": "Plastic Container", "source_chunks": ["49_0"]}, {"head": "Plastic Container", "relation": "Contains", "tail": "Water", "source_chunks": ["49_0", "49_1"]}, {"head": "Glass Container", "relation": "Connected To", "tail": "Tube", "source_chunks": ["49_0", "49_1"]}, {"head": "Tube", "relation": "Connected To", "tail": "Plastic Container", "source_chunks": ["49_0"]}, {"head": "Glass Container", "relation": "Connected To", "tail": "White Device", "source_chunks": ["49_0"]}, {"head": "Glass Container", "relation": "Produces", "tail": "Foam", "source_chunks": ["49_1"]}, {"head": "Tube", "relation": "Leads To", "tail": "Plastic Container", "source_chunks": ["49_1"]}, {"head": "Glass Container", "relation": "Placed On", "tail": "Digital Device", "source_chunks": ["49_1"]}, {"head": "Digital Device", "relation": "Stirs", "tail": "Glass Container", "source_chunks": ["49_1"]}, {"head": "Digital Device", "relation": "Stirs", "tail": "Flask", "source_chunks": ["49_2"]}, {"head": "Flask", "relation": "Contains", "tail": "Foam", "source_chunks": ["49_2"]}, {"head": "Tube", "relation": "Connects", "tail": "Flask", "source_chunks": ["49_2"]}, {"head": "Blue Base", "relation": "Supports", "tail": "Metal Rod", "source_chunks": ["49_2"]}, {"head": "Blue Base", "relation": "Holds", "tail": "Electrical Tape", "source_chunks": ["49_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:15:38,272 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2727 words, ~3545 tokens)
2025-11-30 19:15:38,272 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:15:38,294 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 9701 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:15:38,294 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:15:38,294 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:15:38,294 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:15:38,294 - src.pipeline.kg_builder - INFO - Pushing batch 50/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:15:38,295 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:15:38,488 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=506, relationships=495
2025-11-30 19:15:38,489 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:15:38,494 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=506, relationships=495
2025-11-30 19:15:38,497 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:15:38,497 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:15:38,498 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:15:38,498 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.20s, indexes: 0.00s)
2025-11-30 19:15:38,499 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 238, 'with_embedding': 238, 'linked_chunks': 187}
2025-11-30 19:15:38,499 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:15:38,539 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:15:38,821 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 455 nodes
2025-11-30 19:15:38,850 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 506, 'relationship_count': 1568, 'density': 0.0061, 'avg_degree': 6.1976, 'avg_unique_neighbors': 6.1383, 'global_efficiency': 0.3299, 'avg_path_length': 2.7432, 'avg_degree_centrality': 0.0123, 'max_degree_centrality': 0.505, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0349, 'degree_assortativity': -0.1648, 'graph_robustness': 0.7385, 'diameter_estimate': 50, 'clustering_coefficient': 0.2767, 'weakly_connected_components': 52, 'largest_wcc_size': 455, 'pagerank_top10_percent': 5.86, 'louvain_communities': 62, 'louvain_modularity': 0.426, 'label_entropy': 1.4987, 'computational_time': 0.3514866470359266}
2025-11-30 19:15:38,851 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 49, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501338.8511224, 'total_time': 7.788228070014156, 'aggregation': 3.4229597076773643e-06, 'network_info': 0.00774041295517236, 'llm_extraction': 7.224120514001697, 'data_cleaning': 1.3924087397754192e-05, 'neo4j_injection': 0.2032261760905385, 'embedding_time': 0, 'indexing_time': 0.003553152084350586, 'graph_injection_time': 0.1994645909871906, 'acs_metrics': {'node_count': 506, 'relationship_count': 1568, 'density': 0.0061, 'avg_degree': 6.1976, 'avg_unique_neighbors': 6.1383, 'global_efficiency': 0.3299, 'avg_path_length': 2.7432, 'avg_degree_centrality': 0.0123, 'max_degree_centrality': 0.505, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0349, 'degree_assortativity': -0.1648, 'graph_robustness': 0.7385, 'diameter_estimate': 50, 'clustering_coefficient': 0.2767, 'weakly_connected_components': 52, 'largest_wcc_size': 455, 'pagerank_top10_percent': 5.86, 'louvain_communities': 62, 'louvain_modularity': 0.426, 'label_entropy': 1.4987, 'computational_time': 0.3514866470359266}, 'retrieval_queries': []}
2025-11-30 19:15:38,851 - src.pipeline.kg_builder - DEBUG - Batch 49 metrics: {
  "batch_idx": 49,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501338.8511224,
  "total_time": 7.788228070014156,
  "aggregation": 3.4229597076773643e-06,
  "network_info": 0.00774041295517236,
  "llm_extraction": 7.224120514001697,
  "data_cleaning": 1.3924087397754192e-05,
  "neo4j_injection": 0.2032261760905385,
  "embedding_time": 0,
  "indexing_time": 0.003553152084350586,
  "graph_injection_time": 0.1994645909871906,
  "acs_metrics": {
    "node_count": 506,
    "relationship_count": 1568,
    "density": 0.0061,
    "avg_degree": 6.1976,
    "avg_unique_neighbors": 6.1383,
    "global_efficiency": 0.3299,
    "avg_path_length": 2.7432,
    "avg_degree_centrality": 0.0123,
    "max_degree_centrality": 0.505,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0349,
    "degree_assortativity": -0.1648,
    "graph_robustness": 0.7385,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2767,
    "weakly_connected_components": 52,
    "largest_wcc_size": 455,
    "pagerank_top10_percent": 5.86,
    "louvain_communities": 62,
    "louvain_modularity": 0.426,
    "label_entropy": 1.4987,
    "computational_time": 0.3514866470359266
  },
  "retrieval_queries": []
}
2025-11-30 19:15:38,852 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:15:38,852 - src.pipeline.kg_builder - INFO - Batch 50 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.22s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.35s
2025-11-30 19:15:38,852 - src.pipeline.kg_builder - INFO - Batch 50 completed in 7.79s
Processing KG batches:  69%|██████▉   | 50/72 [14:18<05:31, 15.05s/it]2025-11-30 19:15:38,852 - src.pipeline.kg_builder - INFO - Processing batch 51/72 (3 items)
2025-11-30 19:15:38,852 - src.pipeline.kg_builder - DEBUG - Batch 51 current_video_time: 12:38-12:43
2025-11-30 19:15:38,858 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 506
- Total Relationships: 495
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:15:38,858 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:15:38,858 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_50_0 ~234 words, content: Time: 12:28-12:33 Content: The video shows a person in a laboratory setting, wearing blue nitrile gloves, performing a procedure on a black lab bench. The...
2025-11-30 19:15:38,858 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_50_1 ~240 words, content: guide the tube, ensuring it is properly positioned within the container. The surrounding environment is a laboratory setting. To the left, there is a blue...
2025-11-30 19:15:38,858 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_50_2 ~24 words, content:  a glass cylinder holding pens and tools. The overall action appears to be the transfer of liquid or the setup for a chemical process.
2025-11-30 19:15:38,878 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:15:38,964 - src.components.pre_llm_injector - DEBUG - Found 238 existing chunk embeddings for similarity lookup
2025-11-30 19:15:39,003 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1', '0.799')]
2025-11-30 19:15:39,004 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1
2025-11-30 19:15:39,005 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1
2025-11-30 19:15:39,040 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Flexible_Tube / ID: 46_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
2025-11-30 19:15:39,044 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1: Subgraph: (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Glass Flask / ID: 13_3)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Burette / ID: 4_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Erlenmeyer Flask / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Reagent Vial / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Beaker / ID: 5_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Lab Environment / ID: 35_1)-[EMPHASIZES]->(Accuracy And Safety / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Burette / ID: 4_2)-[IS_CLAMPED_TO]->(Stand / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Flexible_Tube / ID: 46_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
2025-11-30 19:15:39,044 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_2', '0.562'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3', '0.470')]
2025-11-30 19:15:39,044 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1', '0.799')]
2025-11-30 19:15:39,044 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.760'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.742')]
2025-11-30 19:15:39,044 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:15:39,045 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_50_0) (~234 words) with timeout=5.0s retries=3
2025-11-30 19:15:40,696 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:15:40,696 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:15:40,696 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_50_1) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:15:41,609 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:15:41,609 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:15:41,610 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_50_2) (~24 words) with timeout=5.0s retries=3
2025-11-30 19:15:42,667 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:15:42,667 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:15:42,667 - src.components.pre_llm_injector - INFO - Extracted 18 local triplets from 3 chunks
2025-11-30 19:15:42,667 - src.pipeline.kg_builder - INFO - Pre-extraction: 18 triplets in 3.81s
2025-11-30 19:15:42,668 - src.components.global_refiner - INFO - Capping refinement input: 18 → 15 triplets
2025-11-30 19:15:42,668 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Flexible_Tube / ID: 46_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1: Subgraph: (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Glass Flask / ID: 13_3)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Burette / ID: 4_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Erlenmeyer Flask / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Reagent Vial / ID: 27_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Beaker / ID: 5_1)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Lab Environment / ID: 35_1)-[EMPHASIZES]->(Accuracy And Safety / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Burette / ID: 4_2)-[IS_CLAMPED_TO]->(Stand / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Flexible_Tube / ID: 46_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["50_0"]}, {"head": "Person", "relation": "Manipulates", "tail": "Translucent_Tube", "source_chunks": ["50_0"]}, {"head": "Translucent_Tube", "relation": "Is Connected To", "tail": "Equipment", "source_chunks": ["50_0"]}, {"head": "Translucent_Tube", "relation": "Is Inserted Into", "tail": "Clear_Plastic_Container", "source_chunks": ["50_0"]}, {"head": "Clear_Plastic_Container", "relation": "Is Inside", "tail": "White_Plastic_Measuring_Jug", "source_chunks": ["50_0"]}, {"head": "Person", "relation": "Holds", "tail": "Translucent_Tube", "source_chunks": ["50_0"]}, {"head": "Person", "relation": "Holds", "tail": "Tube", "source_chunks": ["50_1"]}, {"head": "Person", "relation": "Holds", "tail": "Container", "source_chunks": ["50_1"]}, {"head": "Tube", "relation": "Is Inserted Into", "tail": "Container", "source_chunks": ["50_1"]}, {"head": "Person", "relation": "Wears", "tail": "Watch", "source_chunks": ["50_1"]}, {"head": "Watch", "relation": "Has Color", "tail": "Gold", "source_chunks": ["50_1"]}, {"head": "Container", "relation": "Contains", "tail": "Liquid", "source_chunks": ["50_1"]}, {"head": "Glass Cylinder", "relation": "Holds", "tail": "Pens And Tools", "source_chunks": ["50_2"]}, {"head": "Glass Cylinder", "relation": "Contains", "tail": "Liquid", "source_chunks": ["50_2"]}, {"head": "Person", "relation": "Performs", "tail": "Transfer Of Liquid", "source_chunks": ["50_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:15:42,669 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3414 words, ~4438 tokens)
2025-11-30 19:15:42,669 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:15:42,692 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 12228 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:15:42,693 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:15:42,693 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:15:42,693 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:15:42,693 - src.pipeline.kg_builder - INFO - Pushing batch 51/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:15:42,693 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:15:42,834 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=516, relationships=508
2025-11-30 19:15:42,834 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:15:42,840 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=516, relationships=508
2025-11-30 19:15:42,844 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:15:42,845 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:15:42,845 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:15:42,845 - src.components.neo4j_handler - INFO - Batch injected in 0.15s (triplets: 0.15s, indexes: 0.01s)
2025-11-30 19:15:42,849 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 241, 'with_embedding': 241, 'linked_chunks': 190}
2025-11-30 19:15:42,849 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:15:42,889 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:15:43,182 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 465 nodes
2025-11-30 19:15:43,212 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 516, 'relationship_count': 1596, 'density': 0.006, 'avg_degree': 6.186, 'avg_unique_neighbors': 6.1279, 'global_efficiency': 0.3118, 'avg_path_length': 2.7395, 'avg_degree_centrality': 0.012, 'max_degree_centrality': 0.5107, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0464, 'degree_assortativity': -0.169, 'graph_robustness': 0.8471, 'diameter_estimate': 50, 'clustering_coefficient': 0.2792, 'weakly_connected_components': 52, 'largest_wcc_size': 465, 'pagerank_top10_percent': 5.74, 'louvain_communities': 62, 'louvain_modularity': 0.4192, 'label_entropy': 1.4984, 'computational_time': 0.3623765439260751}
2025-11-30 19:15:43,212 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 50, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501343.21218, 'total_time': 4.3597957589663565, 'aggregation': 2.6599736884236336e-06, 'network_info': 0.005726646981202066, 'llm_extraction': 3.8348674279404804, 'data_cleaning': 1.8143095076084137e-05, 'neo4j_injection': 0.15276302199345082, 'embedding_time': 0, 'indexing_time': 0.0053459759801626205, 'graph_injection_time': 0.14715517894364893, 'acs_metrics': {'node_count': 516, 'relationship_count': 1596, 'density': 0.006, 'avg_degree': 6.186, 'avg_unique_neighbors': 6.1279, 'global_efficiency': 0.3118, 'avg_path_length': 2.7395, 'avg_degree_centrality': 0.012, 'max_degree_centrality': 0.5107, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0464, 'degree_assortativity': -0.169, 'graph_robustness': 0.8471, 'diameter_estimate': 50, 'clustering_coefficient': 0.2792, 'weakly_connected_components': 52, 'largest_wcc_size': 465, 'pagerank_top10_percent': 5.74, 'louvain_communities': 62, 'louvain_modularity': 0.4192, 'label_entropy': 1.4984, 'computational_time': 0.3623765439260751}, 'retrieval_queries': []}
2025-11-30 19:15:43,212 - src.pipeline.kg_builder - DEBUG - Batch 50 metrics: {
  "batch_idx": 50,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501343.21218,
  "total_time": 4.3597957589663565,
  "aggregation": 2.6599736884236336e-06,
  "network_info": 0.005726646981202066,
  "llm_extraction": 3.8348674279404804,
  "data_cleaning": 1.8143095076084137e-05,
  "neo4j_injection": 0.15276302199345082,
  "embedding_time": 0,
  "indexing_time": 0.0053459759801626205,
  "graph_injection_time": 0.14715517894364893,
  "acs_metrics": {
    "node_count": 516,
    "relationship_count": 1596,
    "density": 0.006,
    "avg_degree": 6.186,
    "avg_unique_neighbors": 6.1279,
    "global_efficiency": 0.3118,
    "avg_path_length": 2.7395,
    "avg_degree_centrality": 0.012,
    "max_degree_centrality": 0.5107,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0464,
    "degree_assortativity": -0.169,
    "graph_robustness": 0.8471,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2792,
    "weakly_connected_components": 52,
    "largest_wcc_size": 465,
    "pagerank_top10_percent": 5.74,
    "louvain_communities": 62,
    "louvain_modularity": 0.4192,
    "label_entropy": 1.4984,
    "computational_time": 0.3623765439260751
  },
  "retrieval_queries": []
}
2025-11-30 19:15:43,213 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:15:43,213 - src.pipeline.kg_builder - INFO - Batch 51 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 3.83s, Clean: 0.00s, Neo4j: 0.15s, ACS: 0.36s
2025-11-30 19:15:43,213 - src.pipeline.kg_builder - INFO - Batch 51 completed in 4.36s
Processing KG batches:  71%|███████   | 51/72 [14:22<04:08, 11.84s/it]2025-11-30 19:15:43,213 - src.pipeline.kg_builder - INFO - Processing batch 52/72 (3 items)
2025-11-30 19:15:43,213 - src.pipeline.kg_builder - DEBUG - Batch 52 current_video_time: 12:53-12:58
2025-11-30 19:15:43,219 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 516
- Total Relationships: 508
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:15:43,220 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:15:43,220 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_0 ~232 words, content: Time: 12:43-12:48 Content: The video captures a close-up, first-person view of a laboratory procedure being performed on a black countertop. The central action involves a...
2025-11-30 19:15:43,220 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_1 ~227 words, content: a controlled scientific or medical procedure. The focus is on the precise transfer of a substance, likely a reagent or a sample, into a container...
2025-11-30 19:15:43,220 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_2 ~241 words, content: view of a person's hands, protected by blue nitrile gloves. The person is holding a long, flexible, translucent tube. They are carefully inserting the end...
2025-11-30 19:15:43,220 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3 ~121 words, content: system. The person's hands are still engaged, ensuring the tube is properly positioned. The background shows a well-equipped laboratory with white cabinets, shelves filled with...
2025-11-30 19:15:43,240 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:15:43,330 - src.components.pre_llm_injector - DEBUG - Found 241 existing chunk embeddings for similarity lookup
2025-11-30 19:15:43,383 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5', '0.871'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.841')]
2025-11-30 19:15:43,385 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5 via source_chunk_ids
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 via source_chunk_ids
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_3', '0.823'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_3', '0.812')]
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_3', '0.831'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_0', '0.803')]
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_24_2', '0.575'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_2', '0.570')]
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_5', '0.871'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.841')]
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:15:43,386 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_0) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:15:44,667 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:15:44,667 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:15:44,667 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_1) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:15:45,843 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:15:45,843 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:15:45,844 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_2) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:15:47,734 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:15:47,735 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:15:47,735 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3) (~121 words) with timeout=5.0s retries=3
2025-11-30 19:15:48,735 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:15:48,735 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:15:48,735 - src.components.pre_llm_injector - INFO - Extracted 22 local triplets from 4 chunks
2025-11-30 19:15:48,736 - src.pipeline.kg_builder - INFO - Pre-extraction: 22 triplets in 5.52s
2025-11-30 19:15:48,736 - src.components.global_refiner - INFO - Capping refinement input: 22 → 15 triplets
2025-11-30 19:15:48,736 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
No subgraph context available
No existing entities or relations.

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["51_0", "51_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Beaker", "source_chunks": ["51_0"]}, {"head": "Person", "relation": "Uses", "tail": "Translucent_Tube", "source_chunks": ["51_0"]}, {"head": "Translucent_Tube", "relation": "Transfers", "tail": "Clear_Liquid", "source_chunks": ["51_0"]}, {"head": "Clear_Liquid", "relation": "Flows Into", "tail": "Glass_Beaker", "source_chunks": ["51_0"]}, {"head": "Person", "relation": "Wears", "tail": "Watch", "source_chunks": ["51_0", "51_3"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["51_1"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Beaker", "source_chunks": ["51_1"]}, {"head": "Person", "relation": "Uses", "tail": "Translucent Tube", "source_chunks": ["51_1"]}, {"head": "Translucent Tube", "relation": "Transfers", "tail": "Clear Liquid", "source_chunks": ["51_1"]}, {"head": "Clear Liquid", "relation": "Is Transferred To", "tail": "Glass Beaker", "source_chunks": ["51_1"]}, {"head": "Person", "relation": "Holds", "tail": "Watch", "source_chunks": ["51_1"]}, {"head": "Person", "relation": "Holds", "tail": "Translucent_Tube", "source_chunks": ["51_2"]}, {"head": "Translucent_Tube", "relation": "Is Inserted Into", "tail": "Clear_Plastic_Container", "source_chunks": ["51_2"]}, {"head": "Clear_Plastic_Container", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["51_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:15:48,736 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~456 words, ~593 tokens)
2025-11-30 19:15:48,736 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:15:58,945 - src.components.global_refiner - DEBUG - LLM call completed in 10.21s
2025-11-30 19:15:58,945 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['51_0', '51_2']], ['Person', 'Holds', 'Glass_Beaker', ['51_0']], ['Person', 'Uses', 'Translucent_Tube', ['51_0']], ['Translucent_Tube', 'Transfers', 'Clear_Liquid', ['51_0']], ['Clear_Liquid', 'Flows Into', 'Glass_Beaker', ['51_0']], ['Person', 'Wears', 'Watch', ['51_0', '51_3']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['51_1']], ['Person', 'Holds', 'Glass Beaker', ['51_1']], ['Person', 'Uses', 'Translucent Tube', ['51_1']], ['Translucent Tube', 'Transfers', 'Clear Liquid', ['51_1']], ['Clear Liquid', 'Is Transferred To', 'Glass Beaker', ['51_1']], ['Person', 'Holds', 'Watch', ['51_1']], ['Person', 'Holds', 'Translucent_Tube', ['51_2']], ['Translucent_Tube', 'Is Inserted Into', 'Clear_Plastic_Container', ['51_2']], ['Clear_Plastic_Container', 'Contains', 'Clear_Liquid', ['51_2']]] inter_chunk_relations=[] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '0_0'}, {'local': 'Translucent Tube', 'existing': 'Translucent_Tube', 'existing_id': '0_1'}, {'local': 'Clear Liquid', 'existing': 'Clear_Liquid', 'existing_id': '0_2'}, {'local': 'Glass Beaker', 'existing': 'Glass_Beaker', 'existing_id': '0_3'}] prune_instructions=[]
2025-11-30 19:15:58,945 - src.components.global_refiner - WARNING - LLM hallucinated 4 merge_instructions despite empty context, forcing to []
2025-11-30 19:15:58,945 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['51_0', '51_2']], ['Person', 'Holds', 'Glass_Beaker', ['51_0']], ['Person', 'Uses', 'Translucent_Tube', ['51_0']]]
2025-11-30 19:15:58,945 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=0, sample=[]
2025-11-30 19:15:58,945 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=0, sample=[]
2025-11-30 19:15:58,945 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:15:58,945 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 10.21s, LLM: 10.21s)
2025-11-30 19:15:58,945 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 10.21s
2025-11-30 19:15:58,945 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:15:58,945 - src.pipeline.kg_builder - INFO - Pushing batch 52/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:15:58,946 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:15:59,116 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=521, relationships=516
2025-11-30 19:15:59,117 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:15:59,126 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=521, relationships=516
2025-11-30 19:15:59,129 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:15:59,129 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:15:59,130 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:15:59,130 - src.components.neo4j_handler - INFO - Batch injected in 0.18s (triplets: 0.18s, indexes: 0.00s)
2025-11-30 19:15:59,131 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 245, 'with_embedding': 245, 'linked_chunks': 194}
2025-11-30 19:15:59,131 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:15:59,171 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:15:59,472 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 470 nodes
2025-11-30 19:15:59,548 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 521, 'relationship_count': 1621, 'density': 0.006, 'avg_degree': 6.2226, 'avg_unique_neighbors': 6.1574, 'global_efficiency': 0.3125, 'avg_path_length': 2.7322, 'avg_degree_centrality': 0.012, 'max_degree_centrality': 0.5154, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0424, 'degree_assortativity': -0.1725, 'graph_robustness': 0.8439, 'diameter_estimate': 50, 'clustering_coefficient': 0.2791, 'weakly_connected_components': 52, 'largest_wcc_size': 470, 'pagerank_top10_percent': 5.69, 'louvain_communities': 64, 'louvain_modularity': 0.4193, 'label_entropy': 1.4987, 'computational_time': 0.41665836807806045}
2025-11-30 19:15:59,548 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 51, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501359.5487792, 'total_time': 16.335362685960717, 'aggregation': 2.647051587700844e-06, 'network_info': 0.006203584955073893, 'llm_extraction': 15.725954673951492, 'data_cleaning': 4.149798769503832e-05, 'neo4j_injection': 0.18431373499333858, 'embedding_time': 0, 'indexing_time': 0.003664824995212257, 'graph_injection_time': 0.18036091804970056, 'acs_metrics': {'node_count': 521, 'relationship_count': 1621, 'density': 0.006, 'avg_degree': 6.2226, 'avg_unique_neighbors': 6.1574, 'global_efficiency': 0.3125, 'avg_path_length': 2.7322, 'avg_degree_centrality': 0.012, 'max_degree_centrality': 0.5154, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0424, 'degree_assortativity': -0.1725, 'graph_robustness': 0.8439, 'diameter_estimate': 50, 'clustering_coefficient': 0.2791, 'weakly_connected_components': 52, 'largest_wcc_size': 470, 'pagerank_top10_percent': 5.69, 'louvain_communities': 64, 'louvain_modularity': 0.4193, 'label_entropy': 1.4987, 'computational_time': 0.41665836807806045}, 'retrieval_queries': []}
2025-11-30 19:15:59,548 - src.pipeline.kg_builder - DEBUG - Batch 51 metrics: {
  "batch_idx": 51,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501359.5487792,
  "total_time": 16.335362685960717,
  "aggregation": 2.647051587700844e-06,
  "network_info": 0.006203584955073893,
  "llm_extraction": 15.725954673951492,
  "data_cleaning": 4.149798769503832e-05,
  "neo4j_injection": 0.18431373499333858,
  "embedding_time": 0,
  "indexing_time": 0.003664824995212257,
  "graph_injection_time": 0.18036091804970056,
  "acs_metrics": {
    "node_count": 521,
    "relationship_count": 1621,
    "density": 0.006,
    "avg_degree": 6.2226,
    "avg_unique_neighbors": 6.1574,
    "global_efficiency": 0.3125,
    "avg_path_length": 2.7322,
    "avg_degree_centrality": 0.012,
    "max_degree_centrality": 0.5154,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0424,
    "degree_assortativity": -0.1725,
    "graph_robustness": 0.8439,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2791,
    "weakly_connected_components": 52,
    "largest_wcc_size": 470,
    "pagerank_top10_percent": 5.69,
    "louvain_communities": 64,
    "louvain_modularity": 0.4193,
    "label_entropy": 1.4987,
    "computational_time": 0.41665836807806045
  },
  "retrieval_queries": []
}
2025-11-30 19:15:59,549 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:15:59,549 - src.pipeline.kg_builder - INFO - Batch 52 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 15.73s, Clean: 0.00s, Neo4j: 0.18s, ACS: 0.42s
2025-11-30 19:15:59,550 - src.pipeline.kg_builder - INFO - Batch 52 completed in 16.34s
Processing KG batches:  72%|███████▏  | 52/72 [14:38<04:23, 13.19s/it]2025-11-30 19:15:59,550 - src.pipeline.kg_builder - INFO - Processing batch 53/72 (3 items)
2025-11-30 19:15:59,550 - src.pipeline.kg_builder - DEBUG - Batch 53 current_video_time: 13:08-13:13
2025-11-30 19:15:59,559 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 521
- Total Relationships: 516
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:15:59,559 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:15:59,559 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_52_0 ~241 words, content: Time: 12:58-13:03 Content: The video captures a sequence of actions in a laboratory setting, focusing on a person performing a procedure involving a long, flexible...
2025-11-30 19:15:59,559 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_52_1 ~240 words, content: are several power outlets, a glass beaker with pens and tools, a green bag of wipes, and a container with cotton balls. The background shows...
2025-11-30 19:15:59,559 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_52_2 ~207 words, content: with various items, including a blue foam block, a roll of tape, electrical cords, a glass beaker holding pens and scissors, a container of cotton...
2025-11-30 19:15:59,579 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:15:59,669 - src.components.pre_llm_injector - DEBUG - Found 245 existing chunk embeddings for similarity lookup
2025-11-30 19:15:59,709 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_3', '0.701'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4', '0.700')]
2025-11-30 19:15:59,711 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4
2025-11-30 19:15:59,711 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_3 via source_chunk_ids
2025-11-30 19:15:59,729 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[USES]->(Translucent Tube / ID: 51_1)
2025-11-30 19:15:59,729 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_3', '0.555'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.551')]
2025-11-30 19:15:59,729 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.566'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_0', '0.561')]
2025-11-30 19:15:59,729 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_48_3', '0.701'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4', '0.700')]
2025-11-30 19:15:59,729 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:15:59,729 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_52_0) (~241 words) with timeout=5.0s retries=3
2025-11-30 19:16:01,419 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:16:01,419 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:16:01,419 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_52_1) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:16:02,731 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:16:02,731 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:16:02,731 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_52_2) (~207 words) with timeout=5.0s retries=3
2025-11-30 19:16:03,934 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:16:03,934 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:16:03,935 - src.components.pre_llm_injector - INFO - Extracted 16 local triplets from 3 chunks
2025-11-30 19:16:03,935 - src.pipeline.kg_builder - INFO - Pre-extraction: 16 triplets in 4.38s
2025-11-30 19:16:03,935 - src.components.global_refiner - INFO - Capping refinement input: 16 → 15 triplets
2025-11-30 19:16:03,935 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass Beaker / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 45_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[USES]->(Translucent Tube / ID: 51_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["52_0", "52_1"]}, {"head": "Person", "relation": "Holds", "tail": "Translucent_Tube", "source_chunks": ["52_0", "52_1"]}, {"head": "Translucent_Tube", "relation": "Is Connected To", "tail": "Yellow_Apparatus", "source_chunks": ["52_0"]}, {"head": "Yellow_Apparatus", "relation": "Is Mounted On", "tail": "Metal_Stand", "source_chunks": ["52_0"]}, {"head": "Person", "relation": "Guides", "tail": "Translucent_Tube", "source_chunks": ["52_0"]}, {"head": "Translucent_Tube", "relation": "Is Inserted Into", "tail": "Clear_Plastic_Container", "source_chunks": ["52_0"]}, {"head": "Person", "relation": "Holds", "tail": "Clear_Plastic_Container", "source_chunks": ["52_1"]}, {"head": "Person", "relation": "Wears", "tail": "Watch", "source_chunks": ["52_1"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Electrical_Cables", "source_chunks": ["52_1"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Blue_Foam_Block", "source_chunks": ["52_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["52_2"]}, {"head": "Person", "relation": "Holds", "tail": "Translucent Tube", "source_chunks": ["52_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Beaker", "source_chunks": ["52_2"]}, {"head": "Translucent Tube", "relation": "Transfers", "tail": "Clear Liquid", "source_chunks": ["52_2"]}, {"head": "Glass Beaker", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["52_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:16:03,936 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1458 words, ~1895 tokens)
2025-11-30 19:16:03,936 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:16:18,337 - src.components.global_refiner - DEBUG - LLM call completed in 14.40s
2025-11-30 19:16:18,337 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['52_0', '52_1']], ['Person', 'Holds', 'Translucent_Tube', ['52_0', '52_2']], ['Translucent_Tube', 'Is Connected To', 'Yellow_Apparatus', ['52_0']], ['Yellow_Apparatus', 'Is Mounted On', 'Metal_Stand', ['52_0']], ['Person', 'Guides', 'Translucent_Tube', ['52_0']], ['Translucent_Tube', 'Is Inserted Into', 'Clear_Plastic_Container', ['52_0']], ['Person', 'Holds', 'Clear_Plastic_Container', ['52_1']], ['Person', 'Wears', 'Watch', ['52_1']], ['Lab_Bench', 'Contains', 'Electrical_Cables', ['52_1']], ['Lab_Bench', 'Contains', 'Blue_Foam_Block', ['52_1']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['52_2']], ['Person', 'Holds', 'Translucent Tube', ['52_2']], ['Person', 'Holds', 'Glass Beaker', ['52_2']], ['Translucent_Tube', 'Transfers', 'Clear Liquid', ['52_2']], ['Glass Beaker', 'Contains', 'Clear Liquid', ['52_2']]] inter_chunk_relations=[['Lab_Bench', 'Contains', 'Laboratory Table', ['52_1']], ['Translucent_Tube', 'Is Connected To', 'Yellow_Apparatus', ['52_0']], ['Translucent_Tube', 'Is Inserted Into', 'Clear_Plastic_Container', ['52_0']], ['Person', 'Holds', 'Clear_Plastic_Container', ['52_1']], ['Person', 'Wears', 'Watch', ['52_1']]] merge_instructions=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '50_0'}, {'local': 'Translucent Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Container', 'existing': 'Container', 'existing_id': '4_1'}, {'local': 'Glass Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Translucent_Tube'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Clear_Plastic_Container'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Watch'}]
2025-11-30 19:16:18,337 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['52_0', '52_1']], ['Person', 'Holds', 'Translucent_Tube', ['52_0', '52_2']], ['Translucent_Tube', 'Is Connected To', 'Yellow_Apparatus', ['52_0']]]
2025-11-30 19:16:18,337 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Lab_Bench', 'Contains', 'Laboratory Table', ['52_1']], ['Translucent_Tube', 'Is Connected To', 'Yellow_Apparatus', ['52_0']], ['Translucent_Tube', 'Is Inserted Into', 'Clear_Plastic_Container', ['52_0']]]
2025-11-30 19:16:18,337 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '50_0'}, {'local': 'Translucent Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Container', 'existing': 'Container', 'existing_id': '4_1'}]
2025-11-30 19:16:18,337 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Translucent_Tube'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Clear_Plastic_Container'}]
2025-11-30 19:16:18,337 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue Nitrile Gloves', 'existing': 'Blue_Nitrile_Gloves', 'existing_id': '50_0'}, {'local': 'Translucent Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Container', 'existing': 'Container', 'existing_id': '4_1'}, {'local': 'Glass Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}]
2025-11-30 19:16:18,337 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue_Nitrile_Gloves'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Translucent_Tube'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Clear_Plastic_Container'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Watch'}]
2025-11-30 19:16:18,337 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 14.40s, LLM: 14.40s)
2025-11-30 19:16:18,337 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 14.40s
2025-11-30 19:16:18,338 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:16:18,338 - src.pipeline.kg_builder - INFO - Pushing batch 53/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:16:18,338 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:16:18,489 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=527, relationships=524
2025-11-30 19:16:18,489 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:16:18,490 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue Nitrile Gloves -> Blue_Nitrile_Gloves
2025-11-30 19:16:18,495 - src.components.neo4j_handler - DEBUG - APOC merge successful: Translucent Tube -> Translucent_Tube
2025-11-30 19:16:18,499 - src.components.neo4j_handler - DEBUG - APOC merge successful: Clear Plastic Container -> Container
2025-11-30 19:16:18,503 - src.components.neo4j_handler - DEBUG - APOC merge successful: Glass Beaker -> Beaker
2025-11-30 19:16:18,504 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:16:18,511 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue_Nitrile_Gloves
2025-11-30 19:16:18,512 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Translucent_Tube
2025-11-30 19:16:18,513 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Clear_Plastic_Container
2025-11-30 19:16:18,515 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Watch
2025-11-30 19:16:18,515 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:16:18,516 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab_Bench -[Contains]-> Laboratory Table
2025-11-30 19:16:18,545 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Translucent_Tube -[Is Connected To]-> Yellow_Apparatus
2025-11-30 19:16:18,574 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Translucent_Tube -[Is Inserted Into]-> Clear_Plastic_Container
2025-11-30 19:16:18,576 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Clear_Plastic_Container
2025-11-30 19:16:18,577 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Wears]-> Watch
2025-11-30 19:16:18,579 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:16:18,584 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=523, relationships=519
2025-11-30 19:16:18,586 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:16:18,586 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:16:18,586 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:16:18,586 - src.components.neo4j_handler - INFO - Batch injected in 0.25s (triplets: 0.25s, indexes: 0.00s)
2025-11-30 19:16:18,587 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 248, 'with_embedding': 248, 'linked_chunks': 197}
2025-11-30 19:16:18,587 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:16:18,647 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:16:18,958 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 472 nodes
2025-11-30 19:16:18,988 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 523, 'relationship_count': 1638, 'density': 0.006, 'avg_degree': 6.2639, 'avg_unique_neighbors': 6.1989, 'global_efficiency': 0.3143, 'avg_path_length': 2.7292, 'avg_degree_centrality': 0.012, 'max_degree_centrality': 0.5134, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0531, 'degree_assortativity': -0.1668, 'graph_robustness': 0.8687, 'diameter_estimate': 50, 'clustering_coefficient': 0.269, 'weakly_connected_components': 52, 'largest_wcc_size': 472, 'pagerank_top10_percent': 5.67, 'louvain_communities': 62, 'louvain_modularity': 0.4138, 'label_entropy': 1.499, 'computational_time': 0.40114045701920986}
2025-11-30 19:16:18,989 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 52, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501378.9891553, 'total_time': 19.439049333916046, 'aggregation': 3.8120197132229805e-06, 'network_info': 0.009061865974217653, 'llm_extraction': 18.77871451608371, 'data_cleaning': 3.9368984289467335e-05, 'neo4j_injection': 0.24842774402350187, 'embedding_time': 0, 'indexing_time': 0.002214236999861896, 'graph_injection_time': 0.24587827501818538, 'acs_metrics': {'node_count': 523, 'relationship_count': 1638, 'density': 0.006, 'avg_degree': 6.2639, 'avg_unique_neighbors': 6.1989, 'global_efficiency': 0.3143, 'avg_path_length': 2.7292, 'avg_degree_centrality': 0.012, 'max_degree_centrality': 0.5134, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0531, 'degree_assortativity': -0.1668, 'graph_robustness': 0.8687, 'diameter_estimate': 50, 'clustering_coefficient': 0.269, 'weakly_connected_components': 52, 'largest_wcc_size': 472, 'pagerank_top10_percent': 5.67, 'louvain_communities': 62, 'louvain_modularity': 0.4138, 'label_entropy': 1.499, 'computational_time': 0.40114045701920986}, 'retrieval_queries': []}
2025-11-30 19:16:18,989 - src.pipeline.kg_builder - DEBUG - Batch 52 metrics: {
  "batch_idx": 52,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501378.9891553,
  "total_time": 19.439049333916046,
  "aggregation": 3.8120197132229805e-06,
  "network_info": 0.009061865974217653,
  "llm_extraction": 18.77871451608371,
  "data_cleaning": 3.9368984289467335e-05,
  "neo4j_injection": 0.24842774402350187,
  "embedding_time": 0,
  "indexing_time": 0.002214236999861896,
  "graph_injection_time": 0.24587827501818538,
  "acs_metrics": {
    "node_count": 523,
    "relationship_count": 1638,
    "density": 0.006,
    "avg_degree": 6.2639,
    "avg_unique_neighbors": 6.1989,
    "global_efficiency": 0.3143,
    "avg_path_length": 2.7292,
    "avg_degree_centrality": 0.012,
    "max_degree_centrality": 0.5134,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0531,
    "degree_assortativity": -0.1668,
    "graph_robustness": 0.8687,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.269,
    "weakly_connected_components": 52,
    "largest_wcc_size": 472,
    "pagerank_top10_percent": 5.67,
    "louvain_communities": 62,
    "louvain_modularity": 0.4138,
    "label_entropy": 1.499,
    "computational_time": 0.40114045701920986
  },
  "retrieval_queries": []
}
2025-11-30 19:16:18,990 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:16:18,990 - src.pipeline.kg_builder - INFO - Batch 53 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 18.78s, Clean: 0.00s, Neo4j: 0.25s, ACS: 0.40s
2025-11-30 19:16:18,990 - src.pipeline.kg_builder - INFO - Batch 53 completed in 19.44s
Processing KG batches:  74%|███████▎  | 53/72 [14:58<04:46, 15.06s/it]2025-11-30 19:16:18,990 - src.pipeline.kg_builder - INFO - Processing batch 54/72 (3 items)
2025-11-30 19:16:18,990 - src.pipeline.kg_builder - DEBUG - Batch 54 current_video_time: 13:23-13:28
2025-11-30 19:16:18,996 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 523
- Total Relationships: 519
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:16:18,997 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:16:18,997 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_0 ~226 words, content: Time: 13:13-13:18 Content: The video shows a person conducting a laboratory procedure, likely a rinsing or washing step, from a first-person perspective. The individual, wearing...
2025-11-30 19:16:18,997 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_1 ~225 words, content: , the video captures a precise laboratory technique where a glass container is being rinsed or washed using a liquid transfer method, resulting in a...
2025-11-30 19:16:18,997 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2 ~227 words, content: . The person in the foreground continues to hold the white tube, which is now positioned over the large jug. The workbench is cluttered with...
2025-11-30 19:16:19,017 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:16:19,108 - src.components.pre_llm_injector - DEBUG - Found 248 existing chunk embeddings for similarity lookup
2025-11-30 19:16:19,150 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3', '0.848'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4', '0.842')]
2025-11-30 19:16:19,152 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3 via source_chunk_ids
2025-11-30 19:16:19,152 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4
2025-11-30 19:16:19,170 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0)
2025-11-30 19:16:19,170 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.701'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1', '0.647')]
2025-11-30 19:16:19,170 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_0', '0.768'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_4', '0.744')]
2025-11-30 19:16:19,170 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3', '0.848'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4', '0.842')]
2025-11-30 19:16:19,170 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:16:19,170 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_0) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:16:20,573 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:16:20,573 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:16:20,574 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_1) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:16:21,909 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:16:21,909 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:16:21,910 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:16:23,179 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:16:23,179 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:16:23,179 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:16:23,179 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 4.18s
2025-11-30 19:16:23,180 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:16:23,180 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_44_4: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["53_0", "53_1"]}, {"head": "Person", "relation": "Holds", "tail": "Flexible_Tube", "source_chunks": ["53_0"]}, {"head": "Flexible_Tube", "relation": "Is Inserted Into", "tail": "Beaker", "source_chunks": ["53_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Container", "source_chunks": ["53_0"]}, {"head": "Glass_Container", "relation": "Is Submerged In", "tail": "Beaker", "source_chunks": ["53_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["53_0"]}, {"head": "Person", "relation": "Holds", "tail": "White_Tube", "source_chunks": ["53_1"]}, {"head": "Person", "relation": "Holds", "tail": "Clear_Plastic_Jug", "source_chunks": ["53_1"]}, {"head": "Person", "relation": "Manipulates", "tail": "White_Tube", "source_chunks": ["53_1"]}, {"head": "Person", "relation": "Manipulates", "tail": "Clear_Plastic_Jug", "source_chunks": ["53_1"]}, {"head": "Person", "relation": "Observes", "tail": "Cloudy_Liquid", "source_chunks": ["53_1"]}, {"head": "Person", "relation": "Holds", "tail": "White Tube", "source_chunks": ["53_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["53_2"]}, {"head": "White Tube", "relation": "Is Positioned Over", "tail": "Large Jug", "source_chunks": ["53_2"]}, {"head": "Workbench", "relation": "Contains", "tail": "Glass Beaker", "source_chunks": ["53_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:16:23,180 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1435 words, ~1866 tokens)
2025-11-30 19:16:23,180 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:16:33,210 - src.components.global_refiner - DEBUG - LLM call completed in 10.03s
2025-11-30 19:16:33,210 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['53_0']], ['Person', 'Holds', 'Flexible_Tube', ['53_0']], ['Flexible_Tube', 'Is Inserted Into', 'Beaker', ['53_0']], ['Person', 'Holds', 'Glass_Container', ['53_0']], ['Glass_Container', 'Is Submerged In', 'Beaker', ['53_0']], ['Beaker', 'Contains', 'Clear_Liquid', ['53_0']], ['Person', 'Holds', 'White_Tube', ['53_1']], ['Person', 'Holds', 'Clear_Plastic_Jug', ['53_1']], ['Person', 'Manipulates', 'White_Tube', ['53_1']], ['Person', 'Manipulates', 'Clear_Plastic_Jug', ['53_1']], ['Person', 'Observes', 'Cloudy_Liquid', ['53_1']], ['Person', 'Holds', 'White Tube', ['53_2']], ['Person', 'Wears', 'Blue Nitrile Gloves', ['53_2']], ['White Tube', 'Is Positioned Over', 'Large Jug', ['53_2']], ['Workbench', 'Contains', 'Glass Beaker', ['53_2']]] inter_chunk_relations=[['Workbench', 'Contains', 'Laboratory Table', ['53_2']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '0_3'}, {'local': 'White Tube', 'existing': 'White Tube', 'existing_id': '45_0'}, {'local': 'Flexible_Tube', 'existing': 'Long White Flexible Tube', 'existing_id': '45_2'}, {'local': 'Clear_Plastic_Jug', 'existing': 'Clear Plastic Container', 'existing_id': '4_1'}] prune_instructions=[]
2025-11-30 19:16:33,210 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['53_0']], ['Person', 'Holds', 'Flexible_Tube', ['53_0']], ['Flexible_Tube', 'Is Inserted Into', 'Beaker', ['53_0']]]
2025-11-30 19:16:33,210 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Workbench', 'Contains', 'Laboratory Table', ['53_2']]]
2025-11-30 19:16:33,210 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '0_3'}, {'local': 'White Tube', 'existing': 'White Tube', 'existing_id': '45_0'}, {'local': 'Flexible_Tube', 'existing': 'Long White Flexible Tube', 'existing_id': '45_2'}]
2025-11-30 19:16:33,210 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:16:33,210 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '0_3'}, {'local': 'White Tube', 'existing': 'White Tube', 'existing_id': '45_0'}, {'local': 'Flexible_Tube', 'existing': 'Long White Flexible Tube', 'existing_id': '45_2'}, {'local': 'Clear_Plastic_Jug', 'existing': 'Clear Plastic Container', 'existing_id': '4_1'}]
2025-11-30 19:16:33,210 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 10.03s, LLM: 10.03s)
2025-11-30 19:16:33,210 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 10.03s
2025-11-30 19:16:33,210 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:16:33,211 - src.pipeline.kg_builder - INFO - Pushing batch 54/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:16:33,211 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:16:33,341 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=533, relationships=534
2025-11-30 19:16:33,341 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:16:33,341 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Gloves
2025-11-30 19:16:33,341 - src.components.neo4j_handler - DEBUG - Skipping self-merge: White Tube -> White Tube
2025-11-30 19:16:33,345 - src.components.neo4j_handler - DEBUG - APOC merge successful: Flexible_Tube -> Long White Flexible Tube
2025-11-30 19:16:33,349 - src.components.neo4j_handler - DEBUG - APOC merge successful: Clear_Plastic_Jug -> Clear Plastic Container
2025-11-30 19:16:33,349 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:16:33,351 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Workbench -[Contains]-> Laboratory Table
2025-11-30 19:16:33,351 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:16:33,355 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=531, relationships=534
2025-11-30 19:16:33,356 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:16:33,356 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:16:33,356 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:16:33,356 - src.components.neo4j_handler - INFO - Batch injected in 0.15s (triplets: 0.14s, indexes: 0.00s)
2025-11-30 19:16:33,358 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 251, 'with_embedding': 251, 'linked_chunks': 200}
2025-11-30 19:16:33,358 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:16:33,417 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:16:33,730 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 480 nodes
2025-11-30 19:16:33,761 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 531, 'relationship_count': 1664, 'density': 0.0059, 'avg_degree': 6.2674, 'avg_unique_neighbors': 6.1996, 'global_efficiency': 0.3153, 'avg_path_length': 2.7233, 'avg_degree_centrality': 0.0118, 'max_degree_centrality': 0.5208, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0577, 'degree_assortativity': -0.1726, 'graph_robustness': 0.8666, 'diameter_estimate': 50, 'clustering_coefficient': 0.281, 'weakly_connected_components': 52, 'largest_wcc_size': 480, 'pagerank_top10_percent': 5.58, 'louvain_communities': 64, 'louvain_modularity': 0.4129, 'label_entropy': 1.4989, 'computational_time': 0.40384827298112214}
2025-11-30 19:16:33,762 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 53, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501393.7621808, 'total_time': 14.771738815004937, 'aggregation': 3.3640535548329353e-06, 'network_info': 0.006375794997438788, 'llm_extraction': 14.213979816995561, 'data_cleaning': 2.623198088258505e-05, 'neo4j_injection': 0.1459255430381745, 'embedding_time': 0, 'indexing_time': 0.0013020159676671028, 'graph_injection_time': 0.1443442200543359, 'acs_metrics': {'node_count': 531, 'relationship_count': 1664, 'density': 0.0059, 'avg_degree': 6.2674, 'avg_unique_neighbors': 6.1996, 'global_efficiency': 0.3153, 'avg_path_length': 2.7233, 'avg_degree_centrality': 0.0118, 'max_degree_centrality': 0.5208, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0577, 'degree_assortativity': -0.1726, 'graph_robustness': 0.8666, 'diameter_estimate': 50, 'clustering_coefficient': 0.281, 'weakly_connected_components': 52, 'largest_wcc_size': 480, 'pagerank_top10_percent': 5.58, 'louvain_communities': 64, 'louvain_modularity': 0.4129, 'label_entropy': 1.4989, 'computational_time': 0.40384827298112214}, 'retrieval_queries': []}
2025-11-30 19:16:33,762 - src.pipeline.kg_builder - DEBUG - Batch 53 metrics: {
  "batch_idx": 53,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501393.7621808,
  "total_time": 14.771738815004937,
  "aggregation": 3.3640535548329353e-06,
  "network_info": 0.006375794997438788,
  "llm_extraction": 14.213979816995561,
  "data_cleaning": 2.623198088258505e-05,
  "neo4j_injection": 0.1459255430381745,
  "embedding_time": 0,
  "indexing_time": 0.0013020159676671028,
  "graph_injection_time": 0.1443442200543359,
  "acs_metrics": {
    "node_count": 531,
    "relationship_count": 1664,
    "density": 0.0059,
    "avg_degree": 6.2674,
    "avg_unique_neighbors": 6.1996,
    "global_efficiency": 0.3153,
    "avg_path_length": 2.7233,
    "avg_degree_centrality": 0.0118,
    "max_degree_centrality": 0.5208,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0577,
    "degree_assortativity": -0.1726,
    "graph_robustness": 0.8666,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.281,
    "weakly_connected_components": 52,
    "largest_wcc_size": 480,
    "pagerank_top10_percent": 5.58,
    "louvain_communities": 64,
    "louvain_modularity": 0.4129,
    "label_entropy": 1.4989,
    "computational_time": 0.40384827298112214
  },
  "retrieval_queries": []
}
2025-11-30 19:16:33,763 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:16:33,763 - src.pipeline.kg_builder - INFO - Batch 54 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 14.21s, Clean: 0.00s, Neo4j: 0.15s, ACS: 0.40s
2025-11-30 19:16:33,763 - src.pipeline.kg_builder - INFO - Batch 54 completed in 14.77s
Processing KG batches:  75%|███████▌  | 54/72 [15:13<04:29, 14.98s/it]2025-11-30 19:16:33,763 - src.pipeline.kg_builder - INFO - Processing batch 55/72 (3 items)
2025-11-30 19:16:33,763 - src.pipeline.kg_builder - DEBUG - Batch 55 current_video_time: 13:38-13:43
2025-11-30 19:16:33,769 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 531
- Total Relationships: 534
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:16:33,769 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:16:33,769 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_0 ~227 words, content: Time: 13:28-13:33 Content: The video shows a person in a laboratory setting, wearing blue nitrile gloves, performing a procedure on a black lab bench. The...
2025-11-30 19:16:33,769 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_1 ~225 words, content: with their right hand and a long, translucent pipette with their left. They are carefully inserting the pipette into the beaker, which contains a clear...
2025-11-30 19:16:33,769 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_2 ~236 words, content: first-person perspective. A person wearing blue nitrile gloves is holding a long, flexible, translucent tube. They are carefully inserting this tube into a large, clear...
2025-11-30 19:16:33,769 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_3 ~77 words, content: a stand. The tube is being used to transfer the white liquid from the beaker into a glass container that is on the white stirrer....
2025-11-30 19:16:33,789 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:16:33,882 - src.components.pre_llm_injector - DEBUG - Found 251 existing chunk embeddings for similarity lookup
2025-11-30 19:16:33,938 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.870'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1', '0.835')]
2025-11-30 19:16:33,940 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0
2025-11-30 19:16:33,940 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1
2025-11-30 19:16:33,979 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Translucent_Tube / ID: 50_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Graduated_Cylinder / ID: 37_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Cylinder / ID: 36_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Clear_Liquid / ID: 5_0)-[FLOWS_INTO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2)
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1: Subgraph: (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Balance / ID: 4_2), (Draft Shield / ID: 10_1)-[IS_CLOSED]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Researcher / ID: 32_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Researcher / ID: 32_0)-[OPENS]->(Glass Draft Shield / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Balance / ID: 4_2)-[DISPLAYS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2)
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_3', '0.477'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0', '0.422')]
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.870'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.828')]
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1', '0.835'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_4', '0.711')]
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_4', '0.818'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.788')]
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:16:33,985 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_0) (~227 words) with timeout=5.0s retries=3
2025-11-30 19:16:35,396 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:16:35,396 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:16:35,396 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_1) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:16:36,394 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:16:36,394 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:16:36,394 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_2) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:16:37,804 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:16:37,804 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:16:37,805 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_3) (~77 words) with timeout=5.0s retries=3
2025-11-30 19:16:38,832 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:16:38,832 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:16:38,832 - src.components.pre_llm_injector - INFO - Extracted 21 local triplets from 4 chunks
2025-11-30 19:16:38,833 - src.pipeline.kg_builder - INFO - Pre-extraction: 21 triplets in 5.06s
2025-11-30 19:16:38,833 - src.components.global_refiner - INFO - Capping refinement input: 21 → 15 triplets
2025-11-30 19:16:38,833 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Translucent_Tube / ID: 50_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Graduated_Cylinder / ID: 37_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Cylinder / ID: 36_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Clear_Liquid / ID: 5_0)-[FLOWS_INTO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_1: Subgraph: (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Balance / ID: 4_2), (Draft Shield / ID: 10_1)-[IS_CLOSED]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Researcher / ID: 32_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Researcher / ID: 32_0)-[OPENS]->(Glass Draft Shield / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Balance / ID: 4_2)-[DISPLAYS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["54_0", "54_2"]}, {"head": "Person", "relation": "Holds", "tail": "Clear_Plastic_Container", "source_chunks": ["54_0"]}, {"head": "Person", "relation": "Holds", "tail": "Long_Translucent_Pipette", "source_chunks": ["54_0"]}, {"head": "Person", "relation": "Performs", "tail": "Procedure", "source_chunks": ["54_0"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Clear_Plastic_Container", "source_chunks": ["54_0"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Long_Translucent_Pipette", "source_chunks": ["54_0"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["54_1"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["54_1", "54_2"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["54_1"]}, {"head": "Liquid", "relation": "Is In", "tail": "Beaker", "source_chunks": ["54_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["54_1", "54_3"]}, {"head": "Person", "relation": "Performs", "tail": "Experiment", "source_chunks": ["54_1"]}, {"head": "Person", "relation": "Holds", "tail": "Flexible_Translucent_Tube", "source_chunks": ["54_2"]}, {"head": "Tube", "relation": "Is Inserted Into", "tail": "Beaker", "source_chunks": ["54_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Cloudy_White_Liquid", "source_chunks": ["54_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:16:38,834 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3711 words, ~4824 tokens)
2025-11-30 19:16:38,834 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:16:38,857 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 13437 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:16:38,857 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:16:38,857 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:16:38,857 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:16:38,857 - src.pipeline.kg_builder - INFO - Pushing batch 55/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:16:38,857 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:16:39,038 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=540, relationships=541
2025-11-30 19:16:39,039 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:16:39,046 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=540, relationships=541
2025-11-30 19:16:39,049 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:16:39,049 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:16:39,049 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:16:39,049 - src.components.neo4j_handler - INFO - Batch injected in 0.19s (triplets: 0.19s, indexes: 0.00s)
2025-11-30 19:16:39,051 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 255, 'with_embedding': 255, 'linked_chunks': 204}
2025-11-30 19:16:39,051 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:16:39,092 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:16:39,416 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 489 nodes
2025-11-30 19:16:39,449 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 540, 'relationship_count': 1690, 'density': 0.0058, 'avg_degree': 6.2593, 'avg_unique_neighbors': 6.1926, 'global_efficiency': 0.3163, 'avg_path_length': 2.7152, 'avg_degree_centrality': 0.0116, 'max_degree_centrality': 0.525, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0665, 'degree_assortativity': -0.1769, 'graph_robustness': 0.8657, 'diameter_estimate': 50, 'clustering_coefficient': 0.2835, 'weakly_connected_components': 52, 'largest_wcc_size': 489, 'pagerank_top10_percent': 5.49, 'louvain_communities': 64, 'louvain_modularity': 0.4188, 'label_entropy': 1.4989, 'computational_time': 0.39861336594913155}
2025-11-30 19:16:39,450 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 54, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501399.4501517, 'total_time': 5.6867033779853955, 'aggregation': 2.479064278304577e-06, 'network_info': 0.005762379965744913, 'llm_extraction': 5.088269255007617, 'data_cleaning': 1.900398638099432e-05, 'neo4j_injection': 0.19228834507521242, 'embedding_time': 0, 'indexing_time': 0.003781454055570066, 'graph_injection_time': 0.18829035107046366, 'acs_metrics': {'node_count': 540, 'relationship_count': 1690, 'density': 0.0058, 'avg_degree': 6.2593, 'avg_unique_neighbors': 6.1926, 'global_efficiency': 0.3163, 'avg_path_length': 2.7152, 'avg_degree_centrality': 0.0116, 'max_degree_centrality': 0.525, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0665, 'degree_assortativity': -0.1769, 'graph_robustness': 0.8657, 'diameter_estimate': 50, 'clustering_coefficient': 0.2835, 'weakly_connected_components': 52, 'largest_wcc_size': 489, 'pagerank_top10_percent': 5.49, 'louvain_communities': 64, 'louvain_modularity': 0.4188, 'label_entropy': 1.4989, 'computational_time': 0.39861336594913155}, 'retrieval_queries': []}
2025-11-30 19:16:39,450 - src.pipeline.kg_builder - DEBUG - Batch 54 metrics: {
  "batch_idx": 54,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501399.4501517,
  "total_time": 5.6867033779853955,
  "aggregation": 2.479064278304577e-06,
  "network_info": 0.005762379965744913,
  "llm_extraction": 5.088269255007617,
  "data_cleaning": 1.900398638099432e-05,
  "neo4j_injection": 0.19228834507521242,
  "embedding_time": 0,
  "indexing_time": 0.003781454055570066,
  "graph_injection_time": 0.18829035107046366,
  "acs_metrics": {
    "node_count": 540,
    "relationship_count": 1690,
    "density": 0.0058,
    "avg_degree": 6.2593,
    "avg_unique_neighbors": 6.1926,
    "global_efficiency": 0.3163,
    "avg_path_length": 2.7152,
    "avg_degree_centrality": 0.0116,
    "max_degree_centrality": 0.525,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0665,
    "degree_assortativity": -0.1769,
    "graph_robustness": 0.8657,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2835,
    "weakly_connected_components": 52,
    "largest_wcc_size": 489,
    "pagerank_top10_percent": 5.49,
    "louvain_communities": 64,
    "louvain_modularity": 0.4188,
    "label_entropy": 1.4989,
    "computational_time": 0.39861336594913155
  },
  "retrieval_queries": []
}
2025-11-30 19:16:39,451 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:16:39,451 - src.pipeline.kg_builder - INFO - Batch 55 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.09s, Clean: 0.00s, Neo4j: 0.19s, ACS: 0.40s
2025-11-30 19:16:39,451 - src.pipeline.kg_builder - INFO - Batch 55 completed in 5.69s
Processing KG batches:  76%|███████▋  | 55/72 [15:18<03:27, 12.19s/it]2025-11-30 19:16:39,451 - src.pipeline.kg_builder - INFO - Processing batch 56/72 (3 items)
2025-11-30 19:16:39,451 - src.pipeline.kg_builder - DEBUG - Batch 56 current_video_time: 13:53-13:58
2025-11-30 19:16:39,460 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 540
- Total Relationships: 541
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:16:39,460 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:16:39,460 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_0 ~233 words, content: Time: 13:43-13:48 Content: The sequence of images captures a laboratory procedure involving the transfer of a liquid using a pipette. The setting is a well-equipped...
2025-11-30 19:16:39,460 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_1 ~243 words, content: Content: The video sequence captures a scientific experiment being conducted in a laboratory setting. The scene begins with a close-up view of a person's hands,...
2025-11-30 19:16:39,460 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_2 ~222 words, content: is one of focused concentration, with the individual fully engaged in the task at hand. The video effectively conveys the meticulous nature of laboratory work,...
2025-11-30 19:16:39,460 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_3 ~115 words, content: lab environment, including the glass cabinet and other equipment, remains visible, providing context for the experiment. - **Introduction of the Scientist (Frame 4):** A person...
2025-11-30 19:16:39,480 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:16:39,576 - src.components.pre_llm_injector - DEBUG - Found 255 existing chunk embeddings for similarity lookup
2025-11-30 19:16:39,630 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0', '0.871'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.839')]
2025-11-30 19:16:39,633 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0
2025-11-30 19:16:39,633 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0
2025-11-30 19:16:39,674 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0: Subgraph: (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Glass Vial / ID: 14_0)-[IS_PLACED_ON]->(Precision Balance / ID: 0_0), (Experimenter / ID: 6_0)-[TARES]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Beaker With White Powder / ID: 10_1)-[IS_ON]->(Weighing Pan / ID: 0_0), (Precision Balance / ID: 0_0)-[CONTAINS]->(Weighing Pan / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Precision Balance / ID: 0_0)-[DISPLAYS]->(56.303 G / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Precision Balance / ID: 0_0)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2)
2025-11-30 19:16:39,681 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Balance / ID: 4_2), (Draft Shield / ID: 10_1)-[IS_CLOSED]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Balance / ID: 4_2)-[DISPLAYS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Magnetic_Stirrer / ID: 4_2)-[MIXES]->(Solution_In_Beaker / ID: 36_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0970 / ID: 46_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Magnetic_Stirrer / ID: 4_2)-[IS_INSIDE]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2)
2025-11-30 19:16:39,681 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0', '0.871'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_4', '0.681')]
2025-11-30 19:16:39,681 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_1', '0.656'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_0', '0.629')]
2025-11-30 19:16:39,681 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.839'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.751')]
2025-11-30 19:16:39,681 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_33_4', '0.801'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2', '0.778')]
2025-11-30 19:16:39,682 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:16:39,682 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_0) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:16:40,906 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:16:40,906 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:16:40,906 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_1) (~243 words) with timeout=5.0s retries=3
2025-11-30 19:16:42,288 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:16:42,288 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:16:42,289 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_2) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:16:43,435 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:16:43,436 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:16:43,436 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_3) (~115 words) with timeout=5.0s retries=3
2025-11-30 19:16:44,561 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:16:44,561 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:16:44,561 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:16:44,561 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 5.10s
2025-11-30 19:16:44,562 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:16:44,562 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_0_0: Subgraph: (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Glass Vial / ID: 14_0)-[IS_PLACED_ON]->(Precision Balance / ID: 0_0), (Experimenter / ID: 6_0)-[TARES]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Beaker With White Powder / ID: 10_1)-[IS_ON]->(Weighing Pan / ID: 0_0), (Precision Balance / ID: 0_0)-[CONTAINS]->(Weighing Pan / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Precision Balance / ID: 0_0)-[DISPLAYS]->(56.303 G / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Precision Balance / ID: 0_0)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Balance / ID: 4_2), (Draft Shield / ID: 10_1)-[IS_CLOSED]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Balance / ID: 4_2)-[IS_INSIDE]->(Glass Draft Shield / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Balance / ID: 4_2)-[DISPLAYS]->(80.14 / ID: 9_1), (Balance / ID: 4_2)-[DISPLAYS]->(20.23 / ID: 9_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Balance / ID: 4_2)-[DISPLAYS]->(Negative Weight / ID: 23_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Balance / ID: 4_2)-[DISPLAYS]->(Negative_Mass / ID: 26_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Balance / ID: 4_2)-[DISPLAYS]->(0.193 G / ID: 32_2), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Magnetic_Stirrer / ID: 4_2)-[MIXES]->(Solution_In_Beaker / ID: 36_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0970 / ID: 46_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Magnetic_Stirrer / ID: 4_2)-[IS_INSIDE]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["55_0"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["55_0"]}, {"head": "Liquid", "relation": "Is In", "tail": "Beaker", "source_chunks": ["55_0"]}, {"head": "Beaker", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["55_0"]}, {"head": "Pipette", "relation": "Connected To", "tail": "Vacuum System", "source_chunks": ["55_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["55_0", "55_2"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["55_1"]}, {"head": "Person", "relation": "Uses", "tail": "Transparent_Tube", "source_chunks": ["55_1"]}, {"head": "Transparent_Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["55_1"]}, {"head": "Liquid", "relation": "Enters", "tail": "Glass_Flask", "source_chunks": ["55_1"]}, {"head": "Glass_Flask", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["55_1"]}, {"head": "Magnetic_Stirrer", "relation": "Rotates", "tail": "Stir_Bar", "source_chunks": ["55_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Glass Flask", "source_chunks": ["55_2"]}, {"head": "Glass Flask", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["55_2"]}, {"head": "Person", "relation": "Holds", "tail": "Container", "source_chunks": ["55_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:16:44,562 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3787 words, ~4923 tokens)
2025-11-30 19:16:44,562 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:16:44,581 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 13728 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:16:44,581 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:16:44,581 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:16:44,581 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:16:44,581 - src.pipeline.kg_builder - INFO - Pushing batch 56/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:16:44,582 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:16:44,782 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=547, relationships=548
2025-11-30 19:16:44,783 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:16:44,790 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=547, relationships=548
2025-11-30 19:16:44,793 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:16:44,793 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:16:44,793 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:16:44,793 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:16:44,794 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 259, 'with_embedding': 259, 'linked_chunks': 207}
2025-11-30 19:16:44,794 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:16:44,837 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:16:45,168 - src.pipeline.acs_automata - DEBUG - Computed exact avg_path_length on component with 495 nodes
2025-11-30 19:16:45,200 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 547, 'relationship_count': 1716, 'density': 0.0057, 'avg_degree': 6.2742, 'avg_unique_neighbors': 6.2084, 'global_efficiency': 0.3162, 'avg_path_length': 2.7126, 'avg_degree_centrality': 0.0115, 'max_degree_centrality': 0.5256, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0744, 'degree_assortativity': -0.1763, 'graph_robustness': 0.8677, 'diameter_estimate': 50, 'clustering_coefficient': 0.2835, 'weakly_connected_components': 53, 'largest_wcc_size': 495, 'pagerank_top10_percent': 5.42, 'louvain_communities': 64, 'louvain_modularity': 0.4175, 'label_entropy': 1.499, 'computational_time': 0.4056751460302621}
2025-11-30 19:16:45,200 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 55, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501405.2007258, 'total_time': 5.749269851949066, 'aggregation': 2.5780173018574715e-06, 'network_info': 0.008841130998916924, 'llm_extraction': 5.121461538015865, 'data_cleaning': 1.3409997336566448e-05, 'neo4j_injection': 0.21157485898584127, 'embedding_time': 0, 'indexing_time': 0.002953615039587021, 'graph_injection_time': 0.20844960305839777, 'acs_metrics': {'node_count': 547, 'relationship_count': 1716, 'density': 0.0057, 'avg_degree': 6.2742, 'avg_unique_neighbors': 6.2084, 'global_efficiency': 0.3162, 'avg_path_length': 2.7126, 'avg_degree_centrality': 0.0115, 'max_degree_centrality': 0.5256, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0744, 'degree_assortativity': -0.1763, 'graph_robustness': 0.8677, 'diameter_estimate': 50, 'clustering_coefficient': 0.2835, 'weakly_connected_components': 53, 'largest_wcc_size': 495, 'pagerank_top10_percent': 5.42, 'louvain_communities': 64, 'louvain_modularity': 0.4175, 'label_entropy': 1.499, 'computational_time': 0.4056751460302621}, 'retrieval_queries': []}
2025-11-30 19:16:45,200 - src.pipeline.kg_builder - DEBUG - Batch 55 metrics: {
  "batch_idx": 55,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501405.2007258,
  "total_time": 5.749269851949066,
  "aggregation": 2.5780173018574715e-06,
  "network_info": 0.008841130998916924,
  "llm_extraction": 5.121461538015865,
  "data_cleaning": 1.3409997336566448e-05,
  "neo4j_injection": 0.21157485898584127,
  "embedding_time": 0,
  "indexing_time": 0.002953615039587021,
  "graph_injection_time": 0.20844960305839777,
  "acs_metrics": {
    "node_count": 547,
    "relationship_count": 1716,
    "density": 0.0057,
    "avg_degree": 6.2742,
    "avg_unique_neighbors": 6.2084,
    "global_efficiency": 0.3162,
    "avg_path_length": 2.7126,
    "avg_degree_centrality": 0.0115,
    "max_degree_centrality": 0.5256,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0744,
    "degree_assortativity": -0.1763,
    "graph_robustness": 0.8677,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2835,
    "weakly_connected_components": 53,
    "largest_wcc_size": 495,
    "pagerank_top10_percent": 5.42,
    "louvain_communities": 64,
    "louvain_modularity": 0.4175,
    "label_entropy": 1.499,
    "computational_time": 0.4056751460302621
  },
  "retrieval_queries": []
}
2025-11-30 19:16:45,201 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:16:45,201 - src.pipeline.kg_builder - INFO - Batch 56 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.12s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.41s
2025-11-30 19:16:45,201 - src.pipeline.kg_builder - INFO - Batch 56 completed in 5.75s
Processing KG batches:  78%|███████▊  | 56/72 [15:24<02:44, 10.26s/it]2025-11-30 19:16:45,202 - src.pipeline.kg_builder - INFO - Processing batch 57/72 (3 items)
2025-11-30 19:16:45,202 - src.pipeline.kg_builder - DEBUG - Batch 57 current_video_time: 14:07-14:12
2025-11-30 19:16:45,209 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 547
- Total Relationships: 548
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:16:45,210 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:16:45,210 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_0 ~236 words, content: Time: 13:58-14:03 Content: The video captures a sequence of actions in a laboratory setting, focusing on a chemical experiment. The scene is set on a...
2025-11-30 19:16:45,210 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1 ~223 words, content: , likely the preparation of a chemical solution or the initiation of a reaction that requires controlled conditions, such as heating and reflux. The person's...
2025-11-30 19:16:45,210 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_2 ~238 words, content: a closer, first-person perspective, showing a person's hands wearing blue nitrile gloves. The person is actively handling a white plastic beaker. The long tube from...
2025-11-30 19:16:45,210 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_3 ~255 words, content: with a clamp is visible to the left. - The second frame provides a closer view of the container and the tube. The person's hand...
2025-11-30 19:16:45,210 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_4 ~21 words, content:  is using a yellow apparatus with multiple tubes and clamps. The lab is well-equipped with various pieces of equipment and supplies.
2025-11-30 19:16:45,230 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:16:45,332 - src.components.pre_llm_injector - DEBUG - Found 259 existing chunk embeddings for similarity lookup
2025-11-30 19:16:45,404 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1', '0.873'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.724')]
2025-11-30 19:16:45,406 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1
2025-11-30 19:16:45,406 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1
2025-11-30 19:16:45,452 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1)
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Experimenter / ID: 6_0)-[TARES]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Experimenter / ID: 6_0)-[HOLDS]->(White Bottle / ID: 6_0), (Experimenter / ID: 6_0)-[HOLDS]->(Reagent Bottle / ID: 6_1), (Reagent Bottle / ID: 6_1)-[IS_LABELED_AS]->(General Reagent / ID: 6_1), (Reagent Bottle / ID: 6_1)-[HAS_HAZARD_SYMBOLS]->(Chemical / ID: 6_1), (Experimenter / ID: 6_0)-[OPENS]->(Balance Scale Enclosure / ID: 6_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Balance Scale / ID: 0_1)-[MEASURES]->(Mass / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Reagent Bottle / ID: 6_1)-[HAS]->(Red Cap / ID: 22_1), (Reagent Bottle / ID: 6_1)-[HAS]->(Hazard Symbols / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Experimenter / ID: 6_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1)
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1', '0.724'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_1', '0.655')]
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_22_0', '0.680'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_2', '0.672')]
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1', '0.873'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_0', '0.709')]
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_3', '0.657'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_9_2', '0.636')]
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_3', '0.690'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_3', '0.668')]
2025-11-30 19:16:45,455 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:16:45,456 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_0) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:16:46,894 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:16:46,894 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:16:46,894 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1) (~223 words) with timeout=5.0s retries=3
2025-11-30 19:16:48,545 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:16:48,545 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:16:48,545 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_2) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:16:49,683 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:16:49,683 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:16:49,684 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_3) (~255 words) with timeout=5.0s retries=3
2025-11-30 19:16:50,556 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:16:50,556 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:16:50,556 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_4) (~21 words) with timeout=5.0s retries=3
2025-11-30 19:16:51,652 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:16:51,652 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:16:51,652 - src.components.pre_llm_injector - INFO - Extracted 29 local triplets from 5 chunks
2025-11-30 19:16:51,652 - src.pipeline.kg_builder - INFO - Pre-extraction: 29 triplets in 6.44s
2025-11-30 19:16:51,652 - src.components.global_refiner - INFO - Capping refinement input: 29 → 15 triplets
2025-11-30 19:16:51,653 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_1: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Experimenter / ID: 6_0)-[TARES]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Experimenter / ID: 6_0)-[HOLDS]->(White Bottle / ID: 6_0), (Experimenter / ID: 6_0)-[HOLDS]->(Reagent Bottle / ID: 6_1), (Reagent Bottle / ID: 6_1)-[IS_LABELED_AS]->(General Reagent / ID: 6_1), (Reagent Bottle / ID: 6_1)-[HAS_HAZARD_SYMBOLS]->(Chemical / ID: 6_1), (Experimenter / ID: 6_0)-[OPENS]->(Balance Scale Enclosure / ID: 6_1), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Balance Scale / ID: 0_1)-[MEASURES]->(Mass / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Reagent Bottle / ID: 6_1)-[HAS]->(Red Cap / ID: 22_1), (Reagent Bottle / ID: 6_1)-[HAS]->(Hazard Symbols / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Experimenter / ID: 6_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["56_0"]}, {"head": "Person", "relation": "Pours", "tail": "Clear Liquid", "source_chunks": ["56_0"]}, {"head": "Clear Liquid", "relation": "Flows Into", "tail": "Translucent Container", "source_chunks": ["56_0"]}, {"head": "Glass Flask", "relation": "Is On", "tail": "Heated Magnetic Stirrer", "source_chunks": ["56_0"]}, {"head": "Glass Flask", "relation": "Is Connected To", "tail": "Reflux Condenser", "source_chunks": ["56_0"]}, {"head": "Reflux Condenser", "relation": "Is Supported By", "tail": "Blue Base", "source_chunks": ["56_0"]}, {"head": "Person", "relation": "Wears", "tail": "Gloves", "source_chunks": ["56_1"]}, {"head": "Reaction Apparatus", "relation": "Contains", "tail": "Round_Bottom_Flask", "source_chunks": ["56_1"]}, {"head": "Round_Bottom_Flask", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["56_1"]}, {"head": "Magnetic_Stirrer", "relation": "Is On", "tail": "Hot_Plate", "source_chunks": ["56_1"]}, {"head": "Reaction_Apparatus", "relation": "Is Connected To", "tail": "Schlenk_Line", "source_chunks": ["56_1"]}, {"head": "Lab_Table", "relation": "Contains", "tail": "Reaction_Apparatus", "source_chunks": ["56_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["56_2"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["56_2"]}, {"head": "Tube", "relation": "Delivers", "tail": "Liquid", "source_chunks": ["56_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:16:51,653 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3615 words, ~4700 tokens)
2025-11-30 19:16:51,653 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:16:51,673 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 13079 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:16:51,673 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:16:51,673 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:16:51,673 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:16:51,673 - src.pipeline.kg_builder - INFO - Pushing batch 57/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:16:51,673 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:16:51,873 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=560, relationships=558
2025-11-30 19:16:51,874 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:16:51,881 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=560, relationships=558
2025-11-30 19:16:51,885 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:16:51,885 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:16:51,885 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:16:51,885 - src.components.neo4j_handler - INFO - Batch injected in 0.21s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:16:51,886 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 264, 'with_embedding': 264, 'linked_chunks': 210}
2025-11-30 19:16:51,886 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:16:51,929 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:16:52,000 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 506
2025-11-30 19:16:52,035 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 560, 'relationship_count': 1746, 'density': 0.0056, 'avg_degree': 6.2357, 'avg_unique_neighbors': 6.1714, 'global_efficiency': 0.3098, 'avg_path_length': 2.7874, 'avg_degree_centrality': 0.0112, 'max_degree_centrality': 0.5188, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0461, 'degree_assortativity': -0.1713, 'graph_robustness': 0.8683, 'diameter_estimate': 50, 'clustering_coefficient': 0.2837, 'weakly_connected_components': 55, 'largest_wcc_size': 506, 'pagerank_top10_percent': 5.45, 'louvain_communities': 64, 'louvain_modularity': 0.4214, 'label_entropy': 1.4988, 'computational_time': 0.1485793780302629}
2025-11-30 19:16:52,035 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 56, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501412.0353327, 'total_time': 6.833304784959182, 'aggregation': 2.8350623324513435e-06, 'network_info': 0.007619454059749842, 'llm_extraction': 6.463542609941214, 'data_cleaning': 1.3079959899187088e-05, 'neo4j_injection': 0.211923856055364, 'embedding_time': 0, 'indexing_time': 0.0033149910159409046, 'graph_injection_time': 0.2084319710265845, 'acs_metrics': {'node_count': 560, 'relationship_count': 1746, 'density': 0.0056, 'avg_degree': 6.2357, 'avg_unique_neighbors': 6.1714, 'global_efficiency': 0.3098, 'avg_path_length': 2.7874, 'avg_degree_centrality': 0.0112, 'max_degree_centrality': 0.5188, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0461, 'degree_assortativity': -0.1713, 'graph_robustness': 0.8683, 'diameter_estimate': 50, 'clustering_coefficient': 0.2837, 'weakly_connected_components': 55, 'largest_wcc_size': 506, 'pagerank_top10_percent': 5.45, 'louvain_communities': 64, 'louvain_modularity': 0.4214, 'label_entropy': 1.4988, 'computational_time': 0.1485793780302629}, 'retrieval_queries': []}
2025-11-30 19:16:52,035 - src.pipeline.kg_builder - DEBUG - Batch 56 metrics: {
  "batch_idx": 56,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501412.0353327,
  "total_time": 6.833304784959182,
  "aggregation": 2.8350623324513435e-06,
  "network_info": 0.007619454059749842,
  "llm_extraction": 6.463542609941214,
  "data_cleaning": 1.3079959899187088e-05,
  "neo4j_injection": 0.211923856055364,
  "embedding_time": 0,
  "indexing_time": 0.0033149910159409046,
  "graph_injection_time": 0.2084319710265845,
  "acs_metrics": {
    "node_count": 560,
    "relationship_count": 1746,
    "density": 0.0056,
    "avg_degree": 6.2357,
    "avg_unique_neighbors": 6.1714,
    "global_efficiency": 0.3098,
    "avg_path_length": 2.7874,
    "avg_degree_centrality": 0.0112,
    "max_degree_centrality": 0.5188,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0461,
    "degree_assortativity": -0.1713,
    "graph_robustness": 0.8683,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2837,
    "weakly_connected_components": 55,
    "largest_wcc_size": 506,
    "pagerank_top10_percent": 5.45,
    "louvain_communities": 64,
    "louvain_modularity": 0.4214,
    "label_entropy": 1.4988,
    "computational_time": 0.1485793780302629
  },
  "retrieval_queries": []
}
2025-11-30 19:16:52,036 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:16:52,036 - src.pipeline.kg_builder - INFO - Batch 57 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 6.46s, Clean: 0.00s, Neo4j: 0.21s, ACS: 0.15s
2025-11-30 19:16:52,036 - src.pipeline.kg_builder - INFO - Batch 57 completed in 6.83s
Processing KG batches:  79%|███████▉  | 57/72 [15:31<02:18,  9.23s/it]2025-11-30 19:16:52,036 - src.pipeline.kg_builder - INFO - Processing batch 58/72 (3 items)
2025-11-30 19:16:52,036 - src.pipeline.kg_builder - DEBUG - Batch 58 current_video_time: 14:22-14:27
2025-11-30 19:16:52,047 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 560
- Total Relationships: 558
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:16:52,047 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:16:52,047 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_0 ~238 words, content: Time: 14:12-14:17 Content: The video shows a person in a laboratory setting, wearing blue nitrile gloves, performing a procedure on a black lab bench. The...
2025-11-30 19:16:52,047 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_1 ~229 words, content: The laboratory environment is well-equipped, with various pieces of equipment and supplies visible in the background. The person's actions are methodical and precise, indicating a...
2025-11-30 19:16:52,047 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_2 ~235 words, content: yellow, multi-way manifold (a Schlenk line). This manifold is mounted on a metal stand and is used to control the flow of inert gas (like...
2025-11-30 19:16:52,047 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3 ~94 words, content: to transfer liquid from the white container into a glass flask. The flask is being held by the person's hand, and the tube is being...
2025-11-30 19:16:52,067 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:16:52,165 - src.components.pre_llm_injector - DEBUG - Found 264 existing chunk embeddings for similarity lookup
2025-11-30 19:16:52,221 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.830'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.828')]
2025-11-30 19:16:52,224 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3
2025-11-30 19:16:52,224 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4 via source_chunk_ids
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Tube / ID: 35_1)-[CONNECTS]->(Flask / ID: 15_2), (Digital Device / ID: 49_1)-[STIRS]->(Flask / ID: 15_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Flask / ID: 15_2), (Laboratory_Glassware / ID: 4_2)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Scientist / ID: 36_0)-[HOLDS]->(Flask / ID: 15_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Flask / ID: 15_2)-[HAS]->(Stopper / ID: 28_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Flask / ID: 15_2)-[IS_ON]->(White_Tray / ID: 45_1), (Flask / ID: 15_2)-[IS_HELD_BY]->(Clamp / ID: 46_2), (Flask / ID: 15_2)-[CONTAINS]->(Foam / ID: 49_1), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0)
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_36_1', '0.756'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_2', '0.748')]
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_4', '0.786'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_1', '0.773')]
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.673'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_0', '0.669')]
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_4', '0.830'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3', '0.828')]
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:16:52,228 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_0) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:16:53,532 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:16:53,532 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:16:53,532 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:16:54,905 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:16:54,905 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:16:54,906 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_2) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:16:56,363 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:16:56,363 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:16:56,363 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3) (~94 words) with timeout=5.0s retries=3
2025-11-30 19:16:57,439 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:16:57,439 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:16:57,440 - src.components.pre_llm_injector - INFO - Extracted 21 local triplets from 4 chunks
2025-11-30 19:16:57,440 - src.pipeline.kg_builder - INFO - Pre-extraction: 21 triplets in 5.39s
2025-11-30 19:16:57,440 - src.components.global_refiner - INFO - Capping refinement input: 21 → 15 triplets
2025-11-30 19:16:57,440 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_16_3: Subgraph: (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Tube / ID: 35_1)-[CONNECTS]->(Flask / ID: 15_2), (Digital Device / ID: 49_1)-[STIRS]->(Flask / ID: 15_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Flask / ID: 15_2), (Laboratory_Glassware / ID: 4_2)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Scientist / ID: 36_0)-[HOLDS]->(Flask / ID: 15_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Flask / ID: 15_2)-[HAS]->(Stopper / ID: 28_1), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Flask / ID: 15_2)-[IS_ON]->(White_Tray / ID: 45_1), (Flask / ID: 15_2)-[IS_HELD_BY]->(Clamp / ID: 46_2), (Flask / ID: 15_2)-[CONTAINS]->(Foam / ID: 49_1), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["57_0", "57_1"]}, {"head": "Person", "relation": "Handles", "tail": "Flexible_Tube", "source_chunks": ["57_0"]}, {"head": "Flexible_Tube", "relation": "Is Connected To", "tail": "Vacuum_System", "source_chunks": ["57_0"]}, {"head": "Flexible_Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["57_0"]}, {"head": "Person", "relation": "Controls", "tail": "Flow_Of_Liquid", "source_chunks": ["57_0"]}, {"head": "Flask", "relation": "Is On", "tail": "Balance_Scale", "source_chunks": ["57_0"]}, {"head": "Person", "relation": "Holds", "tail": "Flexible_Tube", "source_chunks": ["57_1", "57_2"]}, {"head": "Flexible_Tube", "relation": "Connects To", "tail": "Schlenk_Line", "source_chunks": ["57_1"]}, {"head": "Glass_Flask", "relation": "Is On", "tail": "Magnetic_Stirrer", "source_chunks": ["57_1"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Glass_Beaker", "source_chunks": ["57_1"]}, {"head": "Person", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["57_1", "57_3"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Glove", "source_chunks": ["57_2"]}, {"head": "Flexible_Tube", "relation": "Connects To", "tail": "Glass_Flask", "source_chunks": ["57_2"]}, {"head": "Glass_Flask", "relation": "Is Held By", "tail": "Clamp", "source_chunks": ["57_2"]}, {"head": "Clamp", "relation": "Is Attached To", "tail": "Metal_Stand", "source_chunks": ["57_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:16:57,440 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~676 words, ~879 tokens)
2025-11-30 19:16:57,440 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:06,677 - src.components.global_refiner - DEBUG - LLM call completed in 9.24s
2025-11-30 19:17:06,677 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['57_0', '57_1']], ['Person', 'Handles', 'Flexible_Tube', ['57_0']], ['Flexible_Tube', 'Is Connected To', 'Vacuum_System', ['57_0']], ['Flexible_Tube', 'Transfers', 'Liquid', ['57_0']], ['Person', 'Controls', 'Flow_Of_Liquid', ['57_0']], ['Flask', 'Is On', 'Balance_Scale', ['57_0']], ['Person', 'Holds', 'Flexible_Tube', ['57_1', '57_2']], ['Flexible_Tube', 'Connects To', 'Schlenk_Line', ['57_1']], ['Glass_Flask', 'Is On', 'Magnetic_Stirrer', ['57_1']], ['Lab_Bench', 'Contains', 'Glass_Beaker', ['57_1']], ['Person', 'Transfers', 'Liquid', ['57_1', '57_3']], ['Person', 'Wears', 'Blue_Glove', ['57_2']], ['Flexible_Tube', 'Connects To', 'Glass_Flask', ['57_2']], ['Glass_Flask', 'Is Held By', 'Clamp', ['57_2']], ['Clamp', 'Is Attached To', 'Metal_Stand', ['57_2']]] inter_chunk_relations=[['Lab_Bench', 'Contains', 'Laboratory Table', ['57_1']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}, {'local': 'Blue_Glove', 'existing': 'Blue Glove', 'existing_id': '0_3'}] prune_instructions=[]
2025-11-30 19:17:06,677 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['57_0', '57_1']], ['Person', 'Handles', 'Flexible_Tube', ['57_0']], ['Flexible_Tube', 'Is Connected To', 'Vacuum_System', ['57_0']]]
2025-11-30 19:17:06,677 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=1, sample=[['Lab_Bench', 'Contains', 'Laboratory Table', ['57_1']]]
2025-11-30 19:17:06,677 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=2, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}, {'local': 'Blue_Glove', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:17:06,677 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=0, sample=[]
2025-11-30 19:17:06,677 - src.components.global_refiner - INFO - LLM suggested 2 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Glove', 'existing_id': '0_3'}, {'local': 'Blue_Glove', 'existing': 'Blue Glove', 'existing_id': '0_3'}]
2025-11-30 19:17:06,677 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 16 triplets (total: 9.24s, LLM: 9.24s)
2025-11-30 19:17:06,677 - src.pipeline.kg_builder - INFO - Global refinement: 16 triplets in 9.24s
2025-11-30 19:17:06,677 - src.pipeline.kg_builder - INFO - Using 16 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:06,677 - src.pipeline.kg_builder - INFO - Pushing batch 58/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:06,678 - src.components.neo4j_handler - INFO - Adding 16 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:06,909 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=568, relationships=570
2025-11-30 19:17:06,909 - src.components.neo4j_handler - INFO - Applying 2 merge instructions
2025-11-30 19:17:06,910 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Glove
2025-11-30 19:17:06,915 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Glove -> Blue Glove
2025-11-30 19:17:06,915 - src.components.neo4j_handler - INFO - Applying 1 inter-chunk relations
2025-11-30 19:17:06,921 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Lab_Bench -[Contains]-> Laboratory Table
2025-11-30 19:17:06,922 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:06,929 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=566, relationships=570
2025-11-30 19:17:06,931 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:06,931 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:06,932 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:06,932 - src.components.neo4j_handler - INFO - Batch injected in 0.25s (triplets: 0.25s, indexes: 0.00s)
2025-11-30 19:17:06,933 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 268, 'with_embedding': 268, 'linked_chunks': 214}
2025-11-30 19:17:06,933 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:06,999 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:07,069 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 512
2025-11-30 19:17:07,101 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 566, 'relationship_count': 1782, 'density': 0.0056, 'avg_degree': 6.2968, 'avg_unique_neighbors': 6.2332, 'global_efficiency': 0.331, 'avg_path_length': 2.6763, 'avg_degree_centrality': 0.0111, 'max_degree_centrality': 0.5239, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0624, 'degree_assortativity': -0.1728, 'graph_robustness': 0.8591, 'diameter_estimate': 50, 'clustering_coefficient': 0.2832, 'weakly_connected_components': 55, 'largest_wcc_size': 512, 'pagerank_top10_percent': 5.32, 'louvain_communities': 65, 'louvain_modularity': 0.4219, 'label_entropy': 1.499, 'computational_time': 0.16818480903748423}
2025-11-30 19:17:07,102 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 57, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501427.1020918, 'total_time': 15.06546012905892, 'aggregation': 2.401997335255146e-06, 'network_info': 0.010541356983594596, 'llm_extraction': 14.630603900994174, 'data_cleaning': 1.345097552984953e-05, 'neo4j_injection': 0.25425883498974144, 'embedding_time': 0, 'indexing_time': 0.003037641989067197, 'graph_injection_time': 0.2510226001031697, 'acs_metrics': {'node_count': 566, 'relationship_count': 1782, 'density': 0.0056, 'avg_degree': 6.2968, 'avg_unique_neighbors': 6.2332, 'global_efficiency': 0.331, 'avg_path_length': 2.6763, 'avg_degree_centrality': 0.0111, 'max_degree_centrality': 0.5239, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0624, 'degree_assortativity': -0.1728, 'graph_robustness': 0.8591, 'diameter_estimate': 50, 'clustering_coefficient': 0.2832, 'weakly_connected_components': 55, 'largest_wcc_size': 512, 'pagerank_top10_percent': 5.32, 'louvain_communities': 65, 'louvain_modularity': 0.4219, 'label_entropy': 1.499, 'computational_time': 0.16818480903748423}, 'retrieval_queries': []}
2025-11-30 19:17:07,102 - src.pipeline.kg_builder - DEBUG - Batch 57 metrics: {
  "batch_idx": 57,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501427.1020918,
  "total_time": 15.06546012905892,
  "aggregation": 2.401997335255146e-06,
  "network_info": 0.010541356983594596,
  "llm_extraction": 14.630603900994174,
  "data_cleaning": 1.345097552984953e-05,
  "neo4j_injection": 0.25425883498974144,
  "embedding_time": 0,
  "indexing_time": 0.003037641989067197,
  "graph_injection_time": 0.2510226001031697,
  "acs_metrics": {
    "node_count": 566,
    "relationship_count": 1782,
    "density": 0.0056,
    "avg_degree": 6.2968,
    "avg_unique_neighbors": 6.2332,
    "global_efficiency": 0.331,
    "avg_path_length": 2.6763,
    "avg_degree_centrality": 0.0111,
    "max_degree_centrality": 0.5239,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0624,
    "degree_assortativity": -0.1728,
    "graph_robustness": 0.8591,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2832,
    "weakly_connected_components": 55,
    "largest_wcc_size": 512,
    "pagerank_top10_percent": 5.32,
    "louvain_communities": 65,
    "louvain_modularity": 0.4219,
    "label_entropy": 1.499,
    "computational_time": 0.16818480903748423
  },
  "retrieval_queries": []
}
2025-11-30 19:17:07,103 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:07,103 - src.pipeline.kg_builder - INFO - Batch 58 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 14.63s, Clean: 0.00s, Neo4j: 0.25s, ACS: 0.17s
2025-11-30 19:17:07,103 - src.pipeline.kg_builder - INFO - Batch 58 completed in 15.07s
Processing KG batches:  81%|████████  | 58/72 [15:46<02:33, 10.98s/it]2025-11-30 19:17:07,103 - src.pipeline.kg_builder - INFO - Processing batch 59/72 (3 items)
2025-11-30 19:17:07,103 - src.pipeline.kg_builder - DEBUG - Batch 59 current_video_time: 14:37-14:42
2025-11-30 19:17:07,112 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 566
- Total Relationships: 570
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:07,113 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:07,113 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_58_0 ~223 words, content: Time: 14:27-14:32 Content: The video shows a person conducting a laboratory procedure, likely a rinsing or washing step, from a first-person perspective. The scene is...
2025-11-30 19:17:07,113 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_58_1 ~222 words, content: methodical and controlled process, such as preparing a solution or cleaning glassware. Time: 14:32-14:37 Content: The video begins with a close-up view of a laboratory...
2025-11-30 19:17:07,113 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_58_2 ~145 words, content: on a black laboratory bench. On the bench, a complex experimental setup is in progress. A long, flexible, translucent tube is connected to a yellow...
2025-11-30 19:17:07,132 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:07,225 - src.components.pre_llm_injector - DEBUG - Found 268 existing chunk embeddings for similarity lookup
2025-11-30 19:17:07,269 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.871'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3', '0.863')]
2025-11-30 19:17:07,270 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3
2025-11-30 19:17:07,271 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 via source_chunk_ids
2025-11-30 19:17:07,291 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Watch / ID: 7_2)-[HAS_COLOR]->(Gold / ID: 50_1), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3)
2025-11-30 19:17:07,291 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_4', '0.795'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2', '0.785')]
2025-11-30 19:17:07,291 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_1', '0.840'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_1', '0.816')]
2025-11-30 19:17:07,291 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.871'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3', '0.863')]
2025-11-30 19:17:07,291 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:07,291 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_58_0) (~223 words) with timeout=5.0s retries=3
2025-11-30 19:17:08,926 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:08,927 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:08,927 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_58_1) (~222 words) with timeout=5.0s retries=3
2025-11-30 19:17:10,257 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:17:10,258 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:17:10,258 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_58_2) (~145 words) with timeout=5.0s retries=3
2025-11-30 19:17:11,415 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:17:11,415 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:17:11,415 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:17:11,415 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 4.30s
2025-11-30 19:17:11,416 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:17:11,416 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Watch / ID: 7_2)-[HAS_COLOR]->(Gold / ID: 50_1), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["58_0"]}, {"head": "Person", "relation": "Holds", "tail": "Translucent_Tube", "source_chunks": ["58_0"]}, {"head": "Translucent_Tube", "relation": "Transfers", "tail": "Clear_Liquid", "source_chunks": ["58_0"]}, {"head": "Clear_Liquid", "relation": "Flows Into", "tail": "White_Plastic_Measuring_Jug", "source_chunks": ["58_0"]}, {"head": "White_Plastic_Measuring_Jug", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["58_0"]}, {"head": "Person", "relation": "Controls", "tail": "Flow_Of_Liquid", "source_chunks": ["58_0"]}, {"head": "Laboratory Bench", "relation": "Contains", "tail": "Clear Plastic Tube", "source_chunks": ["58_1"]}, {"head": "Man", "relation": "Stands In Front Of", "tail": "Storage Cabinet", "source_chunks": ["58_1"]}, {"head": "Man", "relation": "Wears", "tail": "Cream-Colored Turtleneck Sweater", "source_chunks": ["58_1"]}, {"head": "Man", "relation": "Wears", "tail": "Blue Jeans", "source_chunks": ["58_1"]}, {"head": "Storage Cabinet", "relation": "Contains", "tail": "Laboratory Supplies", "source_chunks": ["58_1"]}, {"head": "Laboratory Bench", "relation": "Contains", "tail": "Experimental Setup", "source_chunks": ["58_1", "58_2"]}, {"head": "Experimental Setup", "relation": "Includes", "tail": "Magnetic Stirrer", "source_chunks": ["58_2"]}, {"head": "Experimental Setup", "relation": "Includes", "tail": "Glass Flask", "source_chunks": ["58_2"]}, {"head": "Experimental Setup", "relation": "Includes", "tail": "Apparatus", "source_chunks": ["58_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:17:11,416 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1594 words, ~2072 tokens)
2025-11-30 19:17:11,416 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:25,551 - src.components.global_refiner - DEBUG - LLM call completed in 14.13s
2025-11-30 19:17:25,552 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['58_0']], ['Person', 'Holds', 'Translucent_Tube', ['58_0']], ['Translucent_Tube', 'Transfers', 'Clear_Liquid', ['58_0']], ['Clear_Liquid', 'Flows Into', 'White_Plastic_Measuring_Jug', ['58_0']], ['White_Plastic_Measuring_Jug', 'Contains', 'Clear_Liquid', ['58_0']], ['Person', 'Controls', 'Flow_Of_Liquid', ['58_0']], ['Laboratory Bench', 'Contains', 'Clear Plastic Tube', ['58_1']], ['Man', 'Stands In Front Of', 'Storage Cabinet', ['58_1']], ['Man', 'Wears', 'Cream-Colored Turtleneck Sweater', ['58_1']], ['Man', 'Wears', 'Blue Jeans', ['58_1']], ['Storage Cabinet', 'Contains', 'Laboratory Supplies', ['58_1']], ['Laboratory Bench', 'Contains', 'Experimental Setup', ['58_1', '58_2']], ['Experimental Setup', 'Includes', 'Magnetic Stirrer', ['58_2']], ['Experimental Setup', 'Includes', 'Glass Flask', ['58_2']], ['Experimental Setup', 'Includes', 'Apparatus', ['58_2']]] inter_chunk_relations=[['Laboratory Bench', 'Contains', 'Laboratory Table', ['58_1']], ['Experimental Setup', 'Includes', 'Laboratory Table', ['58_2']], ['Experimental Setup', 'Includes', 'Laboratory', ['58_2']], ['Clear Plastic Tube', 'Is Part Of', 'Laboratory Table', ['58_1']], ['Clear Plastic Tube', 'Is Part Of', 'Laboratory', ['58_1']]] merge_instructions=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '53_2'}, {'local': 'Translucent_Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Tube', 'existing': 'Flexible_Tube', 'existing_id': '57_0'}] prune_instructions=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:17:25,552 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=15, sample=[['Person', 'Wears', 'Blue_Nitrile_Gloves', ['58_0']], ['Person', 'Holds', 'Translucent_Tube', ['58_0']], ['Translucent_Tube', 'Transfers', 'Clear_Liquid', ['58_0']]]
2025-11-30 19:17:25,552 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Laboratory Bench', 'Contains', 'Laboratory Table', ['58_1']], ['Experimental Setup', 'Includes', 'Laboratory Table', ['58_2']], ['Experimental Setup', 'Includes', 'Laboratory', ['58_2']]]
2025-11-30 19:17:25,552 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '53_2'}, {'local': 'Translucent_Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}]
2025-11-30 19:17:25,552 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:17:25,552 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Blue_Nitrile_Gloves', 'existing': 'Blue Nitrile Gloves', 'existing_id': '53_2'}, {'local': 'Translucent_Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Tube', 'existing': 'Translucent_Tube', 'existing_id': '50_0'}, {'local': 'Clear Plastic Tube', 'existing': 'Flexible_Tube', 'existing_id': '57_0'}]
2025-11-30 19:17:25,552 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Glove'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}, {'head': 'Person', 'relation': 'Wears', 'tail': 'Blue Nitrile Gloves'}]
2025-11-30 19:17:25,552 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 20 triplets (total: 14.14s, LLM: 14.13s)
2025-11-30 19:17:25,552 - src.pipeline.kg_builder - INFO - Global refinement: 20 triplets in 14.14s
2025-11-30 19:17:25,552 - src.pipeline.kg_builder - INFO - Using 20 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:25,552 - src.pipeline.kg_builder - INFO - Pushing batch 59/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:25,552 - src.components.neo4j_handler - INFO - Adding 20 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:25,771 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=575, relationships=588
2025-11-30 19:17:25,772 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:17:25,772 - src.components.neo4j_handler - DEBUG - APOC merge successful: Blue_Nitrile_Gloves -> Blue Nitrile Gloves
2025-11-30 19:17:25,772 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Translucent_Tube -> Translucent_Tube
2025-11-30 19:17:25,777 - src.components.neo4j_handler - DEBUG - APOC merge successful: Clear Plastic Tube -> Translucent_Tube
2025-11-30 19:17:25,781 - src.components.neo4j_handler - DEBUG - APOC merge successful: Clear Plastic Tube -> Flexible_Tube
2025-11-30 19:17:25,781 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:17:25,783 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:17:25,784 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Wears]-> Blue Glove
2025-11-30 19:17:25,785 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:17:25,786 - src.components.neo4j_handler - DEBUG - No matching relationship found to prune: Person -[Wears]-> Blue Nitrile Gloves
2025-11-30 19:17:25,786 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:17:25,787 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Laboratory Bench -[Contains]-> Laboratory Table
2025-11-30 19:17:25,815 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Experimental Setup -[Includes]-> Laboratory Table
2025-11-30 19:17:25,840 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Experimental Setup -[Includes]-> Laboratory
2025-11-30 19:17:25,841 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Clear Plastic Tube -[Is Part Of]-> Laboratory Table
2025-11-30 19:17:25,867 - src.components.neo4j_handler - DEBUG - No inter-chunk relation created: Clear Plastic Tube -[Is Part Of]-> Laboratory
2025-11-30 19:17:25,868 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:25,873 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=573, relationships=583
2025-11-30 19:17:25,875 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:25,875 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:25,875 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:25,875 - src.components.neo4j_handler - INFO - Batch injected in 0.32s (triplets: 0.32s, indexes: 0.00s)
2025-11-30 19:17:25,878 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 271, 'with_embedding': 271, 'linked_chunks': 217}
2025-11-30 19:17:25,878 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:25,995 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:26,070 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 519
2025-11-30 19:17:26,106 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 573, 'relationship_count': 1819, 'density': 0.0055, 'avg_degree': 6.349, 'avg_unique_neighbors': 6.2827, 'global_efficiency': 0.3209, 'avg_path_length': 2.7381, 'avg_degree_centrality': 0.0111, 'max_degree_centrality': 0.5157, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0778, 'degree_assortativity': -0.1703, 'graph_robustness': 0.8642, 'diameter_estimate': 50, 'clustering_coefficient': 0.2718, 'weakly_connected_components': 55, 'largest_wcc_size': 519, 'pagerank_top10_percent': 5.25, 'louvain_communities': 66, 'louvain_modularity': 0.4258, 'label_entropy': 1.4989, 'computational_time': 0.2283463900675997}
2025-11-30 19:17:26,107 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 58, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501446.107041, 'total_time': 19.003666119999252, 'aggregation': 2.5960616767406464e-06, 'network_info': 0.009180180029943585, 'llm_extraction': 18.439887103973888, 'data_cleaning': 4.172499757260084e-05, 'neo4j_injection': 0.32334050303325057, 'embedding_time': 0, 'indexing_time': 0.0028745909221470356, 'graph_injection_time': 0.32018189306836575, 'acs_metrics': {'node_count': 573, 'relationship_count': 1819, 'density': 0.0055, 'avg_degree': 6.349, 'avg_unique_neighbors': 6.2827, 'global_efficiency': 0.3209, 'avg_path_length': 2.7381, 'avg_degree_centrality': 0.0111, 'max_degree_centrality': 0.5157, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0778, 'degree_assortativity': -0.1703, 'graph_robustness': 0.8642, 'diameter_estimate': 50, 'clustering_coefficient': 0.2718, 'weakly_connected_components': 55, 'largest_wcc_size': 519, 'pagerank_top10_percent': 5.25, 'louvain_communities': 66, 'louvain_modularity': 0.4258, 'label_entropy': 1.4989, 'computational_time': 0.2283463900675997}, 'retrieval_queries': []}
2025-11-30 19:17:26,107 - src.pipeline.kg_builder - DEBUG - Batch 58 metrics: {
  "batch_idx": 58,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501446.107041,
  "total_time": 19.003666119999252,
  "aggregation": 2.5960616767406464e-06,
  "network_info": 0.009180180029943585,
  "llm_extraction": 18.439887103973888,
  "data_cleaning": 4.172499757260084e-05,
  "neo4j_injection": 0.32334050303325057,
  "embedding_time": 0,
  "indexing_time": 0.0028745909221470356,
  "graph_injection_time": 0.32018189306836575,
  "acs_metrics": {
    "node_count": 573,
    "relationship_count": 1819,
    "density": 0.0055,
    "avg_degree": 6.349,
    "avg_unique_neighbors": 6.2827,
    "global_efficiency": 0.3209,
    "avg_path_length": 2.7381,
    "avg_degree_centrality": 0.0111,
    "max_degree_centrality": 0.5157,
    "avg_betweenness_centrality": 0.0006,
    "max_betweenness_centrality": 0.0778,
    "degree_assortativity": -0.1703,
    "graph_robustness": 0.8642,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2718,
    "weakly_connected_components": 55,
    "largest_wcc_size": 519,
    "pagerank_top10_percent": 5.25,
    "louvain_communities": 66,
    "louvain_modularity": 0.4258,
    "label_entropy": 1.4989,
    "computational_time": 0.2283463900675997
  },
  "retrieval_queries": []
}
2025-11-30 19:17:26,108 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:26,108 - src.pipeline.kg_builder - INFO - Batch 59 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 18.44s, Clean: 0.00s, Neo4j: 0.32s, ACS: 0.23s
2025-11-30 19:17:26,108 - src.pipeline.kg_builder - INFO - Batch 59 completed in 19.00s
Processing KG batches:  82%|████████▏ | 59/72 [16:05<02:54, 13.39s/it]2025-11-30 19:17:26,108 - src.pipeline.kg_builder - INFO - Processing batch 60/72 (3 items)
2025-11-30 19:17:26,108 - src.pipeline.kg_builder - DEBUG - Batch 60 current_video_time: 14:52-14:57
2025-11-30 19:17:26,114 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 573
- Total Relationships: 583
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:26,115 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:26,115 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_0 ~238 words, content: Time: 14:42-14:47 Content: The video shows a laboratory setting where a scientific procedure is in progress. The central focus is a long, flexible tube, which...
2025-11-30 19:17:26,115 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_1 ~239 words, content: 52 Content: The video sequence captures a scientific experiment being conducted in a laboratory setting. The scene is set on a black laboratory bench, which...
2025-11-30 19:17:26,115 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_2 ~236 words, content: aker via the long tube. The liquid is being added slowly and steadily, indicating a controlled process. The entire setup is designed to ensure a...
2025-11-30 19:17:26,115 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_3 ~219 words, content: apparatus featuring a yellow, multi-armed clamp holding several tubes and a long, flexible tube. This entire assembly is mounted on a metal stand. The background...
2025-11-30 19:17:26,115 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_4 ~89 words, content: View (Frame 5):** The camera focuses on the end of the long, flexible tube, which is submerged in a white plastic beaker filled with a...
2025-11-30 19:17:26,135 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:26,241 - src.components.pre_llm_injector - DEBUG - Found 271 existing chunk embeddings for similarity lookup
2025-11-30 19:17:26,316 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2', '0.817')]
2025-11-30 19:17:26,318 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3
2025-11-30 19:17:26,318 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2
2025-11-30 19:17:26,364 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Workbench / ID: 1_1)-[HOLDS]->(Pump / ID: 47_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (White Tube / ID: 53_2)-[IS_POSITIONED_OVER]->(Large Jug / ID: 53_2), (Workbench / ID: 1_1)-[CONTAINS]->(Glass Beaker / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Researcher / ID: 32_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Scientist / ID: 36_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0)
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0)
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_1', '0.732'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_2', '0.731')]
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_2', '0.800'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.779')]
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.749'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.737')]
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.757'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.735')]
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2', '0.817')]
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:26,367 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_0) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:17:27,587 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:27,587 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:27,587 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_1) (~239 words) with timeout=5.0s retries=3
2025-11-30 19:17:28,770 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:17:28,770 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:17:28,770 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_2) (~236 words) with timeout=5.0s retries=3
2025-11-30 19:17:29,906 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:17:29,906 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:17:29,906 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_3) (~219 words) with timeout=5.0s retries=3
2025-11-30 19:17:31,065 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:17:31,065 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:17:31,065 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_4) (~89 words) with timeout=5.0s retries=3
2025-11-30 19:17:33,277 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:17:33,277 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:17:33,277 - src.components.pre_llm_injector - INFO - Extracted 30 local triplets from 5 chunks
2025-11-30 19:17:33,277 - src.pipeline.kg_builder - INFO - Pre-extraction: 30 triplets in 7.16s
2025-11-30 19:17:33,278 - src.components.global_refiner - INFO - Capping refinement input: 30 → 15 triplets
2025-11-30 19:17:33,278 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_53_2: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Workbench / ID: 1_1)-[HOLDS]->(Pump / ID: 47_0), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (White Tube / ID: 53_2)-[IS_POSITIONED_OVER]->(Large Jug / ID: 53_2), (Workbench / ID: 1_1)-[CONTAINS]->(Glass Beaker / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Experimenter / ID: 6_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Researcher / ID: 32_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Scientist / ID: 36_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_57_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Vacuum Filtration Setup", "relation": "Contains", "tail": "Flexible Tube", "source_chunks": ["59_0"]}, {"head": "Flexible Tube", "relation": "Connects", "tail": "Blue Stand", "source_chunks": ["59_0"]}, {"head": "Flexible Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["59_0"]}, {"head": "Liquid", "relation": "Flows From", "tail": "Container", "source_chunks": ["59_0"]}, {"head": "Liquid", "relation": "Enters", "tail": "White Plastic Beaker", "source_chunks": ["59_0"]}, {"head": "White Plastic Beaker", "relation": "Rests On", "tail": "Laboratory Table", "source_chunks": ["59_0"]}, {"head": "Tube", "relation": "Connects", "tail": "Beaker", "source_chunks": ["59_1"]}, {"head": "Beaker", "relation": "Rests On", "tail": "Magnetic_Stirrer", "source_chunks": ["59_1"]}, {"head": "Magnetic_Stirrer", "relation": "Holds", "tail": "Beaker", "source_chunks": ["59_1"]}, {"head": "Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["59_1"]}, {"head": "Liquid", "relation": "Flows Into", "tail": "Flask", "source_chunks": ["59_1"]}, {"head": "Flask", "relation": "Is Held By", "tail": "Clamp", "source_chunks": ["59_1"]}, {"head": "Flask", "relation": "Is Connected To", "tail": "Apparatus", "source_chunks": ["59_2"]}, {"head": "Apparatus", "relation": "Contains", "tail": "Liquid", "source_chunks": ["59_2"]}, {"head": "Liquid", "relation": "Is Transferred To", "tail": "Flask", "source_chunks": ["59_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:17:33,279 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3287 words, ~4273 tokens)
2025-11-30 19:17:33,279 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:33,301 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 11762 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:17:33,301 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:17:33,301 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:17:33,301 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:33,301 - src.pipeline.kg_builder - INFO - Pushing batch 60/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:33,301 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:33,461 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=581, relationships=595
2025-11-30 19:17:33,463 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:33,469 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=581, relationships=595
2025-11-30 19:17:33,471 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:33,471 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:33,472 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:33,472 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:17:33,473 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 276, 'with_embedding': 276, 'linked_chunks': 220}
2025-11-30 19:17:33,473 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:33,517 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:33,593 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 525
2025-11-30 19:17:33,629 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 581, 'relationship_count': 1843, 'density': 0.0055, 'avg_degree': 6.3442, 'avg_unique_neighbors': 6.2719, 'global_efficiency': 0.3127, 'avg_path_length': 2.7412, 'avg_degree_centrality': 0.0109, 'max_degree_centrality': 0.5086, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0707, 'degree_assortativity': -0.1688, 'graph_robustness': 0.8633, 'diameter_estimate': 50, 'clustering_coefficient': 0.2727, 'weakly_connected_components': 57, 'largest_wcc_size': 525, 'pagerank_top10_percent': 5.19, 'louvain_communities': 67, 'louvain_modularity': 0.4232, 'label_entropy': 1.4991, 'computational_time': 0.1557802240131423}
2025-11-30 19:17:33,629 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 59, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501453.629221, 'total_time': 7.5208178060129285, 'aggregation': 2.9049115255475044e-06, 'network_info': 0.006163197918795049, 'llm_extraction': 7.186924413079396, 'data_cleaning': 1.708301715552807e-05, 'neo4j_injection': 0.17050110991112888, 'embedding_time': 0, 'indexing_time': 0.0026736200088635087, 'graph_injection_time': 0.16761213704012334, 'acs_metrics': {'node_count': 581, 'relationship_count': 1843, 'density': 0.0055, 'avg_degree': 6.3442, 'avg_unique_neighbors': 6.2719, 'global_efficiency': 0.3127, 'avg_path_length': 2.7412, 'avg_degree_centrality': 0.0109, 'max_degree_centrality': 0.5086, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0707, 'degree_assortativity': -0.1688, 'graph_robustness': 0.8633, 'diameter_estimate': 50, 'clustering_coefficient': 0.2727, 'weakly_connected_components': 57, 'largest_wcc_size': 525, 'pagerank_top10_percent': 5.19, 'louvain_communities': 67, 'louvain_modularity': 0.4232, 'label_entropy': 1.4991, 'computational_time': 0.1557802240131423}, 'retrieval_queries': []}
2025-11-30 19:17:33,629 - src.pipeline.kg_builder - DEBUG - Batch 59 metrics: {
  "batch_idx": 59,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501453.629221,
  "total_time": 7.5208178060129285,
  "aggregation": 2.9049115255475044e-06,
  "network_info": 0.006163197918795049,
  "llm_extraction": 7.186924413079396,
  "data_cleaning": 1.708301715552807e-05,
  "neo4j_injection": 0.17050110991112888,
  "embedding_time": 0,
  "indexing_time": 0.0026736200088635087,
  "graph_injection_time": 0.16761213704012334,
  "acs_metrics": {
    "node_count": 581,
    "relationship_count": 1843,
    "density": 0.0055,
    "avg_degree": 6.3442,
    "avg_unique_neighbors": 6.2719,
    "global_efficiency": 0.3127,
    "avg_path_length": 2.7412,
    "avg_degree_centrality": 0.0109,
    "max_degree_centrality": 0.5086,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0707,
    "degree_assortativity": -0.1688,
    "graph_robustness": 0.8633,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2727,
    "weakly_connected_components": 57,
    "largest_wcc_size": 525,
    "pagerank_top10_percent": 5.19,
    "louvain_communities": 67,
    "louvain_modularity": 0.4232,
    "label_entropy": 1.4991,
    "computational_time": 0.1557802240131423
  },
  "retrieval_queries": []
}
2025-11-30 19:17:33,630 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:33,630 - src.pipeline.kg_builder - INFO - Batch 60 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.19s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.16s
2025-11-30 19:17:33,630 - src.pipeline.kg_builder - INFO - Batch 60 completed in 7.52s
Processing KG batches:  83%|████████▎ | 60/72 [16:12<02:19, 11.63s/it]2025-11-30 19:17:33,630 - src.pipeline.kg_builder - INFO - Processing batch 61/72 (3 items)
2025-11-30 19:17:33,630 - src.pipeline.kg_builder - DEBUG - Batch 61 current_video_time: 15:07-15:12
2025-11-30 19:17:33,636 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 581
- Total Relationships: 595
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:33,636 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:33,636 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_0 ~232 words, content: Time: 14:57-15:02 Content: The video sequence captures a scientific procedure, likely a chemical experiment or a sample preparation process, taking place in a laboratory setting....
2025-11-30 19:17:33,636 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_1 ~235 words, content: . - **Frame 4:** The person continues to handle the tube, ensuring it is properly aligned. The liquid is being transferred from the beaker into...
2025-11-30 19:17:33,636 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_2 ~234 words, content: or transferring a solution. - **Frame 2:** The person adjusts the tube, which is now forming a large loop. The apparatus is positioned on a...
2025-11-30 19:17:33,636 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_3 ~108 words, content: flexible, transparent tube, which appears to be a pipette or a transfer tube. The person is carefully manipulating the tube, ensuring it is properly positioned...
2025-11-30 19:17:33,656 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:33,756 - src.components.pre_llm_injector - DEBUG - Found 276 existing chunk embeddings for similarity lookup
2025-11-30 19:17:33,816 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.805'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_4', '0.773')]
2025-11-30 19:17:33,818 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2
2025-11-30 19:17:33,818 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_4 via source_chunk_ids
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Mettler Toledo / ID: 31_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0)
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.805'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_4', '0.773')]
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.649'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3', '0.628')]
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_1', '0.657'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_2', '0.633')]
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3', '0.747'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.722')]
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:33,850 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_0) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:17:35,077 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:35,077 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:35,077 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_1) (~235 words) with timeout=5.0s retries=3
2025-11-30 19:17:36,037 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:17:36,037 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:17:36,037 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_2) (~234 words) with timeout=5.0s retries=3
2025-11-30 19:17:37,081 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:17:37,081 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:17:37,081 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_3) (~108 words) with timeout=5.0s retries=3
2025-11-30 19:17:38,080 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:17:38,081 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:17:38,081 - src.components.pre_llm_injector - INFO - Extracted 22 local triplets from 4 chunks
2025-11-30 19:17:38,081 - src.pipeline.kg_builder - INFO - Pre-extraction: 22 triplets in 4.45s
2025-11-30 19:17:38,081 - src.components.global_refiner - INFO - Capping refinement input: 22 → 15 triplets
2025-11-30 19:17:38,082 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Mettler Toledo / ID: 31_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["60_0"]}, {"head": "Person", "relation": "Holds", "tail": "Transparent_Tube", "source_chunks": ["60_0"]}, {"head": "Transparent_Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["60_0"]}, {"head": "Liquid", "relation": "Flows Into", "tail": "White_Plastic_Container", "source_chunks": ["60_0"]}, {"head": "Equipment", "relation": "Mounted On", "tail": "Metal_Stand", "source_chunks": ["60_0"]}, {"head": "Person", "relation": "Adjusts", "tail": "Transparent_Tube", "source_chunks": ["60_0"]}, {"head": "Person", "relation": "Holds", "tail": "Tube", "source_chunks": ["60_1", "60_2"]}, {"head": "Tube", "relation": "Connects", "tail": "Beaker", "source_chunks": ["60_1"]}, {"head": "Tube", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["60_1", "60_3"]}, {"head": "Person", "relation": "Wears", "tail": "Gloves", "source_chunks": ["60_1"]}, {"head": "Person", "relation": "Manipulates", "tail": "Apparatus", "source_chunks": ["60_1"]}, {"head": "Apparatus", "relation": "Contains", "tail": "Liquid", "source_chunks": ["60_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Nitrile Gloves", "source_chunks": ["60_2"]}, {"head": "Tube", "relation": "Is Connected To", "tail": "Flask", "source_chunks": ["60_2"]}, {"head": "Tube", "relation": "Is Connected To", "tail": "Beaker", "source_chunks": ["60_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:17:38,082 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2820 words, ~3666 tokens)
2025-11-30 19:17:38,082 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:38,101 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 10010 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:17:38,101 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:17:38,101 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:17:38,101 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:38,101 - src.pipeline.kg_builder - INFO - Pushing batch 61/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:38,101 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:38,262 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=587, relationships=604
2025-11-30 19:17:38,262 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:38,268 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=587, relationships=604
2025-11-30 19:17:38,270 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:38,270 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:38,270 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:38,270 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:17:38,271 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 280, 'with_embedding': 280, 'linked_chunks': 224}
2025-11-30 19:17:38,271 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:38,318 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:38,394 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 531
2025-11-30 19:17:38,429 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 587, 'relationship_count': 1867, 'density': 0.0054, 'avg_degree': 6.3612, 'avg_unique_neighbors': 6.2896, 'global_efficiency': 0.3133, 'avg_path_length': 2.7387, 'avg_degree_centrality': 0.0109, 'max_degree_centrality': 0.5119, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0655, 'degree_assortativity': -0.1705, 'graph_robustness': 0.8645, 'diameter_estimate': 50, 'clustering_coefficient': 0.2834, 'weakly_connected_components': 57, 'largest_wcc_size': 531, 'pagerank_top10_percent': 5.13, 'louvain_communities': 68, 'louvain_modularity': 0.4254, 'label_entropy': 1.4992, 'computational_time': 0.15770557697396725}
2025-11-30 19:17:38,429 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 60, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501458.4295406, 'total_time': 4.798918821034022, 'aggregation': 3.2871030271053314e-06, 'network_info': 0.005454167956486344, 'llm_extraction': 4.465250473935157, 'data_cleaning': 1.269893255084753e-05, 'neo4j_injection': 0.1689869270194322, 'embedding_time': 0, 'indexing_time': 0.0023632680531591177, 'graph_injection_time': 0.16643718304112554, 'acs_metrics': {'node_count': 587, 'relationship_count': 1867, 'density': 0.0054, 'avg_degree': 6.3612, 'avg_unique_neighbors': 6.2896, 'global_efficiency': 0.3133, 'avg_path_length': 2.7387, 'avg_degree_centrality': 0.0109, 'max_degree_centrality': 0.5119, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0655, 'degree_assortativity': -0.1705, 'graph_robustness': 0.8645, 'diameter_estimate': 50, 'clustering_coefficient': 0.2834, 'weakly_connected_components': 57, 'largest_wcc_size': 531, 'pagerank_top10_percent': 5.13, 'louvain_communities': 68, 'louvain_modularity': 0.4254, 'label_entropy': 1.4992, 'computational_time': 0.15770557697396725}, 'retrieval_queries': []}
2025-11-30 19:17:38,429 - src.pipeline.kg_builder - DEBUG - Batch 60 metrics: {
  "batch_idx": 60,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501458.4295406,
  "total_time": 4.798918821034022,
  "aggregation": 3.2871030271053314e-06,
  "network_info": 0.005454167956486344,
  "llm_extraction": 4.465250473935157,
  "data_cleaning": 1.269893255084753e-05,
  "neo4j_injection": 0.1689869270194322,
  "embedding_time": 0,
  "indexing_time": 0.0023632680531591177,
  "graph_injection_time": 0.16643718304112554,
  "acs_metrics": {
    "node_count": 587,
    "relationship_count": 1867,
    "density": 0.0054,
    "avg_degree": 6.3612,
    "avg_unique_neighbors": 6.2896,
    "global_efficiency": 0.3133,
    "avg_path_length": 2.7387,
    "avg_degree_centrality": 0.0109,
    "max_degree_centrality": 0.5119,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0655,
    "degree_assortativity": -0.1705,
    "graph_robustness": 0.8645,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2834,
    "weakly_connected_components": 57,
    "largest_wcc_size": 531,
    "pagerank_top10_percent": 5.13,
    "louvain_communities": 68,
    "louvain_modularity": 0.4254,
    "label_entropy": 1.4992,
    "computational_time": 0.15770557697396725
  },
  "retrieval_queries": []
}
2025-11-30 19:17:38,430 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:38,430 - src.pipeline.kg_builder - INFO - Batch 61 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 4.47s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.16s
2025-11-30 19:17:38,430 - src.pipeline.kg_builder - INFO - Batch 61 completed in 4.80s
Processing KG batches:  85%|████████▍ | 61/72 [16:17<01:45,  9.58s/it]2025-11-30 19:17:38,430 - src.pipeline.kg_builder - INFO - Processing batch 62/72 (3 items)
2025-11-30 19:17:38,430 - src.pipeline.kg_builder - DEBUG - Batch 62 current_video_time: 15:22-15:27
2025-11-30 19:17:38,437 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 587
- Total Relationships: 604
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:38,438 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:38,438 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_0 ~217 words, content: Time: 15:12-15:17 Content: The video shows a person in a laboratory setting, wearing blue nitrile gloves, performing a procedure on a black lab bench. The...
2025-11-30 19:17:38,438 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_1 ~232 words, content: . Time: 15:17-15:22 Content: The video sequence captures a scientific procedure, likely a chemical experiment, taking place on a laboratory bench. The frames show a...
2025-11-30 19:17:38,438 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_2 ~239 words, content: pieces of equipment and glassware in the background. In summary, the video shows a chemical reaction that produces a gas. The gas is being collected...
2025-11-30 19:17:38,438 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_3 ~33 words, content: different perspectives of the experiment. In the final frame, a person with dark, curly hair is seen sitting at the bench, observing the experiment. The...
2025-11-30 19:17:38,458 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:38,559 - src.components.pre_llm_injector - DEBUG - Found 280 existing chunk embeddings for similarity lookup
2025-11-30 19:17:38,621 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3', '0.822')]
2025-11-30 19:17:38,623 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3 via source_chunk_ids
2025-11-30 19:17:38,623 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Equipment / ID: 0_1), (Transparent Tube / ID: 48_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Digital Scale / ID: 31_0)-[IS_IN_BACKGROUND]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Equipment / ID: 0_1)-[INCLUDES]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Equipment / ID: 0_1)-[MOUNTED_ON]->(Metal_Stand / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Container / ID: 4_1), (Equipment / ID: 0_1)-[HAS]->(Digital Display / ID: 48_0), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Equipment / ID: 0_1)-[INCLUDES]->(Plastic Container / ID: 49_0), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Experimental Setup / ID: 58_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0)
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_1', '0.813'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_19_1', '0.802')]
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_3', '0.822')]
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_1', '0.796'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.794')]
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_3', '0.775'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.765')]
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:38,649 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_0) (~217 words) with timeout=5.0s retries=3
2025-11-30 19:17:40,126 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:40,126 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:40,126 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_1) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:17:41,241 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:17:41,241 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:17:41,241 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_2) (~239 words) with timeout=5.0s retries=3
2025-11-30 19:17:42,411 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:17:42,411 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:17:42,411 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_3) (~33 words) with timeout=5.0s retries=3
2025-11-30 19:17:43,765 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:17:43,765 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:17:43,765 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 4 chunks
2025-11-30 19:17:43,766 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 5.33s
2025-11-30 19:17:43,766 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:17:43,766 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Equipment / ID: 0_1), (Transparent Tube / ID: 48_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Digital Scale / ID: 31_0)-[IS_IN_BACKGROUND]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Equipment / ID: 0_1)-[INCLUDES]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Equipment / ID: 0_1)-[MOUNTED_ON]->(Metal_Stand / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Container / ID: 4_1), (Equipment / ID: 0_1)-[HAS]->(Digital Display / ID: 48_0), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Equipment / ID: 0_1)-[INCLUDES]->(Plastic Container / ID: 49_0), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Experimental Setup / ID: 58_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["61_0"]}, {"head": "Person", "relation": "Holds", "tail": "Translucent_Tube", "source_chunks": ["61_0"]}, {"head": "Translucent_Tube", "relation": "Is Inserted Into", "tail": "Measuring_Cup", "source_chunks": ["61_0"]}, {"head": "Measuring_Cup", "relation": "Contains", "tail": "Transparent_Liquid", "source_chunks": ["61_0"]}, {"head": "Lab_Bench", "relation": "Contains", "tail": "Blue_Rectangular_Device", "source_chunks": ["61_0"]}, {"head": "Person", "relation": "Performs", "tail": "Procedure", "source_chunks": ["61_0"]}, {"head": "Plastic Container", "relation": "Contains", "tail": "Liquid", "source_chunks": ["61_1"]}, {"head": "Tube", "relation": "Delivers", "tail": "Substance", "source_chunks": ["61_1"]}, {"head": "Tube", "relation": "Produces", "tail": "Bubbles", "source_chunks": ["61_1"]}, {"head": "Inverted Beaker", "relation": "Collects", "tail": "Gas", "source_chunks": ["61_1"]}, {"head": "Plastic Container", "relation": "Is Connected To", "tail": "Tube", "source_chunks": ["61_1"]}, {"head": "Lab Bench", "relation": "Holds", "tail": "Experiment Setup", "source_chunks": ["61_1"]}, {"head": "Flask", "relation": "Is Heated On", "tail": "Magnetic Stirrer", "source_chunks": ["61_2"]}, {"head": "Magnetic Stirrer", "relation": "Is On", "tail": "Blue Base", "source_chunks": ["61_2"]}, {"head": "Tube", "relation": "Connects", "tail": "Flask", "source_chunks": ["61_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:17:43,766 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2193 words, ~2851 tokens)
2025-11-30 19:17:43,766 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:43,782 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 7510 input tokens (2000 > 8192 - 7510). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:17:43,782 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:17:43,782 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:17:43,782 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:43,782 - src.pipeline.kg_builder - INFO - Pushing batch 62/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:43,782 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:43,997 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=598, relationships=615
2025-11-30 19:17:43,998 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:44,004 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=598, relationships=615
2025-11-30 19:17:44,006 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:44,006 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:44,006 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:44,006 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.22s, indexes: 0.00s)
2025-11-30 19:17:44,007 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 284, 'with_embedding': 284, 'linked_chunks': 227}
2025-11-30 19:17:44,007 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:44,077 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:44,154 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 541
2025-11-30 19:17:44,190 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 598, 'relationship_count': 1898, 'density': 0.0053, 'avg_degree': 6.3478, 'avg_unique_neighbors': 6.2742, 'global_efficiency': 0.3147, 'avg_path_length': 2.7477, 'avg_degree_centrality': 0.0106, 'max_degree_centrality': 0.5042, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0665, 'degree_assortativity': -0.1664, 'graph_robustness': 0.8641, 'diameter_estimate': 50, 'clustering_coefficient': 0.2834, 'weakly_connected_components': 58, 'largest_wcc_size': 541, 'pagerank_top10_percent': 5.15, 'louvain_communities': 69, 'louvain_modularity': 0.4214, 'label_entropy': 1.4991, 'computational_time': 0.1831959499977529}
2025-11-30 19:17:44,191 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 61, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501464.1910784, 'total_time': 5.760149777983315, 'aggregation': 3.6959536373615265e-06, 'network_info': 0.006660071085207164, 'llm_extraction': 5.344910752959549, 'data_cleaning': 1.280906144529581e-05, 'neo4j_injection': 0.22365906392224133, 'embedding_time': 0, 'indexing_time': 0.0019115739269182086, 'graph_injection_time': 0.22156599594745785, 'acs_metrics': {'node_count': 598, 'relationship_count': 1898, 'density': 0.0053, 'avg_degree': 6.3478, 'avg_unique_neighbors': 6.2742, 'global_efficiency': 0.3147, 'avg_path_length': 2.7477, 'avg_degree_centrality': 0.0106, 'max_degree_centrality': 0.5042, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0665, 'degree_assortativity': -0.1664, 'graph_robustness': 0.8641, 'diameter_estimate': 50, 'clustering_coefficient': 0.2834, 'weakly_connected_components': 58, 'largest_wcc_size': 541, 'pagerank_top10_percent': 5.15, 'louvain_communities': 69, 'louvain_modularity': 0.4214, 'label_entropy': 1.4991, 'computational_time': 0.1831959499977529}, 'retrieval_queries': []}
2025-11-30 19:17:44,191 - src.pipeline.kg_builder - DEBUG - Batch 61 metrics: {
  "batch_idx": 61,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501464.1910784,
  "total_time": 5.760149777983315,
  "aggregation": 3.6959536373615265e-06,
  "network_info": 0.006660071085207164,
  "llm_extraction": 5.344910752959549,
  "data_cleaning": 1.280906144529581e-05,
  "neo4j_injection": 0.22365906392224133,
  "embedding_time": 0,
  "indexing_time": 0.0019115739269182086,
  "graph_injection_time": 0.22156599594745785,
  "acs_metrics": {
    "node_count": 598,
    "relationship_count": 1898,
    "density": 0.0053,
    "avg_degree": 6.3478,
    "avg_unique_neighbors": 6.2742,
    "global_efficiency": 0.3147,
    "avg_path_length": 2.7477,
    "avg_degree_centrality": 0.0106,
    "max_degree_centrality": 0.5042,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0665,
    "degree_assortativity": -0.1664,
    "graph_robustness": 0.8641,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2834,
    "weakly_connected_components": 58,
    "largest_wcc_size": 541,
    "pagerank_top10_percent": 5.15,
    "louvain_communities": 69,
    "louvain_modularity": 0.4214,
    "label_entropy": 1.4991,
    "computational_time": 0.1831959499977529
  },
  "retrieval_queries": []
}
2025-11-30 19:17:44,192 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:44,192 - src.pipeline.kg_builder - INFO - Batch 62 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.34s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.18s
2025-11-30 19:17:44,192 - src.pipeline.kg_builder - INFO - Batch 62 completed in 5.76s
Processing KG batches:  86%|████████▌ | 62/72 [16:23<01:24,  8.43s/it]2025-11-30 19:17:44,192 - src.pipeline.kg_builder - INFO - Processing batch 63/72 (3 items)
2025-11-30 19:17:44,192 - src.pipeline.kg_builder - DEBUG - Batch 63 current_video_time: 15:37-15:42
2025-11-30 19:17:44,201 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 598
- Total Relationships: 615
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:44,202 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:44,202 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_0 ~225 words, content: Time: 15:27-15:32 Content: The video sequence captures a scientific experiment being conducted in a laboratory setting. The scene is set in a well-equipped lab with...
2025-11-30 19:17:44,202 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_1 ~231 words, content: , showing the entire experimental setup. The person is still present, observing the experiment. The lab environment remains consistent, with the focus on the ongoing...
2025-11-30 19:17:44,202 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_2 ~220 words, content: Frame (4):** The camera then shifts to include a person in the frame. A man with long, dark, curly hair, wearing a light-colored sweater and...
2025-11-30 19:17:44,202 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_3 ~144 words, content: smile directed at the camera, suggesting a moment of happiness or satisfaction. - **Fourth Frame:** The person turns their head to their right, away from...
2025-11-30 19:17:44,222 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:44,322 - src.components.pre_llm_injector - DEBUG - Found 284 existing chunk embeddings for similarity lookup
2025-11-30 19:17:44,385 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.905'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0', '0.899')]
2025-11-30 19:17:44,387 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1
2025-11-30 19:17:44,387 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0
2025-11-30 19:17:44,428 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Lab Bench / ID: 2_1)-[HOLDS]->(Experiment Setup / ID: 61_1)
2025-11-30 19:17:44,436 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0)
2025-11-30 19:17:44,436 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.905'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0', '0.899')]
2025-11-30 19:17:44,437 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.698'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.686')]
2025-11-30 19:17:44,437 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.709'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_3_3', '0.705')]
2025-11-30 19:17:44,437 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_4', '0.741'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_28_4', '0.730')]
2025-11-30 19:17:44,437 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:44,437 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_0) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:17:45,709 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:45,709 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:45,709 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_1) (~231 words) with timeout=5.0s retries=3
2025-11-30 19:17:47,002 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:17:47,002 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:17:47,003 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_2) (~220 words) with timeout=5.0s retries=3
2025-11-30 19:17:47,971 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:17:47,971 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:17:47,971 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_3) (~144 words) with timeout=5.0s retries=3
2025-11-30 19:17:49,127 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:17:49,127 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:17:49,127 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 4 chunks
2025-11-30 19:17:49,127 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 4.93s
2025-11-30 19:17:49,127 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:17:49,127 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Lab Bench / ID: 2_1)-[HOLDS]->(Experiment Setup / ID: 61_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Sits At", "tail": "Lab Bench", "source_chunks": ["62_0"]}, {"head": "Lab Bench", "relation": "Contains", "tail": "Glass Flask", "source_chunks": ["62_0"]}, {"head": "Glass Flask", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["62_0"]}, {"head": "Magnetic Stirrer", "relation": "Mixes", "tail": "Liquid", "source_chunks": ["62_0"]}, {"head": "Glass Flask", "relation": "Connected To", "tail": "Flexible Tube", "source_chunks": ["62_0"]}, {"head": "Flexible Tube", "relation": "Part Of", "tail": "Vacuum Filtration Setup", "source_chunks": ["62_0"]}, {"head": "Scientist", "relation": "Conducts", "tail": "Experiment", "source_chunks": ["62_1"]}, {"head": "Experiment", "relation": "Involves", "tail": "Vacuum Filtration Setup", "source_chunks": ["62_1"]}, {"head": "Vacuum Filtration Setup", "relation": "Includes", "tail": "Glass Flask", "source_chunks": ["62_1"]}, {"head": "Vacuum Filtration Setup", "relation": "Includes", "tail": "Magnetic Stirrer", "source_chunks": ["62_1"]}, {"head": "Scientist", "relation": "Observes", "tail": "Experiment", "source_chunks": ["62_1"]}, {"head": "Lab Environment", "relation": "Contains", "tail": "Laboratory Equipment", "source_chunks": ["62_1"]}, {"head": "Person", "relation": "Wears", "tail": "Sweater", "source_chunks": ["62_2"]}, {"head": "Person", "relation": "Wears", "tail": "Jeans", "source_chunks": ["62_2"]}, {"head": "Person", "relation": "Sits On", "tail": "Floor", "source_chunks": ["62_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:17:49,128 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3452 words, ~4488 tokens)
2025-11-30 19:17:49,128 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:49,146 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 12305 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:17:49,146 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:17:49,146 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:17:49,147 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:49,147 - src.pipeline.kg_builder - INFO - Pushing batch 63/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:49,147 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:49,308 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=606, relationships=626
2025-11-30 19:17:49,309 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:49,316 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=606, relationships=626
2025-11-30 19:17:49,318 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:49,318 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:49,318 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:49,318 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:17:49,319 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 288, 'with_embedding': 288, 'linked_chunks': 230}
2025-11-30 19:17:49,319 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:49,368 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:49,447 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 548
2025-11-30 19:17:49,483 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 606, 'relationship_count': 1926, 'density': 0.0053, 'avg_degree': 6.3564, 'avg_unique_neighbors': 6.2805, 'global_efficiency': 0.3188, 'avg_path_length': 2.745, 'avg_degree_centrality': 0.0105, 'max_degree_centrality': 0.5074, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0626, 'degree_assortativity': -0.1693, 'graph_robustness': 0.8629, 'diameter_estimate': 50, 'clustering_coefficient': 0.2837, 'weakly_connected_components': 59, 'largest_wcc_size': 548, 'pagerank_top10_percent': 5.08, 'louvain_communities': 70, 'louvain_modularity': 0.4297, 'label_entropy': 1.4991, 'computational_time': 0.16387734794989228}
2025-11-30 19:17:49,483 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 62, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501469.4839098, 'total_time': 5.291462323046289, 'aggregation': 2.7120113372802734e-06, 'network_info': 0.009347526007331908, 'llm_extraction': 4.945042617968284, 'data_cleaning': 1.7247977666556835e-05, 'neo4j_injection': 0.1714762889314443, 'embedding_time': 0, 'indexing_time': 0.002336945035494864, 'graph_injection_time': 0.16894814593251795, 'acs_metrics': {'node_count': 606, 'relationship_count': 1926, 'density': 0.0053, 'avg_degree': 6.3564, 'avg_unique_neighbors': 6.2805, 'global_efficiency': 0.3188, 'avg_path_length': 2.745, 'avg_degree_centrality': 0.0105, 'max_degree_centrality': 0.5074, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0626, 'degree_assortativity': -0.1693, 'graph_robustness': 0.8629, 'diameter_estimate': 50, 'clustering_coefficient': 0.2837, 'weakly_connected_components': 59, 'largest_wcc_size': 548, 'pagerank_top10_percent': 5.08, 'louvain_communities': 70, 'louvain_modularity': 0.4297, 'label_entropy': 1.4991, 'computational_time': 0.16387734794989228}, 'retrieval_queries': []}
2025-11-30 19:17:49,484 - src.pipeline.kg_builder - DEBUG - Batch 62 metrics: {
  "batch_idx": 62,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501469.4839098,
  "total_time": 5.291462323046289,
  "aggregation": 2.7120113372802734e-06,
  "network_info": 0.009347526007331908,
  "llm_extraction": 4.945042617968284,
  "data_cleaning": 1.7247977666556835e-05,
  "neo4j_injection": 0.1714762889314443,
  "embedding_time": 0,
  "indexing_time": 0.002336945035494864,
  "graph_injection_time": 0.16894814593251795,
  "acs_metrics": {
    "node_count": 606,
    "relationship_count": 1926,
    "density": 0.0053,
    "avg_degree": 6.3564,
    "avg_unique_neighbors": 6.2805,
    "global_efficiency": 0.3188,
    "avg_path_length": 2.745,
    "avg_degree_centrality": 0.0105,
    "max_degree_centrality": 0.5074,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0626,
    "degree_assortativity": -0.1693,
    "graph_robustness": 0.8629,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2837,
    "weakly_connected_components": 59,
    "largest_wcc_size": 548,
    "pagerank_top10_percent": 5.08,
    "louvain_communities": 70,
    "louvain_modularity": 0.4297,
    "label_entropy": 1.4991,
    "computational_time": 0.16387734794989228
  },
  "retrieval_queries": []
}
2025-11-30 19:17:49,485 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:49,485 - src.pipeline.kg_builder - INFO - Batch 63 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 4.95s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.16s
2025-11-30 19:17:49,485 - src.pipeline.kg_builder - INFO - Batch 63 completed in 5.29s
Processing KG batches:  88%|████████▊ | 63/72 [16:28<01:07,  7.49s/it]2025-11-30 19:17:49,485 - src.pipeline.kg_builder - INFO - Processing batch 64/72 (3 items)
2025-11-30 19:17:49,485 - src.pipeline.kg_builder - DEBUG - Batch 64 current_video_time: 15:52-15:57
2025-11-30 19:17:49,495 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 606
- Total Relationships: 626
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:49,495 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:49,495 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_0 ~216 words, content: Time: 15:42-15:47 Content: The video captures a scene in a well-equipped laboratory, focusing on a scientific experiment in progress. The sequence of frames provides a...
2025-11-30 19:17:49,495 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_1 ~216 words, content: stand** holds a glass tube, which is connected by a long, flexible tube to a **beaker** filled with a clear liquid. This setup is typical...
2025-11-30 19:17:49,496 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_2 ~230 words, content: showing a person interacting with the environment and equipment. - The first frame provides a wide view of a laboratory. A black countertop is set...
2025-11-30 19:17:49,496 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_3 ~246 words, content: :52-15:57 Content: The video sequence captures a scientific experiment or procedure taking place in a laboratory setting. The frames show a person, likely a scientist...
2025-11-30 19:17:49,516 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:49,619 - src.components.pre_llm_injector - DEBUG - Found 288 existing chunk embeddings for similarity lookup
2025-11-30 19:17:49,683 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0', '0.922'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.915')]
2025-11-30 19:17:49,685 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0
2025-11-30 19:17:49,685 - src.components.pre_llm_injector - DEBUG - Found 7 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1
2025-11-30 19:17:49,733 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Lab Bench / ID: 2_1)-[HOLDS]->(Experiment Setup / ID: 61_1), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2)
2025-11-30 19:17:49,736 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2)
2025-11-30 19:17:49,736 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_2', '0.875'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_1', '0.664')]
2025-11-30 19:17:49,736 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_62_1', '0.858'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_17_2', '0.715')]
2025-11-30 19:17:49,736 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0', '0.922'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1', '0.915')]
2025-11-30 19:17:49,736 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_37_4', '0.845'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.811')]
2025-11-30 19:17:49,736 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:49,737 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_0) (~216 words) with timeout=5.0s retries=3
2025-11-30 19:17:53,284 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:53,284 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:53,284 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_1) (~216 words) with timeout=5.0s retries=3
2025-11-30 19:17:54,491 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:17:54,491 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:17:54,492 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_2) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:17:55,569 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:17:55,569 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:17:55,569 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_3) (~246 words) with timeout=5.0s retries=3
2025-11-30 19:17:56,795 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:17:56,795 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:17:56,796 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 4 chunks
2025-11-30 19:17:56,796 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 7.30s
2025-11-30 19:17:56,796 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:17:56,796 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_1: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Chemistry Experiment Report / ID: 2_1)-[IS_TITLED]->(Ar 眼镜训练用化学实验报告 (简降) / ID: 2_1), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Chemistry Experiment Report / ID: 2_1)-[IS_ON]->(Lab Bench / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Circular Device / ID: 2_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Black Elongated Case / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(White Bottle / ID: 6_0), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Lab Bench / ID: 2_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Lab Bench / ID: 2_1)-[HOLDS]->(Experiment Setup / ID: 61_1), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_0: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Stands In", "tail": "Laboratory", "source_chunks": ["63_0"]}, {"head": "Person", "relation": "Smiles At", "tail": "Camera", "source_chunks": ["63_0"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Glass_Cabinets", "source_chunks": ["63_0"]}, {"head": "Glass_Cabinets", "relation": "Contain", "tail": "Bottles", "source_chunks": ["63_0"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Laboratory_Bench", "source_chunks": ["63_0"]}, {"head": "Laboratory_Bench", "relation": "Contains", "tail": "Balance_Scale", "source_chunks": ["63_0"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Tube", "source_chunks": ["63_1"]}, {"head": "Glass Tube", "relation": "Connected To", "tail": "Beaker", "source_chunks": ["63_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["63_1"]}, {"head": "Apparatus", "relation": "Used For", "tail": "Reflux", "source_chunks": ["63_1"]}, {"head": "Apparatus", "relation": "Used For", "tail": "Distillation", "source_chunks": ["63_1"]}, {"head": "Lab Bench", "relation": "Supports", "tail": "Apparatus", "source_chunks": ["63_1"]}, {"head": "Person", "relation": "Holds", "tail": "Smartphone", "source_chunks": ["63_2"]}, {"head": "Person", "relation": "Walks In", "tail": "Laboratory", "source_chunks": ["63_2"]}, {"head": "Person", "relation": "Passes By", "tail": "Cabinet", "source_chunks": ["63_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:17:56,797 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3495 words, ~4544 tokens)
2025-11-30 19:17:56,797 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:17:56,817 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 12505 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:17:56,817 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:17:56,817 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:17:56,817 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:17:56,817 - src.pipeline.kg_builder - INFO - Pushing batch 64/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:17:56,817 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:17:57,010 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=615, relationships=639
2025-11-30 19:17:57,011 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:17:57,016 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=615, relationships=639
2025-11-30 19:17:57,019 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:17:57,020 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:17:57,020 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:17:57,020 - src.components.neo4j_handler - INFO - Batch injected in 0.20s (triplets: 0.20s, indexes: 0.00s)
2025-11-30 19:17:57,021 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 292, 'with_embedding': 292, 'linked_chunks': 233}
2025-11-30 19:17:57,021 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:17:57,091 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:17:57,178 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 556
2025-11-30 19:17:57,216 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 615, 'relationship_count': 1956, 'density': 0.0052, 'avg_degree': 6.361, 'avg_unique_neighbors': 6.2862, 'global_efficiency': 0.319, 'avg_path_length': 2.7643, 'avg_degree_centrality': 0.0104, 'max_degree_centrality': 0.5098, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0613, 'degree_assortativity': -0.1702, 'graph_robustness': 0.8625, 'diameter_estimate': 50, 'clustering_coefficient': 0.2854, 'weakly_connected_components': 60, 'largest_wcc_size': 556, 'pagerank_top10_percent': 4.99, 'louvain_communities': 70, 'louvain_modularity': 0.4389, 'label_entropy': 1.4991, 'computational_time': 0.1953758809249848}
2025-11-30 19:17:57,217 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 63, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501477.2170622, 'total_time': 7.731557349092327, 'aggregation': 3.0129449442029e-06, 'network_info': 0.009852077928371727, 'llm_extraction': 7.32231519697234, 'data_cleaning': 1.3993005268275738e-05, 'neo4j_injection': 0.20245578908361495, 'embedding_time': 0, 'indexing_time': 0.003643820993602276, 'graph_injection_time': 0.19862305792048573, 'acs_metrics': {'node_count': 615, 'relationship_count': 1956, 'density': 0.0052, 'avg_degree': 6.361, 'avg_unique_neighbors': 6.2862, 'global_efficiency': 0.319, 'avg_path_length': 2.7643, 'avg_degree_centrality': 0.0104, 'max_degree_centrality': 0.5098, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0613, 'degree_assortativity': -0.1702, 'graph_robustness': 0.8625, 'diameter_estimate': 50, 'clustering_coefficient': 0.2854, 'weakly_connected_components': 60, 'largest_wcc_size': 556, 'pagerank_top10_percent': 4.99, 'louvain_communities': 70, 'louvain_modularity': 0.4389, 'label_entropy': 1.4991, 'computational_time': 0.1953758809249848}, 'retrieval_queries': []}
2025-11-30 19:17:57,217 - src.pipeline.kg_builder - DEBUG - Batch 63 metrics: {
  "batch_idx": 63,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501477.2170622,
  "total_time": 7.731557349092327,
  "aggregation": 3.0129449442029e-06,
  "network_info": 0.009852077928371727,
  "llm_extraction": 7.32231519697234,
  "data_cleaning": 1.3993005268275738e-05,
  "neo4j_injection": 0.20245578908361495,
  "embedding_time": 0,
  "indexing_time": 0.003643820993602276,
  "graph_injection_time": 0.19862305792048573,
  "acs_metrics": {
    "node_count": 615,
    "relationship_count": 1956,
    "density": 0.0052,
    "avg_degree": 6.361,
    "avg_unique_neighbors": 6.2862,
    "global_efficiency": 0.319,
    "avg_path_length": 2.7643,
    "avg_degree_centrality": 0.0104,
    "max_degree_centrality": 0.5098,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0613,
    "degree_assortativity": -0.1702,
    "graph_robustness": 0.8625,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2854,
    "weakly_connected_components": 60,
    "largest_wcc_size": 556,
    "pagerank_top10_percent": 4.99,
    "louvain_communities": 70,
    "louvain_modularity": 0.4389,
    "label_entropy": 1.4991,
    "computational_time": 0.1953758809249848
  },
  "retrieval_queries": []
}
2025-11-30 19:17:57,218 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:17:57,218 - src.pipeline.kg_builder - INFO - Batch 64 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.32s, Clean: 0.00s, Neo4j: 0.20s, ACS: 0.20s
2025-11-30 19:17:57,218 - src.pipeline.kg_builder - INFO - Batch 64 completed in 7.73s
Processing KG batches:  89%|████████▉ | 64/72 [16:36<01:00,  7.56s/it]2025-11-30 19:17:57,218 - src.pipeline.kg_builder - INFO - Processing batch 65/72 (3 items)
2025-11-30 19:17:57,218 - src.pipeline.kg_builder - DEBUG - Batch 65 current_video_time: 16:07-16:12
2025-11-30 19:17:57,224 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 615
- Total Relationships: 639
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:17:57,224 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:17:57,225 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_0 ~240 words, content: Time: 15:57-16:02 Content: The video sequence captures a scientific procedure being performed in a laboratory setting. The scene is focused on a workbench where a...
2025-11-30 19:17:57,225 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_1 ~240 words, content: with various pieces of equipment and materials. - **Initial Setup:** The video begins with a close-up view of a laboratory bench. A clear, flexible tube...
2025-11-30 19:17:57,225 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_2 ~233 words, content: tube is seen extending from the stirrer into the beaker, suggesting that the liquid is being mixed or stirred as it is added. - **Final...
2025-11-30 19:17:57,225 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_3 ~149 words, content: rod, likely a stir bar or a probe, is inserted into the liquid. The surrounding area is cluttered with various laboratory equipment, including a digital...
2025-11-30 19:17:57,245 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:17:57,348 - src.components.pre_llm_injector - DEBUG - Found 292 existing chunk embeddings for similarity lookup
2025-11-30 19:17:57,414 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3', '0.824'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3', '0.822')]
2025-11-30 19:17:57,416 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3
2025-11-30 19:17:57,417 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3
2025-11-30 19:17:57,440 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0)
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2)
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_0', '0.577'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_0', '0.558')]
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_1', '0.818'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_0', '0.796')]
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_4', '0.777'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_3', '0.757')]
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3', '0.824'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3', '0.822')]
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:17:57,453 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_0) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:17:58,885 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:17:58,885 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:17:58,885 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_1) (~240 words) with timeout=5.0s retries=3
2025-11-30 19:18:00,046 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:00,046 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:00,046 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_2) (~233 words) with timeout=5.0s retries=3
2025-11-30 19:18:01,180 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:01,180 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:01,180 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_3) (~149 words) with timeout=5.0s retries=3
2025-11-30 19:18:06,186 - src.components.pre_llm_injector - WARNING - Chunk 3 timed out after 5.0s (attempt 1/4), retrying...
2025-11-30 19:18:07,813 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 2)
2025-11-30 19:18:07,813 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:18:07,814 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:18:07,814 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 10.59s
2025-11-30 19:18:07,814 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:18:07,815 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_3: Subgraph: (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_20_3: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["64_0"]}, {"head": "Person", "relation": "Holds", "tail": "Flexible_Tube", "source_chunks": ["64_0"]}, {"head": "Flexible_Tube", "relation": "Is Inserted Into", "tail": "Clear_Plastic_Container", "source_chunks": ["64_0"]}, {"head": "Clear_Plastic_Container", "relation": "Contains", "tail": "Liquid", "source_chunks": ["64_0"]}, {"head": "Laboratory_Bench", "relation": "Supports", "tail": "Clear_Plastic_Container", "source_chunks": ["64_0"]}, {"head": "Person", "relation": "Performs", "tail": "Scientific_Procedure", "source_chunks": ["64_0"]}, {"head": "Tube", "relation": "Extends From", "tail": "Container", "source_chunks": ["64_1"]}, {"head": "Tube", "relation": "Transfers Liquid To", "tail": "Container", "source_chunks": ["64_1"]}, {"head": "Container", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["64_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["64_1"]}, {"head": "Tube", "relation": "Extends To", "tail": "Beaker", "source_chunks": ["64_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Lab_Bench", "source_chunks": ["64_1", "64_2"]}, {"head": "Tube", "relation": "Extends Into", "tail": "Beaker", "source_chunks": ["64_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["64_2"]}, {"head": "Stirrer", "relation": "Stirs", "tail": "Liquid", "source_chunks": ["64_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:07,815 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2692 words, ~3500 tokens)
2025-11-30 19:18:07,815 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:07,837 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 9699 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:07,837 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:07,837 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:18:07,837 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:07,837 - src.pipeline.kg_builder - INFO - Pushing batch 65/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:07,837 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:08,044 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=620, relationships=650
2025-11-30 19:18:08,046 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:08,052 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=620, relationships=650
2025-11-30 19:18:08,054 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:08,054 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:08,055 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:08,055 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.21s, indexes: 0.00s)
2025-11-30 19:18:08,056 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 296, 'with_embedding': 296, 'linked_chunks': 236}
2025-11-30 19:18:08,056 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:08,153 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:08,232 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 560
2025-11-30 19:18:08,270 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 620, 'relationship_count': 1980, 'density': 0.0052, 'avg_degree': 6.3871, 'avg_unique_neighbors': 6.3129, 'global_efficiency': 0.3195, 'avg_path_length': 2.7537, 'avg_degree_centrality': 0.0103, 'max_degree_centrality': 0.5089, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0573, 'degree_assortativity': -0.1701, 'graph_robustness': 0.8606, 'diameter_estimate': 50, 'clustering_coefficient': 0.285, 'weakly_connected_components': 61, 'largest_wcc_size': 560, 'pagerank_top10_percent': 4.96, 'louvain_communities': 72, 'louvain_modularity': 0.4175, 'label_entropy': 1.4993, 'computational_time': 0.21401658898685127}
2025-11-30 19:18:08,271 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 64, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501488.27109, 'total_time': 11.052591376937926, 'aggregation': 2.8070062398910522e-06, 'network_info': 0.005977272056043148, 'llm_extraction': 10.612644074019045, 'data_cleaning': 1.663295552134514e-05, 'neo4j_injection': 0.21786459593567997, 'embedding_time': 0, 'indexing_time': 0.002856481005437672, 'graph_injection_time': 0.21478967007715255, 'acs_metrics': {'node_count': 620, 'relationship_count': 1980, 'density': 0.0052, 'avg_degree': 6.3871, 'avg_unique_neighbors': 6.3129, 'global_efficiency': 0.3195, 'avg_path_length': 2.7537, 'avg_degree_centrality': 0.0103, 'max_degree_centrality': 0.5089, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.0573, 'degree_assortativity': -0.1701, 'graph_robustness': 0.8606, 'diameter_estimate': 50, 'clustering_coefficient': 0.285, 'weakly_connected_components': 61, 'largest_wcc_size': 560, 'pagerank_top10_percent': 4.96, 'louvain_communities': 72, 'louvain_modularity': 0.4175, 'label_entropy': 1.4993, 'computational_time': 0.21401658898685127}, 'retrieval_queries': []}
2025-11-30 19:18:08,271 - src.pipeline.kg_builder - DEBUG - Batch 64 metrics: {
  "batch_idx": 64,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501488.27109,
  "total_time": 11.052591376937926,
  "aggregation": 2.8070062398910522e-06,
  "network_info": 0.005977272056043148,
  "llm_extraction": 10.612644074019045,
  "data_cleaning": 1.663295552134514e-05,
  "neo4j_injection": 0.21786459593567997,
  "embedding_time": 0,
  "indexing_time": 0.002856481005437672,
  "graph_injection_time": 0.21478967007715255,
  "acs_metrics": {
    "node_count": 620,
    "relationship_count": 1980,
    "density": 0.0052,
    "avg_degree": 6.3871,
    "avg_unique_neighbors": 6.3129,
    "global_efficiency": 0.3195,
    "avg_path_length": 2.7537,
    "avg_degree_centrality": 0.0103,
    "max_degree_centrality": 0.5089,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.0573,
    "degree_assortativity": -0.1701,
    "graph_robustness": 0.8606,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.285,
    "weakly_connected_components": 61,
    "largest_wcc_size": 560,
    "pagerank_top10_percent": 4.96,
    "louvain_communities": 72,
    "louvain_modularity": 0.4175,
    "label_entropy": 1.4993,
    "computational_time": 0.21401658898685127
  },
  "retrieval_queries": []
}
2025-11-30 19:18:08,272 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:08,272 - src.pipeline.kg_builder - INFO - Batch 65 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 10.61s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.21s
2025-11-30 19:18:08,272 - src.pipeline.kg_builder - INFO - Batch 65 completed in 11.05s
Processing KG batches:  90%|█████████ | 65/72 [16:47<01:00,  8.61s/it]2025-11-30 19:18:08,272 - src.pipeline.kg_builder - INFO - Processing batch 66/72 (3 items)
2025-11-30 19:18:08,272 - src.pipeline.kg_builder - DEBUG - Batch 66 current_video_time: 16:22-16:27
2025-11-30 19:18:08,280 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 620
- Total Relationships: 650
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:08,280 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:08,280 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_0 ~238 words, content: Time: 16:12-16:17 Content: The video sequence captures a scientific experiment taking place in a laboratory setting. The scene begins with a person, who has curly...
2025-11-30 19:18:08,280 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_1 ~239 words, content: of the equipment. The overall atmosphere of the video suggests a scientific experiment or a demonstration of a chemical process, with the person in the...
2025-11-30 19:18:08,280 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2 ~161 words, content: Content: The video shows a person in a laboratory setting, wearing blue nitrile gloves, performing a procedure on a black countertop. The central action involves...
2025-11-30 19:18:08,300 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:08,401 - src.components.pre_llm_injector - DEBUG - Found 296 existing chunk embeddings for similarity lookup
2025-11-30 19:18:08,451 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1', '0.893'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.850')]
2025-11-30 19:18:08,453 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0
2025-11-30 19:18:08,453 - src.components.pre_llm_injector - DEBUG - Found 9 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1
2025-11-30 19:18:08,501 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Reaction Apparatus / ID: 56_1)-[CONTAINS]->(Round_Bottom_Flask / ID: 30_1), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Magnetic_Stirrer / ID: 4_2)-[MIXES]->(Solution_In_Beaker / ID: 36_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0970 / ID: 46_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Magnetic_Stirrer / ID: 4_2)-[IS_INSIDE]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Magnetic_Stirrer / ID: 4_2)-[ROTATES]->(Stir_Bar / ID: 55_1), (Magnetic_Stirrer / ID: 4_2)-[IS_ON]->(Hot_Plate / ID: 56_1), (Lab_Table / ID: 56_1)-[CONTAINS]->(Reaction_Apparatus / ID: 56_1), (Flexible_Tube / ID: 57_0)-[CONNECTS_TO]->(Schlenk_Line / ID: 56_1), (Reaction_Apparatus / ID: 56_1)-[IS_CONNECTED_TO]->(Schlenk_Line / ID: 56_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0)
2025-11-30 19:18:08,505 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Container / ID: 4_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Translucent_Tube / ID: 50_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (White_Plastic_Measuring_Jug / ID: 50_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Graduated_Cylinder / ID: 37_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Cylinder / ID: 36_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Clear_Liquid / ID: 5_0)-[FLOWS_INTO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Tube / ID: 35_1)-[DELIVERS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Scientist / ID: 36_0)-[OBSERVES]->(Experiment / ID: 29_0), (Scientist / ID: 36_0)-[CONDUCTS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Lab / ID: 13_1)-[CONTAINS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Clear_Liquid / ID: 5_0)-[FLOWS_INTO]->(White_Plastic_Measuring_Jug / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Experiment / ID: 29_0)-[INVOLVES]->(Vacuum Filtration Setup / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0)
2025-11-30 19:18:08,506 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0', '0.850'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_1', '0.795')]
2025-11-30 19:18:08,506 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1', '0.893'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_1', '0.709')]
2025-11-30 19:18:08,506 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_3', '0.831'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_4_4', '0.813')]
2025-11-30 19:18:08,506 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:08,506 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_0) (~238 words) with timeout=5.0s retries=3
2025-11-30 19:18:09,630 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:09,630 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:09,630 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_1) (~239 words) with timeout=5.0s retries=3
2025-11-30 19:18:10,854 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:10,854 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:10,855 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2) (~161 words) with timeout=5.0s retries=3
2025-11-30 19:18:12,195 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:12,196 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:12,196 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:18:12,196 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 3.92s
2025-11-30 19:18:12,196 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:18:12,197 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_56_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Round_Bottom_Flask / ID: 30_1)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Glass_Flask / ID: 13_2)-[IS_CONNECTED_TO]->(Magnetic_Stirrer / ID: 4_2), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0.180 / ID: 5_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Reaction Apparatus / ID: 56_1)-[CONTAINS]->(Round_Bottom_Flask / ID: 30_1), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Magnetic_Stirrer / ID: 4_2)-[MIXES]->(Solution_In_Beaker / ID: 36_0), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Magnetic_Stirrer / ID: 4_2)-[DISPLAYS]->(0970 / ID: 46_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Magnetic_Stirrer / ID: 4_2)-[IS_INSIDE]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Magnetic_Stirrer / ID: 4_2)-[ROTATES]->(Stir_Bar / ID: 55_1), (Magnetic_Stirrer / ID: 4_2)-[IS_ON]->(Hot_Plate / ID: 56_1), (Lab_Table / ID: 56_1)-[CONTAINS]->(Reaction_Apparatus / ID: 56_1), (Flexible_Tube / ID: 57_0)-[CONNECTS_TO]->(Schlenk_Line / ID: 56_1), (Reaction_Apparatus / ID: 56_1)-[IS_CONNECTED_TO]->(Schlenk_Line / ID: 56_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_29_0: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Lab / ID: 13_1)-[CONTAINS]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Container / ID: 4_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Translucent_Tube / ID: 50_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (White_Plastic_Measuring_Jug / ID: 50_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[DISPENSES]->(Clear_Liquid / ID: 5_0), (Graduated_Cylinder / ID: 37_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Cylinder / ID: 36_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Round_Bottom_Flask / ID: 30_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Clear_Liquid / ID: 5_0), (Squeeze_Bottle / ID: 24_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Glass_Beaker / ID: 8_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Clear_Liquid / ID: 5_0)-[FLOWS_INTO]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Precision_Balance / ID: 13_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid From Burette / ID: 25_1), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Tube / ID: 35_1)-[DELIVERS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Scientist / ID: 36_0)-[OBSERVES]->(Experiment / ID: 29_0), (Scientist / ID: 36_0)-[CONDUCTS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire_Extinguisher / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Lab / ID: 13_1)-[CONTAINS]->(Fire Extinguisher / ID: 31_1), (Lab / ID: 13_1)-[CONTAINS]->(White Cabinet / ID: 31_1), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Lab / ID: 13_1)-[CONTAINS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Clear_Liquid / ID: 5_0)-[FLOWS_INTO]->(White_Plastic_Measuring_Jug / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Experiment / ID: 29_0)-[INVOLVES]->(Vacuum Filtration Setup / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Beige Sweater", "source_chunks": ["65_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["65_0"]}, {"head": "Person", "relation": "Handles", "tail": "Transparent Container", "source_chunks": ["65_0"]}, {"head": "Person", "relation": "Manipulates", "tail": "Glass Funnel", "source_chunks": ["65_0"]}, {"head": "Transparent Container", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["65_0"]}, {"head": "Laboratory Bench", "relation": "Contains", "tail": "Beaker", "source_chunks": ["65_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Gloves", "source_chunks": ["65_1", "65_2"]}, {"head": "Person", "relation": "Wears", "tail": "Black_Watch", "source_chunks": ["65_1"]}, {"head": "Person", "relation": "Manipulates", "tail": "Transparent_Container", "source_chunks": ["65_1"]}, {"head": "Transparent_Container", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["65_1"]}, {"head": "Transparent_Container", "relation": "Contains", "tail": "White_Substance", "source_chunks": ["65_1"]}, {"head": "Laboratory_Table", "relation": "Holds", "tail": "Transparent_Container", "source_chunks": ["65_1"]}, {"head": "Person", "relation": "Performs", "tail": "Procedure", "source_chunks": ["65_2"]}, {"head": "Person", "relation": "Holds", "tail": "Test_Tube", "source_chunks": ["65_2"]}, {"head": "Test_Tube", "relation": "Is Submerged In", "tail": "Beaker", "source_chunks": ["65_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:12,197 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3563 words, ~4632 tokens)
2025-11-30 19:18:12,197 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:12,222 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.03s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 13102 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:12,222 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:12,222 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.03s
2025-11-30 19:18:12,222 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:12,222 - src.pipeline.kg_builder - INFO - Pushing batch 66/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:12,222 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:12,369 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=630, relationships=660
2025-11-30 19:18:12,369 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:12,375 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=630, relationships=660
2025-11-30 19:18:12,376 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:12,376 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:12,376 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:12,376 - src.components.neo4j_handler - INFO - Batch injected in 0.15s (triplets: 0.15s, indexes: 0.00s)
2025-11-30 19:18:12,377 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 299, 'with_embedding': 299, 'linked_chunks': 239}
2025-11-30 19:18:12,377 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:12,452 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:12,532 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 570
2025-11-30 19:18:12,570 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 630, 'relationship_count': 2010, 'density': 0.0051, 'avg_degree': 6.381, 'avg_unique_neighbors': 6.3079, 'global_efficiency': 0.3217, 'avg_path_length': 2.7578, 'avg_degree_centrality': 0.0101, 'max_degree_centrality': 0.5135, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.059, 'degree_assortativity': -0.1757, 'graph_robustness': 0.8597, 'diameter_estimate': 50, 'clustering_coefficient': 0.2861, 'weakly_connected_components': 61, 'largest_wcc_size': 570, 'pagerank_top10_percent': 4.86, 'louvain_communities': 71, 'louvain_modularity': 0.4238, 'label_entropy': 1.4991, 'computational_time': 0.19233927398454398}
2025-11-30 19:18:12,570 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 65, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501492.5704079, 'total_time': 4.297858281061053, 'aggregation': 2.5869812816381454e-06, 'network_info': 0.007425470044836402, 'llm_extraction': 3.9420897180680186, 'data_cleaning': 1.7452985048294067e-05, 'neo4j_injection': 0.15431523404549807, 'embedding_time': 0, 'indexing_time': 0.0014477419899776578, 'graph_injection_time': 0.15264374995604157, 'acs_metrics': {'node_count': 630, 'relationship_count': 2010, 'density': 0.0051, 'avg_degree': 6.381, 'avg_unique_neighbors': 6.3079, 'global_efficiency': 0.3217, 'avg_path_length': 2.7578, 'avg_degree_centrality': 0.0101, 'max_degree_centrality': 0.5135, 'avg_betweenness_centrality': 0.0004, 'max_betweenness_centrality': 0.059, 'degree_assortativity': -0.1757, 'graph_robustness': 0.8597, 'diameter_estimate': 50, 'clustering_coefficient': 0.2861, 'weakly_connected_components': 61, 'largest_wcc_size': 570, 'pagerank_top10_percent': 4.86, 'louvain_communities': 71, 'louvain_modularity': 0.4238, 'label_entropy': 1.4991, 'computational_time': 0.19233927398454398}, 'retrieval_queries': []}
2025-11-30 19:18:12,570 - src.pipeline.kg_builder - DEBUG - Batch 65 metrics: {
  "batch_idx": 65,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501492.5704079,
  "total_time": 4.297858281061053,
  "aggregation": 2.5869812816381454e-06,
  "network_info": 0.007425470044836402,
  "llm_extraction": 3.9420897180680186,
  "data_cleaning": 1.7452985048294067e-05,
  "neo4j_injection": 0.15431523404549807,
  "embedding_time": 0,
  "indexing_time": 0.0014477419899776578,
  "graph_injection_time": 0.15264374995604157,
  "acs_metrics": {
    "node_count": 630,
    "relationship_count": 2010,
    "density": 0.0051,
    "avg_degree": 6.381,
    "avg_unique_neighbors": 6.3079,
    "global_efficiency": 0.3217,
    "avg_path_length": 2.7578,
    "avg_degree_centrality": 0.0101,
    "max_degree_centrality": 0.5135,
    "avg_betweenness_centrality": 0.0004,
    "max_betweenness_centrality": 0.059,
    "degree_assortativity": -0.1757,
    "graph_robustness": 0.8597,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2861,
    "weakly_connected_components": 61,
    "largest_wcc_size": 570,
    "pagerank_top10_percent": 4.86,
    "louvain_communities": 71,
    "louvain_modularity": 0.4238,
    "label_entropy": 1.4991,
    "computational_time": 0.19233927398454398
  },
  "retrieval_queries": []
}
2025-11-30 19:18:12,571 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:12,571 - src.pipeline.kg_builder - INFO - Batch 66 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 3.94s, Clean: 0.00s, Neo4j: 0.15s, ACS: 0.19s
2025-11-30 19:18:12,571 - src.pipeline.kg_builder - INFO - Batch 66 completed in 4.30s
Processing KG batches:  92%|█████████▏| 66/72 [16:51<00:43,  7.32s/it]2025-11-30 19:18:12,571 - src.pipeline.kg_builder - INFO - Processing batch 67/72 (3 items)
2025-11-30 19:18:12,571 - src.pipeline.kg_builder - DEBUG - Batch 67 current_video_time: 16:37-16:42
2025-11-30 19:18:12,581 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 630
- Total Relationships: 660
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:12,581 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:12,581 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_0 ~229 words, content: Time: 16:27-16:32 Content: The video captures a sequence of actions in a laboratory setting, focusing on a person conducting a chemical experiment. The scene is...
2025-11-30 19:18:12,581 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_1 ~232 words, content: The central activity involves a glass beaker, which contains a dark, cylindrical object, likely a sample or a filter. This beaker is placed on a...
2025-11-30 19:18:12,581 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_2 ~229 words, content: with the camera panning to the right, revealing more of the laboratory environment, including a blue base with a metal rod, which could be part...
2025-11-30 19:18:12,581 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_3 ~225 words, content: providing a wider view of the lab bench. The digital scale is now clearly identifiable as a "DUA" model. A person's hand, wearing a blue...
2025-11-30 19:18:12,581 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_4 ~81 words, content: a blue base, a roll of black tape, and other laboratory items. In summary, the video shows a laboratory experiment where a substance is being...
2025-11-30 19:18:12,601 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:12,709 - src.components.pre_llm_injector - DEBUG - Found 299 existing chunk embeddings for similarity lookup
2025-11-30 19:18:12,790 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.881'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4', '0.867')]
2025-11-30 19:18:12,792 - src.components.pre_llm_injector - DEBUG - Found 4 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2
2025-11-30 19:18:12,792 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4
2025-11-30 19:18:12,849 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1)
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Stirrer / ID: 44_1)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1)
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.739'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_39_1', '0.726')]
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_42_2', '0.821'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.781')]
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_2', '0.690'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_1', '0.674')]
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_18_3', '0.748'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_41_2', '0.742')]
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2', '0.881'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4', '0.867')]
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:12,858 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_0) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:18:13,948 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:13,948 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:13,948 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_1) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:18:15,800 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:15,800 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:15,801 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_2) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:18:16,952 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:16,952 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:16,952 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_3) (~225 words) with timeout=5.0s retries=3
2025-11-30 19:18:18,448 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:18:18,448 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:18:18,448 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_4) (~81 words) with timeout=5.0s retries=3
2025-11-30 19:18:19,650 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:18:19,650 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:18:19,650 - src.components.pre_llm_injector - INFO - Extracted 30 local triplets from 5 chunks
2025-11-30 19:18:19,650 - src.pipeline.kg_builder - INFO - Pre-extraction: 30 triplets in 7.07s
2025-11-30 19:18:19,650 - src.components.global_refiner - INFO - Capping refinement input: 30 → 15 triplets
2025-11-30 19:18:19,650 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_8_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Spatula / ID: 7_1)-[TRANSFERS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Spatula / ID: 7_1)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_21_4: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Stirrer / ID: 44_1)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["66_0"]}, {"head": "Person", "relation": "Holds", "tail": "Pipette", "source_chunks": ["66_0"]}, {"head": "Pipette", "relation": "Transfers", "tail": "Liquid", "source_chunks": ["66_0"]}, {"head": "Liquid", "relation": "Is In", "tail": "Transparent Container", "source_chunks": ["66_0"]}, {"head": "Transparent Container", "relation": "Is On", "tail": "Black Countertop", "source_chunks": ["66_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["66_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Dark_Cylindrical_Object", "source_chunks": ["66_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Magnetic_Stirrer_Or_Heating_Plate", "source_chunks": ["66_1"]}, {"head": "Magnetic_Stirrer_Or_Heating_Plate", "relation": "Is On", "tail": "Digital_Scale", "source_chunks": ["66_1"]}, {"head": "Digital_Scale", "relation": "Displays", "tail": "0970", "source_chunks": ["66_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Glove", "source_chunks": ["66_1"]}, {"head": "Beaker", "relation": "Is Adjusted By", "tail": "Person", "source_chunks": ["66_1"]}, {"head": "Camera", "relation": "Pans", "tail": "Right", "source_chunks": ["66_2"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Blue_Base", "source_chunks": ["66_2"]}, {"head": "Blue_Base", "relation": "Has", "tail": "Metal_Rod", "source_chunks": ["66_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:19,651 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~4644 words, ~6037 tokens)
2025-11-30 19:18:19,651 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:19,678 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.03s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 16975 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:19,678 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:19,678 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.03s
2025-11-30 19:18:19,678 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:19,678 - src.pipeline.kg_builder - INFO - Pushing batch 67/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:19,678 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:19,853 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=640, relationships=670
2025-11-30 19:18:19,854 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:19,859 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=640, relationships=670
2025-11-30 19:18:19,860 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:19,861 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:19,861 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:19,861 - src.components.neo4j_handler - INFO - Batch injected in 0.18s (triplets: 0.18s, indexes: 0.00s)
2025-11-30 19:18:19,863 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 304, 'with_embedding': 304, 'linked_chunks': 242}
2025-11-30 19:18:19,863 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:19,938 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:20,021 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 578
2025-11-30 19:18:20,062 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 640, 'relationship_count': 2039, 'density': 0.005, 'avg_degree': 6.3719, 'avg_unique_neighbors': 6.2969, 'global_efficiency': 0.3197, 'avg_path_length': 2.7873, 'avg_degree_centrality': 0.01, 'max_degree_centrality': 0.5117, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0868, 'degree_assortativity': -0.174, 'graph_robustness': 0.8588, 'diameter_estimate': 50, 'clustering_coefficient': 0.2882, 'weakly_connected_components': 63, 'largest_wcc_size': 578, 'pagerank_top10_percent': 4.77, 'louvain_communities': 73, 'louvain_modularity': 0.4235, 'label_entropy': 1.4991, 'computational_time': 0.1991733720060438}
2025-11-30 19:18:20,062 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 66, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501500.062488, 'total_time': 7.490665144054219, 'aggregation': 2.6139896363019943e-06, 'network_info': 0.00928067194763571, 'llm_extraction': 7.097488704952411, 'data_cleaning': 2.4536042474210262e-05, 'neo4j_injection': 0.18252406804822385, 'embedding_time': 0, 'indexing_time': 0.001594866975210607, 'graph_injection_time': 0.18072297307662666, 'acs_metrics': {'node_count': 640, 'relationship_count': 2039, 'density': 0.005, 'avg_degree': 6.3719, 'avg_unique_neighbors': 6.2969, 'global_efficiency': 0.3197, 'avg_path_length': 2.7873, 'avg_degree_centrality': 0.01, 'max_degree_centrality': 0.5117, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0868, 'degree_assortativity': -0.174, 'graph_robustness': 0.8588, 'diameter_estimate': 50, 'clustering_coefficient': 0.2882, 'weakly_connected_components': 63, 'largest_wcc_size': 578, 'pagerank_top10_percent': 4.77, 'louvain_communities': 73, 'louvain_modularity': 0.4235, 'label_entropy': 1.4991, 'computational_time': 0.1991733720060438}, 'retrieval_queries': []}
2025-11-30 19:18:20,062 - src.pipeline.kg_builder - DEBUG - Batch 66 metrics: {
  "batch_idx": 66,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501500.062488,
  "total_time": 7.490665144054219,
  "aggregation": 2.6139896363019943e-06,
  "network_info": 0.00928067194763571,
  "llm_extraction": 7.097488704952411,
  "data_cleaning": 2.4536042474210262e-05,
  "neo4j_injection": 0.18252406804822385,
  "embedding_time": 0,
  "indexing_time": 0.001594866975210607,
  "graph_injection_time": 0.18072297307662666,
  "acs_metrics": {
    "node_count": 640,
    "relationship_count": 2039,
    "density": 0.005,
    "avg_degree": 6.3719,
    "avg_unique_neighbors": 6.2969,
    "global_efficiency": 0.3197,
    "avg_path_length": 2.7873,
    "avg_degree_centrality": 0.01,
    "max_degree_centrality": 0.5117,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0868,
    "degree_assortativity": -0.174,
    "graph_robustness": 0.8588,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2882,
    "weakly_connected_components": 63,
    "largest_wcc_size": 578,
    "pagerank_top10_percent": 4.77,
    "louvain_communities": 73,
    "louvain_modularity": 0.4235,
    "label_entropy": 1.4991,
    "computational_time": 0.1991733720060438
  },
  "retrieval_queries": []
}
2025-11-30 19:18:20,063 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:20,064 - src.pipeline.kg_builder - INFO - Batch 67 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.10s, Clean: 0.00s, Neo4j: 0.18s, ACS: 0.20s
2025-11-30 19:18:20,064 - src.pipeline.kg_builder - INFO - Batch 67 completed in 7.49s
Processing KG batches:  93%|█████████▎| 67/72 [16:59<00:36,  7.37s/it]2025-11-30 19:18:20,064 - src.pipeline.kg_builder - INFO - Processing batch 68/72 (3 items)
2025-11-30 19:18:20,064 - src.pipeline.kg_builder - DEBUG - Batch 68 current_video_time: 16:52-16:57
2025-11-30 19:18:20,074 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 640
- Total Relationships: 670
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:20,074 - src.components.pre_llm_injector - DEBUG - Split content into 3 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:20,074 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_0 ~234 words, content: Time: 16:42-16:47 Content: The video shows a scientific experiment taking place in a laboratory setting. A person wearing blue gloves is using a pipette to...
2025-11-30 19:18:20,074 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_1 ~237 words, content: a solution. The laboratory environment is visible in the background, featuring a white wall, a door, and a shelf with various items, including cardboard boxes...
2025-11-30 19:18:20,074 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_2 ~35 words, content: The final frame provides a wider view of the laboratory, highlighting the equipment and the organized workspace. The overall atmosphere is one of focused scientific...
2025-11-30 19:18:20,094 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:20,196 - src.components.pre_llm_injector - DEBUG - Found 304 existing chunk embeddings for similarity lookup
2025-11-30 19:18:20,245 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.811')]
2025-11-30 19:18:20,246 - src.components.pre_llm_injector - DEBUG - Found 2 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2
2025-11-30 19:18:20,247 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1
2025-11-30 19:18:20,296 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1)
2025-11-30 19:18:20,299 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Equipment / ID: 0_1), (Transparent Tube / ID: 48_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Digital Scale / ID: 31_0)-[IS_IN_BACKGROUND]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Vacuum Filtration Setup / ID: 59_0)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_HEATED_ON]->(Magnetic Stirrer / ID: 5_1), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Equipment / ID: 0_1)-[INCLUDES]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Equipment / ID: 0_1)-[MOUNTED_ON]->(Metal_Stand / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Container / ID: 4_1), (Equipment / ID: 0_1)-[HAS]->(Digital Display / ID: 48_0), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Equipment / ID: 0_1)-[INCLUDES]->(Plastic Container / ID: 49_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Blue Base / ID: 49_2), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Experimental Setup / ID: 58_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1)
2025-11-30 19:18:20,299 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2', '0.811'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_12_1', '0.791')]
2025-11-30 19:18:20,300 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.822'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_1', '0.792')]
2025-11-30 19:18:20,300 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2', '0.787'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.786')]
2025-11-30 19:18:20,300 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:20,300 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_0) (~234 words) with timeout=5.0s retries=3
2025-11-30 19:18:21,480 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:21,480 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:21,481 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_1) (~237 words) with timeout=5.0s retries=3
2025-11-30 19:18:22,599 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:22,599 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:22,600 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_2) (~35 words) with timeout=5.0s retries=3
2025-11-30 19:18:23,622 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:23,622 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:23,622 - src.components.pre_llm_injector - INFO - Extracted 17 local triplets from 3 chunks
2025-11-30 19:18:23,622 - src.pipeline.kg_builder - INFO - Pre-extraction: 17 triplets in 3.55s
2025-11-30 19:18:23,623 - src.components.global_refiner - INFO - Capping refinement input: 17 → 15 triplets
2025-11-30 19:18:23,623 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_6_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1)
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Equipment / ID: 0_1), (Transparent Tube / ID: 48_0)-[IS_CONNECTED_TO]->(Equipment / ID: 0_1), (Lab Environment / ID: 35_1)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Countertop / ID: 1_0)-[CONTAINS]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Digital Scale / ID: 31_0)-[IS_IN_BACKGROUND]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Test Tube With Blue Cap / ID: 3_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Vacuum Filtration Setup / ID: 59_0)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_HEATED_ON]->(Magnetic Stirrer / ID: 5_1), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Digital Balance / ID: 5_1), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Digital Analytical Balance / ID: 25_1)-[IS_USED_FOR]->(Digital Balance / ID: 5_1), (Glass Volumetric Flask / ID: 16_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass_Erlenmeyer_Flask / ID: 27_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Glass Container / ID: 22_1)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Graduated_Cylinder / ID: 37_0)-[IS_PLACED_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker With White Powder / ID: 10_1)-[IS_REMOVED_FROM]->(Digital Balance / ID: 5_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15_G / ID: 10_0), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(80.15 G / ID: 10_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Value / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Weight / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(5.302 G / ID: 12_0), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.302_G / ID: 13_2), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(-56.301 G / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Weight / ID: 15_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Reading / ID: 15_1), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass / ID: 15_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative Value / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Mass_Value / ID: 16_1), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Negative_Reading / ID: 17_0), (Digital Balance / ID: 5_1)-[MEASURES]->(Mass_Of_Liquid / ID: 17_1), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Digital Balance / ID: 5_1)-[DISPLAYS]->(Mass_Value / ID: 18_0), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(56.30 / ID: 26_1), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Equipment / ID: 0_1)-[INCLUDES]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 G / ID: 37_2), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.0000_G / ID: 39_0), (Digital Balance / ID: 5_1)-[IS_ON]->(Lab_Bench / ID: 39_1), (Digital Balance / ID: 5_1)-[IS_USED_FOR]->(Weighing / ID: 40_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Digital Balance / ID: 5_1)-[DISPLAYS]->(0.000 / ID: 43_2), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Equipment / ID: 0_1)-[MOUNTED_ON]->(Metal_Stand / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Digital Balance / ID: 5_1)-[MEASURES]->(Liquid_Mass / ID: 46_0), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Container / ID: 4_1), (Equipment / ID: 0_1)-[HAS]->(Digital Display / ID: 48_0), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Equipment / ID: 0_1)-[INCLUDES]->(Plastic Container / ID: 49_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Blue Base / ID: 49_2), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Translucent_Tube / ID: 50_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Experimental Setup / ID: 58_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Gloves", "source_chunks": ["67_0"]}, {"head": "Person", "relation": "Uses", "tail": "Pipette", "source_chunks": ["67_0"]}, {"head": "Pipette", "relation": "Adds", "tail": "Clear Liquid", "source_chunks": ["67_0"]}, {"head": "Clear Liquid", "relation": "Is Added To", "tail": "Beaker", "source_chunks": ["67_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Cloudy Liquid", "source_chunks": ["67_0", "67_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "White Precipitate", "source_chunks": ["67_0"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Beaker", "source_chunks": ["67_1"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["67_1"]}, {"head": "Person", "relation": "Handles", "tail": "Beaker", "source_chunks": ["67_1"]}, {"head": "Beaker", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["67_1"]}, {"head": "Woman", "relation": "Stands Near", "tail": "Glass Cabinet", "source_chunks": ["67_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Equipment", "source_chunks": ["67_2"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Workspace", "source_chunks": ["67_2"]}, {"head": "Workspace", "relation": "Is", "tail": "Organized", "source_chunks": ["67_2"]}, {"head": "Laboratory", "relation": "Has", "tail": "Atmosphere", "source_chunks": ["67_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:23,623 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~3610 words, ~4693 tokens)
2025-11-30 19:18:23,624 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:23,646 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 12841 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:23,646 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:23,646 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:18:23,647 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:23,647 - src.pipeline.kg_builder - INFO - Pushing batch 68/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:23,647 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:23,768 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=649, relationships=680
2025-11-30 19:18:23,768 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:23,772 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=649, relationships=680
2025-11-30 19:18:23,773 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:23,773 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:23,774 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:23,774 - src.components.neo4j_handler - INFO - Batch injected in 0.13s (triplets: 0.13s, indexes: 0.00s)
2025-11-30 19:18:23,775 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 307, 'with_embedding': 307, 'linked_chunks': 245}
2025-11-30 19:18:23,775 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:23,850 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:23,934 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 587
2025-11-30 19:18:23,975 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 649, 'relationship_count': 2068, 'density': 0.0049, 'avg_degree': 6.3729, 'avg_unique_neighbors': 6.2958, 'global_efficiency': 0.3189, 'avg_path_length': 2.7899, 'avg_degree_centrality': 0.0098, 'max_degree_centrality': 0.5093, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.093, 'degree_assortativity': -0.1728, 'graph_robustness': 0.8617, 'diameter_estimate': 50, 'clustering_coefficient': 0.2902, 'weakly_connected_components': 63, 'largest_wcc_size': 587, 'pagerank_top10_percent': 4.7, 'louvain_communities': 75, 'louvain_modularity': 0.4146, 'label_entropy': 1.499, 'computational_time': 0.20052858593408018}
2025-11-30 19:18:23,976 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 67, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501503.9761677, 'total_time': 3.9120443019783124, 'aggregation': 2.513057552278042e-06, 'network_info': 0.010166386025957763, 'llm_extraction': 3.5725721010239795, 'data_cleaning': 1.5613972209393978e-05, 'neo4j_injection': 0.12712772004306316, 'embedding_time': 0, 'indexing_time': 0.0012974929995834827, 'graph_injection_time': 0.12560395698528737, 'acs_metrics': {'node_count': 649, 'relationship_count': 2068, 'density': 0.0049, 'avg_degree': 6.3729, 'avg_unique_neighbors': 6.2958, 'global_efficiency': 0.3189, 'avg_path_length': 2.7899, 'avg_degree_centrality': 0.0098, 'max_degree_centrality': 0.5093, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.093, 'degree_assortativity': -0.1728, 'graph_robustness': 0.8617, 'diameter_estimate': 50, 'clustering_coefficient': 0.2902, 'weakly_connected_components': 63, 'largest_wcc_size': 587, 'pagerank_top10_percent': 4.7, 'louvain_communities': 75, 'louvain_modularity': 0.4146, 'label_entropy': 1.499, 'computational_time': 0.20052858593408018}, 'retrieval_queries': []}
2025-11-30 19:18:23,976 - src.pipeline.kg_builder - DEBUG - Batch 67 metrics: {
  "batch_idx": 67,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501503.9761677,
  "total_time": 3.9120443019783124,
  "aggregation": 2.513057552278042e-06,
  "network_info": 0.010166386025957763,
  "llm_extraction": 3.5725721010239795,
  "data_cleaning": 1.5613972209393978e-05,
  "neo4j_injection": 0.12712772004306316,
  "embedding_time": 0,
  "indexing_time": 0.0012974929995834827,
  "graph_injection_time": 0.12560395698528737,
  "acs_metrics": {
    "node_count": 649,
    "relationship_count": 2068,
    "density": 0.0049,
    "avg_degree": 6.3729,
    "avg_unique_neighbors": 6.2958,
    "global_efficiency": 0.3189,
    "avg_path_length": 2.7899,
    "avg_degree_centrality": 0.0098,
    "max_degree_centrality": 0.5093,
    "avg_betweenness_centrality": 0.0006,
    "max_betweenness_centrality": 0.093,
    "degree_assortativity": -0.1728,
    "graph_robustness": 0.8617,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2902,
    "weakly_connected_components": 63,
    "largest_wcc_size": 587,
    "pagerank_top10_percent": 4.7,
    "louvain_communities": 75,
    "louvain_modularity": 0.4146,
    "label_entropy": 1.499,
    "computational_time": 0.20052858593408018
  },
  "retrieval_queries": []
}
2025-11-30 19:18:23,977 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:23,977 - src.pipeline.kg_builder - INFO - Batch 68 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 3.57s, Clean: 0.00s, Neo4j: 0.13s, ACS: 0.20s
2025-11-30 19:18:23,977 - src.pipeline.kg_builder - INFO - Batch 68 completed in 3.91s
Processing KG batches:  94%|█████████▍| 68/72 [17:03<00:25,  6.33s/it]2025-11-30 19:18:23,977 - src.pipeline.kg_builder - INFO - Processing batch 69/72 (3 items)
2025-11-30 19:18:23,977 - src.pipeline.kg_builder - DEBUG - Batch 69 current_video_time: 17:07-17:12
2025-11-30 19:18:23,983 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 649
- Total Relationships: 680
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:23,983 - src.components.pre_llm_injector - DEBUG - Split content into 5 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:23,983 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_0 ~234 words, content: Time: 16:57-17:02 Content: The video sequence captures a series of events in a laboratory setting, focusing on a scientific experiment involving a magnetic stirrer and...
2025-11-30 19:18:23,983 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_1 ~243 words, content: warning label. The person's hand is carefully manipulating the beaker, suggesting they are conducting a precise experiment. - **Frame 4:** The camera returns to a...
2025-11-30 19:18:23,984 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_2 ~228 words, content: supplies, and the person appears to be focused on their task. Time: 17:02-17:07 Content: The video captures a sequence of events in a laboratory setting,...
2025-11-30 19:18:23,984 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_3 ~232 words, content: . In summary, the video shows a person conducting a chemical experiment in a laboratory. The experiment involves mixing a substance in a beaker using...
2025-11-30 19:18:23,984 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_4 ~125 words, content: in the laboratory. He appears to be observing the experiment. His presence suggests that he might be a researcher or a student conducting the experiment....
2025-11-30 19:18:24,004 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:24,114 - src.components.pre_llm_injector - DEBUG - Found 307 existing chunk embeddings for similarity lookup
2025-11-30 19:18:24,197 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_3', '0.961'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0', '0.790')]
2025-11-30 19:18:24,199 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_3 via source_chunk_ids
2025-11-30 19:18:24,199 - src.components.pre_llm_injector - DEBUG - Found 8 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Stirrer / ID: 44_1)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Container / ID: 4_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Tube / ID: 35_1)-[CONNECTS]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Tube / ID: 35_1)-[DELIVERS]->(Substance / ID: 29_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Plastic Container / ID: 49_0)-[IS_CONNECTED_TO]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Glass Container / ID: 22_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Pump / ID: 47_0)-[CONNECTED_TO]->(Tube / ID: 35_1), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Workbench / ID: 1_1)-[HOLDS]->(Pump / ID: 47_0), (Container / ID: 4_1)-[CONTAINS]->(Water / ID: 47_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Water / ID: 47_0), (Container / ID: 4_1)-[CONTAINS]->(Water / ID: 47_0), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Tube / ID: 35_1)-[TRANSFERS_LIQUID_TO]->(Container / ID: 4_1), (Tube / ID: 35_1)-[EXTENDS_FROM]->(Container / ID: 4_1), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Magnetic_Stirrer / ID: 4_2)-[IS_INSIDE]->(Container / ID: 4_1), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Tube / ID: 35_1)-[INSERTED_INTO]->(Container / ID: 4_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Container / ID: 4_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Container / ID: 4_1), (Water / ID: 47_0)-[IS_IN]->(Transparent Tube / ID: 48_0), (Tube / ID: 35_1)-[LEADS_TO]->(Plastic Container / ID: 49_0), (Tube / ID: 35_1)-[CONNECTED_TO]->(Plastic Container / ID: 49_0), (Workbench / ID: 1_1)-[CONTAINS]->(Glass Beaker / ID: 53_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0), (Tube / ID: 35_1)-[PRODUCES]->(Bubbles / ID: 61_1), (Liquid / ID: 4_0)-[IS_IN]->(Transparent Container / ID: 65_0), (Beaker / ID: 4_0)-[CONTAINS]->(Dark_Cylindrical_Object / ID: 66_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer_Or_Heating_Plate / ID: 66_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy Liquid / ID: 67_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Precipitate / ID: 67_0)
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_31_2', '0.774'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_34_0', '0.642')]
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_10_3', '0.961'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_54_0', '0.473')]
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_46_1', '0.762'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2', '0.740')]
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0', '0.790'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_49_0', '0.710')]
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_51_3', '0.726'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.720')]
2025-11-30 19:18:24,215 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:24,216 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_0) (~234 words) with timeout=5.0s retries=3
2025-11-30 19:18:25,312 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:25,312 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:25,313 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_1) (~243 words) with timeout=5.0s retries=3
2025-11-30 19:18:26,388 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:26,388 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:26,388 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_2) (~228 words) with timeout=5.0s retries=3
2025-11-30 19:18:27,544 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:27,544 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:27,544 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_3) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:18:28,601 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:18:28,601 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:18:28,601 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_4) (~125 words) with timeout=5.0s retries=3
2025-11-30 19:18:29,518 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:18:29,518 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:18:29,518 - src.components.pre_llm_injector - INFO - Extracted 24 local triplets from 5 chunks
2025-11-30 19:18:29,518 - src.pipeline.kg_builder - INFO - Pre-extraction: 24 triplets in 5.54s
2025-11-30 19:18:29,519 - src.components.global_refiner - INFO - Capping refinement input: 24 → 15 triplets
2025-11-30 19:18:29,519 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_47_0: Subgraph: (Workbench / ID: 1_1)-[HOLDS]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Balance / ID: 4_2)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory_Bench / ID: 10_0)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab / ID: 13_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Lab_Bench / ID: 39_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Workbench / ID: 1_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Laboratory Table / ID: 0_0), (Translucent_Tube / ID: 50_0)-[IS_PART_OF]->(Laboratory Table / ID: 0_0), (Lab Bench / ID: 2_1)-[IS_ON]->(Laboratory Table / ID: 0_0), (Glass_Beaker / ID: 8_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[IS_ON]->(Laboratory Table / ID: 0_0), (Digital Scale / ID: 31_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (White Plastic Beaker / ID: 59_0)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Volumetric_Flask / ID: 14_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Digital Balance / ID: 5_1)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Precision Balance / ID: 0_0), (Laboratory Table / ID: 0_0)-[CONTAINS]->(Equipment / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Laboratory / ID: 0_1)-[CONTAINS]->(Workbench / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Bottle / ID: 1_1), (Workbench / ID: 1_1)-[HOLDS]->(Paper / ID: 1_1), (Liquid / ID: 4_0)-[GOES_TO]->(Test Tube / ID: 2_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Clear_Plastic_Container / ID: 50_0)-[CONTAINS]->(Liquid / ID: 4_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Liquid / ID: 4_0), (Apparatus / ID: 1_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass Cylinder / ID: 36_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Container / ID: 4_1)-[CONTAINS]->(Liquid / ID: 4_0), (Vial / ID: 44_1)-[CONTAINS]->(Liquid / ID: 4_0), (Glass_Vial / ID: 34_2)-[CONTAINS]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[CONTAINS]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[CONTAINS]->(Liquid / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible Tube / ID: 34_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Flexible_Tube / ID: 57_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Transparent_Tube / ID: 55_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass_Pipette / ID: 20_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Scientist / ID: 36_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Glass Pipette / ID: 16_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Stirrer / ID: 44_1)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated Cylinder / ID: 38_1)-[RECEIVES]->(Liquid / ID: 4_0), (Graduated_Cylinder / ID: 37_0)-[RECEIVES]->(Liquid / ID: 4_0), (Volumetric_Flask / ID: 14_2)-[RECEIVES]->(Liquid / ID: 4_0), (Wash_Bottle / ID: 11_1)-[DISPENSES]->(Liquid / ID: 4_0), (Burette / ID: 4_2)-[DISPENSES]->(Liquid / ID: 4_0), (Squeeze Bottle / ID: 17_3)-[DISPENSES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_SUBMERGED_IN]->(Liquid / ID: 4_0), (Tube / ID: 35_1)-[DELIVERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Liquid / ID: 4_0)-[IS_IN]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Container / ID: 4_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[CONTAINS]->(Powder / ID: 7_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Liquid / ID: 4_0)-[ENTERS]->(Glass_Flask / ID: 13_2), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Tube / ID: 35_1)-[CONNECTS]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Tube / ID: 35_1)-[DELIVERS]->(Substance / ID: 29_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_ADDED_TO]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[ENTERS]->(Volumetric_Flask / ID: 14_2), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Round_Bottom_Flask / ID: 30_1), (Plastic Container / ID: 49_0)-[IS_CONNECTED_TO]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Glass Container / ID: 22_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Pump / ID: 47_0)-[CONNECTED_TO]->(Tube / ID: 35_1), (Equipment / ID: 0_1)-[CONNECTED_TO]->(Tube / ID: 35_1), (Liquid / ID: 4_0)-[ENTERS]->(Graduated Cylinder / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Glass_Vial / ID: 34_2), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Liquid / ID: 4_0)-[FLOWS_THROUGH]->(Long White Flexible Tube / ID: 45_2), (Workbench / ID: 1_1)-[HOLDS]->(Pump / ID: 47_0), (Container / ID: 4_1)-[CONTAINS]->(Water / ID: 47_0), (Plastic Container / ID: 49_0)-[CONTAINS]->(Water / ID: 47_0), (Container / ID: 4_1)-[CONTAINS]->(Water / ID: 47_0), (Workbench / ID: 1_1)-[HOLDS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Tube / ID: 35_1)-[TRANSFERS_LIQUID_TO]->(Container / ID: 4_1), (Tube / ID: 35_1)-[EXTENDS_FROM]->(Container / ID: 4_1), (Liquid / ID: 4_0)-[FLOWS_FROM]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Magnetic_Stirrer / ID: 4_2)-[IS_INSIDE]->(Container / ID: 4_1), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Tube / ID: 35_1)-[INSERTED_INTO]->(Container / ID: 4_1), (Lab Bench / ID: 2_1)-[CONTAINS]->(Container / ID: 4_1), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Container / ID: 4_1), (Water / ID: 47_0)-[IS_IN]->(Transparent Tube / ID: 48_0), (Tube / ID: 35_1)-[LEADS_TO]->(Plastic Container / ID: 49_0), (Tube / ID: 35_1)-[CONNECTED_TO]->(Plastic Container / ID: 49_0), (Workbench / ID: 1_1)-[CONTAINS]->(Glass Beaker / ID: 53_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Liquid / ID: 4_0)-[ENTERS]->(White Plastic Beaker / ID: 59_0), (Liquid / ID: 4_0)-[FLOWS_INTO]->(White_Plastic_Container / ID: 60_0), (Tube / ID: 35_1)-[PRODUCES]->(Bubbles / ID: 61_1), (Liquid / ID: 4_0)-[IS_IN]->(Transparent Container / ID: 65_0), (Beaker / ID: 4_0)-[CONTAINS]->(Dark_Cylindrical_Object / ID: 66_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer_Or_Heating_Plate / ID: 66_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy Liquid / ID: 67_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Precipitate / ID: 67_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Beige Sweater", "source_chunks": ["68_0", "68_3"]}, {"head": "Person", "relation": "Wears", "tail": "Blue Jeans", "source_chunks": ["68_0"]}, {"head": "Person", "relation": "Holds", "tail": "White Object", "source_chunks": ["68_0"]}, {"head": "Person", "relation": "Interacts With", "tail": "Magnetic Stirrer", "source_chunks": ["68_0"]}, {"head": "Hand", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["68_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear Liquid", "source_chunks": ["68_0"]}, {"head": "Person", "relation": "Manipulates", "tail": "Beaker", "source_chunks": ["68_1"]}, {"head": "Person", "relation": "Interacts With", "tail": "Equipment", "source_chunks": ["68_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["68_1", "68_3"]}, {"head": "Magnetic Stirrer", "relation": "Stirs", "tail": "Liquid", "source_chunks": ["68_1", "68_3"]}, {"head": "Person", "relation": "Uses", "tail": "Magnetic Stirrer", "source_chunks": ["68_1"]}, {"head": "Laboratory", "relation": "Contains", "tail": "Equipment", "source_chunks": ["68_1", "68_4"]}, {"head": "Lab Workstation", "relation": "Contains", "tail": "Magnetic Stirrer", "source_chunks": ["68_2"]}, {"head": "Magnetic Stirrer", "relation": "Mixes", "tail": "Liquid", "source_chunks": ["68_2"]}, {"head": "Liquid", "relation": "Is In", "tail": "Beaker", "source_chunks": ["68_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:29,519 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1944 words, ~2527 tokens)
2025-11-30 19:18:29,519 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:29,535 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 6722 input tokens (2000 > 8192 - 6722). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:29,535 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:29,535 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:18:29,535 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:29,535 - src.pipeline.kg_builder - INFO - Pushing batch 69/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:29,535 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:29,880 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=657, relationships=688
2025-11-30 19:18:29,881 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:29,886 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=657, relationships=688
2025-11-30 19:18:29,891 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:29,891 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:29,891 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:29,891 - src.components.neo4j_handler - INFO - Batch injected in 0.36s (triplets: 0.35s, indexes: 0.00s)
2025-11-30 19:18:29,893 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 312, 'with_embedding': 312, 'linked_chunks': 250}
2025-11-30 19:18:29,893 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:29,946 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:30,032 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 595
2025-11-30 19:18:30,072 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 657, 'relationship_count': 2099, 'density': 0.0049, 'avg_degree': 6.3896, 'avg_unique_neighbors': 6.3135, 'global_efficiency': 0.3175, 'avg_path_length': 2.7857, 'avg_degree_centrality': 0.0097, 'max_degree_centrality': 0.5122, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0882, 'degree_assortativity': -0.1735, 'graph_robustness': 0.8637, 'diameter_estimate': 50, 'clustering_coefficient': 0.2927, 'weakly_connected_components': 63, 'largest_wcc_size': 595, 'pagerank_top10_percent': 4.64, 'louvain_communities': 74, 'louvain_modularity': 0.4217, 'label_entropy': 1.4991, 'computational_time': 0.17945036094170064}
2025-11-30 19:18:30,072 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 68, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501510.0729444, 'total_time': 6.09523892600555, 'aggregation': 3.5420525819063187e-06, 'network_info': 0.005594866932369769, 'llm_extraction': 5.551993721048348, 'data_cleaning': 1.2377975508570671e-05, 'neo4j_injection': 0.3561180210672319, 'embedding_time': 0, 'indexing_time': 0.004636744968593121, 'graph_injection_time': 0.35131674306467175, 'acs_metrics': {'node_count': 657, 'relationship_count': 2099, 'density': 0.0049, 'avg_degree': 6.3896, 'avg_unique_neighbors': 6.3135, 'global_efficiency': 0.3175, 'avg_path_length': 2.7857, 'avg_degree_centrality': 0.0097, 'max_degree_centrality': 0.5122, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0882, 'degree_assortativity': -0.1735, 'graph_robustness': 0.8637, 'diameter_estimate': 50, 'clustering_coefficient': 0.2927, 'weakly_connected_components': 63, 'largest_wcc_size': 595, 'pagerank_top10_percent': 4.64, 'louvain_communities': 74, 'louvain_modularity': 0.4217, 'label_entropy': 1.4991, 'computational_time': 0.17945036094170064}, 'retrieval_queries': []}
2025-11-30 19:18:30,073 - src.pipeline.kg_builder - DEBUG - Batch 68 metrics: {
  "batch_idx": 68,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501510.0729444,
  "total_time": 6.09523892600555,
  "aggregation": 3.5420525819063187e-06,
  "network_info": 0.005594866932369769,
  "llm_extraction": 5.551993721048348,
  "data_cleaning": 1.2377975508570671e-05,
  "neo4j_injection": 0.3561180210672319,
  "embedding_time": 0,
  "indexing_time": 0.004636744968593121,
  "graph_injection_time": 0.35131674306467175,
  "acs_metrics": {
    "node_count": 657,
    "relationship_count": 2099,
    "density": 0.0049,
    "avg_degree": 6.3896,
    "avg_unique_neighbors": 6.3135,
    "global_efficiency": 0.3175,
    "avg_path_length": 2.7857,
    "avg_degree_centrality": 0.0097,
    "max_degree_centrality": 0.5122,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0882,
    "degree_assortativity": -0.1735,
    "graph_robustness": 0.8637,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2927,
    "weakly_connected_components": 63,
    "largest_wcc_size": 595,
    "pagerank_top10_percent": 4.64,
    "louvain_communities": 74,
    "louvain_modularity": 0.4217,
    "label_entropy": 1.4991,
    "computational_time": 0.17945036094170064
  },
  "retrieval_queries": []
}
2025-11-30 19:18:30,074 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:30,074 - src.pipeline.kg_builder - INFO - Batch 69 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.55s, Clean: 0.00s, Neo4j: 0.36s, ACS: 0.18s
2025-11-30 19:18:30,074 - src.pipeline.kg_builder - INFO - Batch 69 completed in 6.10s
Processing KG batches:  96%|█████████▌| 69/72 [17:09<00:18,  6.26s/it]2025-11-30 19:18:30,074 - src.pipeline.kg_builder - INFO - Processing batch 70/72 (3 items)
2025-11-30 19:18:30,074 - src.pipeline.kg_builder - DEBUG - Batch 70 current_video_time: 17:22-17:27
2025-11-30 19:18:30,080 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 657
- Total Relationships: 688
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:30,080 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:30,080 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_0 ~226 words, content: Time: 17:12-17:17 Content: The video sequence captures a scene within a laboratory, focusing on a scientific experiment in progress. The setting is a well-equipped lab...
2025-11-30 19:18:30,080 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_1 ~230 words, content: are methodical and suggest a controlled experiment. - **Initial Setup:** The scene is a laboratory with a black countertop. A person wearing a blue nitrile...
2025-11-30 19:18:30,080 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_2 ~216 words, content: The camera angle changes slightly, providing a closer view of the person's hand as they adjust the flask in the beaker. The focus remains on...
2025-11-30 19:18:30,080 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_3 ~97 words, content: fully immersed. - **Final State:** The vial is now completely submerged in the liquid. The hand remains in the beaker, holding the vial in place....
2025-11-30 19:18:30,101 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:30,210 - src.components.pre_llm_injector - DEBUG - Found 312 existing chunk embeddings for similarity lookup
2025-11-30 19:18:30,279 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2', '0.770'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_5', '0.770')]
2025-11-30 19:18:30,281 - src.components.pre_llm_injector - DEBUG - Found 5 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2
2025-11-30 19:18:30,281 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_5 via source_chunk_ids
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WEARS]->(Blue Jeans / ID: 0_0), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[MANIPULATES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Test_Tube / ID: 34_1)-[IS_EMPTY]->(After_Transfer / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark_Cylindrical_Object / ID: 66_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer_Or_Heating_Plate / ID: 66_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy Liquid / ID: 67_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Precipitate / ID: 67_0), (Person / ID: 0_0)-[HOLDS]->(White Object / ID: 68_0)
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_23_1', '0.753'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_67_2', '0.742')]
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_27_0', '0.732'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_11_3', '0.704')]
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_40_3', '0.695'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.693')]
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2', '0.770'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_43_5', '0.770')]
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:30,314 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_0) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:18:31,324 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:31,324 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:31,324 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_1) (~230 words) with timeout=5.0s retries=3
2025-11-30 19:18:32,876 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:32,876 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:32,876 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_2) (~216 words) with timeout=5.0s retries=3
2025-11-30 19:18:34,235 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:34,235 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:34,235 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_69_3) (~97 words) with timeout=5.0s retries=3
2025-11-30 19:18:35,295 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:18:35,295 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:18:35,296 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:18:35,296 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 5.22s
2025-11-30 19:18:35,296 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:18:35,296 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_65_2: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WEARS]->(Blue Jeans / ID: 0_0), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Test_Tube / ID: 34_1)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[MANIPULATES]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Test_Tube / ID: 34_1)-[IS_TRANSFERRED_TO]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Test_Tube / ID: 34_1)-[IS_EMPTY]->(After_Transfer / ID: 34_2), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark_Cylindrical_Object / ID: 66_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer_Or_Heating_Plate / ID: 66_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy Liquid / ID: 67_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Precipitate / ID: 67_0), (Person / ID: 0_0)-[HOLDS]->(White Object / ID: 68_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue Glove", "source_chunks": ["69_0"]}, {"head": "Person", "relation": "Handles", "tail": "Container", "source_chunks": ["69_0"]}, {"head": "Container", "relation": "Contains", "tail": "Substance", "source_chunks": ["69_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Substance", "source_chunks": ["69_0"]}, {"head": "Person", "relation": "Adds", "tail": "Substance", "source_chunks": ["69_0"]}, {"head": "Beaker", "relation": "Is Part Of", "tail": "Apparatus", "source_chunks": ["69_0"]}, {"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Glove", "source_chunks": ["69_1", "69_2"]}, {"head": "Person", "relation": "Holds", "tail": "Round_Bottom_Flask", "source_chunks": ["69_1"]}, {"head": "Round_Bottom_Flask", "relation": "Is Connected To", "tail": "Flexible_Tube", "source_chunks": ["69_1"]}, {"head": "Flexible_Tube", "relation": "Leads To", "tail": "Beaker", "source_chunks": ["69_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Clear_Liquid", "source_chunks": ["69_1"]}, {"head": "Beaker", "relation": "Is Part Of", "tail": "Reflux_Apparatus", "source_chunks": ["69_1"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Vial", "source_chunks": ["69_2"]}, {"head": "Glass_Vial", "relation": "Is Submerged In", "tail": "Beaker", "source_chunks": ["69_2"]}, {"head": "Beaker", "relation": "Contains", "tail": "Cloudy_Liquid", "source_chunks": ["69_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:35,297 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~2362 words, ~3071 tokens)
2025-11-30 19:18:35,297 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:35,317 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "This model's maximum context length is 8192 tokens. However, your request has 8391 input tokens. Please reduce the length of the input messages. None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:35,317 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:35,317 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:18:35,317 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:35,317 - src.pipeline.kg_builder - INFO - Pushing batch 70/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:35,317 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:35,482 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=662, relationships=697
2025-11-30 19:18:35,482 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:35,487 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=662, relationships=697
2025-11-30 19:18:35,490 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:35,490 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:35,490 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:35,490 - src.components.neo4j_handler - INFO - Batch injected in 0.17s (triplets: 0.17s, indexes: 0.00s)
2025-11-30 19:18:35,491 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 316, 'with_embedding': 316, 'linked_chunks': 253}
2025-11-30 19:18:35,491 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:35,544 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:35,632 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 599
2025-11-30 19:18:35,671 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 662, 'relationship_count': 2125, 'density': 0.0049, 'avg_degree': 6.4199, 'avg_unique_neighbors': 6.3444, 'global_efficiency': 0.3175, 'avg_path_length': 2.7737, 'avg_degree_centrality': 0.0097, 'max_degree_centrality': 0.5129, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0838, 'degree_assortativity': -0.172, 'graph_robustness': 0.8616, 'diameter_estimate': 50, 'clustering_coefficient': 0.2922, 'weakly_connected_components': 64, 'largest_wcc_size': 599, 'pagerank_top10_percent': 4.59, 'louvain_communities': 76, 'louvain_modularity': 0.4185, 'label_entropy': 1.4993, 'computational_time': 0.17996435600798577}
2025-11-30 19:18:35,672 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 69, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501515.672158, 'total_time': 5.597337307990529, 'aggregation': 3.1009549275040627e-06, 'network_info': 0.005330585991032422, 'llm_extraction': 5.237194384098984, 'data_cleaning': 1.7056940123438835e-05, 'neo4j_injection': 0.17308547405991703, 'embedding_time': 0, 'indexing_time': 0.0027461330173537135, 'graph_injection_time': 0.17010624601971358, 'acs_metrics': {'node_count': 662, 'relationship_count': 2125, 'density': 0.0049, 'avg_degree': 6.4199, 'avg_unique_neighbors': 6.3444, 'global_efficiency': 0.3175, 'avg_path_length': 2.7737, 'avg_degree_centrality': 0.0097, 'max_degree_centrality': 0.5129, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0838, 'degree_assortativity': -0.172, 'graph_robustness': 0.8616, 'diameter_estimate': 50, 'clustering_coefficient': 0.2922, 'weakly_connected_components': 64, 'largest_wcc_size': 599, 'pagerank_top10_percent': 4.59, 'louvain_communities': 76, 'louvain_modularity': 0.4185, 'label_entropy': 1.4993, 'computational_time': 0.17996435600798577}, 'retrieval_queries': []}
2025-11-30 19:18:35,672 - src.pipeline.kg_builder - DEBUG - Batch 69 metrics: {
  "batch_idx": 69,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501515.672158,
  "total_time": 5.597337307990529,
  "aggregation": 3.1009549275040627e-06,
  "network_info": 0.005330585991032422,
  "llm_extraction": 5.237194384098984,
  "data_cleaning": 1.7056940123438835e-05,
  "neo4j_injection": 0.17308547405991703,
  "embedding_time": 0,
  "indexing_time": 0.0027461330173537135,
  "graph_injection_time": 0.17010624601971358,
  "acs_metrics": {
    "node_count": 662,
    "relationship_count": 2125,
    "density": 0.0049,
    "avg_degree": 6.4199,
    "avg_unique_neighbors": 6.3444,
    "global_efficiency": 0.3175,
    "avg_path_length": 2.7737,
    "avg_degree_centrality": 0.0097,
    "max_degree_centrality": 0.5129,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0838,
    "degree_assortativity": -0.172,
    "graph_robustness": 0.8616,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2922,
    "weakly_connected_components": 64,
    "largest_wcc_size": 599,
    "pagerank_top10_percent": 4.59,
    "louvain_communities": 76,
    "louvain_modularity": 0.4185,
    "label_entropy": 1.4993,
    "computational_time": 0.17996435600798577
  },
  "retrieval_queries": []
}
2025-11-30 19:18:35,673 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:35,673 - src.pipeline.kg_builder - INFO - Batch 70 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 5.24s, Clean: 0.00s, Neo4j: 0.17s, ACS: 0.18s
2025-11-30 19:18:35,673 - src.pipeline.kg_builder - INFO - Batch 70 completed in 5.60s
Processing KG batches:  97%|█████████▋| 70/72 [17:14<00:12,  6.06s/it]2025-11-30 19:18:35,673 - src.pipeline.kg_builder - INFO - Processing batch 71/72 (3 items)
2025-11-30 19:18:35,673 - src.pipeline.kg_builder - DEBUG - Batch 71 current_video_time: 17:37-17:42
2025-11-30 19:18:35,679 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 662
- Total Relationships: 697
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Split content into 6 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_0 ~224 words, content: Time: 17:27-17:32 Content: The sequence of frames captures a scientific experiment being conducted in a laboratory setting. The overall process involves preparing a solution and...
2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1 ~237 words, content: is visible inside it. The white tube is now positioned to deliver a substance into this beaker. To the left, a Mettler Toledo analytical balance...
2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_2 ~216 words, content: shown is a step in a larger chemical synthesis or analysis. Time: 17:32-17:37 Content: The video captures a sequence of laboratory activities, likely a chemical...
2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_3 ~232 words, content: the camera as it moves from the close-up of the experiment to a broader view of the lab. - **Final Scene (Frame 4):** The camera...
2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Chunk[4] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_4 ~234 words, content: a chemical reaction is occurring, possibly the formation of a precipitate or a phase change. - **Continuation of the Process:** In the fourth frame, the...
2025-11-30 19:18:35,680 - src.components.pre_llm_injector - DEBUG - Chunk[5] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_5 ~22 words, content:  from clear to cloudy white. The final frame shows this experiment in the context of a larger laboratory setup with other equipment.
2025-11-30 19:18:35,700 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:35,817 - src.components.pre_llm_injector - DEBUG - Found 316 existing chunk embeddings for similarity lookup
2025-11-30 19:18:35,918 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1', '0.797')]
2025-11-30 19:18:35,920 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3 via source_chunk_ids
2025-11-30 19:18:35,920 - src.components.pre_llm_injector - DEBUG - Found 6 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WEARS]->(Blue Jeans / ID: 0_0), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Flask / ID: 15_2)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[MANIPULATES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_HEATED_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Tube / ID: 35_1)-[CONNECTS]->(Flask / ID: 15_2), (Digital Device / ID: 49_1)-[STIRS]->(Flask / ID: 15_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Flask / ID: 15_2), (Laboratory_Glassware / ID: 4_2)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Scientist / ID: 36_0)-[HOLDS]->(Flask / ID: 15_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Flask / ID: 15_2)-[HAS]->(Stopper / ID: 28_1), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Flask / ID: 15_2)-[IS_ON]->(White_Tray / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Flask / ID: 15_2)-[IS_HELD_BY]->(Clamp / ID: 46_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Flask / ID: 15_2)-[IS_CONNECTED_TO]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HANDLES]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Flask / ID: 15_2)-[CONTAINS]->(Foam / ID: 49_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1), (Person / ID: 0_0)-[HOLDS]->(White Object / ID: 68_0)
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1', '0.797'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.627')]
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.788'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_66_1', '0.778')]
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_59_1', '0.627'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_25_2', '0.621')]
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_63_0', '0.628'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_60_2', '0.604')]
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Chunk 4 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_68_2', '0.751'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_35_2', '0.744')]
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Chunk 5 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_2_3', '0.804'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_1_4', '0.777')]
2025-11-30 19:18:35,949 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:35,950 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_0) (~224 words) with timeout=5.0s retries=3
2025-11-30 19:18:37,357 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:37,357 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:37,357 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1) (~237 words) with timeout=5.0s retries=3
2025-11-30 19:18:38,582 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:38,582 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:38,583 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_2) (~216 words) with timeout=5.0s retries=3
2025-11-30 19:18:39,776 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:39,776 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:39,777 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_3) (~232 words) with timeout=5.0s retries=3
2025-11-30 19:18:41,086 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:18:41,086 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:18:41,087 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 4 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_4) (~234 words) with timeout=5.0s retries=3
2025-11-30 19:18:42,357 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 4 (attempt 1)
2025-11-30 19:18:42,357 - src.components.pre_llm_injector - DEBUG - Chunk 4 returned 6 triplets
2025-11-30 19:18:42,357 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 5 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_5) (~22 words) with timeout=5.0s retries=3
2025-11-30 19:18:43,188 - src.components.pre_llm_injector - DEBUG - Extracted 4 triplets from chunk 5 (attempt 1)
2025-11-30 19:18:43,188 - src.components.pre_llm_injector - DEBUG - Chunk 5 returned 4 triplets
2025-11-30 19:18:43,188 - src.components.pre_llm_injector - INFO - Extracted 30 local triplets from 6 chunks
2025-11-30 19:18:43,188 - src.pipeline.kg_builder - INFO - Pre-extraction: 30 triplets in 7.51s
2025-11-30 19:18:43,188 - src.components.global_refiner - INFO - Capping refinement input: 30 → 15 triplets
2025-11-30 19:18:43,188 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_45_1: Subgraph: (Person / ID: 0_0)-[HOLDS]->(Laboratory Table / ID: 0_0), (Flask / ID: 15_2)-[RESTS_ON]->(Laboratory Table / ID: 0_0), (Person / ID: 0_0)-[HANDLES]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Equipment / ID: 0_1), (Person / ID: 0_0)-[SMILES_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[LOOKS_AT]->(Camera / ID: 0_1), (Person / ID: 0_0)-[STANDS_NEAR]->(Glass Cabinet / ID: 0_1), (Person / ID: 0_0)-[USES]->(Balance Scale / ID: 0_1), (Person / ID: 0_0)-[WRITES_ON]->(Document / ID: 0_2), (Person / ID: 0_0)-[WEARS]->(Blue Jeans / ID: 0_0), (Person / ID: 0_0)-[STANDS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[STANDS]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WALKS_IN]->(Laboratory / ID: 0_1), (Person / ID: 0_0)-[WORKS_AT]->(Countertop / ID: 1_0), (Person / ID: 0_0)-[HOLDS]->(Smartphone / ID: 0_0), (Person / ID: 0_0)-[SITS_AT]->(Lab Bench / ID: 2_1), (Flask / ID: 15_2)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Flask / ID: 15_2)-[CONTAINS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[MEASURES]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[STIRS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[ADDS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[POURS]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[PREPARES_TO_MEASURE]->(Liquid / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Rod / ID: 4_1), (Flask / ID: 15_2)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[USES]->(Magnetic_Stirrer / ID: 4_2), (Person / ID: 0_0)-[ADJUSTS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Burette / ID: 4_2), (Person / ID: 0_0)-[USES]->(Balance / ID: 4_2), (Person / ID: 0_0)-[ASSEMBLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HANDLES]->(Laboratory_Glassware / ID: 4_2), (Person / ID: 0_0)-[HOLDS]->(White_Bottle / ID: 4_3), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[MANIPULATES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[USES]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_HEATED_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[WEARS]->(Beige Sweater / ID: 5_2), (Person / ID: 0_0)-[OPENS]->(Glass_Enclosure / ID: 6_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing_By_Difference / ID: 7_2), (Person / ID: 0_0)-[ADDS]->(White_Powder / ID: 8_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Beaker / ID: 8_0), (Person / ID: 0_0)-[TRANSFERS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[ADDS]->(White Powder / ID: 8_1), (Person / ID: 0_0)-[USES]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[HOLDS]->(White_Plastic_Bottle / ID: 10_0), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[USES]->(Digital Balance / ID: 5_1), (Flask / ID: 15_2)-[RESTS_ON]->(Digital Balance / ID: 5_1), (Person / ID: 0_0)-[OPENS]->(Draft Shield / ID: 10_1), (Person / ID: 0_0)-[HOLDS]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[USES]->(Wash_Bottle / ID: 11_1), (Person / ID: 0_0)-[ADDS]->(Solid_Substance / ID: 11_2), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[PLACES]->(Glass_Flask / ID: 13_2), (Scientist / ID: 36_0)-[HOLDS]->(Person / ID: 0_0), (Man / ID: 0_2)-[OBSERVES]->(Person / ID: 0_0), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Person / ID: 0_0)-[HOLDS]->(Glass Vial / ID: 14_0), (Person / ID: 0_0)-[WALKS_PAST]->(Another_Person / ID: 14_2), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Flask / ID: 15_2), (Tube / ID: 35_1)-[CONNECTS]->(Flask / ID: 15_2), (Digital Device / ID: 49_1)-[STIRS]->(Flask / ID: 15_2), (Apparatus / ID: 1_1)-[INCLUDES]->(Flask / ID: 15_2), (Laboratory_Glassware / ID: 4_2)-[IS_CONNECTED_TO]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[IS_IN]->(Flask / ID: 15_2), (Liquid / ID: 4_0)-[FLOWS_INTO]->(Flask / ID: 15_2), (Scientist / ID: 36_0)-[HOLDS]->(Flask / ID: 15_2), (Laboratory / ID: 0_1)-[CONTAINS]->(Flask / ID: 15_2), (Person / ID: 0_0)-[HOLDS]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Person / ID: 0_0)-[MEASURES]->(Mass Of Liquid / ID: 15_2), (Person / ID: 0_0)-[USES]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[HOLDS]->(Glass Pipette / ID: 16_0), (Person / ID: 0_0)-[POURS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[TRANSFERS]->(Clear Liquid / ID: 16_0), (Person / ID: 0_0)-[WEARS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Watch / ID: 7_2), (Person / ID: 0_0)-[HOLDS]->(Squeeze Bottle / ID: 17_3), (Person / ID: 0_0)-[PLACES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[USES]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[HOLDS]->(Glass_Pipette / ID: 20_0), (Person / ID: 0_0)-[PERFORMS]->(Laboratory Procedure / ID: 22_1), (Person / ID: 0_0)-[REACHES_FOR]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[HANDLES]->(Glass Container / ID: 22_1), (Person / ID: 0_0)-[WEARS]->(Gold_Watch / ID: 24_0), (Person / ID: 0_0)-[HOLDS]->(Squeeze_Bottle / ID: 24_0), (Person / ID: 0_0)-[USES]->(Digital_Scale / ID: 25_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Erlenmeyer_Flask / ID: 27_0), (Person / ID: 0_0)-[PICKS_UP]->(Small_Vial / ID: 27_0), (Person / ID: 0_0)-[HOLDS]->(Reagent Vial / ID: 27_1), (Person / ID: 0_0)-[HOLDS]->(Erlenmeyer Flask / ID: 27_1), (Person / ID: 0_0)-[PERFORMS]->(Sealing_Flask / ID: 28_0), (Person / ID: 0_0)-[CHECKS]->(Liquid_Level / ID: 28_0), (Person / ID: 0_0)-[HOLDS]->(Flask_Steadily / ID: 28_0), (Flask / ID: 15_2)-[HAS]->(Stopper / ID: 28_1), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[OBSERVES]->(Experiment / ID: 29_0), (Person / ID: 0_0)-[PERFORMS]->(Titration / ID: 29_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HOLDS]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[HANDLES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[MANIPULATES]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Person / ID: 0_0)-[PERFORMS]->(Liquid_Measurement / ID: 30_0), (Person / ID: 0_0)-[LOOKS_AT]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[CHECKS]->(Meniscus / ID: 30_0), (Person / ID: 0_0)-[HOLDS]->(Round_Bottom_Flask / ID: 30_1), (Person / ID: 0_0)-[WEARS]->(Lab Coat / ID: 30_2), (Person / ID: 0_0)-[WEARS]->(Gloves / ID: 30_2), (Person / ID: 0_0)-[ADJUSTS]->(Device / ID: 30_2), (Person / ID: 0_0)-[HANDLES]->(Small Container / ID: 31_0), (Person / ID: 0_0)-[INTERACTS_WITH]->(Digital Scale / ID: 31_0), (Person / ID: 0_0)-[HOLDS]->(Glass Tube / ID: 33_1), (Person / ID: 0_0)-[HANDLES]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[HOLDS]->(Test_Tube / ID: 34_1), (Person / ID: 0_0)-[ADJUSTS]->(Magnetic_Stirrer_Settings / ID: 35_0), (Person / ID: 0_0)-[HOLDS]->(Tube / ID: 35_1), (Person / ID: 0_0)-[HOLDS]->(Graduated_Cylinder / ID: 37_0), (Person / ID: 0_0)-[OBSERVES]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[HOLDS]->(Graduated Cylinder / ID: 38_1), (Person / ID: 0_0)-[OBSERVES]->(Liquid Level / ID: 38_1), (Person / ID: 0_0)-[ADDS]->(Liquid_To_Graduated_Cylinder / ID: 41_0), (Person / ID: 0_0)-[PERFORMS]->(Precise Liquid Transfer / ID: 41_1), (Person / ID: 0_0)-[MAKES]->(Final Adjustments / ID: 42_1), (Person / ID: 0_0)-[HANDLES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[USES]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Vial / ID: 34_2), (Person / ID: 0_0)-[PERFORMS]->(Weighing Procedure / ID: 43_1), (Person / ID: 0_0)-[HOLDS]->(Vial / ID: 44_1), (Person / ID: 0_0)-[HOLDS]->(Aluminum_Foil / ID: 45_0), (Person / ID: 0_0)-[MANIPULATES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[HOLDS]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[USES]->(White_Tube / ID: 45_0), (Person / ID: 0_0)-[PERFORMS]->(Precise_Task / ID: 45_1), (Person / ID: 0_0)-[USES]->(Hands / ID: 45_1), (Flask / ID: 15_2)-[IS_ON]->(White_Tray / ID: 45_1), (Person / ID: 0_0)-[USES]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(White Cylindrical Device / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Person / ID: 0_0)-[HOLDS]->(Long White Flexible Tube / ID: 45_2), (Flask / ID: 15_2)-[IS_HELD_BY]->(Clamp / ID: 46_2), (Person / ID: 0_0)-[HANDLES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[PLACES]->(Aluminum Foil / ID: 3_2), (Person / ID: 0_0)-[MANIPULATES]->(Apparatus / ID: 1_1), (Flask / ID: 15_2)-[IS_CONNECTED_TO]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[ADJUSTS]->(Apparatus / ID: 1_1), (Person / ID: 0_0)-[HANDLES]->(Container / ID: 4_1), (Person / ID: 0_0)-[CLOSES]->(Container / ID: 4_1), (Person / ID: 0_0)-[HOLDS]->(Container / ID: 4_1), (Flask / ID: 15_2)-[CONTAINS]->(Foam / ID: 49_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Container / ID: 50_0), (Person / ID: 0_0)-[PERFORMS]->(Transfer Of Liquid / ID: 50_2), (Person / ID: 0_0)-[HOLDS]->(Glass_Container / ID: 53_0), (Person / ID: 0_0)-[MANIPULATES]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(Clear_Plastic_Jug / ID: 53_1), (Person / ID: 0_0)-[OBSERVES]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (Person / ID: 0_0)-[HOLDS]->(Long_Translucent_Pipette / ID: 54_0), (Person / ID: 0_0)-[PERFORMS]->(Procedure / ID: 54_0), (Person / ID: 0_0)-[HOLDS]->(Flexible_Translucent_Tube / ID: 54_2), (Person / ID: 0_0)-[ADJUSTS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[USES]->(Transparent_Tube / ID: 55_1), (Person / ID: 0_0)-[HOLDS]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[HANDLES]->(Flexible_Tube / ID: 57_0), (Person / ID: 0_0)-[CONTROLS]->(Flow_Of_Liquid / ID: 57_0), (Person / ID: 0_0)-[WEARS]->(Blue Glove / ID: 38_3), (Person / ID: 0_0)-[WEARS]->(Blue Nitrile Gloves / ID: 53_2), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[MANIPULATES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[HOLDS]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[USES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[GUIDES]->(Translucent_Tube / ID: 50_0), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Gloves / ID: 60_0), (Person / ID: 0_0)-[WEARS]->(Sweater / ID: 62_2), (Person / ID: 0_0)-[WEARS]->(Jeans / ID: 62_2), (Person / ID: 0_0)-[SITS_ON]->(Floor / ID: 62_2), (Person / ID: 0_0)-[PASSES_BY]->(Cabinet / ID: 63_2), (Person / ID: 0_0)-[PERFORMS]->(Scientific_Procedure / ID: 64_0), (Person / ID: 0_0)-[WEARS]->(Blue Gloves / ID: 65_0), (Person / ID: 0_0)-[HANDLES]->(Transparent Container / ID: 65_0), (Person / ID: 0_0)-[MANIPULATES]->(Glass Funnel / ID: 65_0), (Person / ID: 0_0)-[WEARS]->(Black_Watch / ID: 65_1), (Person / ID: 0_0)-[MANIPULATES]->(Transparent_Container / ID: 65_1), (Person / ID: 0_0)-[WEARS]->(Blue_Nitrile_Glove / ID: 66_1), (Person / ID: 0_0)-[HOLDS]->(White Object / ID: 68_0)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Person", "relation": "Wears", "tail": "Blue_Nitrile_Glove", "source_chunks": ["70_0"]}, {"head": "Person", "relation": "Holds", "tail": "Beaker", "source_chunks": ["70_0", "70_3", "70_4"]}, {"head": "Beaker", "relation": "Contains", "tail": "Cloudy_Liquid", "source_chunks": ["70_0", "70_3"]}, {"head": "Beaker", "relation": "Has", "tail": "White_Tube", "source_chunks": ["70_0"]}, {"head": "Beaker", "relation": "Is Placed On", "tail": "Magnetic_Stirrer", "source_chunks": ["70_0"]}, {"head": "Magnetic_Stirrer", "relation": "Contains", "tail": "Magnetic_Stir_Bar", "source_chunks": ["70_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Solution", "source_chunks": ["70_1"]}, {"head": "Magnetic Stirrer", "relation": "Interacts With", "tail": "Beaker", "source_chunks": ["70_1"]}, {"head": "White Tube", "relation": "Delivers", "tail": "Substance", "source_chunks": ["70_1"]}, {"head": "Analytical Balance", "relation": "Measures", "tail": "Chemicals", "source_chunks": ["70_1"]}, {"head": "Pipette", "relation": "Rests On", "tail": "Lab Table", "source_chunks": ["70_1"]}, {"head": "Substance", "relation": "Is Added To", "tail": "Beaker", "source_chunks": ["70_1"]}, {"head": "Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["70_2", "70_4"]}, {"head": "Beaker", "relation": "Contains", "tail": "Magnetic_Stir_Bar", "source_chunks": ["70_2"]}, {"head": "Person", "relation": "Holds", "tail": "Glass_Rod", "source_chunks": ["70_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:43,189 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1934 words, ~2514 tokens)
2025-11-30 19:18:43,189 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:18:43,207 - src.components.global_refiner - ERROR - Instruction-based refinement failed after 0.02s: Error code: 400 - {'error': {'message': "'max_tokens' or 'max_completion_tokens' is too large: 2000. This model's maximum context length is 8192 tokens and your request has 6779 input tokens (2000 > 8192 - 6779). None", 'type': 'BadRequestError', 'param': None, 'code': 400}}
2025-11-30 19:18:43,207 - src.components.global_refiner - INFO - Using fallback deduplication: 15 → 15 triplets
2025-11-30 19:18:43,207 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 0.02s
2025-11-30 19:18:43,207 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:18:43,207 - src.pipeline.kg_builder - INFO - Pushing batch 71/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:18:43,207 - src.components.neo4j_handler - INFO - Adding 15 triplets + 3 chunks to graph (hybrid mode)
2025-11-30 19:18:43,434 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=671, relationships=707
2025-11-30 19:18:43,436 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:18:43,444 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=671, relationships=707
2025-11-30 19:18:43,447 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:18:43,447 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:18:43,448 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:18:43,448 - src.components.neo4j_handler - INFO - Batch injected in 0.24s (triplets: 0.24s, indexes: 0.00s)
2025-11-30 19:18:43,449 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 322, 'with_embedding': 322, 'linked_chunks': 258}
2025-11-30 19:18:43,449 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:18:43,502 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:18:43,589 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 607
2025-11-30 19:18:43,631 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 671, 'relationship_count': 2160, 'density': 0.0048, 'avg_degree': 6.4382, 'avg_unique_neighbors': 6.3607, 'global_efficiency': 0.3209, 'avg_path_length': 2.7668, 'avg_degree_centrality': 0.0096, 'max_degree_centrality': 0.5119, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0792, 'degree_assortativity': -0.1733, 'graph_robustness': 0.8606, 'diameter_estimate': 50, 'clustering_coefficient': 0.2932, 'weakly_connected_components': 65, 'largest_wcc_size': 607, 'pagerank_top10_percent': 4.52, 'louvain_communities': 77, 'louvain_modularity': 0.4128, 'label_entropy': 1.4994, 'computational_time': 0.18194861302617937}
2025-11-30 19:18:43,631 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 70, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501523.6315992, 'total_time': 7.95785975898616, 'aggregation': 3.8460129871964455e-06, 'network_info': 0.005651062936522067, 'llm_extraction': 7.527738376986235, 'data_cleaning': 1.916394103318453e-05, 'neo4j_injection': 0.2407188779907301, 'embedding_time': 0, 'indexing_time': 0.003021804033778608, 'graph_injection_time': 0.23724218108691275, 'acs_metrics': {'node_count': 671, 'relationship_count': 2160, 'density': 0.0048, 'avg_degree': 6.4382, 'avg_unique_neighbors': 6.3607, 'global_efficiency': 0.3209, 'avg_path_length': 2.7668, 'avg_degree_centrality': 0.0096, 'max_degree_centrality': 0.5119, 'avg_betweenness_centrality': 0.0005, 'max_betweenness_centrality': 0.0792, 'degree_assortativity': -0.1733, 'graph_robustness': 0.8606, 'diameter_estimate': 50, 'clustering_coefficient': 0.2932, 'weakly_connected_components': 65, 'largest_wcc_size': 607, 'pagerank_top10_percent': 4.52, 'louvain_communities': 77, 'louvain_modularity': 0.4128, 'label_entropy': 1.4994, 'computational_time': 0.18194861302617937}, 'retrieval_queries': []}
2025-11-30 19:18:43,631 - src.pipeline.kg_builder - DEBUG - Batch 70 metrics: {
  "batch_idx": 70,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501523.6315992,
  "total_time": 7.95785975898616,
  "aggregation": 3.8460129871964455e-06,
  "network_info": 0.005651062936522067,
  "llm_extraction": 7.527738376986235,
  "data_cleaning": 1.916394103318453e-05,
  "neo4j_injection": 0.2407188779907301,
  "embedding_time": 0,
  "indexing_time": 0.003021804033778608,
  "graph_injection_time": 0.23724218108691275,
  "acs_metrics": {
    "node_count": 671,
    "relationship_count": 2160,
    "density": 0.0048,
    "avg_degree": 6.4382,
    "avg_unique_neighbors": 6.3607,
    "global_efficiency": 0.3209,
    "avg_path_length": 2.7668,
    "avg_degree_centrality": 0.0096,
    "max_degree_centrality": 0.5119,
    "avg_betweenness_centrality": 0.0005,
    "max_betweenness_centrality": 0.0792,
    "degree_assortativity": -0.1733,
    "graph_robustness": 0.8606,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2932,
    "weakly_connected_components": 65,
    "largest_wcc_size": 607,
    "pagerank_top10_percent": 4.52,
    "louvain_communities": 77,
    "louvain_modularity": 0.4128,
    "label_entropy": 1.4994,
    "computational_time": 0.18194861302617937
  },
  "retrieval_queries": []
}
2025-11-30 19:18:43,632 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:18:43,633 - src.pipeline.kg_builder - INFO - Batch 71 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 7.53s, Clean: 0.00s, Neo4j: 0.24s, ACS: 0.18s
2025-11-30 19:18:43,633 - src.pipeline.kg_builder - INFO - Batch 71 completed in 7.96s
Processing KG batches:  99%|█████████▊| 71/72 [17:22<00:06,  6.63s/it]2025-11-30 19:18:43,633 - src.pipeline.kg_builder - INFO - Processing batch 72/72 (2 items)
2025-11-30 19:18:43,633 - src.pipeline.kg_builder - DEBUG - Batch 72 current_video_time: 17:47-17:52
2025-11-30 19:18:43,640 - src.components.network_info - DEBUG - Network info: 
Current Graph Statistics:
- Total Nodes: 671
- Total Relationships: 707
- Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e

This information provides context about the current state of the knowledge graph.

2025-11-30 19:18:43,641 - src.components.pre_llm_injector - DEBUG - Split content into 4 chunks (chunk_size=296, overlap=16)
2025-11-30 19:18:43,641 - src.components.pre_llm_injector - DEBUG - Chunk[0] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_0 ~228 words, content: Time: 17:42-17:47 Content: The video sequence captures a scientific experiment taking place in a laboratory setting. The scene is set on a black laboratory bench,...
2025-11-30 19:18:43,641 - src.components.pre_llm_injector - DEBUG - Chunk[1] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_1 ~229 words, content: of the Process (Frame 4):** The camera angle changes slightly, but the focus remains on the beaker with the cloudy liquid. The person's hand continues...
2025-11-30 19:18:43,641 - src.components.pre_llm_injector - DEBUG - Chunk[2] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_2 ~226 words, content: actively mixing a liquid in a glass beaker, which is held in place by a clamp. To the right, a blue stand holds a magnetic...
2025-11-30 19:18:43,641 - src.components.pre_llm_injector - DEBUG - Chunk[3] ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_3 ~157 words, content: seen extending over the stirrer, and the clamp holding the beaker is visible. The blue stand with the magnetic stir bar is in the foreground....
2025-11-30 19:18:43,661 - src.components.pre_llm_injector - DEBUG - Starting chunk embedding tasks...
2025-11-30 19:18:43,774 - src.components.pre_llm_injector - DEBUG - Found 322 existing chunk embeddings for similarity lookup
2025-11-30 19:18:43,844 - src.components.pre_llm_injector - DEBUG - FINAL SIMILARITY LIST : [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_4', '0.831'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1', '0.829')]
2025-11-30 19:18:43,846 - src.components.pre_llm_injector - DEBUG - Found 9 entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1
2025-11-30 19:18:43,846 - src.components.pre_llm_injector - DEBUG - No entities linked to chunk_id=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_4 via source_chunk_ids
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Subgraph for 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1: Subgraph: (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[STIRS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[INTERACTS_WITH]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Substance / ID: 29_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[MANIPULATES]->(Beaker / ID: 4_0), (Flexible_Tube / ID: 57_0)-[LEADS_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Glass_Vial / ID: 34_2)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Lab Workstation / ID: 68_2)-[CONTAINS]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[USES]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic Stirrer / ID: 5_1), (Vacuum Filtration Setup / ID: 59_0)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_HEATED_ON]->(Magnetic Stirrer / ID: 5_1), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Analytical Balance / ID: 13_1)-[HAS]->(Open Shield / ID: 13_1), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Pipette / ID: 4_0)-[RESTS_ON]->(Lab Table / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[ADDS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Pen / ID: 24_2), (White Tube / ID: 53_2)-[DELIVERS]->(Substance / ID: 29_0), (Beaker / ID: 4_0)-[CONTAINS]->(Substance / ID: 29_0), (Container / ID: 4_1)-[CONTAINS]->(Substance / ID: 29_0), (Tube / ID: 35_1)-[DELIVERS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Analytical Balance / ID: 13_1)-[HAS_BRAND]->(Mettler Toledo / ID: 31_1), (Analytical Balance / ID: 13_1)-[DISPLAYS]->(Weight Reading / ID: 32_0), (Analytical Balance / ID: 13_1)-[DISPLAYS]->(0.191 Grams / ID: 32_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Beaker / ID: 4_0)-[HAS]->(White_Tube / ID: 45_0), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Beaker / ID: 4_0)-[IS_PART_OF]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Blue Base / ID: 49_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (White Tube / ID: 53_2)-[IS_POSITIONED_OVER]->(Large Jug / ID: 53_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Beaker / ID: 4_0)-[CONTAINS]->(Dark_Cylindrical_Object / ID: 66_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer_Or_Heating_Plate / ID: 66_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy Liquid / ID: 67_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Precipitate / ID: 67_0), (Beaker / ID: 4_0)-[IS_PART_OF]->(Reflux_Apparatus / ID: 69_1), (Beaker / ID: 4_0)-[CONTAINS]->(Magnetic_Stir_Bar / ID: 70_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solution / ID: 70_1), (Analytical Balance / ID: 13_1)-[MEASURES]->(Chemicals / ID: 70_1)
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Chunk 0 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_26_0', '0.752'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_61_1', '0.747')]
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Chunk 1 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1', '0.829'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_5_1', '0.773')]
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Chunk 2 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_55_2', '0.773'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_1', '0.759')]
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Chunk 3 top similar chunks: [('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_30_4', '0.831'), ('98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_64_3', '0.816')]
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Using serial LLM extraction with similarity (batch_llm_parallelism=false)
2025-11-30 19:18:43,860 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 0 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_0) (~228 words) with timeout=5.0s retries=3
2025-11-30 19:18:45,070 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 0 (attempt 1)
2025-11-30 19:18:45,070 - src.components.pre_llm_injector - DEBUG - Chunk 0 returned 6 triplets
2025-11-30 19:18:45,071 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 1 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_1) (~229 words) with timeout=5.0s retries=3
2025-11-30 19:18:46,275 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 1 (attempt 1)
2025-11-30 19:18:46,275 - src.components.pre_llm_injector - DEBUG - Chunk 1 returned 6 triplets
2025-11-30 19:18:46,275 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 2 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_2) (~226 words) with timeout=5.0s retries=3
2025-11-30 19:18:47,548 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 2 (attempt 1)
2025-11-30 19:18:47,548 - src.components.pre_llm_injector - DEBUG - Chunk 2 returned 6 triplets
2025-11-30 19:18:47,549 - src.components.pre_llm_injector - DEBUG - Calling LLM on chunk 3 (ID=98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_71_3) (~157 words) with timeout=5.0s retries=3
2025-11-30 19:18:48,681 - src.components.pre_llm_injector - DEBUG - Extracted 6 triplets from chunk 3 (attempt 1)
2025-11-30 19:18:48,681 - src.components.pre_llm_injector - DEBUG - Chunk 3 returned 6 triplets
2025-11-30 19:18:48,681 - src.components.pre_llm_injector - INFO - Extracted 23 local triplets from 4 chunks
2025-11-30 19:18:48,681 - src.pipeline.kg_builder - INFO - Pre-extraction: 23 triplets in 5.04s
2025-11-30 19:18:48,681 - src.components.global_refiner - INFO - Capping refinement input: 23 → 15 triplets
2025-11-30 19:18:48,681 - src.components.global_refiner - DEBUG - Instruction-based refinement full input prompt: Human: 
Perform advanced knowledge graph refinement by strictly executing the required operations.

RULE: If CONTEXT SUBGRAPHS is empty or says "No subgraph context available", set "inter_chunk_relations", "merge_instructions", and "prune_instructions" to []. ONLY add to "new_triplets" from NEW CANDIDATES. DO NOT invent IDs, entities, or relations—stick to provided data. For merges/links, match EXACT entity names/IDs from CONTEXT only.

### CONTEXT SUBGRAPHS (Relevant Existing Knowledge):
98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_70_1: Subgraph: (Lab Table / ID: 14_1)-[CONTAINS]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Table / ID: 0_0), (Beaker / ID: 4_0)-[IS_PLACED_IN]->(Precision Balance / ID: 0_0), (Beaker / ID: 4_0)-[IS_INSIDE]->(Glass Cabinet / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Balance Scale / ID: 0_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Document / ID: 0_2), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory / ID: 0_1), (Beaker / ID: 4_0)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Laboratory Bench / ID: 3_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Beaker / ID: 4_0)-[IS_ON]->(Balance_Scale / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Pipette / ID: 4_0), (Person / ID: 0_0)-[USES]->(Pipette / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_BY]->(Pipette / ID: 4_0), (Beaker / ID: 4_0)-[CONTAINS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[STIRS]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[ADDS]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[RECEIVES]->(Liquid / ID: 4_0), (Pipette / ID: 4_0)-[DISPENSES]->(Liquid / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[MIXES]->(Liquid / ID: 4_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[RESTS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer / ID: 4_2), (Beaker / ID: 4_0)-[IS_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Balance / ID: 4_2), (Beaker / ID: 4_0)-[CONTAINS]->(Clear_Liquid / ID: 5_0), (Pipette / ID: 4_0)-[ADDS]->(Clear_Liquid / ID: 5_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Beaker / ID: 4_0), (Workbench / ID: 1_1)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HOLDS]->(Beaker / ID: 4_0), (Magnetic_Stirrer / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Bench / ID: 2_1)-[CONTAINS]->(Beaker / ID: 4_0), (Laboratory Bench / ID: 3_0)-[CONTAINS]->(Beaker / ID: 4_0), (Equipment / ID: 0_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Balance / ID: 4_2)-[CONTAINS]->(Beaker / ID: 4_0), (Lab / ID: 13_1)-[CONTAINS]->(Beaker / ID: 4_0), (Lab Table / ID: 14_1)-[CONTAINS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_IN]->(Beaker / ID: 4_0), (Magnetic Stirrer / ID: 5_1)-[INTERACTS_WITH]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[HANDLES]->(Beaker / ID: 4_0), (Researcher / ID: 32_0)-[PLACES]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[PLACES]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_TRANSFERRED_TO]->(Beaker / ID: 4_0), (Clear Liquid / ID: 16_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Substance / ID: 29_0)-[IS_ADDED_TO]->(Beaker / ID: 4_0), (Glass Tube / ID: 33_1)-[CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[IS_INSIDE]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[LIFTS]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[COMES_FROM]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[CONNECTS]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_CONNECTED_TO]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID_TO]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[MANIPULATES]->(Beaker / ID: 4_0), (Flexible_Tube / ID: 57_0)-[LEADS_TO]->(Beaker / ID: 4_0), (Liquid / ID: 4_0)-[IS_POURED_INTO]->(Beaker / ID: 4_0), (Glass_Container / ID: 53_0)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Glass_Vial / ID: 34_2)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Test_Tube / ID: 34_1)-[IS_SUBMERGED_IN]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Long White Flexible Tube / ID: 45_2)-[IS_INSERTED_INTO]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_INTO]->(Beaker / ID: 4_0), (Powder / ID: 7_1)-[IS_DEPOSITED_IN]->(Beaker / ID: 4_0), (Person / ID: 0_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Beaker / ID: 4_0), (Tube / ID: 35_1)-[EXTENDS_TO]->(Beaker / ID: 4_0), (Lab Workstation / ID: 68_2)-[CONTAINS]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[USES]->(Magnetic Stirrer / ID: 5_1), (Person / ID: 0_0)-[INTERACTS_WITH]->(Magnetic Stirrer / ID: 5_1), (Vacuum Filtration Setup / ID: 59_0)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_HEATED_ON]->(Magnetic Stirrer / ID: 5_1), (Experimental Setup / ID: 58_1)-[INCLUDES]->(Magnetic Stirrer / ID: 5_1), (Container / ID: 4_1)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Glass Flask / ID: 13_3)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Erlenmeyer Flask / ID: 27_1)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Flask / ID: 15_2)-[IS_PLACED_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic Stirrer / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Scale / ID: 7_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Powder / ID: 8_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Powder / ID: 8_1), (Beaker / ID: 4_0)-[IS_OVER]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Analytical_Balance / ID: 9_0), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_ON]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_HELD_OVER]->(Digital Balance / ID: 5_1), (Beaker / ID: 4_0)-[IS_INSIDE]->(Draft_Shield / ID: 11_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solid_Substance / ID: 11_2), (Beaker / ID: 4_0)-[CONTAINS]->(Solid / ID: 12_1), (Beaker / ID: 4_0)-[CONTAINS]->(White_Cloudy_Substance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[PLACED_ON]->(Digital_Analytical_Balance / ID: 12_2), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Precision_Balance / ID: 13_0), (Beaker / ID: 4_0)-[IS_PLACED_ON]->(Analytical Balance / ID: 13_1), (Beaker / ID: 4_0)-[IS_ON]->(Analytical Balance / ID: 13_1), (Person / ID: 0_0)-[USES]->(Analytical Balance / ID: 13_1), (Lab / ID: 13_1)-[CONTAINS]->(Analytical Balance / ID: 13_1), (Analytical Balance / ID: 13_1)-[HAS]->(Open Shield / ID: 13_1), (Magnetic Stirrer / ID: 5_1)-[IS_OPERATING]->(Glass Flask / ID: 13_3), (Beaker / ID: 4_0)-[IS_ADJUSTED_BY]->(Person / ID: 0_0), (Pipette / ID: 4_0)-[RESTS_ON]->(Lab Table / ID: 14_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Paper Document / ID: 14_1), (Pipette / ID: 4_0)-[IS_POSITIONED_ABOVE]->(Flask / ID: 15_2), (Pipette / ID: 4_0)-[ADDS]->(Clear Liquid / ID: 16_0), (Beaker / ID: 4_0)-[CONTAINS]->(Clear Liquid / ID: 16_0), (Magnetic Stirrer / ID: 5_1)-[HAS]->(Glass Container / ID: 22_1), (Lab Table / ID: 14_1)-[CONTAINS]->(Pen / ID: 24_2), (White Tube / ID: 53_2)-[DELIVERS]->(Substance / ID: 29_0), (Beaker / ID: 4_0)-[CONTAINS]->(Substance / ID: 29_0), (Container / ID: 4_1)-[CONTAINS]->(Substance / ID: 29_0), (Tube / ID: 35_1)-[DELIVERS]->(Substance / ID: 29_0), (Person / ID: 0_0)-[ADDS]->(Substance / ID: 29_0), (Pipette / ID: 4_0)-[IS_POSITIONED_OVER]->(Volumetric_Flask / ID: 14_2), (Pipette / ID: 4_0)-[TRANSFERS_LIQUID]->(Volumetric_Flask / ID: 14_2), (Analytical Balance / ID: 13_1)-[HAS_BRAND]->(Mettler Toledo / ID: 31_1), (Analytical Balance / ID: 13_1)-[DISPLAYS]->(Weight Reading / ID: 32_0), (Analytical Balance / ID: 13_1)-[DISPLAYS]->(0.191 Grams / ID: 32_1), (Beaker / ID: 4_0)-[IS_ON]->(Lab_Bench / ID: 39_1), (Beaker / ID: 4_0)-[CONTAINS]->(Dark Opaque Liquid / ID: 42_2), (Beaker / ID: 4_0)-[IS_ON]->(Electronic Balance / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Stirrer / ID: 44_1), (Beaker / ID: 4_0)-[IS_ON]->(Electronic_Balance / ID: 44_2), (Beaker / ID: 4_0)-[HAS]->(White_Tube / ID: 45_0), (Analytical Balance / ID: 13_1)-[CONTAINS]->(Aluminum Foil / ID: 3_2), (Beaker / ID: 4_0)-[IS_PART_OF]->(Apparatus / ID: 1_1), (Beaker / ID: 4_0)-[CONTAINS]->(Foamy_Substance / ID: 47_2), (Magnetic Stirrer / ID: 5_1)-[IS_PART_OF]->(Digital Hot Plate / ID: 48_1), (Magnetic Stirrer / ID: 5_1)-[IS_ON]->(Blue Base / ID: 49_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_Liquid / ID: 53_1), (Person / ID: 0_0)-[HOLDS]->(White Tube / ID: 53_2), (White Tube / ID: 53_2)-[IS_POSITIONED_OVER]->(Large Jug / ID: 53_2), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy_White_Liquid / ID: 54_2), (Pipette / ID: 4_0)-[CONNECTED_TO]->(Vacuum System / ID: 55_0), (Beaker / ID: 4_0)-[CONTAINS]->(Dark_Cylindrical_Object / ID: 66_1), (Beaker / ID: 4_0)-[IS_ON]->(Magnetic_Stirrer_Or_Heating_Plate / ID: 66_1), (Beaker / ID: 4_0)-[CONTAINS]->(Cloudy Liquid / ID: 67_0), (Beaker / ID: 4_0)-[CONTAINS]->(White Precipitate / ID: 67_0), (Beaker / ID: 4_0)-[IS_PART_OF]->(Reflux_Apparatus / ID: 69_1), (Beaker / ID: 4_0)-[CONTAINS]->(Magnetic_Stir_Bar / ID: 70_0), (Beaker / ID: 4_0)-[CONTAINS]->(Solution / ID: 70_1), (Analytical Balance / ID: 13_1)-[MEASURES]->(Chemicals / ID: 70_1)

### NEW CANDIDATES (From Current Extraction Batch):
[{"head": "Beaker", "relation": "Is On", "tail": "Magnetic Stirrer", "source_chunks": ["71_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Cloudy Liquid", "source_chunks": ["71_0", "71_1"]}, {"head": "Person", "relation": "Holds", "tail": "Flexible Tube", "source_chunks": ["71_0"]}, {"head": "Flexible Tube", "relation": "Is Inserted Into", "tail": "Beaker", "source_chunks": ["71_0"]}, {"head": "Beaker", "relation": "Contains", "tail": "Glass Tube", "source_chunks": ["71_0"]}, {"head": "Blue Stand", "relation": "Holds", "tail": "Metal Rod", "source_chunks": ["71_0"]}, {"head": "Person", "relation": "Holds", "tail": "Tube", "source_chunks": ["71_1"]}, {"head": "Beaker", "relation": "On", "tail": "Magnetic Stirrer", "source_chunks": ["71_1"]}, {"head": "Magnetic Stirrer", "relation": "Operates", "tail": "Beaker", "source_chunks": ["71_1"]}, {"head": "Tube", "relation": "Connected To", "tail": "Beaker", "source_chunks": ["71_1"]}, {"head": "Lab Environment", "relation": "Contains", "tail": "High-Voltage Warning Sign", "source_chunks": ["71_1"]}, {"head": "Person", "relation": "Holds", "tail": "Glass Beaker", "source_chunks": ["71_2"]}, {"head": "Glass Beaker", "relation": "Contains", "tail": "Liquid", "source_chunks": ["71_2"]}, {"head": "Magnetic Stirrer", "relation": "Holds", "tail": "Glass Beaker", "source_chunks": ["71_2"]}, {"head": "Glass Beaker", "relation": "Is Held By", "tail": "Clamp", "source_chunks": ["71_2"]}]

### STRICT OUTPUT FORMAT:
Return ONLY a single JSON object with these 4 keys. No extra text.

LIMITS:
- Limit "new_triplets" to at most 10 items: Prioritize actions/interactions; drop dups/redundants (e.g., multiple "Contains | Equation").
- Limit "inter_chunk_relations" to at most 5 items: ONLY links where Tail is an EXACT match to CONTEXT entity name/ID (e.g., new "Lab Bench" → existing "Laboratory Table" ID 0_0). Ignore if no match—do NOT duplicate new_triplets.
- Limit "merge_instructions" to at most 4 items: ONLY semantic duplicates (e.g., "Nitrile Glove" → "Blue Glove" ID 0_3); verify ID exactness from CONTEXT.
- Limit "prune_instructions" to at most 4 items: ONLY clear conflicts/refutations.

1. "new_triplets": List of new facts NOT in CONTEXT. Format: [[Head, Relation, Tail, [SourceIndices]], ...]
2. "inter_chunk_relations": New links NEW → CONTEXT. Format: [[NewHead, Relation, ExistingTail, [SourceIndices]], ...] (ExistingTail: name from CONTEXT, no ID here).
3. "merge_instructions": Merge local dups to existing. Format: [{"local": LocalName, "existing": ExistingName, "existing_id": ExistingID}, ...]
4. "prune_instructions": Remove entities or relationships from CONTEXT. Format: Either {"entity": EntityName} to delete an entity and all its relationships, or {"head": HeadName, "relation": RelationName, "tail": TailName} to delete a specific relationship.

### EXAMPLES:
Merge: "merge_instructions": [{"local": "Nitrile Glove", "existing": "Blue Glove", "existing_id": "0_3"}]
Link: "inter_chunk_relations": [["Document", "Is On", "Laboratory Table", [2_3]]] // Tail matches CONTEXT "Laboratory Table"
Prune: "prune_instructions": [
  {"entity": "Incorrect Entity"},  // Delete entity and all its relationships
  {"head": "Person", "relation": "Wears", "tail": "No Glove"}  // Delete specific relationship
]

JSON OUTPUT:

2025-11-30 19:18:48,681 - src.components.global_refiner - DEBUG - Instruction-based refining 15 triplets (prompt ~1573 words, ~2045 tokens)
2025-11-30 19:18:48,681 - src.components.global_refiner - DEBUG - Starting instruction-based refinement LLM call...
2025-11-30 19:19:00,035 - src.components.global_refiner - DEBUG - LLM call completed in 11.35s
2025-11-30 19:19:00,035 - src.components.global_refiner - DEBUG - Instruction-based refinement raw LLM output: new_triplets=[['Beaker', 'Is On', 'Magnetic Stirrer', ['71_0']], ['Beaker', 'Contains', 'Cloudy Liquid', ['71_0', '71_1']], ['Person', 'Holds', 'Flexible Tube', ['71_0']], ['Flexible Tube', 'Is Inserted Into', 'Beaker', ['71_0']], ['Beaker', 'Contains', 'Glass Tube', ['71_0']], ['Blue Stand', 'Holds', 'Metal Rod', ['71_0']], ['Person', 'Holds', 'Tube', ['71_1']], ['Beaker', 'On', 'Magnetic Stirrer', ['71_1']], ['Magnetic Stirrer', 'Operates', 'Beaker', ['71_1']], ['Tube', 'Connected To', 'Beaker', ['71_1']]] inter_chunk_relations=[['Beaker', 'Is On', 'Magnetic Stirrer', ['71_0']], ['Beaker', 'Contains', 'Cloudy Liquid', ['71_0', '71_1']], ['Person', 'Holds', 'Flexible Tube', ['71_0']], ['Flexible Tube', 'Is Inserted Into', 'Beaker', ['71_0']], ['Beaker', 'Contains', 'Glass Tube', ['71_0']]] merge_instructions=[{'local': 'Glass Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}, {'local': 'Person', 'existing': 'Person', 'existing_id': '0_0'}, {'local': 'Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}, {'local': 'Magnetic Stirrer', 'existing': 'Magnetic Stirrer', 'existing_id': '5_1'}] prune_instructions=[{'head': 'Beaker', 'relation': 'Is On', 'tail': 'Magnetic Stirrer'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Cloudy Liquid'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Flexible Tube'}, {'head': 'Flexible Tube', 'relation': 'Is Inserted Into', 'tail': 'Beaker'}]
2025-11-30 19:19:00,035 - src.components.global_refiner - DEBUG - Instruction result 'new_triplets': count=10, sample=[['Beaker', 'Is On', 'Magnetic Stirrer', ['71_0']], ['Beaker', 'Contains', 'Cloudy Liquid', ['71_0', '71_1']], ['Person', 'Holds', 'Flexible Tube', ['71_0']]]
2025-11-30 19:19:00,035 - src.components.global_refiner - DEBUG - Instruction result 'inter_chunk_relations': count=5, sample=[['Beaker', 'Is On', 'Magnetic Stirrer', ['71_0']], ['Beaker', 'Contains', 'Cloudy Liquid', ['71_0', '71_1']], ['Person', 'Holds', 'Flexible Tube', ['71_0']]]
2025-11-30 19:19:00,035 - src.components.global_refiner - DEBUG - Instruction result 'merge_instructions': count=4, sample=[{'local': 'Glass Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}, {'local': 'Person', 'existing': 'Person', 'existing_id': '0_0'}, {'local': 'Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}]
2025-11-30 19:19:00,035 - src.components.global_refiner - DEBUG - Instruction result 'prune_instructions': count=4, sample=[{'head': 'Beaker', 'relation': 'Is On', 'tail': 'Magnetic Stirrer'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Cloudy Liquid'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Flexible Tube'}]
2025-11-30 19:19:00,035 - src.components.global_refiner - INFO - LLM suggested 4 entity merges: [{'local': 'Glass Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}, {'local': 'Person', 'existing': 'Person', 'existing_id': '0_0'}, {'local': 'Beaker', 'existing': 'Beaker', 'existing_id': '4_0'}, {'local': 'Magnetic Stirrer', 'existing': 'Magnetic Stirrer', 'existing_id': '5_1'}]
2025-11-30 19:19:00,035 - src.components.global_refiner - INFO - LLM suggested 4 triplets to prune: [{'head': 'Beaker', 'relation': 'Is On', 'tail': 'Magnetic Stirrer'}, {'head': 'Beaker', 'relation': 'Contains', 'tail': 'Cloudy Liquid'}, {'head': 'Person', 'relation': 'Holds', 'tail': 'Flexible Tube'}, {'head': 'Flexible Tube', 'relation': 'Is Inserted Into', 'tail': 'Beaker'}]
2025-11-30 19:19:00,035 - src.components.global_refiner - INFO - Instruction-based refinement complete: 15 → 15 triplets (total: 11.35s, LLM: 11.35s)
2025-11-30 19:19:00,035 - src.pipeline.kg_builder - INFO - Global refinement: 15 triplets in 11.35s
2025-11-30 19:19:00,036 - src.pipeline.kg_builder - INFO - Using 15 refined triplets (skipped redundant final LLM enrichment)
2025-11-30 19:19:00,036 - src.pipeline.kg_builder - INFO - Pushing batch 72/72 to graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:19:00,036 - src.components.neo4j_handler - INFO - Adding 10 triplets + 2 chunks to graph (hybrid mode)
2025-11-30 19:19:00,167 - src.components.neo4j_handler - DEBUG - Graph counts before operations: nodes=675, relationships=714
2025-11-30 19:19:00,167 - src.components.neo4j_handler - INFO - Applying 4 merge instructions
2025-11-30 19:19:00,167 - src.components.neo4j_handler - DEBUG - APOC merge successful: Glass Beaker -> Beaker
2025-11-30 19:19:00,167 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Person -> Person
2025-11-30 19:19:00,167 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Beaker -> Beaker
2025-11-30 19:19:00,168 - src.components.neo4j_handler - DEBUG - Skipping self-merge: Magnetic Stirrer -> Magnetic Stirrer
2025-11-30 19:19:00,168 - src.components.neo4j_handler - INFO - Applying 4 prune instructions
2025-11-30 19:19:00,177 - src.components.neo4j_handler - DEBUG - Pruned relationship: Beaker -[Is On]-> Magnetic Stirrer
2025-11-30 19:19:00,181 - src.components.neo4j_handler - DEBUG - Pruned relationship: Beaker -[Contains]-> Cloudy Liquid
2025-11-30 19:19:00,184 - src.components.neo4j_handler - DEBUG - Pruned relationship: Person -[Holds]-> Flexible Tube
2025-11-30 19:19:00,214 - src.components.neo4j_handler - DEBUG - Pruned relationship: Flexible Tube -[Is Inserted Into]-> Beaker
2025-11-30 19:19:00,214 - src.components.neo4j_handler - INFO - Applying 5 inter-chunk relations
2025-11-30 19:19:00,217 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Is On]-> Magnetic Stirrer
2025-11-30 19:19:00,219 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Contains]-> Cloudy Liquid
2025-11-30 19:19:00,221 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Person -[Holds]-> Flexible Tube
2025-11-30 19:19:00,248 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Flexible Tube -[Is Inserted Into]-> Beaker
2025-11-30 19:19:00,250 - src.components.neo4j_handler - DEBUG - Created inter-chunk relation: Beaker -[Contains]-> Glass Tube
2025-11-30 19:19:00,251 - src.components.neo4j_handler - DEBUG - Skipping deletion of isolated Chunk nodes to preserve vector-searchable chunks
2025-11-30 19:19:00,256 - src.components.neo4j_handler - DEBUG - Graph counts after operations: nodes=674, relationships=714
2025-11-30 19:19:00,258 - src.components.neo4j_handler - INFO - Created fulltext index for entity search
2025-11-30 19:19:00,258 - src.components.neo4j_handler - INFO - Created graph indexes
2025-11-30 19:19:00,258 - src.components.neo4j_handler - INFO - Verified/created graph indexes
2025-11-30 19:19:00,258 - src.components.neo4j_handler - INFO - Batch injected in 0.22s (triplets: 0.22s, indexes: 0.00s)
2025-11-30 19:19:00,260 - src.pipeline.kg_builder - INFO - Chunk node counts: {'total_chunks': 326, 'with_embedding': 326, 'linked_chunks': 260}
2025-11-30 19:19:00,260 - src.pipeline.acs_automata - INFO - Computing network science metrics using NetworkX...
2025-11-30 19:19:00,313 - src.pipeline.acs_automata - DEBUG - Computed approximate global_efficiency with 100 samples
2025-11-30 19:19:00,402 - src.pipeline.acs_automata - DEBUG - Computed approximate avg_path_length with 100 samples on component size 608
2025-11-30 19:19:00,498 - src.pipeline.acs_automata - INFO - Network metrics computed: {'node_count': 674, 'relationship_count': 2176, 'density': 0.0048, 'avg_degree': 6.457, 'avg_unique_neighbors': 6.3769, 'global_efficiency': 0.3177, 'avg_path_length': 2.7137, 'avg_degree_centrality': 0.0096, 'max_degree_centrality': 0.5141, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0867, 'degree_assortativity': -0.174, 'graph_robustness': 0.8502, 'diameter_estimate': 50, 'clustering_coefficient': 0.2913, 'weakly_connected_components': 67, 'largest_wcc_size': 608, 'pagerank_top10_percent': 4.5, 'louvain_communities': 78, 'louvain_modularity': 0.4167, 'label_entropy': 1.4996, 'computational_time': 0.23840931407175958}
2025-11-30 19:19:00,498 - src.core.metrics - DEBUG - Added batch metrics: {'batch_idx': 71, 'run_uuid': '98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e', 'timestamp': 1764501540.498895, 'total_time': 16.86574143404141, 'aggregation': 3.430992364883423e-06, 'network_info': 0.007728905067779124, 'llm_extraction': 16.394996391958557, 'data_cleaning': 2.5613000616431236e-05, 'neo4j_injection': 0.22270118608139455, 'embedding_time': 0, 'indexing_time': 0.0026555750519037247, 'graph_injection_time': 0.2197237379150465, 'acs_metrics': {'node_count': 674, 'relationship_count': 2176, 'density': 0.0048, 'avg_degree': 6.457, 'avg_unique_neighbors': 6.3769, 'global_efficiency': 0.3177, 'avg_path_length': 2.7137, 'avg_degree_centrality': 0.0096, 'max_degree_centrality': 0.5141, 'avg_betweenness_centrality': 0.0006, 'max_betweenness_centrality': 0.0867, 'degree_assortativity': -0.174, 'graph_robustness': 0.8502, 'diameter_estimate': 50, 'clustering_coefficient': 0.2913, 'weakly_connected_components': 67, 'largest_wcc_size': 608, 'pagerank_top10_percent': 4.5, 'louvain_communities': 78, 'louvain_modularity': 0.4167, 'label_entropy': 1.4996, 'computational_time': 0.23840931407175958}, 'retrieval_queries': []}
2025-11-30 19:19:00,498 - src.pipeline.kg_builder - DEBUG - Batch 71 metrics: {
  "batch_idx": 71,
  "run_uuid": "98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e",
  "timestamp": 1764501540.498895,
  "total_time": 16.86574143404141,
  "aggregation": 3.430992364883423e-06,
  "network_info": 0.007728905067779124,
  "llm_extraction": 16.394996391958557,
  "data_cleaning": 2.5613000616431236e-05,
  "neo4j_injection": 0.22270118608139455,
  "embedding_time": 0,
  "indexing_time": 0.0026555750519037247,
  "graph_injection_time": 0.2197237379150465,
  "acs_metrics": {
    "node_count": 674,
    "relationship_count": 2176,
    "density": 0.0048,
    "avg_degree": 6.457,
    "avg_unique_neighbors": 6.3769,
    "global_efficiency": 0.3177,
    "avg_path_length": 2.7137,
    "avg_degree_centrality": 0.0096,
    "max_degree_centrality": 0.5141,
    "avg_betweenness_centrality": 0.0006,
    "max_betweenness_centrality": 0.0867,
    "degree_assortativity": -0.174,
    "graph_robustness": 0.8502,
    "diameter_estimate": 50,
    "clustering_coefficient": 0.2913,
    "weakly_connected_components": 67,
    "largest_wcc_size": 608,
    "pagerank_top10_percent": 4.5,
    "louvain_communities": 78,
    "louvain_modularity": 0.4167,
    "label_entropy": 1.4996,
    "computational_time": 0.23840931407175958
  },
  "retrieval_queries": []
}
2025-11-30 19:19:00,500 - src.pipeline.kg_builder - DEBUG - Saved batch network metrics to: metrics/98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e_batch_metrics_kg.json
2025-11-30 19:19:00,500 - src.pipeline.kg_builder - INFO - Batch 72 timings - Agg: 0.00s, NetInfo: 0.01s, LLM: 16.39s, Clean: 0.00s, Neo4j: 0.22s, ACS: 0.24s
2025-11-30 19:19:00,500 - src.pipeline.kg_builder - INFO - Batch 72 completed in 16.87s
Processing KG batches: 100%|██████████| 72/72 [17:39<00:00,  9.70s/it]2025-11-30 19:19:00,502 - src.core.metrics - INFO - Metrics saved to: metrics/kg_98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e.json
2025-11-30 19:19:00,502 - src.pipeline.kg_builder - INFO - Knowledge graph construction completed successfully!
2025-11-30 19:19:00,502 - src.pipeline.kg_builder - INFO - Graph UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
2025-11-30 19:19:00,502 - src.pipeline.kg_builder - INFO - Total batches processed: 72
2025-11-30 19:19:00,502 - src.pipeline.kg_builder - INFO - Hierarchical extraction enabled: chunk_size=296, parallel=2
Processing KG batches: 100%|██████████| 72/72 [17:39<00:00, 14.72s/it]
2025-11-30 19:19:00,502 - __main__ - INFO - Knowledge graph construction completed with UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
Knowledge graph construction completed with UUID: 98b8aa14-61ed-48ad-8fca-2f68a2dc7d0e
